(function(Jn,ra){typeof exports=="object"&&typeof module<"u"?ra(exports,require("mapbox-gl")):typeof define=="function"&&define.amd?define(["exports","mapbox-gl"],ra):(Jn=typeof globalThis<"u"?globalThis:Jn||self,ra(Jn.MapboxExportControl={},Jn.mapboxgl))})(this,function(Jn,ra){"use strict";var aH=Object.defineProperty;var oH=(Jn,ra,au)=>ra in Jn?aH(Jn,ra,{enumerable:!0,configurable:!0,writable:!0,value:au}):Jn[ra]=au;var Xy=(Jn,ra,au)=>oH(Jn,typeof ra!="symbol"?ra+"":ra,au);var au=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Wy={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v4.7.1/LICENSE.txt
 */(function(n,e){(function(i,s){n.exports=s()})(au,function(){var i={},s={};function c(d,A,v){if(s[d]=v,d==="index"){var C="var sharedModule = {}; ("+s.shared+")(sharedModule); ("+s.worker+")(sharedModule);",I={};return s.shared(I),s.index(i,I),typeof window<"u"&&i.setWorkerUrl(window.URL.createObjectURL(new Blob([C],{type:"text/javascript"}))),i}}c("shared",["exports"],function(d){function A(a,r,l,p){return new(l||(l=Promise))(function(y,w){function b(M){try{L(p.next(M))}catch(O){w(O)}}function S(M){try{L(p.throw(M))}catch(O){w(O)}}function L(M){var O;M.done?y(M.value):(O=M.value,O instanceof l?O:new l(function(z){z(O)})).then(b,S)}L((p=p.apply(a,r||[])).next())})}function v(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}typeof SuppressedError=="function"&&SuppressedError;var C=I;function I(a,r){this.x=a,this.y=r}I.prototype={clone:function(){return new I(this.x,this.y)},add:function(a){return this.clone()._add(a)},sub:function(a){return this.clone()._sub(a)},multByPoint:function(a){return this.clone()._multByPoint(a)},divByPoint:function(a){return this.clone()._divByPoint(a)},mult:function(a){return this.clone()._mult(a)},div:function(a){return this.clone()._div(a)},rotate:function(a){return this.clone()._rotate(a)},rotateAround:function(a,r){return this.clone()._rotateAround(a,r)},matMult:function(a){return this.clone()._matMult(a)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(a){return this.x===a.x&&this.y===a.y},dist:function(a){return Math.sqrt(this.distSqr(a))},distSqr:function(a){var r=a.x-this.x,l=a.y-this.y;return r*r+l*l},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(a){return Math.atan2(this.y-a.y,this.x-a.x)},angleWith:function(a){return this.angleWithSep(a.x,a.y)},angleWithSep:function(a,r){return Math.atan2(this.x*r-this.y*a,this.x*a+this.y*r)},_matMult:function(a){var r=a[2]*this.x+a[3]*this.y;return this.x=a[0]*this.x+a[1]*this.y,this.y=r,this},_add:function(a){return this.x+=a.x,this.y+=a.y,this},_sub:function(a){return this.x-=a.x,this.y-=a.y,this},_mult:function(a){return this.x*=a,this.y*=a,this},_div:function(a){return this.x/=a,this.y/=a,this},_multByPoint:function(a){return this.x*=a.x,this.y*=a.y,this},_divByPoint:function(a){return this.x/=a.x,this.y/=a.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var a=this.y;return this.y=this.x,this.x=-a,this},_rotate:function(a){var r=Math.cos(a),l=Math.sin(a),p=l*this.x+r*this.y;return this.x=r*this.x-l*this.y,this.y=p,this},_rotateAround:function(a,r){var l=Math.cos(a),p=Math.sin(a),y=r.y+p*(this.x-r.x)+l*(this.y-r.y);return this.x=r.x+l*(this.x-r.x)-p*(this.y-r.y),this.y=y,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},I.convert=function(a){return a instanceof I?a:Array.isArray(a)?new I(a[0],a[1]):a};var T=v(C),P=U;function U(a,r,l,p){this.cx=3*a,this.bx=3*(l-a)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*r,this.by=3*(p-r)-this.cy,this.ay=1-this.cy-this.by,this.p1x=a,this.p1y=r,this.p2x=l,this.p2y=p}U.prototype={sampleCurveX:function(a){return((this.ax*a+this.bx)*a+this.cx)*a},sampleCurveY:function(a){return((this.ay*a+this.by)*a+this.cy)*a},sampleCurveDerivativeX:function(a){return(3*this.ax*a+2*this.bx)*a+this.cx},solveCurveX:function(a,r){if(r===void 0&&(r=1e-6),a<0)return 0;if(a>1)return 1;for(var l=a,p=0;p<8;p++){var y=this.sampleCurveX(l)-a;if(Math.abs(y)<r)return l;var w=this.sampleCurveDerivativeX(l);if(Math.abs(w)<1e-6)break;l-=y/w}var b=0,S=1;for(l=a,p=0;p<20&&(y=this.sampleCurveX(l),!(Math.abs(y-a)<r));p++)a>y?b=l:S=l,l=.5*(S-b)+b;return l},solve:function(a,r){return this.sampleCurveY(this.solveCurveX(a,r))}};var V=v(P);let R,Z;function K(){return R==null&&(R=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),R}function tt(){if(Z==null&&(Z=!1,K())){const r=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(r){for(let p=0;p<5*5;p++){const y=4*p;r.fillStyle=`rgb(${y},${y+1},${y+2})`,r.fillRect(p%5,Math.floor(p/5),1,1)}const l=r.getImageData(0,0,5,5).data;for(let p=0;p<5*5*4;p++)if(p%4!=3&&l[p]!==p){Z=!0;break}}}return Z||!1}function ht(a,r,l,p){const y=new V(a,r,l,p);return w=>y.solve(w)}const Bt=ht(.25,.1,.25,1);function Lt(a,r,l){return Math.min(l,Math.max(r,a))}function Ut(a,r,l){const p=l-r,y=((a-r)%p+p)%p+r;return y===r?l:y}function xt(a,...r){for(const l of r)for(const p in l)a[p]=l[p];return a}let pt=1;function kt(a,r,l){const p={};for(const y in a)p[y]=r.call(this,a[y],y,a);return p}function Xt(a,r,l){const p={};for(const y in a)r.call(this,a[y],y,a)&&(p[y]=a[y]);return p}function st(a){return Array.isArray(a)?a.map(st):typeof a=="object"&&a?kt(a,st):a}const ut={};function mt(a){ut[a]||(typeof console<"u"&&console.warn(a),ut[a]=!0)}function vt(a,r,l){return(l.y-a.y)*(r.x-a.x)>(r.y-a.y)*(l.x-a.x)}function $t(a){return typeof WorkerGlobalScope<"u"&&a!==void 0&&a instanceof WorkerGlobalScope}let Vt=null;function jt(a){return typeof ImageBitmap<"u"&&a instanceof ImageBitmap}const zt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Wt(a,r,l,p,y){return A(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const w=new VideoFrame(a,{timestamp:0});try{const b=w==null?void 0:w.format;if(!b||!b.startsWith("BGR")&&!b.startsWith("RGB"))throw new Error(`Unrecognized format ${b}`);const S=b.startsWith("BGR"),L=new Uint8ClampedArray(p*y*4);if(yield w.copyTo(L,function(M,O,z,q,Y){const it=4*Math.max(-O,0),lt=(Math.max(0,z)-z)*q*4+it,wt=4*q,It=Math.max(0,O),Kt=Math.max(0,z);return{rect:{x:It,y:Kt,width:Math.min(M.width,O+q)-It,height:Math.min(M.height,z+Y)-Kt},layout:[{offset:lt,stride:wt}]}}(a,r,l,p,y)),S)for(let M=0;M<L.length;M+=4){const O=L[M];L[M]=L[M+2],L[M+2]=O}return L}finally{w.close()}})}let Yt,me;const et="AbortError";function dt(){return new Error(et)}const _t={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function Ct(a){return _t.REGISTERED_PROTOCOLS[a.substring(0,a.indexOf("://"))]}const Ot="global-dispatcher";class Rt extends Error{constructor(r,l,p,y){super(`AJAXError: ${l} (${r}): ${p}`),this.status=r,this.statusText=l,this.url=p,this.body=y}}const Zt=()=>$t(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,Jt=function(a,r){if(/:\/\//.test(a.url)&&!/^https?:|^file:/.test(a.url)){const p=Ct(a.url);if(p)return p(a,r);if($t(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:a,targetMapId:Ot},r)}if(!(/^file:/.test(l=a.url)||/^file:/.test(Zt())&&!/^\w+:/.test(l))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(p,y){return A(this,void 0,void 0,function*(){const w=new Request(p.url,{method:p.method||"GET",body:p.body,credentials:p.credentials,headers:p.headers,cache:p.cache,referrer:Zt(),signal:y.signal});p.type!=="json"||w.headers.has("Accept")||w.headers.set("Accept","application/json");const b=yield fetch(w);if(!b.ok){const M=yield b.blob();throw new Rt(b.status,b.statusText,p.url,M)}let S;S=p.type==="arrayBuffer"||p.type==="image"?b.arrayBuffer():p.type==="json"?b.json():b.text();const L=yield S;if(y.signal.aborted)throw dt();return{data:L,cacheControl:b.headers.get("Cache-Control"),expires:b.headers.get("Expires")}})}(a,r);if($t(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:a,mustQueue:!0,targetMapId:Ot},r)}var l;return function(p,y){return new Promise((w,b)=>{var S;const L=new XMLHttpRequest;L.open(p.method||"GET",p.url,!0),p.type!=="arrayBuffer"&&p.type!=="image"||(L.responseType="arraybuffer");for(const M in p.headers)L.setRequestHeader(M,p.headers[M]);p.type==="json"&&(L.responseType="text",!((S=p.headers)===null||S===void 0)&&S.Accept||L.setRequestHeader("Accept","application/json")),L.withCredentials=p.credentials==="include",L.onerror=()=>{b(new Error(L.statusText))},L.onload=()=>{if(!y.signal.aborted)if((L.status>=200&&L.status<300||L.status===0)&&L.response!==null){let M=L.response;if(p.type==="json")try{M=JSON.parse(L.response)}catch(O){return void b(O)}w({data:M,cacheControl:L.getResponseHeader("Cache-Control"),expires:L.getResponseHeader("Expires")})}else{const M=new Blob([L.response],{type:L.getResponseHeader("Content-Type")});b(new Rt(L.status,L.statusText,p.url,M))}},y.signal.addEventListener("abort",()=>{L.abort(),b(dt())}),L.send(p.body)})}(a,r)};function xe(a){if(!a||a.indexOf("://")<=0||a.indexOf("data:image/")===0||a.indexOf("blob:")===0)return!0;const r=new URL(a),l=window.location;return r.protocol===l.protocol&&r.host===l.host}function we(a,r,l){l[a]&&l[a].indexOf(r)!==-1||(l[a]=l[a]||[],l[a].push(r))}function Te(a,r,l){if(l&&l[a]){const p=l[a].indexOf(r);p!==-1&&l[a].splice(p,1)}}class Ee{constructor(r,l={}){xt(this,l),this.type=r}}class Ve extends Ee{constructor(r,l={}){super("error",xt({error:r},l))}}class ie{on(r,l){return this._listeners=this._listeners||{},we(r,l,this._listeners),this}off(r,l){return Te(r,l,this._listeners),Te(r,l,this._oneTimeListeners),this}once(r,l){return l?(this._oneTimeListeners=this._oneTimeListeners||{},we(r,l,this._oneTimeListeners),this):new Promise(p=>this.once(r,p))}fire(r,l){typeof r=="string"&&(r=new Ee(r,l||{}));const p=r.type;if(this.listens(p)){r.target=this;const y=this._listeners&&this._listeners[p]?this._listeners[p].slice():[];for(const S of y)S.call(this,r);const w=this._oneTimeListeners&&this._oneTimeListeners[p]?this._oneTimeListeners[p].slice():[];for(const S of w)Te(p,S,this._oneTimeListeners),S.call(this,r);const b=this._eventedParent;b&&(xt(r,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),b.fire(r))}else r instanceof Ve&&console.error(r.error);return this}listens(r){return this._listeners&&this._listeners[r]&&this._listeners[r].length>0||this._oneTimeListeners&&this._oneTimeListeners[r]&&this._oneTimeListeners[r].length>0||this._eventedParent&&this._eventedParent.listens(r)}setEventedParent(r,l){return this._eventedParent=r,this._eventedParentData=l,this}}var rt={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"enum",default:"mercator",values:{mercator:{},globe:{}}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const dr=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function je(a,r){const l={};for(const p in a)p!=="ref"&&(l[p]=a[p]);return dr.forEach(p=>{p in r&&(l[p]=r[p])}),l}function se(a,r){if(Array.isArray(a)){if(!Array.isArray(r)||a.length!==r.length)return!1;for(let l=0;l<a.length;l++)if(!se(a[l],r[l]))return!1;return!0}if(typeof a=="object"&&a!==null&&r!==null){if(typeof r!="object"||Object.keys(a).length!==Object.keys(r).length)return!1;for(const l in a)if(!se(a[l],r[l]))return!1;return!0}return a===r}function fe(a,r){a.push(r)}function Ue(a,r,l){fe(l,{command:"addSource",args:[a,r[a]]})}function Se(a,r,l){fe(r,{command:"removeSource",args:[a]}),l[a]=!0}function Re(a,r,l,p){Se(a,l,p),Ue(a,r,l)}function We(a,r,l){let p;for(p in a[l])if(Object.prototype.hasOwnProperty.call(a[l],p)&&p!=="data"&&!se(a[l][p],r[l][p]))return!1;for(p in r[l])if(Object.prototype.hasOwnProperty.call(r[l],p)&&p!=="data"&&!se(a[l][p],r[l][p]))return!1;return!0}function ar(a,r,l,p,y,w){a=a||{},r=r||{};for(const b in a)Object.prototype.hasOwnProperty.call(a,b)&&(se(a[b],r[b])||l.push({command:w,args:[p,b,r[b],y]}));for(const b in r)Object.prototype.hasOwnProperty.call(r,b)&&!Object.prototype.hasOwnProperty.call(a,b)&&(se(a[b],r[b])||l.push({command:w,args:[p,b,r[b],y]}))}function wr(a){return a.id}function Fr(a,r){return a[r.id]=r,a}class oe{constructor(r,l,p,y){this.message=(r?`${r}: `:"")+p,y&&(this.identifier=y),l!=null&&l.__line__&&(this.line=l.__line__)}}function er(a,...r){for(const l of r)for(const p in l)a[p]=l[p];return a}class or extends Error{constructor(r,l){super(l),this.message=l,this.key=r}}class Le{constructor(r,l=[]){this.parent=r,this.bindings={};for(const[p,y]of l)this.bindings[p]=y}concat(r){return new Le(this,r)}get(r){if(this.bindings[r])return this.bindings[r];if(this.parent)return this.parent.get(r);throw new Error(`${r} not found in scope.`)}has(r){return!!this.bindings[r]||!!this.parent&&this.parent.has(r)}}const Zr={kind:"null"},ce={kind:"number"},ir={kind:"string"},Pe={kind:"boolean"},_r={kind:"color"},ni={kind:"object"},Qe={kind:"value"},mi={kind:"collator"},Kr={kind:"formatted"},si={kind:"padding"},Xr={kind:"resolvedImage"},yt={kind:"variableAnchorOffsetCollection"};function $(a,r){return{kind:"array",itemType:a,N:r}}function X(a){if(a.kind==="array"){const r=X(a.itemType);return typeof a.N=="number"?`array<${r}, ${a.N}>`:a.itemType.kind==="value"?"array":`array<${r}>`}return a.kind}const at=[Zr,ce,ir,Pe,_r,Kr,ni,$(Qe),si,Xr,yt];function ft(a,r){if(r.kind==="error")return null;if(a.kind==="array"){if(r.kind==="array"&&(r.N===0&&r.itemType.kind==="value"||!ft(a.itemType,r.itemType))&&(typeof a.N!="number"||a.N===r.N))return null}else{if(a.kind===r.kind)return null;if(a.kind==="value"){for(const l of at)if(!ft(l,r))return null}}return`Expected ${X(a)} but found ${X(r)} instead.`}function Qt(a,r){return r.some(l=>l.kind===a.kind)}function Nt(a,r){return r.some(l=>l==="null"?a===null:l==="array"?Array.isArray(a):l==="object"?a&&!Array.isArray(a)&&typeof a=="object":l===typeof a)}function Pt(a,r){return a.kind==="array"&&r.kind==="array"?a.itemType.kind===r.itemType.kind&&typeof a.N=="number":a.kind===r.kind}const Et=.96422,te=.82521,ae=4/29,Gt=6/29,ue=3*Gt*Gt,Me=Gt*Gt*Gt,Xe=Math.PI/180,Sr=180/Math.PI;function nr(a){return(a%=360)<0&&(a+=360),a}function br([a,r,l,p]){let y,w;const b=Yr((.2225045*(a=Ar(a))+.7168786*(r=Ar(r))+.0606169*(l=Ar(l)))/1);a===r&&r===l?y=w=b:(y=Yr((.4360747*a+.3850649*r+.1430804*l)/Et),w=Yr((.0139322*a+.0971045*r+.7141733*l)/te));const S=116*b-16;return[S<0?0:S,500*(y-b),200*(b-w),p]}function Ar(a){return a<=.04045?a/12.92:Math.pow((a+.055)/1.055,2.4)}function Yr(a){return a>Me?Math.pow(a,1/3):a/ue+ae}function $r([a,r,l,p]){let y=(a+16)/116,w=isNaN(r)?y:y+r/500,b=isNaN(l)?y:y-l/200;return y=1*zr(y),w=Et*zr(w),b=te*zr(b),[gr(3.1338561*w-1.6168667*y-.4906146*b),gr(-.9787684*w+1.9161415*y+.033454*b),gr(.0719453*w-.2289914*y+1.4052427*b),p]}function gr(a){return(a=a<=.00304?12.92*a:1.055*Math.pow(a,1/2.4)-.055)<0?0:a>1?1:a}function zr(a){return a>Gt?a*a*a:ue*(a-ae)}function Jr(a){return parseInt(a.padEnd(2,a),16)/255}function Ft(a,r){return Ie(r?a/100:a,0,1)}function Ie(a,r,l){return Math.min(Math.max(r,a),l)}function ve(a){return!a.some(Number.isNaN)}const Pr={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class mr{constructor(r,l,p,y=1,w=!0){this.r=r,this.g=l,this.b=p,this.a=y,w||(this.r*=y,this.g*=y,this.b*=y,y||this.overwriteGetter("rgb",[r,l,p,y]))}static parse(r){if(r instanceof mr)return r;if(typeof r!="string")return;const l=function(p){if((p=p.toLowerCase().trim())==="transparent")return[0,0,0,0];const y=Pr[p];if(y){const[b,S,L]=y;return[b/255,S/255,L/255,1]}if(p.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(p)){const b=p.length<6?1:2;let S=1;return[Jr(p.slice(S,S+=b)),Jr(p.slice(S,S+=b)),Jr(p.slice(S,S+=b)),Jr(p.slice(S,S+b)||"ff")]}if(p.startsWith("rgb")){const b=p.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(b){const[S,L,M,O,z,q,Y,it,lt,wt,It,Kt]=b,Mt=[O||" ",Y||" ",wt].join("");if(Mt==="  "||Mt==="  /"||Mt===",,"||Mt===",,,"){const Ht=[M,q,lt].join(""),re=Ht==="%%%"?100:Ht===""?255:0;if(re){const _e=[Ie(+L/re,0,1),Ie(+z/re,0,1),Ie(+it/re,0,1),It?Ft(+It,Kt):1];if(ve(_e))return _e}}return}}const w=p.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(w){const[b,S,L,M,O,z,q,Y,it]=w,lt=[L||" ",O||" ",q].join("");if(lt==="  "||lt==="  /"||lt===",,"||lt===",,,"){const wt=[+S,Ie(+M,0,100),Ie(+z,0,100),Y?Ft(+Y,it):1];if(ve(wt))return function([It,Kt,Mt,Ht]){function re(_e){const Ne=(_e+It/30)%12,fr=Kt*Math.min(Mt,1-Mt);return Mt-fr*Math.max(-1,Math.min(Ne-3,9-Ne,1))}return It=nr(It),Kt/=100,Mt/=100,[re(0),re(8),re(4),Ht]}(wt)}}}(r);return l?new mr(...l,!1):void 0}get rgb(){const{r,g:l,b:p,a:y}=this,w=y||1/0;return this.overwriteGetter("rgb",[r/w,l/w,p/w,y])}get hcl(){return this.overwriteGetter("hcl",function(r){const[l,p,y,w]=br(r),b=Math.sqrt(p*p+y*y);return[Math.round(1e4*b)?nr(Math.atan2(y,p)*Sr):NaN,b,l,w]}(this.rgb))}get lab(){return this.overwriteGetter("lab",br(this.rgb))}overwriteGetter(r,l){return Object.defineProperty(this,r,{value:l}),l}toString(){const[r,l,p,y]=this.rgb;return`rgba(${[r,l,p].map(w=>Math.round(255*w)).join(",")},${y})`}}mr.black=new mr(0,0,0,1),mr.white=new mr(1,1,1,1),mr.transparent=new mr(0,0,0,0),mr.red=new mr(1,0,0,1);class Xi{constructor(r,l,p){this.sensitivity=r?l?"variant":"case":l?"accent":"base",this.locale=p,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(r,l){return this.collator.compare(r,l)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class li{constructor(r,l,p,y,w){this.text=r,this.image=l,this.scale=p,this.fontStack=y,this.textColor=w}}class yi{constructor(r){this.sections=r}static fromString(r){return new yi([new li(r,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(r=>r.text.length!==0||r.image&&r.image.name.length!==0)}static factory(r){return r instanceof yi?r:yi.fromString(r)}toString(){return this.sections.length===0?"":this.sections.map(r=>r.text).join("")}}class fi{constructor(r){this.values=r.slice()}static parse(r){if(r instanceof fi)return r;if(typeof r=="number")return new fi([r,r,r,r]);if(Array.isArray(r)&&!(r.length<1||r.length>4)){for(const l of r)if(typeof l!="number")return;switch(r.length){case 1:r=[r[0],r[0],r[0],r[0]];break;case 2:r=[r[0],r[1],r[0],r[1]];break;case 3:r=[r[0],r[1],r[2],r[1]]}return new fi(r)}}toString(){return JSON.stringify(this.values)}}const ji=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class pn{constructor(r){this.values=r.slice()}static parse(r){if(r instanceof pn)return r;if(Array.isArray(r)&&!(r.length<1)&&r.length%2==0){for(let l=0;l<r.length;l+=2){const p=r[l],y=r[l+1];if(typeof p!="string"||!ji.has(p)||!Array.isArray(y)||y.length!==2||typeof y[0]!="number"||typeof y[1]!="number")return}return new pn(r)}}toString(){return JSON.stringify(this.values)}}class Cn{constructor(r){this.name=r.name,this.available=r.available}toString(){return this.name}static fromString(r){return r?new Cn({name:r,available:!1}):null}}function Xa(a,r,l,p){return typeof a=="number"&&a>=0&&a<=255&&typeof r=="number"&&r>=0&&r<=255&&typeof l=="number"&&l>=0&&l<=255?p===void 0||typeof p=="number"&&p>=0&&p<=1?null:`Invalid rgba value [${[a,r,l,p].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof p=="number"?[a,r,l,p]:[a,r,l]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function bs(a){if(a===null||typeof a=="string"||typeof a=="boolean"||typeof a=="number"||a instanceof mr||a instanceof Xi||a instanceof yi||a instanceof fi||a instanceof pn||a instanceof Cn)return!0;if(Array.isArray(a)){for(const r of a)if(!bs(r))return!1;return!0}if(typeof a=="object"){for(const r in a)if(!bs(a[r]))return!1;return!0}return!1}function Qi(a){if(a===null)return Zr;if(typeof a=="string")return ir;if(typeof a=="boolean")return Pe;if(typeof a=="number")return ce;if(a instanceof mr)return _r;if(a instanceof Xi)return mi;if(a instanceof yi)return Kr;if(a instanceof fi)return si;if(a instanceof pn)return yt;if(a instanceof Cn)return Xr;if(Array.isArray(a)){const r=a.length;let l;for(const p of a){const y=Qi(p);if(l){if(l===y)continue;l=Qe;break}l=y}return $(l||Qe,r)}return ni}function vi(a){const r=typeof a;return a===null?"":r==="string"||r==="number"||r==="boolean"?String(a):a instanceof mr||a instanceof yi||a instanceof fi||a instanceof pn||a instanceof Cn?a.toString():JSON.stringify(a)}class $n{constructor(r,l){this.type=r,this.value=l}static parse(r,l){if(r.length!==2)return l.error(`'literal' expression requires exactly one argument, but found ${r.length-1} instead.`);if(!bs(r[1]))return l.error("invalid value");const p=r[1];let y=Qi(p);const w=l.expectedType;return y.kind!=="array"||y.N!==0||!w||w.kind!=="array"||typeof w.N=="number"&&w.N!==0||(y=w),new $n(y,p)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class Fi{constructor(r){this.name="ExpressionEvaluationError",this.message=r}toJSON(){return this.message}}const Po={string:ir,number:ce,boolean:Pe,object:ni};class Dn{constructor(r,l){this.type=r,this.args=l}static parse(r,l){if(r.length<2)return l.error("Expected at least one argument.");let p,y=1;const w=r[0];if(w==="array"){let S,L;if(r.length>2){const M=r[1];if(typeof M!="string"||!(M in Po)||M==="object")return l.error('The item type argument of "array" must be one of string, number, boolean',1);S=Po[M],y++}else S=Qe;if(r.length>3){if(r[2]!==null&&(typeof r[2]!="number"||r[2]<0||r[2]!==Math.floor(r[2])))return l.error('The length argument to "array" must be a positive integer literal',2);L=r[2],y++}p=$(S,L)}else{if(!Po[w])throw new Error(`Types doesn't contain name = ${w}`);p=Po[w]}const b=[];for(;y<r.length;y++){const S=l.parse(r[y],y,Qe);if(!S)return null;b.push(S)}return new Dn(p,b)}evaluate(r){for(let l=0;l<this.args.length;l++){const p=this.args[l].evaluate(r);if(!ft(this.type,Qi(p)))return p;if(l===this.args.length-1)throw new Fi(`Expected value to be of type ${X(this.type)}, but found ${X(Qi(p))} instead.`)}throw new Error}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}const al={"to-boolean":Pe,"to-color":_r,"to-number":ce,"to-string":ir};class Oi{constructor(r,l){this.type=r,this.args=l}static parse(r,l){if(r.length<2)return l.error("Expected at least one argument.");const p=r[0];if(!al[p])throw new Error(`Can't parse ${p} as it is not part of the known types`);if((p==="to-boolean"||p==="to-string")&&r.length!==2)return l.error("Expected one argument.");const y=al[p],w=[];for(let b=1;b<r.length;b++){const S=l.parse(r[b],b,Qe);if(!S)return null;w.push(S)}return new Oi(y,w)}evaluate(r){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(r);case"color":{let l,p;for(const y of this.args){if(l=y.evaluate(r),p=null,l instanceof mr)return l;if(typeof l=="string"){const w=r.parseColor(l);if(w)return w}else if(Array.isArray(l)&&(p=l.length<3||l.length>4?`Invalid rbga value ${JSON.stringify(l)}: expected an array containing either three or four numeric values.`:Xa(l[0],l[1],l[2],l[3]),!p))return new mr(l[0]/255,l[1]/255,l[2]/255,l[3])}throw new Fi(p||`Could not parse color from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"padding":{let l;for(const p of this.args){l=p.evaluate(r);const y=fi.parse(l);if(y)return y}throw new Fi(`Could not parse padding from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"variableAnchorOffsetCollection":{let l;for(const p of this.args){l=p.evaluate(r);const y=pn.parse(l);if(y)return y}throw new Fi(`Could not parse variableAnchorOffsetCollection from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"number":{let l=null;for(const p of this.args){if(l=p.evaluate(r),l===null)return 0;const y=Number(l);if(!isNaN(y))return y}throw new Fi(`Could not convert ${JSON.stringify(l)} to number.`)}case"formatted":return yi.fromString(vi(this.args[0].evaluate(r)));case"resolvedImage":return Cn.fromString(vi(this.args[0].evaluate(r)));default:return vi(this.args[0].evaluate(r))}}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}const AA=["Unknown","Point","LineString","Polygon"];class fn{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?AA[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(r){let l=this._parseColorCache[r];return l||(l=this._parseColorCache[r]=mr.parse(r)),l}}class Rs{constructor(r,l,p=[],y,w=new Le,b=[]){this.registry=r,this.path=p,this.key=p.map(S=>`[${S}]`).join(""),this.scope=w,this.errors=b,this.expectedType=y,this._isConstant=l}parse(r,l,p,y,w={}){return l?this.concat(l,p,y)._parse(r,w):this._parse(r,w)}_parse(r,l){function p(y,w,b){return b==="assert"?new Dn(w,[y]):b==="coerce"?new Oi(w,[y]):y}if(r!==null&&typeof r!="string"&&typeof r!="boolean"&&typeof r!="number"||(r=["literal",r]),Array.isArray(r)){if(r.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const y=r[0];if(typeof y!="string")return this.error(`Expression name must be a string, but found ${typeof y} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const w=this.registry[y];if(w){let b=w.parse(r,this);if(!b)return null;if(this.expectedType){const S=this.expectedType,L=b.type;if(S.kind!=="string"&&S.kind!=="number"&&S.kind!=="boolean"&&S.kind!=="object"&&S.kind!=="array"||L.kind!=="value")if(S.kind!=="color"&&S.kind!=="formatted"&&S.kind!=="resolvedImage"||L.kind!=="value"&&L.kind!=="string")if(S.kind!=="padding"||L.kind!=="value"&&L.kind!=="number"&&L.kind!=="array")if(S.kind!=="variableAnchorOffsetCollection"||L.kind!=="value"&&L.kind!=="array"){if(this.checkSubtype(S,L))return null}else b=p(b,S,l.typeAnnotation||"coerce");else b=p(b,S,l.typeAnnotation||"coerce");else b=p(b,S,l.typeAnnotation||"coerce");else b=p(b,S,l.typeAnnotation||"assert")}if(!(b instanceof $n)&&b.type.kind!=="resolvedImage"&&this._isConstant(b)){const S=new fn;try{b=new $n(b.type,b.evaluate(S))}catch(L){return this.error(L.message),null}}return b}return this.error(`Unknown expression "${y}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(r===void 0?"'undefined' value invalid. Use null instead.":typeof r=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof r} instead.`)}concat(r,l,p){const y=typeof r=="number"?this.path.concat(r):this.path,w=p?this.scope.concat(p):this.scope;return new Rs(this.registry,this._isConstant,y,l||null,w,this.errors)}error(r,...l){const p=`${this.key}${l.map(y=>`[${y}]`).join("")}`;this.errors.push(new or(p,r))}checkSubtype(r,l){const p=ft(r,l);return p&&this.error(p),p}}class zs{constructor(r,l){this.type=l.type,this.bindings=[].concat(r),this.result=l}evaluate(r){return this.result.evaluate(r)}eachChild(r){for(const l of this.bindings)r(l[1]);r(this.result)}static parse(r,l){if(r.length<4)return l.error(`Expected at least 3 arguments, but found ${r.length-1} instead.`);const p=[];for(let w=1;w<r.length-1;w+=2){const b=r[w];if(typeof b!="string")return l.error(`Expected string, but found ${typeof b} instead.`,w);if(/[^a-zA-Z0-9_]/.test(b))return l.error("Variable names must contain only alphanumeric characters or '_'.",w);const S=l.parse(r[w+1],w+1);if(!S)return null;p.push([b,S])}const y=l.parse(r[r.length-1],r.length-1,l.expectedType,p);return y?new zs(p,y):null}outputDefined(){return this.result.outputDefined()}}class Wr{constructor(r,l){this.type=l.type,this.name=r,this.boundExpression=l}static parse(r,l){if(r.length!==2||typeof r[1]!="string")return l.error("'var' expression requires exactly one string literal argument.");const p=r[1];return l.scope.has(p)?new Wr(p,l.scope.get(p)):l.error(`Unknown variable "${p}". Make sure "${p}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(r){return this.boundExpression.evaluate(r)}eachChild(){}outputDefined(){return!1}}class lA{constructor(r,l,p){this.type=r,this.index=l,this.input=p}static parse(r,l){if(r.length!==3)return l.error(`Expected 2 arguments, but found ${r.length-1} instead.`);const p=l.parse(r[1],1,ce),y=l.parse(r[2],2,$(l.expectedType||Qe));return p&&y?new lA(y.type.itemType,p,y):null}evaluate(r){const l=this.index.evaluate(r),p=this.input.evaluate(r);if(l<0)throw new Fi(`Array index out of bounds: ${l} < 0.`);if(l>=p.length)throw new Fi(`Array index out of bounds: ${l} > ${p.length-1}.`);if(l!==Math.floor(l))throw new Fi(`Array index must be an integer, but found ${l} instead.`);return p[l]}eachChild(r){r(this.index),r(this.input)}outputDefined(){return!1}}class ol{constructor(r,l){this.type=Pe,this.needle=r,this.haystack=l}static parse(r,l){if(r.length!==3)return l.error(`Expected 2 arguments, but found ${r.length-1} instead.`);const p=l.parse(r[1],1,Qe),y=l.parse(r[2],2,Qe);return p&&y?Qt(p.type,[Pe,ir,ce,Zr,Qe])?new ol(p,y):l.error(`Expected first argument to be of type boolean, string, number or null, but found ${X(p.type)} instead`):null}evaluate(r){const l=this.needle.evaluate(r),p=this.haystack.evaluate(r);if(!p)return!1;if(!Nt(l,["boolean","string","number","null"]))throw new Fi(`Expected first argument to be of type boolean, string, number or null, but found ${X(Qi(l))} instead.`);if(!Nt(p,["string","array"]))throw new Fi(`Expected second argument to be of type array or string, but found ${X(Qi(p))} instead.`);return p.indexOf(l)>=0}eachChild(r){r(this.needle),r(this.haystack)}outputDefined(){return!0}}class Fa{constructor(r,l,p){this.type=ce,this.needle=r,this.haystack=l,this.fromIndex=p}static parse(r,l){if(r.length<=2||r.length>=5)return l.error(`Expected 3 or 4 arguments, but found ${r.length-1} instead.`);const p=l.parse(r[1],1,Qe),y=l.parse(r[2],2,Qe);if(!p||!y)return null;if(!Qt(p.type,[Pe,ir,ce,Zr,Qe]))return l.error(`Expected first argument to be of type boolean, string, number or null, but found ${X(p.type)} instead`);if(r.length===4){const w=l.parse(r[3],3,ce);return w?new Fa(p,y,w):null}return new Fa(p,y)}evaluate(r){const l=this.needle.evaluate(r),p=this.haystack.evaluate(r);if(!Nt(l,["boolean","string","number","null"]))throw new Fi(`Expected first argument to be of type boolean, string, number or null, but found ${X(Qi(l))} instead.`);let y;if(this.fromIndex&&(y=this.fromIndex.evaluate(r)),Nt(p,["string"])){const w=p.indexOf(l,y);return w===-1?-1:[...p.slice(0,w)].length}if(Nt(p,["array"]))return p.indexOf(l,y);throw new Fi(`Expected second argument to be of type array or string, but found ${X(Qi(p))} instead.`)}eachChild(r){r(this.needle),r(this.haystack),this.fromIndex&&r(this.fromIndex)}outputDefined(){return!1}}class Al{constructor(r,l,p,y,w,b){this.inputType=r,this.type=l,this.input=p,this.cases=y,this.outputs=w,this.otherwise=b}static parse(r,l){if(r.length<5)return l.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if(r.length%2!=1)return l.error("Expected an even number of arguments.");let p,y;l.expectedType&&l.expectedType.kind!=="value"&&(y=l.expectedType);const w={},b=[];for(let M=2;M<r.length-1;M+=2){let O=r[M];const z=r[M+1];Array.isArray(O)||(O=[O]);const q=l.concat(M);if(O.length===0)return q.error("Expected at least one branch label.");for(const it of O){if(typeof it!="number"&&typeof it!="string")return q.error("Branch labels must be numbers or strings.");if(typeof it=="number"&&Math.abs(it)>Number.MAX_SAFE_INTEGER)return q.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof it=="number"&&Math.floor(it)!==it)return q.error("Numeric branch labels must be integer values.");if(p){if(q.checkSubtype(p,Qi(it)))return null}else p=Qi(it);if(w[String(it)]!==void 0)return q.error("Branch labels must be unique.");w[String(it)]=b.length}const Y=l.parse(z,M,y);if(!Y)return null;y=y||Y.type,b.push(Y)}const S=l.parse(r[1],1,Qe);if(!S)return null;const L=l.parse(r[r.length-1],r.length-1,y);return L?S.type.kind!=="value"&&l.concat(1).checkSubtype(p,S.type)?null:new Al(p,y,S,w,b,L):null}evaluate(r){const l=this.input.evaluate(r);return(Qi(l)===this.inputType&&this.outputs[this.cases[l]]||this.otherwise).evaluate(r)}eachChild(r){r(this.input),this.outputs.forEach(r),r(this.otherwise)}outputDefined(){return this.outputs.every(r=>r.outputDefined())&&this.otherwise.outputDefined()}}class Wa{constructor(r,l,p){this.type=r,this.branches=l,this.otherwise=p}static parse(r,l){if(r.length<4)return l.error(`Expected at least 3 arguments, but found only ${r.length-1}.`);if(r.length%2!=0)return l.error("Expected an odd number of arguments.");let p;l.expectedType&&l.expectedType.kind!=="value"&&(p=l.expectedType);const y=[];for(let b=1;b<r.length-1;b+=2){const S=l.parse(r[b],b,Pe);if(!S)return null;const L=l.parse(r[b+1],b+1,p);if(!L)return null;y.push([S,L]),p=p||L.type}const w=l.parse(r[r.length-1],r.length-1,p);if(!w)return null;if(!p)throw new Error("Can't infer output type");return new Wa(p,y,w)}evaluate(r){for(const[l,p]of this.branches)if(l.evaluate(r))return p.evaluate(r);return this.otherwise.evaluate(r)}eachChild(r){for(const[l,p]of this.branches)r(l),r(p);r(this.otherwise)}outputDefined(){return this.branches.every(([r,l])=>l.outputDefined())&&this.otherwise.outputDefined()}}class Qo{constructor(r,l,p,y){this.type=r,this.input=l,this.beginIndex=p,this.endIndex=y}static parse(r,l){if(r.length<=2||r.length>=5)return l.error(`Expected 3 or 4 arguments, but found ${r.length-1} instead.`);const p=l.parse(r[1],1,Qe),y=l.parse(r[2],2,ce);if(!p||!y)return null;if(!Qt(p.type,[$(Qe),ir,Qe]))return l.error(`Expected first argument to be of type array or string, but found ${X(p.type)} instead`);if(r.length===4){const w=l.parse(r[3],3,ce);return w?new Qo(p.type,p,y,w):null}return new Qo(p.type,p,y)}evaluate(r){const l=this.input.evaluate(r),p=this.beginIndex.evaluate(r);let y;if(this.endIndex&&(y=this.endIndex.evaluate(r)),Nt(l,["string"]))return[...l].slice(p,y).join("");if(Nt(l,["array"]))return l.slice(p,y);throw new Fi(`Expected first argument to be of type array or string, but found ${X(Qi(l))} instead.`)}eachChild(r){r(this.input),r(this.beginIndex),this.endIndex&&r(this.endIndex)}outputDefined(){return!1}}function cA(a,r){const l=a.length-1;let p,y,w=0,b=l,S=0;for(;w<=b;)if(S=Math.floor((w+b)/2),p=a[S],y=a[S+1],p<=r){if(S===l||r<y)return S;w=S+1}else{if(!(p>r))throw new Fi("Input is not a number.");b=S-1}return 0}class Za{constructor(r,l,p){this.type=r,this.input=l,this.labels=[],this.outputs=[];for(const[y,w]of p)this.labels.push(y),this.outputs.push(w)}static parse(r,l){if(r.length-1<4)return l.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if((r.length-1)%2!=0)return l.error("Expected an even number of arguments.");const p=l.parse(r[1],1,ce);if(!p)return null;const y=[];let w=null;l.expectedType&&l.expectedType.kind!=="value"&&(w=l.expectedType);for(let b=1;b<r.length;b+=2){const S=b===1?-1/0:r[b],L=r[b+1],M=b,O=b+1;if(typeof S!="number")return l.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',M);if(y.length&&y[y.length-1][0]>=S)return l.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',M);const z=l.parse(L,O,w);if(!z)return null;w=w||z.type,y.push([S,z])}return new Za(w,p,y)}evaluate(r){const l=this.labels,p=this.outputs;if(l.length===1)return p[0].evaluate(r);const y=this.input.evaluate(r);if(y<=l[0])return p[0].evaluate(r);const w=l.length;return y>=l[w-1]?p[w-1].evaluate(r):p[cA(l,y)].evaluate(r)}eachChild(r){r(this.input);for(const l of this.outputs)r(l)}outputDefined(){return this.outputs.every(r=>r.outputDefined())}}function aa(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var uA=ko;function ko(a,r,l,p){this.cx=3*a,this.bx=3*(l-a)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*r,this.by=3*(p-r)-this.cy,this.ay=1-this.cy-this.by,this.p1x=a,this.p1y=r,this.p2x=l,this.p2y=p}ko.prototype={sampleCurveX:function(a){return((this.ax*a+this.bx)*a+this.cx)*a},sampleCurveY:function(a){return((this.ay*a+this.by)*a+this.cy)*a},sampleCurveDerivativeX:function(a){return(3*this.ax*a+2*this.bx)*a+this.cx},solveCurveX:function(a,r){if(r===void 0&&(r=1e-6),a<0)return 0;if(a>1)return 1;for(var l=a,p=0;p<8;p++){var y=this.sampleCurveX(l)-a;if(Math.abs(y)<r)return l;var w=this.sampleCurveDerivativeX(l);if(Math.abs(w)<1e-6)break;l-=y/w}var b=0,S=1;for(l=a,p=0;p<20&&(y=this.sampleCurveX(l),!(Math.abs(y-a)<r));p++)a>y?b=l:S=l,l=.5*(S-b)+b;return l},solve:function(a,r){return this.sampleCurveY(this.solveCurveX(a,r))}};var Yl=aa(uA);function ki(a,r,l){return a+l*(r-a)}function Mo(a,r,l){return a.map((p,y)=>ki(p,r[y],l))}const gn={number:ki,color:function(a,r,l,p="rgb"){switch(p){case"rgb":{const[y,w,b,S]=Mo(a.rgb,r.rgb,l);return new mr(y,w,b,S,!1)}case"hcl":{const[y,w,b,S]=a.hcl,[L,M,O,z]=r.hcl;let q,Y;if(isNaN(y)||isNaN(L))isNaN(y)?isNaN(L)?q=NaN:(q=L,b!==1&&b!==0||(Y=M)):(q=y,O!==1&&O!==0||(Y=w));else{let Kt=L-y;L>y&&Kt>180?Kt-=360:L<y&&y-L>180&&(Kt+=360),q=y+l*Kt}const[it,lt,wt,It]=function([Kt,Mt,Ht,re]){return Kt=isNaN(Kt)?0:Kt*Xe,$r([Ht,Math.cos(Kt)*Mt,Math.sin(Kt)*Mt,re])}([q,Y??ki(w,M,l),ki(b,O,l),ki(S,z,l)]);return new mr(it,lt,wt,It,!1)}case"lab":{const[y,w,b,S]=$r(Mo(a.lab,r.lab,l));return new mr(y,w,b,S,!1)}}},array:Mo,padding:function(a,r,l){return new fi(Mo(a.values,r.values,l))},variableAnchorOffsetCollection:function(a,r,l){const p=a.values,y=r.values;if(p.length!==y.length)throw new Fi(`Cannot interpolate values of different length. from: ${a.toString()}, to: ${r.toString()}`);const w=[];for(let b=0;b<p.length;b+=2){if(p[b]!==y[b])throw new Fi(`Cannot interpolate values containing mismatched anchors. from[${b}]: ${p[b]}, to[${b}]: ${y[b]}`);w.push(p[b]);const[S,L]=p[b+1],[M,O]=y[b+1];w.push([ki(S,M,l),ki(L,O,l)])}return new pn(w)}};class lr{constructor(r,l,p,y,w){this.type=r,this.operator=l,this.interpolation=p,this.input=y,this.labels=[],this.outputs=[];for(const[b,S]of w)this.labels.push(b),this.outputs.push(S)}static interpolationFactor(r,l,p,y){let w=0;if(r.name==="exponential")w=hA(l,r.base,p,y);else if(r.name==="linear")w=hA(l,1,p,y);else if(r.name==="cubic-bezier"){const b=r.controlPoints;w=new Yl(b[0],b[1],b[2],b[3]).solve(hA(l,1,p,y))}return w}static parse(r,l){let[p,y,w,...b]=r;if(!Array.isArray(y)||y.length===0)return l.error("Expected an interpolation type expression.",1);if(y[0]==="linear")y={name:"linear"};else if(y[0]==="exponential"){const M=y[1];if(typeof M!="number")return l.error("Exponential interpolation requires a numeric base.",1,1);y={name:"exponential",base:M}}else{if(y[0]!=="cubic-bezier")return l.error(`Unknown interpolation type ${String(y[0])}`,1,0);{const M=y.slice(1);if(M.length!==4||M.some(O=>typeof O!="number"||O<0||O>1))return l.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);y={name:"cubic-bezier",controlPoints:M}}}if(r.length-1<4)return l.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if((r.length-1)%2!=0)return l.error("Expected an even number of arguments.");if(w=l.parse(w,2,ce),!w)return null;const S=[];let L=null;p==="interpolate-hcl"||p==="interpolate-lab"?L=_r:l.expectedType&&l.expectedType.kind!=="value"&&(L=l.expectedType);for(let M=0;M<b.length;M+=2){const O=b[M],z=b[M+1],q=M+3,Y=M+4;if(typeof O!="number")return l.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',q);if(S.length&&S[S.length-1][0]>=O)return l.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',q);const it=l.parse(z,Y,L);if(!it)return null;L=L||it.type,S.push([O,it])}return Pt(L,ce)||Pt(L,_r)||Pt(L,si)||Pt(L,yt)||Pt(L,$(ce))?new lr(L,p,y,w,S):l.error(`Type ${X(L)} is not interpolatable.`)}evaluate(r){const l=this.labels,p=this.outputs;if(l.length===1)return p[0].evaluate(r);const y=this.input.evaluate(r);if(y<=l[0])return p[0].evaluate(r);const w=l.length;if(y>=l[w-1])return p[w-1].evaluate(r);const b=cA(l,y),S=lr.interpolationFactor(this.interpolation,y,l[b],l[b+1]),L=p[b].evaluate(r),M=p[b+1].evaluate(r);switch(this.operator){case"interpolate":return gn[this.type.kind](L,M,S);case"interpolate-hcl":return gn.color(L,M,S,"hcl");case"interpolate-lab":return gn.color(L,M,S,"lab")}}eachChild(r){r(this.input);for(const l of this.outputs)r(l)}outputDefined(){return this.outputs.every(r=>r.outputDefined())}}function hA(a,r,l,p){const y=p-l,w=a-l;return y===0?0:r===1?w/y:(Math.pow(r,w)-1)/(Math.pow(r,y)-1)}class dA{constructor(r,l){this.type=r,this.args=l}static parse(r,l){if(r.length<2)return l.error("Expectected at least one argument.");let p=null;const y=l.expectedType;y&&y.kind!=="value"&&(p=y);const w=[];for(const S of r.slice(1)){const L=l.parse(S,1+w.length,p,void 0,{typeAnnotation:"omit"});if(!L)return null;p=p||L.type,w.push(L)}if(!p)throw new Error("No output type");const b=y&&w.some(S=>ft(y,S.type));return new dA(b?Qe:p,w)}evaluate(r){let l,p=null,y=0;for(const w of this.args)if(y++,p=w.evaluate(r),p&&p instanceof Cn&&!p.available&&(l||(l=p.name),p=null,y===this.args.length&&(p=l)),p!==null)break;return p}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}function ns(a,r){return a==="=="||a==="!="?r.kind==="boolean"||r.kind==="string"||r.kind==="number"||r.kind==="null"||r.kind==="value":r.kind==="string"||r.kind==="number"||r.kind==="value"}function ll(a,r,l,p){return p.compare(r,l)===0}function Sa(a,r,l){const p=a!=="=="&&a!=="!=";return class a4{constructor(w,b,S){this.type=Pe,this.lhs=w,this.rhs=b,this.collator=S,this.hasUntypedArgument=w.type.kind==="value"||b.type.kind==="value"}static parse(w,b){if(w.length!==3&&w.length!==4)return b.error("Expected two or three arguments.");const S=w[0];let L=b.parse(w[1],1,Qe);if(!L)return null;if(!ns(S,L.type))return b.concat(1).error(`"${S}" comparisons are not supported for type '${X(L.type)}'.`);let M=b.parse(w[2],2,Qe);if(!M)return null;if(!ns(S,M.type))return b.concat(2).error(`"${S}" comparisons are not supported for type '${X(M.type)}'.`);if(L.type.kind!==M.type.kind&&L.type.kind!=="value"&&M.type.kind!=="value")return b.error(`Cannot compare types '${X(L.type)}' and '${X(M.type)}'.`);p&&(L.type.kind==="value"&&M.type.kind!=="value"?L=new Dn(M.type,[L]):L.type.kind!=="value"&&M.type.kind==="value"&&(M=new Dn(L.type,[M])));let O=null;if(w.length===4){if(L.type.kind!=="string"&&M.type.kind!=="string"&&L.type.kind!=="value"&&M.type.kind!=="value")return b.error("Cannot use collator to compare non-string types.");if(O=b.parse(w[3],3,mi),!O)return null}return new a4(L,M,O)}evaluate(w){const b=this.lhs.evaluate(w),S=this.rhs.evaluate(w);if(p&&this.hasUntypedArgument){const L=Qi(b),M=Qi(S);if(L.kind!==M.kind||L.kind!=="string"&&L.kind!=="number")throw new Fi(`Expected arguments for "${a}" to be (string, string) or (number, number), but found (${L.kind}, ${M.kind}) instead.`)}if(this.collator&&!p&&this.hasUntypedArgument){const L=Qi(b),M=Qi(S);if(L.kind!=="string"||M.kind!=="string")return r(w,b,S)}return this.collator?l(w,b,S,this.collator.evaluate(w)):r(w,b,S)}eachChild(w){w(this.lhs),w(this.rhs),this.collator&&w(this.collator)}outputDefined(){return!0}}}const pA=Sa("==",function(a,r,l){return r===l},ll),fA=Sa("!=",function(a,r,l){return r!==l},function(a,r,l,p){return!ll(0,r,l,p)}),Jl=Sa("<",function(a,r,l){return r<l},function(a,r,l,p){return p.compare(r,l)<0}),Rc=Sa(">",function(a,r,l){return r>l},function(a,r,l,p){return p.compare(r,l)>0}),zc=Sa("<=",function(a,r,l){return r<=l},function(a,r,l,p){return p.compare(r,l)<=0}),gA=Sa(">=",function(a,r,l){return r>=l},function(a,r,l,p){return p.compare(r,l)>=0});class Hs{constructor(r,l,p){this.type=mi,this.locale=p,this.caseSensitive=r,this.diacriticSensitive=l}static parse(r,l){if(r.length!==2)return l.error("Expected one argument.");const p=r[1];if(typeof p!="object"||Array.isArray(p))return l.error("Collator options argument must be an object.");const y=l.parse(p["case-sensitive"]!==void 0&&p["case-sensitive"],1,Pe);if(!y)return null;const w=l.parse(p["diacritic-sensitive"]!==void 0&&p["diacritic-sensitive"],1,Pe);if(!w)return null;let b=null;return p.locale&&(b=l.parse(p.locale,1,ir),!b)?null:new Hs(y,w,b)}evaluate(r){return new Xi(this.caseSensitive.evaluate(r),this.diacriticSensitive.evaluate(r),this.locale?this.locale.evaluate(r):null)}eachChild(r){r(this.caseSensitive),r(this.diacriticSensitive),this.locale&&r(this.locale)}outputDefined(){return!1}}class oa{constructor(r,l,p,y,w){this.type=ir,this.number=r,this.locale=l,this.currency=p,this.minFractionDigits=y,this.maxFractionDigits=w}static parse(r,l){if(r.length!==3)return l.error("Expected two arguments.");const p=l.parse(r[1],1,ce);if(!p)return null;const y=r[2];if(typeof y!="object"||Array.isArray(y))return l.error("NumberFormat options argument must be an object.");let w=null;if(y.locale&&(w=l.parse(y.locale,1,ir),!w))return null;let b=null;if(y.currency&&(b=l.parse(y.currency,1,ir),!b))return null;let S=null;if(y["min-fraction-digits"]&&(S=l.parse(y["min-fraction-digits"],1,ce),!S))return null;let L=null;return y["max-fraction-digits"]&&(L=l.parse(y["max-fraction-digits"],1,ce),!L)?null:new oa(p,w,b,S,L)}evaluate(r){return new Intl.NumberFormat(this.locale?this.locale.evaluate(r):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(r):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(r):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(r):void 0}).format(this.number.evaluate(r))}eachChild(r){r(this.number),this.locale&&r(this.locale),this.currency&&r(this.currency),this.minFractionDigits&&r(this.minFractionDigits),this.maxFractionDigits&&r(this.maxFractionDigits)}outputDefined(){return!1}}class mA{constructor(r){this.type=Kr,this.sections=r}static parse(r,l){if(r.length<2)return l.error("Expected at least one argument.");const p=r[1];if(!Array.isArray(p)&&typeof p=="object")return l.error("First argument must be an image or text section.");const y=[];let w=!1;for(let b=1;b<=r.length-1;++b){const S=r[b];if(w&&typeof S=="object"&&!Array.isArray(S)){w=!1;let L=null;if(S["font-scale"]&&(L=l.parse(S["font-scale"],1,ce),!L))return null;let M=null;if(S["text-font"]&&(M=l.parse(S["text-font"],1,$(ir)),!M))return null;let O=null;if(S["text-color"]&&(O=l.parse(S["text-color"],1,_r),!O))return null;const z=y[y.length-1];z.scale=L,z.font=M,z.textColor=O}else{const L=l.parse(r[b],1,Qe);if(!L)return null;const M=L.type.kind;if(M!=="string"&&M!=="value"&&M!=="null"&&M!=="resolvedImage")return l.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");w=!0,y.push({content:L,scale:null,font:null,textColor:null})}}return new mA(y)}evaluate(r){return new yi(this.sections.map(l=>{const p=l.content.evaluate(r);return Qi(p)===Xr?new li("",p,null,null,null):new li(vi(p),null,l.scale?l.scale.evaluate(r):null,l.font?l.font.evaluate(r).join(","):null,l.textColor?l.textColor.evaluate(r):null)}))}eachChild(r){for(const l of this.sections)r(l.content),l.scale&&r(l.scale),l.font&&r(l.font),l.textColor&&r(l.textColor)}outputDefined(){return!1}}class Ia{constructor(r){this.type=Xr,this.input=r}static parse(r,l){if(r.length!==2)return l.error("Expected two arguments.");const p=l.parse(r[1],1,ir);return p?new Ia(p):l.error("No image name provided.")}evaluate(r){const l=this.input.evaluate(r),p=Cn.fromString(l);return p&&r.availableImages&&(p.available=r.availableImages.indexOf(l)>-1),p}eachChild(r){r(this.input)}outputDefined(){return!1}}class Do{constructor(r){this.type=ce,this.input=r}static parse(r,l){if(r.length!==2)return l.error(`Expected 1 argument, but found ${r.length-1} instead.`);const p=l.parse(r[1],1);return p?p.type.kind!=="array"&&p.type.kind!=="string"&&p.type.kind!=="value"?l.error(`Expected argument of type string or array, but found ${X(p.type)} instead.`):new Do(p):null}evaluate(r){const l=this.input.evaluate(r);if(typeof l=="string")return[...l].length;if(Array.isArray(l))return l.length;throw new Fi(`Expected value to be of type string or array, but found ${X(Qi(l))} instead.`)}eachChild(r){r(this.input)}outputDefined(){return!1}}const Nn=8192;function tc(a,r){const l=(180+a[0])/360,p=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+a[1]*Math.PI/360)))/360,y=Math.pow(2,r.z);return[Math.round(l*y*Nn),Math.round(p*y*Nn)]}function yA(a,r){const l=Math.pow(2,r.z);return[(y=(a[0]/Nn+r.x)/l,360*y-180),(p=(a[1]/Nn+r.y)/l,360/Math.PI*Math.atan(Math.exp((180-360*p)*Math.PI/180))-90)];var p,y}function Aa(a,r){a[0]=Math.min(a[0],r[0]),a[1]=Math.min(a[1],r[1]),a[2]=Math.max(a[2],r[0]),a[3]=Math.max(a[3],r[1])}function Vs(a,r){return!(a[0]<=r[0]||a[2]>=r[2]||a[1]<=r[1]||a[3]>=r[3])}function Qr(a,r,l){const p=a[0]-r[0],y=a[1]-r[1],w=a[0]-l[0],b=a[1]-l[1];return p*b-w*y==0&&p*w<=0&&y*b<=0}function xs(a,r,l,p){return(y=[p[0]-l[0],p[1]-l[1]])[0]*(w=[r[0]-a[0],r[1]-a[1]])[1]-y[1]*w[0]!=0&&!(!ec(a,r,l,p)||!ec(l,p,a,r));var y,w}function Hc(a,r,l){for(const p of l)for(let y=0;y<p.length-1;++y)if(xs(a,r,p[y],p[y+1]))return!0;return!1}function ss(a,r,l=!1){let p=!1;for(const S of r)for(let L=0;L<S.length-1;L++){if(Qr(a,S[L],S[L+1]))return l;(w=S[L])[1]>(y=a)[1]!=(b=S[L+1])[1]>y[1]&&y[0]<(b[0]-w[0])*(y[1]-w[1])/(b[1]-w[1])+w[0]&&(p=!p)}var y,w,b;return p}function js(a,r){for(const l of r)if(ss(a,l))return!0;return!1}function vA(a,r){for(const l of a)if(!ss(l,r))return!1;for(let l=0;l<a.length-1;++l)if(Hc(a[l],a[l+1],r))return!1;return!0}function No(a,r){for(const l of r)if(vA(a,l))return!0;return!1}function ec(a,r,l,p){const y=p[0]-l[0],w=p[1]-l[1],b=(a[0]-l[0])*w-y*(a[1]-l[1]),S=(r[0]-l[0])*w-y*(r[1]-l[1]);return b>0&&S<0||b<0&&S>0}function Ya(a,r,l){const p=[];for(let y=0;y<a.length;y++){const w=[];for(let b=0;b<a[y].length;b++){const S=tc(a[y][b],l);Aa(r,S),w.push(S)}p.push(w)}return p}function rc(a,r,l){const p=[];for(let y=0;y<a.length;y++){const w=Ya(a[y],r,l);p.push(w)}return p}function wA(a,r,l,p){if(a[0]<l[0]||a[0]>l[2]){const y=.5*p;let w=a[0]-l[0]>y?-p:l[0]-a[0]>y?p:0;w===0&&(w=a[0]-l[2]>y?-p:l[2]-a[0]>y?p:0),a[0]+=w}Aa(r,a)}function _A(a,r,l,p){const y=Math.pow(2,p.z)*Nn,w=[p.x*Nn,p.y*Nn],b=[];for(const S of a)for(const L of S){const M=[L.x+w[0],L.y+w[1]];wA(M,r,l,y),b.push(M)}return b}function cl(a,r,l,p){const y=Math.pow(2,p.z)*Nn,w=[p.x*Nn,p.y*Nn],b=[];for(const L of a){const M=[];for(const O of L){const z=[O.x+w[0],O.y+w[1]];Aa(r,z),M.push(z)}b.push(M)}if(r[2]-r[0]<=y/2){(S=r)[0]=S[1]=1/0,S[2]=S[3]=-1/0;for(const L of b)for(const M of L)wA(M,r,l,y)}var S;return b}class Bs{constructor(r,l){this.type=Pe,this.geojson=r,this.geometries=l}static parse(r,l){if(r.length!==2)return l.error(`'within' expression requires exactly one argument, but found ${r.length-1} instead.`);if(bs(r[1])){const p=r[1];if(p.type==="FeatureCollection"){const y=[];for(const w of p.features){const{type:b,coordinates:S}=w.geometry;b==="Polygon"&&y.push(S),b==="MultiPolygon"&&y.push(...S)}if(y.length)return new Bs(p,{type:"MultiPolygon",coordinates:y})}else if(p.type==="Feature"){const y=p.geometry.type;if(y==="Polygon"||y==="MultiPolygon")return new Bs(p,p.geometry)}else if(p.type==="Polygon"||p.type==="MultiPolygon")return new Bs(p,p)}return l.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(r){if(r.geometry()!=null&&r.canonicalID()!=null){if(r.geometryType()==="Point")return function(l,p){const y=[1/0,1/0,-1/0,-1/0],w=[1/0,1/0,-1/0,-1/0],b=l.canonicalID();if(p.type==="Polygon"){const S=Ya(p.coordinates,w,b),L=_A(l.geometry(),y,w,b);if(!Vs(y,w))return!1;for(const M of L)if(!ss(M,S))return!1}if(p.type==="MultiPolygon"){const S=rc(p.coordinates,w,b),L=_A(l.geometry(),y,w,b);if(!Vs(y,w))return!1;for(const M of L)if(!js(M,S))return!1}return!0}(r,this.geometries);if(r.geometryType()==="LineString")return function(l,p){const y=[1/0,1/0,-1/0,-1/0],w=[1/0,1/0,-1/0,-1/0],b=l.canonicalID();if(p.type==="Polygon"){const S=Ya(p.coordinates,w,b),L=cl(l.geometry(),y,w,b);if(!Vs(y,w))return!1;for(const M of L)if(!vA(M,S))return!1}if(p.type==="MultiPolygon"){const S=rc(p.coordinates,w,b),L=cl(l.geometry(),y,w,b);if(!Vs(y,w))return!1;for(const M of L)if(!No(M,S))return!1}return!0}(r,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let bA=class{constructor(a=[],r=(l,p)=>l<p?-1:l>p?1:0){if(this.data=a,this.length=this.data.length,this.compare=r,this.length>0)for(let l=(this.length>>1)-1;l>=0;l--)this._down(l)}push(a){this.data.push(a),this._up(this.length++)}pop(){if(this.length===0)return;const a=this.data[0],r=this.data.pop();return--this.length>0&&(this.data[0]=r,this._down(0)),a}peek(){return this.data[0]}_up(a){const{data:r,compare:l}=this,p=r[a];for(;a>0;){const y=a-1>>1,w=r[y];if(l(p,w)>=0)break;r[a]=w,a=y}r[a]=p}_down(a){const{data:r,compare:l}=this,p=this.length>>1,y=r[a];for(;a<p;){let w=1+(a<<1);const b=w+1;if(b<this.length&&l(r[b],r[w])<0&&(w=b),l(r[w],y)>=0)break;r[a]=r[w],a=w}r[a]=y}};function ul(a,r,l,p,y){hl(a,r,l,p||a.length-1,y||xA)}function hl(a,r,l,p,y){for(;p>l;){if(p-l>600){var w=p-l+1,b=r-l+1,S=Math.log(w),L=.5*Math.exp(2*S/3),M=.5*Math.sqrt(S*L*(w-L)/w)*(b-w/2<0?-1:1);hl(a,r,Math.max(l,Math.floor(r-b*L/w+M)),Math.min(p,Math.floor(r+(w-b)*L/w+M)),y)}var O=a[r],z=l,q=p;for(Oo(a,l,r),y(a[p],O)>0&&Oo(a,l,p);z<q;){for(Oo(a,z,q),z++,q--;y(a[z],O)<0;)z++;for(;y(a[q],O)>0;)q--}y(a[l],O)===0?Oo(a,l,q):Oo(a,++q,p),q<=r&&(l=q+1),r<=q&&(p=q-1)}}function Oo(a,r,l){var p=a[r];a[r]=a[l],a[l]=p}function xA(a,r){return a<r?-1:a>r?1:0}function la(a,r){if(a.length<=1)return[a];const l=[];let p,y;for(const w of a){const b=Ja(w);b!==0&&(w.area=Math.abs(b),y===void 0&&(y=b<0),y===b<0?(p&&l.push(p),p=[w]):p.push(w))}if(p&&l.push(p),r>1)for(let w=0;w<l.length;w++)l[w].length<=r||(ul(l[w],r,1,l[w].length-1,dl),l[w]=l[w].slice(0,r));return l}function dl(a,r){return r.area-a.area}function Ja(a){let r=0;for(let l,p,y=0,w=a.length,b=w-1;y<w;b=y++)l=a[y],p=a[b],r+=(p.x-l.x)*(l.y+p.y);return r}const BA=1/298.257223563,Q=BA*(2-BA),J=Math.PI/180;class bt{constructor(r){const l=6378.137*J*1e3,p=Math.cos(r*J),y=1/(1-Q*(1-p*p)),w=Math.sqrt(y);this.kx=l*w*p,this.ky=l*w*y*(1-Q)}distance(r,l){const p=this.wrap(r[0]-l[0])*this.kx,y=(r[1]-l[1])*this.ky;return Math.sqrt(p*p+y*y)}pointOnLine(r,l){let p,y,w,b,S=1/0;for(let L=0;L<r.length-1;L++){let M=r[L][0],O=r[L][1],z=this.wrap(r[L+1][0]-M)*this.kx,q=(r[L+1][1]-O)*this.ky,Y=0;z===0&&q===0||(Y=(this.wrap(l[0]-M)*this.kx*z+(l[1]-O)*this.ky*q)/(z*z+q*q),Y>1?(M=r[L+1][0],O=r[L+1][1]):Y>0&&(M+=z/this.kx*Y,O+=q/this.ky*Y)),z=this.wrap(l[0]-M)*this.kx,q=(l[1]-O)*this.ky;const it=z*z+q*q;it<S&&(S=it,p=M,y=O,w=L,b=Y)}return{point:[p,y],index:w,t:Math.max(0,Math.min(1,b))}}wrap(r){for(;r<-180;)r+=360;for(;r>180;)r-=360;return r}}function Dt(a,r){return r[0]-a[0]}function qt(a){return a[1]-a[0]+1}function ne(a,r){return a[1]>=a[0]&&a[1]<r}function be(a,r){if(a[0]>a[1])return[null,null];const l=qt(a);if(r){if(l===2)return[a,null];const y=Math.floor(l/2);return[[a[0],a[0]+y],[a[0]+y,a[1]]]}if(l===1)return[a,null];const p=Math.floor(l/2)-1;return[[a[0],a[0]+p],[a[0]+p+1,a[1]]]}function He(a,r){if(!ne(r,a.length))return[1/0,1/0,-1/0,-1/0];const l=[1/0,1/0,-1/0,-1/0];for(let p=r[0];p<=r[1];++p)Aa(l,a[p]);return l}function ur(a){const r=[1/0,1/0,-1/0,-1/0];for(const l of a)for(const p of l)Aa(r,p);return r}function Ir(a){return a[0]!==-1/0&&a[1]!==-1/0&&a[2]!==1/0&&a[3]!==1/0}function Er(a,r,l){if(!Ir(a)||!Ir(r))return NaN;let p=0,y=0;return a[2]<r[0]&&(p=r[0]-a[2]),a[0]>r[2]&&(p=a[0]-r[2]),a[1]>r[3]&&(y=a[1]-r[3]),a[3]<r[1]&&(y=r[1]-a[3]),l.distance([0,0],[p,y])}function Or(a,r,l){const p=l.pointOnLine(r,a);return l.distance(a,p.point)}function wi(a,r,l,p,y){const w=Math.min(Or(a,[l,p],y),Or(r,[l,p],y)),b=Math.min(Or(l,[a,r],y),Or(p,[a,r],y));return Math.min(w,b)}function Ri(a,r,l,p,y){if(!ne(r,a.length)||!ne(p,l.length))return 1/0;let w=1/0;for(let b=r[0];b<r[1];++b){const S=a[b],L=a[b+1];for(let M=p[0];M<p[1];++M){const O=l[M],z=l[M+1];if(xs(S,L,O,z))return 0;w=Math.min(w,wi(S,L,O,z,y))}}return w}function kr(a,r,l,p,y){if(!ne(r,a.length)||!ne(p,l.length))return NaN;let w=1/0;for(let b=r[0];b<=r[1];++b)for(let S=p[0];S<=p[1];++S)if(w=Math.min(w,y.distance(a[b],l[S])),w===0)return w;return w}function Fn(a,r,l){if(ss(a,r,!0))return 0;let p=1/0;for(const y of r){const w=y[0],b=y[y.length-1];if(w!==b&&(p=Math.min(p,Or(a,[b,w],l)),p===0))return p;const S=l.pointOnLine(y,a);if(p=Math.min(p,l.distance(a,S.point)),p===0)return p}return p}function cr(a,r,l,p){if(!ne(r,a.length))return NaN;for(let w=r[0];w<=r[1];++w)if(ss(a[w],l,!0))return 0;let y=1/0;for(let w=r[0];w<r[1];++w){const b=a[w],S=a[w+1];for(const L of l)for(let M=0,O=L.length,z=O-1;M<O;z=M++){const q=L[z],Y=L[M];if(xs(b,S,q,Y))return 0;y=Math.min(y,wi(b,S,q,Y,p))}}return y}function Gn(a,r){for(const l of a)for(const p of l)if(ss(p,r,!0))return!0;return!1}function Vr(a,r,l,p=1/0){const y=ur(a),w=ur(r);if(p!==1/0&&Er(y,w,l)>=p)return p;if(Vs(y,w)){if(Gn(a,r))return 0}else if(Gn(r,a))return 0;let b=1/0;for(const S of a)for(let L=0,M=S.length,O=M-1;L<M;O=L++){const z=S[O],q=S[L];for(const Y of r)for(let it=0,lt=Y.length,wt=lt-1;it<lt;wt=it++){const It=Y[wt],Kt=Y[it];if(xs(z,q,It,Kt))return 0;b=Math.min(b,wi(z,q,It,Kt,l))}}return b}function jr(a,r,l,p,y,w){if(!w)return;const b=Er(He(p,w),y,l);b<r&&a.push([b,w,[0,0]])}function ca(a,r,l,p,y,w,b){if(!w||!b)return;const S=Er(He(p,w),He(y,b),l);S<r&&a.push([S,w,b])}function Ea(a,r,l,p,y=1/0){let w=Math.min(p.distance(a[0],l[0][0]),y);if(w===0)return w;const b=new bA([[0,[0,a.length-1],[0,0]]],Dt),S=ur(l);for(;b.length>0;){const L=b.pop();if(L[0]>=w)continue;const M=L[1],O=r?50:100;if(qt(M)<=O){if(!ne(M,a.length))return NaN;if(r){const z=cr(a,M,l,p);if(isNaN(z)||z===0)return z;w=Math.min(w,z)}else for(let z=M[0];z<=M[1];++z){const q=Fn(a[z],l,p);if(w=Math.min(w,q),w===0)return 0}}else{const z=be(M,r);jr(b,w,p,a,S,z[0]),jr(b,w,p,a,S,z[1])}}return w}function Ta(a,r,l,p,y,w=1/0){let b=Math.min(w,y.distance(a[0],l[0]));if(b===0)return b;const S=new bA([[0,[0,a.length-1],[0,l.length-1]]],Dt);for(;S.length>0;){const L=S.pop();if(L[0]>=b)continue;const M=L[1],O=L[2],z=r?50:100,q=p?50:100;if(qt(M)<=z&&qt(O)<=q){if(!ne(M,a.length)&&ne(O,l.length))return NaN;let Y;if(r&&p)Y=Ri(a,M,l,O,y),b=Math.min(b,Y);else if(r&&!p){const it=a.slice(M[0],M[1]+1);for(let lt=O[0];lt<=O[1];++lt)if(Y=Or(l[lt],it,y),b=Math.min(b,Y),b===0)return b}else if(!r&&p){const it=l.slice(O[0],O[1]+1);for(let lt=M[0];lt<=M[1];++lt)if(Y=Or(a[lt],it,y),b=Math.min(b,Y),b===0)return b}else Y=kr(a,M,l,O,y),b=Math.min(b,Y)}else{const Y=be(M,r),it=be(O,p);ca(S,b,y,a,l,Y[0],it[0]),ca(S,b,y,a,l,Y[0],it[1]),ca(S,b,y,a,l,Y[1],it[0]),ca(S,b,y,a,l,Y[1],it[1])}}return b}function to(a){return a.type==="MultiPolygon"?a.coordinates.map(r=>({type:"Polygon",coordinates:r})):a.type==="MultiLineString"?a.coordinates.map(r=>({type:"LineString",coordinates:r})):a.type==="MultiPoint"?a.coordinates.map(r=>({type:"Point",coordinates:r})):[a]}class Ks{constructor(r,l){this.type=ce,this.geojson=r,this.geometries=l}static parse(r,l){if(r.length!==2)return l.error(`'distance' expression requires exactly one argument, but found ${r.length-1} instead.`);if(bs(r[1])){const p=r[1];if(p.type==="FeatureCollection")return new Ks(p,p.features.map(y=>to(y.geometry)).flat());if(p.type==="Feature")return new Ks(p,to(p.geometry));if("type"in p&&"coordinates"in p)return new Ks(p,to(p))}return l.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(r){if(r.geometry()!=null&&r.canonicalID()!=null){if(r.geometryType()==="Point")return function(l,p){const y=l.geometry(),w=y.flat().map(L=>yA([L.x,L.y],l.canonical));if(y.length===0)return NaN;const b=new bt(w[0][1]);let S=1/0;for(const L of p){switch(L.type){case"Point":S=Math.min(S,Ta(w,!1,[L.coordinates],!1,b,S));break;case"LineString":S=Math.min(S,Ta(w,!1,L.coordinates,!0,b,S));break;case"Polygon":S=Math.min(S,Ea(w,!1,L.coordinates,b,S))}if(S===0)return S}return S}(r,this.geometries);if(r.geometryType()==="LineString")return function(l,p){const y=l.geometry(),w=y.flat().map(L=>yA([L.x,L.y],l.canonical));if(y.length===0)return NaN;const b=new bt(w[0][1]);let S=1/0;for(const L of p){switch(L.type){case"Point":S=Math.min(S,Ta(w,!0,[L.coordinates],!1,b,S));break;case"LineString":S=Math.min(S,Ta(w,!0,L.coordinates,!0,b,S));break;case"Polygon":S=Math.min(S,Ea(w,!0,L.coordinates,b,S))}if(S===0)return S}return S}(r,this.geometries);if(r.geometryType()==="Polygon")return function(l,p){const y=l.geometry();if(y.length===0||y[0].length===0)return NaN;const w=la(y,0).map(L=>L.map(M=>M.map(O=>yA([O.x,O.y],l.canonical)))),b=new bt(w[0][0][0][1]);let S=1/0;for(const L of p)for(const M of w){switch(L.type){case"Point":S=Math.min(S,Ea([L.coordinates],!1,M,b,S));break;case"LineString":S=Math.min(S,Ea(L.coordinates,!0,M,b,S));break;case"Polygon":S=Math.min(S,Vr(M,L.coordinates,b,S))}if(S===0)return S}return S}(r,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}const ua={"==":pA,"!=":fA,">":Rc,"<":Jl,">=":gA,"<=":zc,array:Dn,at:lA,boolean:Dn,case:Wa,coalesce:dA,collator:Hs,format:mA,image:Ia,in:ol,"index-of":Fa,interpolate:lr,"interpolate-hcl":lr,"interpolate-lab":lr,length:Do,let:zs,literal:$n,match:Al,number:Dn,"number-format":oa,object:Dn,slice:Qo,step:Za,string:Dn,"to-boolean":Oi,"to-color":Oi,"to-number":Oi,"to-string":Oi,var:Wr,within:Bs,distance:Ks};class mn{constructor(r,l,p,y){this.name=r,this.type=l,this._evaluate=p,this.args=y}evaluate(r){return this._evaluate(r,this.args)}eachChild(r){this.args.forEach(r)}outputDefined(){return!1}static parse(r,l){const p=r[0],y=mn.definitions[p];if(!y)return l.error(`Unknown expression "${p}". If you wanted a literal array, use ["literal", [...]].`,0);const w=Array.isArray(y)?y[0]:y.type,b=Array.isArray(y)?[[y[1],y[2]]]:y.overloads,S=b.filter(([M])=>!Array.isArray(M)||M.length===r.length-1);let L=null;for(const[M,O]of S){L=new Rs(l.registry,Ua,l.path,null,l.scope);const z=[];let q=!1;for(let Y=1;Y<r.length;Y++){const it=r[Y],lt=Array.isArray(M)?M[Y-1]:M.type,wt=L.parse(it,1+z.length,lt);if(!wt){q=!0;break}z.push(wt)}if(!q)if(Array.isArray(M)&&M.length!==z.length)L.error(`Expected ${M.length} arguments, but found ${z.length} instead.`);else{for(let Y=0;Y<z.length;Y++){const it=Array.isArray(M)?M[Y]:M.type,lt=z[Y];L.concat(Y+1).checkSubtype(it,lt.type)}if(L.errors.length===0)return new mn(p,w,O,z)}}if(S.length===1)l.errors.push(...L.errors);else{const M=(S.length?S:b).map(([z])=>{return q=z,Array.isArray(q)?`(${q.map(X).join(", ")})`:`(${X(q.type)}...)`;var q}).join(" | "),O=[];for(let z=1;z<r.length;z++){const q=l.parse(r[z],1+O.length);if(!q)return null;O.push(X(q.type))}l.error(`Expected arguments of type ${M}, but found (${O.join(", ")}) instead.`)}return null}static register(r,l){mn.definitions=l;for(const p in l)r[p]=mn}}function Wi(a,[r,l,p,y]){r=r.evaluate(a),l=l.evaluate(a),p=p.evaluate(a);const w=y?y.evaluate(a):1,b=Xa(r,l,p,w);if(b)throw new Fi(b);return new mr(r/255,l/255,p/255,w,!1)}function eo(a,r){return a in r}function ro(a,r){const l=r[a];return l===void 0?null:l}function Cs(a){return{type:a}}function Ua(a){if(a instanceof Wr)return Ua(a.boundExpression);if(a instanceof mn&&a.name==="error"||a instanceof Hs||a instanceof Bs||a instanceof Ks)return!1;const r=a instanceof Oi||a instanceof Dn;let l=!0;return a.eachChild(p=>{l=r?l&&Ua(p):l&&p instanceof $n}),!!l&&en(a)&&La(a,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function en(a){if(a instanceof mn&&(a.name==="get"&&a.args.length===1||a.name==="feature-state"||a.name==="has"&&a.args.length===1||a.name==="properties"||a.name==="geometry-type"||a.name==="id"||/^filter-/.test(a.name))||a instanceof Bs||a instanceof Ks)return!1;let r=!0;return a.eachChild(l=>{r&&!en(l)&&(r=!1)}),r}function io(a){if(a instanceof mn&&a.name==="feature-state")return!1;let r=!0;return a.eachChild(l=>{r&&!io(l)&&(r=!1)}),r}function La(a,r){if(a instanceof mn&&r.indexOf(a.name)>=0)return!1;let l=!0;return a.eachChild(p=>{l&&!La(p,r)&&(l=!1)}),l}function Ro(a){return{result:"success",value:a}}function yn(a){return{result:"error",value:a}}function $s(a){return a["property-type"]==="data-driven"||a["property-type"]==="cross-faded-data-driven"}function pl(a){return!!a.expression&&a.expression.parameters.indexOf("zoom")>-1}function CA(a){return!!a.expression&&a.expression.interpolated}function Mr(a){return a instanceof Number?"number":a instanceof String?"string":a instanceof Boolean?"boolean":Array.isArray(a)?"array":a===null?"null":typeof a}function ha(a){return typeof a=="object"&&a!==null&&!Array.isArray(a)}function qn(a){return a}function Sn(a,r){const l=r.type==="color",p=a.stops&&typeof a.stops[0][0]=="object",y=p||!(p||a.property!==void 0),w=a.type||(CA(r)?"exponential":"interval");if(l||r.type==="padding"){const O=l?mr.parse:fi.parse;(a=er({},a)).stops&&(a.stops=a.stops.map(z=>[z[0],O(z[1])])),a.default=O(a.default?a.default:r.default)}if(a.colorSpace&&(b=a.colorSpace)!=="rgb"&&b!=="hcl"&&b!=="lab")throw new Error(`Unknown color space: "${a.colorSpace}"`);var b;let S,L,M;if(w==="exponential")S=zo;else if(w==="interval")S=Fs;else if(w==="categorical"){S=da,L=Object.create(null);for(const O of a.stops)L[O[0]]=O[1];M=typeof a.stops[0][0]}else{if(w!=="identity")throw new Error(`Unknown function type "${w}"`);S=pa}if(p){const O={},z=[];for(let it=0;it<a.stops.length;it++){const lt=a.stops[it],wt=lt[0].zoom;O[wt]===void 0&&(O[wt]={zoom:wt,type:a.type,property:a.property,default:a.default,stops:[]},z.push(wt)),O[wt].stops.push([lt[0].value,lt[1]])}const q=[];for(const it of z)q.push([O[it].zoom,Sn(O[it],r)]);const Y={name:"linear"};return{kind:"composite",interpolationType:Y,interpolationFactor:lr.interpolationFactor.bind(void 0,Y),zoomStops:q.map(it=>it[0]),evaluate:({zoom:it},lt)=>zo({stops:q,base:a.base},r,it).evaluate(it,lt)}}if(y){const O=w==="exponential"?{name:"exponential",base:a.base!==void 0?a.base:1}:null;return{kind:"camera",interpolationType:O,interpolationFactor:lr.interpolationFactor.bind(void 0,O),zoomStops:a.stops.map(z=>z[0]),evaluate:({zoom:z})=>S(a,r,z,L,M)}}return{kind:"source",evaluate(O,z){const q=z&&z.properties?z.properties[a.property]:void 0;return q===void 0?as(a.default,r.default):S(a,r,q,L,M)}}}function as(a,r,l){return a!==void 0?a:r!==void 0?r:l!==void 0?l:void 0}function da(a,r,l,p,y){return as(typeof l===y?p[l]:void 0,a.default,r.default)}function Fs(a,r,l){if(Mr(l)!=="number")return as(a.default,r.default);const p=a.stops.length;if(p===1||l<=a.stops[0][0])return a.stops[0][1];if(l>=a.stops[p-1][0])return a.stops[p-1][1];const y=cA(a.stops.map(w=>w[0]),l);return a.stops[y][1]}function zo(a,r,l){const p=a.base!==void 0?a.base:1;if(Mr(l)!=="number")return as(a.default,r.default);const y=a.stops.length;if(y===1||l<=a.stops[0][0])return a.stops[0][1];if(l>=a.stops[y-1][0])return a.stops[y-1][1];const w=cA(a.stops.map(O=>O[0]),l),b=function(O,z,q,Y){const it=Y-q,lt=O-q;return it===0?0:z===1?lt/it:(Math.pow(z,lt)-1)/(Math.pow(z,it)-1)}(l,p,a.stops[w][0],a.stops[w+1][0]),S=a.stops[w][1],L=a.stops[w+1][1],M=gn[r.type]||qn;return typeof S.evaluate=="function"?{evaluate(...O){const z=S.evaluate.apply(void 0,O),q=L.evaluate.apply(void 0,O);if(z!==void 0&&q!==void 0)return M(z,q,b,a.colorSpace)}}:M(S,L,b,a.colorSpace)}function pa(a,r,l){switch(r.type){case"color":l=mr.parse(l);break;case"formatted":l=yi.fromString(l.toString());break;case"resolvedImage":l=Cn.fromString(l.toString());break;case"padding":l=fi.parse(l);break;default:Mr(l)===r.type||r.type==="enum"&&r.values[l]||(l=void 0)}return as(l,a.default,r.default)}mn.register(ua,{error:[{kind:"error"},[ir],(a,[r])=>{throw new Fi(r.evaluate(a))}],typeof:[ir,[Qe],(a,[r])=>X(Qi(r.evaluate(a)))],"to-rgba":[$(ce,4),[_r],(a,[r])=>{const[l,p,y,w]=r.evaluate(a).rgb;return[255*l,255*p,255*y,w]}],rgb:[_r,[ce,ce,ce],Wi],rgba:[_r,[ce,ce,ce,ce],Wi],has:{type:Pe,overloads:[[[ir],(a,[r])=>eo(r.evaluate(a),a.properties())],[[ir,ni],(a,[r,l])=>eo(r.evaluate(a),l.evaluate(a))]]},get:{type:Qe,overloads:[[[ir],(a,[r])=>ro(r.evaluate(a),a.properties())],[[ir,ni],(a,[r,l])=>ro(r.evaluate(a),l.evaluate(a))]]},"feature-state":[Qe,[ir],(a,[r])=>ro(r.evaluate(a),a.featureState||{})],properties:[ni,[],a=>a.properties()],"geometry-type":[ir,[],a=>a.geometryType()],id:[Qe,[],a=>a.id()],zoom:[ce,[],a=>a.globals.zoom],"heatmap-density":[ce,[],a=>a.globals.heatmapDensity||0],"line-progress":[ce,[],a=>a.globals.lineProgress||0],accumulated:[Qe,[],a=>a.globals.accumulated===void 0?null:a.globals.accumulated],"+":[ce,Cs(ce),(a,r)=>{let l=0;for(const p of r)l+=p.evaluate(a);return l}],"*":[ce,Cs(ce),(a,r)=>{let l=1;for(const p of r)l*=p.evaluate(a);return l}],"-":{type:ce,overloads:[[[ce,ce],(a,[r,l])=>r.evaluate(a)-l.evaluate(a)],[[ce],(a,[r])=>-r.evaluate(a)]]},"/":[ce,[ce,ce],(a,[r,l])=>r.evaluate(a)/l.evaluate(a)],"%":[ce,[ce,ce],(a,[r,l])=>r.evaluate(a)%l.evaluate(a)],ln2:[ce,[],()=>Math.LN2],pi:[ce,[],()=>Math.PI],e:[ce,[],()=>Math.E],"^":[ce,[ce,ce],(a,[r,l])=>Math.pow(r.evaluate(a),l.evaluate(a))],sqrt:[ce,[ce],(a,[r])=>Math.sqrt(r.evaluate(a))],log10:[ce,[ce],(a,[r])=>Math.log(r.evaluate(a))/Math.LN10],ln:[ce,[ce],(a,[r])=>Math.log(r.evaluate(a))],log2:[ce,[ce],(a,[r])=>Math.log(r.evaluate(a))/Math.LN2],sin:[ce,[ce],(a,[r])=>Math.sin(r.evaluate(a))],cos:[ce,[ce],(a,[r])=>Math.cos(r.evaluate(a))],tan:[ce,[ce],(a,[r])=>Math.tan(r.evaluate(a))],asin:[ce,[ce],(a,[r])=>Math.asin(r.evaluate(a))],acos:[ce,[ce],(a,[r])=>Math.acos(r.evaluate(a))],atan:[ce,[ce],(a,[r])=>Math.atan(r.evaluate(a))],min:[ce,Cs(ce),(a,r)=>Math.min(...r.map(l=>l.evaluate(a)))],max:[ce,Cs(ce),(a,r)=>Math.max(...r.map(l=>l.evaluate(a)))],abs:[ce,[ce],(a,[r])=>Math.abs(r.evaluate(a))],round:[ce,[ce],(a,[r])=>{const l=r.evaluate(a);return l<0?-Math.round(-l):Math.round(l)}],floor:[ce,[ce],(a,[r])=>Math.floor(r.evaluate(a))],ceil:[ce,[ce],(a,[r])=>Math.ceil(r.evaluate(a))],"filter-==":[Pe,[ir,Qe],(a,[r,l])=>a.properties()[r.value]===l.value],"filter-id-==":[Pe,[Qe],(a,[r])=>a.id()===r.value],"filter-type-==":[Pe,[ir],(a,[r])=>a.geometryType()===r.value],"filter-<":[Pe,[ir,Qe],(a,[r,l])=>{const p=a.properties()[r.value],y=l.value;return typeof p==typeof y&&p<y}],"filter-id-<":[Pe,[Qe],(a,[r])=>{const l=a.id(),p=r.value;return typeof l==typeof p&&l<p}],"filter->":[Pe,[ir,Qe],(a,[r,l])=>{const p=a.properties()[r.value],y=l.value;return typeof p==typeof y&&p>y}],"filter-id->":[Pe,[Qe],(a,[r])=>{const l=a.id(),p=r.value;return typeof l==typeof p&&l>p}],"filter-<=":[Pe,[ir,Qe],(a,[r,l])=>{const p=a.properties()[r.value],y=l.value;return typeof p==typeof y&&p<=y}],"filter-id-<=":[Pe,[Qe],(a,[r])=>{const l=a.id(),p=r.value;return typeof l==typeof p&&l<=p}],"filter->=":[Pe,[ir,Qe],(a,[r,l])=>{const p=a.properties()[r.value],y=l.value;return typeof p==typeof y&&p>=y}],"filter-id->=":[Pe,[Qe],(a,[r])=>{const l=a.id(),p=r.value;return typeof l==typeof p&&l>=p}],"filter-has":[Pe,[Qe],(a,[r])=>r.value in a.properties()],"filter-has-id":[Pe,[],a=>a.id()!==null&&a.id()!==void 0],"filter-type-in":[Pe,[$(ir)],(a,[r])=>r.value.indexOf(a.geometryType())>=0],"filter-id-in":[Pe,[$(Qe)],(a,[r])=>r.value.indexOf(a.id())>=0],"filter-in-small":[Pe,[ir,$(Qe)],(a,[r,l])=>l.value.indexOf(a.properties()[r.value])>=0],"filter-in-large":[Pe,[ir,$(Qe)],(a,[r,l])=>function(p,y,w,b){for(;w<=b;){const S=w+b>>1;if(y[S]===p)return!0;y[S]>p?b=S-1:w=S+1}return!1}(a.properties()[r.value],l.value,0,l.value.length-1)],all:{type:Pe,overloads:[[[Pe,Pe],(a,[r,l])=>r.evaluate(a)&&l.evaluate(a)],[Cs(Pe),(a,r)=>{for(const l of r)if(!l.evaluate(a))return!1;return!0}]]},any:{type:Pe,overloads:[[[Pe,Pe],(a,[r,l])=>r.evaluate(a)||l.evaluate(a)],[Cs(Pe),(a,r)=>{for(const l of r)if(l.evaluate(a))return!0;return!1}]]},"!":[Pe,[Pe],(a,[r])=>!r.evaluate(a)],"is-supported-script":[Pe,[ir],(a,[r])=>{const l=a.globals&&a.globals.isSupportedScript;return!l||l(r.evaluate(a))}],upcase:[ir,[ir],(a,[r])=>r.evaluate(a).toUpperCase()],downcase:[ir,[ir],(a,[r])=>r.evaluate(a).toLowerCase()],concat:[ir,Cs(Qe),(a,r)=>r.map(l=>vi(l.evaluate(a))).join("")],"resolved-locale":[ir,[mi],(a,[r])=>r.evaluate(a).resolvedLocale()]});class Si{constructor(r,l){var p;this.expression=r,this._warningHistory={},this._evaluator=new fn,this._defaultValue=l?(p=l).type==="color"&&ha(p.default)?new mr(0,0,0,0):p.type==="color"?mr.parse(p.default)||null:p.type==="padding"?fi.parse(p.default)||null:p.type==="variableAnchorOffsetCollection"?pn.parse(p.default)||null:p.default===void 0?null:p.default:null,this._enumValues=l&&l.type==="enum"?l.values:null}evaluateWithoutErrorHandling(r,l,p,y,w,b){return this._evaluator.globals=r,this._evaluator.feature=l,this._evaluator.featureState=p,this._evaluator.canonical=y,this._evaluator.availableImages=w||null,this._evaluator.formattedSection=b,this.expression.evaluate(this._evaluator)}evaluate(r,l,p,y,w,b){this._evaluator.globals=r,this._evaluator.feature=l||null,this._evaluator.featureState=p||null,this._evaluator.canonical=y,this._evaluator.availableImages=w||null,this._evaluator.formattedSection=b||null;try{const S=this.expression.evaluate(this._evaluator);if(S==null||typeof S=="number"&&S!=S)return this._defaultValue;if(this._enumValues&&!(S in this._enumValues))throw new Fi(`Expected value to be one of ${Object.keys(this._enumValues).map(L=>JSON.stringify(L)).join(", ")}, but found ${JSON.stringify(S)} instead.`);return S}catch(S){return this._warningHistory[S.message]||(this._warningHistory[S.message]=!0,typeof console<"u"&&console.warn(S.message)),this._defaultValue}}}function no(a){return Array.isArray(a)&&a.length>0&&typeof a[0]=="string"&&a[0]in ua}function Ki(a,r){const l=new Rs(ua,Ua,[],r?function(y){const w={color:_r,string:ir,number:ce,enum:ir,boolean:Pe,formatted:Kr,padding:si,resolvedImage:Xr,variableAnchorOffsetCollection:yt};return y.type==="array"?$(w[y.value]||Qe,y.length):w[y.type]}(r):void 0),p=l.parse(a,void 0,void 0,void 0,r&&r.type==="string"?{typeAnnotation:"coerce"}:void 0);return p?Ro(new Si(p,r)):yn(l.errors)}class vn{constructor(r,l){this.kind=r,this._styleExpression=l,this.isStateDependent=r!=="constant"&&!io(l.expression)}evaluateWithoutErrorHandling(r,l,p,y,w,b){return this._styleExpression.evaluateWithoutErrorHandling(r,l,p,y,w,b)}evaluate(r,l,p,y,w,b){return this._styleExpression.evaluate(r,l,p,y,w,b)}}class Gs{constructor(r,l,p,y){this.kind=r,this.zoomStops=p,this._styleExpression=l,this.isStateDependent=r!=="camera"&&!io(l.expression),this.interpolationType=y}evaluateWithoutErrorHandling(r,l,p,y,w,b){return this._styleExpression.evaluateWithoutErrorHandling(r,l,p,y,w,b)}evaluate(r,l,p,y,w,b){return this._styleExpression.evaluate(r,l,p,y,w,b)}interpolationFactor(r,l,p){return this.interpolationType?lr.interpolationFactor(this.interpolationType,r,l,p):0}}function FA(a,r){const l=Ki(a,r);if(l.result==="error")return l;const p=l.value.expression,y=en(p);if(!y&&!$s(r))return yn([new or("","data expressions not supported")]);const w=La(p,["zoom"]);if(!w&&!pl(r))return yn([new or("","zoom expressions not supported")]);const b=qs(p);return b||w?b instanceof or?yn([b]):b instanceof lr&&!CA(r)?yn([new or("",'"interpolate" expressions cannot be used with this property')]):Ro(b?new Gs(y?"camera":"composite",l.value,b.labels,b instanceof lr?b.interpolation:void 0):new vn(y?"constant":"source",l.value)):yn([new or("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class fa{constructor(r,l){this._parameters=r,this._specification=l,er(this,Sn(this._parameters,this._specification))}static deserialize(r){return new fa(r._parameters,r._specification)}static serialize(r){return{_parameters:r._parameters,_specification:r._specification}}}function qs(a){let r=null;if(a instanceof zs)r=qs(a.result);else if(a instanceof dA){for(const l of a.args)if(r=qs(l),r)break}else(a instanceof Za||a instanceof lr)&&a.input instanceof mn&&a.input.name==="zoom"&&(r=a);return r instanceof or||a.eachChild(l=>{const p=qs(l);p instanceof or?r=p:!r&&p?r=new or("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):r&&p&&r!==p&&(r=new or("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),r}function ga(a){if(a===!0||a===!1)return!0;if(!Array.isArray(a)||a.length===0)return!1;switch(a[0]){case"has":return a.length>=2&&a[1]!=="$id"&&a[1]!=="$type";case"in":return a.length>=3&&(typeof a[1]!="string"||Array.isArray(a[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return a.length!==3||Array.isArray(a[1])||Array.isArray(a[2]);case"any":case"all":for(const r of a.slice(1))if(!ga(r)&&typeof r!="boolean")return!1;return!0;default:return!0}}const Xs={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Pa(a){if(a==null)return{filter:()=>!0,needGeometry:!1};ga(a)||(a=Ws(a));const r=Ki(a,Xs);if(r.result==="error")throw new Error(r.value.map(l=>`${l.key}: ${l.message}`).join(", "));return{filter:(l,p,y)=>r.value.evaluate(l,p,{},y),needGeometry:so(a)}}function SA(a,r){return a<r?-1:a>r?1:0}function so(a){if(!Array.isArray(a))return!1;if(a[0]==="within"||a[0]==="distance")return!0;for(let r=1;r<a.length;r++)if(so(a[r]))return!0;return!1}function Ws(a){if(!a)return!0;const r=a[0];return a.length<=1?r!=="any":r==="=="?Ho(a[1],a[2],"=="):r==="!="?Dr(Ho(a[1],a[2],"==")):r==="<"||r===">"||r==="<="||r===">="?Ho(a[1],a[2],r):r==="any"?(l=a.slice(1),["any"].concat(l.map(Ws))):r==="all"?["all"].concat(a.slice(1).map(Ws)):r==="none"?["all"].concat(a.slice(1).map(Ws).map(Dr)):r==="in"?In(a[1],a.slice(2)):r==="!in"?Dr(In(a[1],a.slice(2))):r==="has"?En(a[1]):r!=="!has"||Dr(En(a[1]));var l}function Ho(a,r,l){switch(a){case"$type":return[`filter-type-${l}`,r];case"$id":return[`filter-id-${l}`,r];default:return[`filter-${l}`,a,r]}}function In(a,r){if(r.length===0)return!1;switch(a){case"$type":return["filter-type-in",["literal",r]];case"$id":return["filter-id-in",["literal",r]];default:return r.length>200&&!r.some(l=>typeof l!=typeof r[0])?["filter-in-large",a,["literal",r.sort(SA)]]:["filter-in-small",a,["literal",r]]}}function En(a){switch(a){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",a]}}function Dr(a){return["!",a]}function ti(a){const r=typeof a;if(r==="number"||r==="boolean"||r==="string"||a==null)return JSON.stringify(a);if(Array.isArray(a)){let y="[";for(const w of a)y+=`${ti(w)},`;return`${y}]`}const l=Object.keys(a).sort();let p="{";for(let y=0;y<l.length;y++)p+=`${JSON.stringify(l[y])}:${ti(a[l[y]])},`;return`${p}}`}function Mi(a){let r="";for(const l of dr)r+=`/${ti(a[l])}`;return r}function $i(a){const r=a.value;return r?[new oe(a.key,r,"constants have been deprecated as of v8")]:[]}function ai(a){return a instanceof Number||a instanceof String||a instanceof Boolean?a.valueOf():a}function On(a){if(Array.isArray(a))return a.map(On);if(a instanceof Object&&!(a instanceof Number||a instanceof String||a instanceof Boolean)){const r={};for(const l in a)r[l]=On(a[l]);return r}return ai(a)}function rn(a){const r=a.key,l=a.value,p=a.valueSpec||{},y=a.objectElementValidators||{},w=a.style,b=a.styleSpec,S=a.validateSpec;let L=[];const M=Mr(l);if(M!=="object")return[new oe(r,l,`object expected, ${M} found`)];for(const O in l){const z=O.split(".")[0],q=p[z]||p["*"];let Y;if(y[z])Y=y[z];else if(p[z])Y=S;else if(y["*"])Y=y["*"];else{if(!p["*"]){L.push(new oe(r,l[O],`unknown property "${O}"`));continue}Y=S}L=L.concat(Y({key:(r&&`${r}.`)+O,value:l[O],valueSpec:q,style:w,styleSpec:b,object:l,objectKey:O,validateSpec:S},l))}for(const O in p)y[O]||p[O].required&&p[O].default===void 0&&l[O]===void 0&&L.push(new oe(r,l,`missing required property "${O}"`));return L}function ao(a){const r=a.value,l=a.valueSpec,p=a.style,y=a.styleSpec,w=a.key,b=a.arrayElementValidator||a.validateSpec;if(Mr(r)!=="array")return[new oe(w,r,`array expected, ${Mr(r)} found`)];if(l.length&&r.length!==l.length)return[new oe(w,r,`array length ${l.length} expected, length ${r.length} found`)];if(l["min-length"]&&r.length<l["min-length"])return[new oe(w,r,`array length at least ${l["min-length"]} expected, length ${r.length} found`)];let S={type:l.value,values:l.values};y.$version<7&&(S.function=l.function),Mr(l.value)==="object"&&(S=l.value);let L=[];for(let M=0;M<r.length;M++)L=L.concat(b({array:r,arrayIndex:M,value:r[M],valueSpec:S,validateSpec:a.validateSpec,style:p,styleSpec:y,key:`${w}[${M}]`}));return L}function fl(a){const r=a.key,l=a.value,p=a.valueSpec;let y=Mr(l);return y==="number"&&l!=l&&(y="NaN"),y!=="number"?[new oe(r,l,`number expected, ${y} found`)]:"minimum"in p&&l<p.minimum?[new oe(r,l,`${l} is less than the minimum value ${p.minimum}`)]:"maximum"in p&&l>p.maximum?[new oe(r,l,`${l} is greater than the maximum value ${p.maximum}`)]:[]}function Vo(a){const r=a.valueSpec,l=ai(a.value.type);let p,y,w,b={};const S=l!=="categorical"&&a.value.property===void 0,L=!S,M=Mr(a.value.stops)==="array"&&Mr(a.value.stops[0])==="array"&&Mr(a.value.stops[0][0])==="object",O=rn({key:a.key,value:a.value,valueSpec:a.styleSpec.function,validateSpec:a.validateSpec,style:a.style,styleSpec:a.styleSpec,objectElementValidators:{stops:function(Y){if(l==="identity")return[new oe(Y.key,Y.value,'identity function may not have a "stops" property')];let it=[];const lt=Y.value;return it=it.concat(ao({key:Y.key,value:lt,valueSpec:Y.valueSpec,validateSpec:Y.validateSpec,style:Y.style,styleSpec:Y.styleSpec,arrayElementValidator:z})),Mr(lt)==="array"&&lt.length===0&&it.push(new oe(Y.key,lt,"array must have at least one stop")),it},default:function(Y){return Y.validateSpec({key:Y.key,value:Y.value,valueSpec:r,validateSpec:Y.validateSpec,style:Y.style,styleSpec:Y.styleSpec})}}});return l==="identity"&&S&&O.push(new oe(a.key,a.value,'missing required property "property"')),l==="identity"||a.value.stops||O.push(new oe(a.key,a.value,'missing required property "stops"')),l==="exponential"&&a.valueSpec.expression&&!CA(a.valueSpec)&&O.push(new oe(a.key,a.value,"exponential functions not supported")),a.styleSpec.$version>=8&&(L&&!$s(a.valueSpec)?O.push(new oe(a.key,a.value,"property functions not supported")):S&&!pl(a.valueSpec)&&O.push(new oe(a.key,a.value,"zoom functions not supported"))),l!=="categorical"&&!M||a.value.property!==void 0||O.push(new oe(a.key,a.value,'"property" property is required')),O;function z(Y){let it=[];const lt=Y.value,wt=Y.key;if(Mr(lt)!=="array")return[new oe(wt,lt,`array expected, ${Mr(lt)} found`)];if(lt.length!==2)return[new oe(wt,lt,`array length 2 expected, length ${lt.length} found`)];if(M){if(Mr(lt[0])!=="object")return[new oe(wt,lt,`object expected, ${Mr(lt[0])} found`)];if(lt[0].zoom===void 0)return[new oe(wt,lt,"object stop key must have zoom")];if(lt[0].value===void 0)return[new oe(wt,lt,"object stop key must have value")];if(w&&w>ai(lt[0].zoom))return[new oe(wt,lt[0].zoom,"stop zoom values must appear in ascending order")];ai(lt[0].zoom)!==w&&(w=ai(lt[0].zoom),y=void 0,b={}),it=it.concat(rn({key:`${wt}[0]`,value:lt[0],valueSpec:{zoom:{}},validateSpec:Y.validateSpec,style:Y.style,styleSpec:Y.styleSpec,objectElementValidators:{zoom:fl,value:q}}))}else it=it.concat(q({key:`${wt}[0]`,value:lt[0],valueSpec:{},validateSpec:Y.validateSpec,style:Y.style,styleSpec:Y.styleSpec},lt));return no(On(lt[1]))?it.concat([new oe(`${wt}[1]`,lt[1],"expressions are not allowed in function stops.")]):it.concat(Y.validateSpec({key:`${wt}[1]`,value:lt[1],valueSpec:r,validateSpec:Y.validateSpec,style:Y.style,styleSpec:Y.styleSpec}))}function q(Y,it){const lt=Mr(Y.value),wt=ai(Y.value),It=Y.value!==null?Y.value:it;if(p){if(lt!==p)return[new oe(Y.key,It,`${lt} stop domain type must match previous stop domain type ${p}`)]}else p=lt;if(lt!=="number"&&lt!=="string"&&lt!=="boolean")return[new oe(Y.key,It,"stop domain value must be a number, string, or boolean")];if(lt!=="number"&&l!=="categorical"){let Kt=`number expected, ${lt} found`;return $s(r)&&l===void 0&&(Kt+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new oe(Y.key,It,Kt)]}return l!=="categorical"||lt!=="number"||isFinite(wt)&&Math.floor(wt)===wt?l!=="categorical"&&lt==="number"&&y!==void 0&&wt<y?[new oe(Y.key,It,"stop domain values must appear in ascending order")]:(y=wt,l==="categorical"&&wt in b?[new oe(Y.key,It,"stop domain values must be unique")]:(b[wt]=!0,[])):[new oe(Y.key,It,`integer expected, found ${wt}`)]}}function nn(a){const r=(a.expressionContext==="property"?FA:Ki)(On(a.value),a.valueSpec);if(r.result==="error")return r.value.map(p=>new oe(`${a.key}${p.key}`,a.value,p.message));const l=r.value.expression||r.value._styleExpression.expression;if(a.expressionContext==="property"&&a.propertyKey==="text-font"&&!l.outputDefined())return[new oe(a.key,a.value,`Invalid data expression for "${a.propertyKey}". Output values must be contained as literals within the expression.`)];if(a.expressionContext==="property"&&a.propertyType==="layout"&&!io(l))return[new oe(a.key,a.value,'"feature-state" data expressions are not supported with layout properties.')];if(a.expressionContext==="filter"&&!io(l))return[new oe(a.key,a.value,'"feature-state" data expressions are not supported with filters.')];if(a.expressionContext&&a.expressionContext.indexOf("cluster")===0){if(!La(l,["zoom","feature-state"]))return[new oe(a.key,a.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(a.expressionContext==="cluster-initial"&&!en(l))return[new oe(a.key,a.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Gi(a){const r=a.key,l=a.value,p=a.valueSpec,y=[];return Array.isArray(p.values)?p.values.indexOf(ai(l))===-1&&y.push(new oe(r,l,`expected one of [${p.values.join(", ")}], ${JSON.stringify(l)} found`)):Object.keys(p.values).indexOf(ai(l))===-1&&y.push(new oe(r,l,`expected one of [${Object.keys(p.values).join(", ")}], ${JSON.stringify(l)} found`)),y}function IA(a){return ga(On(a.value))?nn(er({},a,{expressionContext:"filter",valueSpec:{value:"boolean"}})):jo(a)}function jo(a){const r=a.value,l=a.key;if(Mr(r)!=="array")return[new oe(l,r,`array expected, ${Mr(r)} found`)];const p=a.styleSpec;let y,w=[];if(r.length<1)return[new oe(l,r,"filter array must have at least 1 element")];switch(w=w.concat(Gi({key:`${l}[0]`,value:r[0],valueSpec:p.filter_operator,style:a.style,styleSpec:a.styleSpec})),ai(r[0])){case"<":case"<=":case">":case">=":r.length>=2&&ai(r[1])==="$type"&&w.push(new oe(l,r,`"$type" cannot be use with operator "${r[0]}"`));case"==":case"!=":r.length!==3&&w.push(new oe(l,r,`filter array for operator "${r[0]}" must have 3 elements`));case"in":case"!in":r.length>=2&&(y=Mr(r[1]),y!=="string"&&w.push(new oe(`${l}[1]`,r[1],`string expected, ${y} found`)));for(let b=2;b<r.length;b++)y=Mr(r[b]),ai(r[1])==="$type"?w=w.concat(Gi({key:`${l}[${b}]`,value:r[b],valueSpec:p.geometry_type,style:a.style,styleSpec:a.styleSpec})):y!=="string"&&y!=="number"&&y!=="boolean"&&w.push(new oe(`${l}[${b}]`,r[b],`string, number, or boolean expected, ${y} found`));break;case"any":case"all":case"none":for(let b=1;b<r.length;b++)w=w.concat(jo({key:`${l}[${b}]`,value:r[b],style:a.style,styleSpec:a.styleSpec}));break;case"has":case"!has":y=Mr(r[1]),r.length!==2?w.push(new oe(l,r,`filter array for "${r[0]}" operator must have 2 elements`)):y!=="string"&&w.push(new oe(`${l}[1]`,r[1],`string expected, ${y} found`))}return w}function ic(a,r){const l=a.key,p=a.validateSpec,y=a.style,w=a.styleSpec,b=a.value,S=a.objectKey,L=w[`${r}_${a.layerType}`];if(!L)return[];const M=S.match(/^(.*)-transition$/);if(r==="paint"&&M&&L[M[1]]&&L[M[1]].transition)return p({key:l,value:b,valueSpec:w.transition,style:y,styleSpec:w});const O=a.valueSpec||L[S];if(!O)return[new oe(l,b,`unknown property "${S}"`)];let z;if(Mr(b)==="string"&&$s(O)&&!O.tokens&&(z=/^{([^}]+)}$/.exec(b)))return[new oe(l,b,`"${S}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(z[1])} }\`.`)];const q=[];return a.layerType==="symbol"&&(S==="text-field"&&y&&!y.glyphs&&q.push(new oe(l,b,'use of "text-field" requires a style "glyphs" property')),S==="text-font"&&ha(On(b))&&ai(b.type)==="identity"&&q.push(new oe(l,b,'"text-font" does not support identity functions'))),q.concat(p({key:a.key,value:b,valueSpec:O,style:y,styleSpec:w,expressionContext:"property",propertyType:r,propertyKey:S}))}function Ko(a){return ic(a,"paint")}function EA(a){return ic(a,"layout")}function gl(a){let r=[];const l=a.value,p=a.key,y=a.style,w=a.styleSpec;l.type||l.ref||r.push(new oe(p,l,'either "type" or "ref" is required'));let b=ai(l.type);const S=ai(l.ref);if(l.id){const L=ai(l.id);for(let M=0;M<a.arrayIndex;M++){const O=y.layers[M];ai(O.id)===L&&r.push(new oe(p,l.id,`duplicate layer id "${l.id}", previously used at line ${O.id.__line__}`))}}if("ref"in l){let L;["type","source","source-layer","filter","layout"].forEach(M=>{M in l&&r.push(new oe(p,l[M],`"${M}" is prohibited for ref layers`))}),y.layers.forEach(M=>{ai(M.id)===S&&(L=M)}),L?L.ref?r.push(new oe(p,l.ref,"ref cannot reference another ref layer")):b=ai(L.type):r.push(new oe(p,l.ref,`ref layer "${S}" not found`))}else if(b!=="background")if(l.source){const L=y.sources&&y.sources[l.source],M=L&&ai(L.type);L?M==="vector"&&b==="raster"?r.push(new oe(p,l.source,`layer "${l.id}" requires a raster source`)):M!=="raster-dem"&&b==="hillshade"?r.push(new oe(p,l.source,`layer "${l.id}" requires a raster-dem source`)):M==="raster"&&b!=="raster"?r.push(new oe(p,l.source,`layer "${l.id}" requires a vector source`)):M!=="vector"||l["source-layer"]?M==="raster-dem"&&b!=="hillshade"?r.push(new oe(p,l.source,"raster-dem source can only be used with layer type 'hillshade'.")):b!=="line"||!l.paint||!l.paint["line-gradient"]||M==="geojson"&&L.lineMetrics||r.push(new oe(p,l,`layer "${l.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):r.push(new oe(p,l,`layer "${l.id}" must specify a "source-layer"`)):r.push(new oe(p,l.source,`source "${l.source}" not found`))}else r.push(new oe(p,l,'missing required property "source"'));return r=r.concat(rn({key:p,value:l,valueSpec:w.layer,style:a.style,styleSpec:a.styleSpec,validateSpec:a.validateSpec,objectElementValidators:{"*":()=>[],type:()=>a.validateSpec({key:`${p}.type`,value:l.type,valueSpec:w.layer.type,style:a.style,styleSpec:a.styleSpec,validateSpec:a.validateSpec,object:l,objectKey:"type"}),filter:IA,layout:L=>rn({layer:l,key:L.key,value:L.value,style:L.style,styleSpec:L.styleSpec,validateSpec:L.validateSpec,objectElementValidators:{"*":M=>EA(er({layerType:b},M))}}),paint:L=>rn({layer:l,key:L.key,value:L.value,style:L.style,styleSpec:L.styleSpec,validateSpec:L.validateSpec,objectElementValidators:{"*":M=>Ko(er({layerType:b},M))}})}})),r}function oo(a){const r=a.value,l=a.key,p=Mr(r);return p!=="string"?[new oe(l,r,`string expected, ${p} found`)]:[]}const TA={promoteId:function({key:a,value:r}){if(Mr(r)==="string")return oo({key:a,value:r});{const l=[];for(const p in r)l.push(...oo({key:`${a}.${p}`,value:r[p]}));return l}}};function $o(a){const r=a.value,l=a.key,p=a.styleSpec,y=a.style,w=a.validateSpec;if(!r.type)return[new oe(l,r,'"type" is required')];const b=ai(r.type);let S;switch(b){case"vector":case"raster":return S=rn({key:l,value:r,valueSpec:p[`source_${b.replace("-","_")}`],style:a.style,styleSpec:p,objectElementValidators:TA,validateSpec:w}),S;case"raster-dem":return S=function(L){var M;const O=(M=L.sourceName)!==null&&M!==void 0?M:"",z=L.value,q=L.styleSpec,Y=q.source_raster_dem,it=L.style;let lt=[];const wt=Mr(z);if(z===void 0)return lt;if(wt!=="object")return lt.push(new oe("source_raster_dem",z,`object expected, ${wt} found`)),lt;const It=ai(z.encoding)==="custom",Kt=["redFactor","greenFactor","blueFactor","baseShift"],Mt=L.value.encoding?`"${L.value.encoding}"`:"Default";for(const Ht in z)!It&&Kt.includes(Ht)?lt.push(new oe(Ht,z[Ht],`In "${O}": "${Ht}" is only valid when "encoding" is set to "custom". ${Mt} encoding found`)):Y[Ht]?lt=lt.concat(L.validateSpec({key:Ht,value:z[Ht],valueSpec:Y[Ht],validateSpec:L.validateSpec,style:it,styleSpec:q})):lt.push(new oe(Ht,z[Ht],`unknown property "${Ht}"`));return lt}({sourceName:l,value:r,style:a.style,styleSpec:p,validateSpec:w}),S;case"geojson":if(S=rn({key:l,value:r,valueSpec:p.source_geojson,style:y,styleSpec:p,validateSpec:w,objectElementValidators:TA}),r.cluster)for(const L in r.clusterProperties){const[M,O]=r.clusterProperties[L],z=typeof M=="string"?[M,["accumulated"],["get",L]]:M;S.push(...nn({key:`${l}.${L}.map`,value:O,validateSpec:w,expressionContext:"cluster-map"})),S.push(...nn({key:`${l}.${L}.reduce`,value:z,validateSpec:w,expressionContext:"cluster-reduce"}))}return S;case"video":return rn({key:l,value:r,valueSpec:p.source_video,style:y,validateSpec:w,styleSpec:p});case"image":return rn({key:l,value:r,valueSpec:p.source_image,style:y,validateSpec:w,styleSpec:p});case"canvas":return[new oe(l,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Gi({key:`${l}.type`,value:r.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:y,validateSpec:w,styleSpec:p})}}function UA(a){const r=a.value,l=a.styleSpec,p=l.light,y=a.style;let w=[];const b=Mr(r);if(r===void 0)return w;if(b!=="object")return w=w.concat([new oe("light",r,`object expected, ${b} found`)]),w;for(const S in r){const L=S.match(/^(.*)-transition$/);w=w.concat(L&&p[L[1]]&&p[L[1]].transition?a.validateSpec({key:S,value:r[S],valueSpec:l.transition,validateSpec:a.validateSpec,style:y,styleSpec:l}):p[S]?a.validateSpec({key:S,value:r[S],valueSpec:p[S],validateSpec:a.validateSpec,style:y,styleSpec:l}):[new oe(S,r[S],`unknown property "${S}"`)])}return w}function ml(a){const r=a.value,l=a.styleSpec,p=l.sky,y=a.style,w=Mr(r);if(r===void 0)return[];if(w!=="object")return[new oe("sky",r,`object expected, ${w} found`)];let b=[];for(const S in r)b=b.concat(p[S]?a.validateSpec({key:S,value:r[S],valueSpec:p[S],style:y,styleSpec:l}):[new oe(S,r[S],`unknown property "${S}"`)]);return b}function Vc(a){const r=a.value,l=a.styleSpec,p=l.terrain,y=a.style;let w=[];const b=Mr(r);if(r===void 0)return w;if(b!=="object")return w=w.concat([new oe("terrain",r,`object expected, ${b} found`)]),w;for(const S in r)w=w.concat(p[S]?a.validateSpec({key:S,value:r[S],valueSpec:p[S],validateSpec:a.validateSpec,style:y,styleSpec:l}):[new oe(S,r[S],`unknown property "${S}"`)]);return w}function jc(a){let r=[];const l=a.value,p=a.key;if(Array.isArray(l)){const y=[],w=[];for(const b in l)l[b].id&&y.includes(l[b].id)&&r.push(new oe(p,l,`all the sprites' ids must be unique, but ${l[b].id} is duplicated`)),y.push(l[b].id),l[b].url&&w.includes(l[b].url)&&r.push(new oe(p,l,`all the sprites' URLs must be unique, but ${l[b].url} is duplicated`)),w.push(l[b].url),r=r.concat(rn({key:`${p}[${b}]`,value:l[b],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:a.validateSpec}));return r}return oo({key:p,value:l})}const yl={"*":()=>[],array:ao,boolean:function(a){const r=a.value,l=a.key,p=Mr(r);return p!=="boolean"?[new oe(l,r,`boolean expected, ${p} found`)]:[]},number:fl,color:function(a){const r=a.key,l=a.value,p=Mr(l);return p!=="string"?[new oe(r,l,`color expected, ${p} found`)]:mr.parse(String(l))?[]:[new oe(r,l,`color expected, "${l}" found`)]},constants:$i,enum:Gi,filter:IA,function:Vo,layer:gl,object:rn,source:$o,light:UA,sky:ml,terrain:Vc,projection:function(a){const r=a.value,l=a.styleSpec,p=l.projection,y=a.style,w=Mr(r);if(r===void 0)return[];if(w!=="object")return[new oe("projection",r,`object expected, ${w} found`)];let b=[];for(const S in r)b=b.concat(p[S]?a.validateSpec({key:S,value:r[S],valueSpec:p[S],style:y,styleSpec:l}):[new oe(S,r[S],`unknown property "${S}"`)]);return b},string:oo,formatted:function(a){return oo(a).length===0?[]:nn(a)},resolvedImage:function(a){return oo(a).length===0?[]:nn(a)},padding:function(a){const r=a.key,l=a.value;if(Mr(l)==="array"){if(l.length<1||l.length>4)return[new oe(r,l,`padding requires 1 to 4 values; ${l.length} values found`)];const p={type:"number"};let y=[];for(let w=0;w<l.length;w++)y=y.concat(a.validateSpec({key:`${r}[${w}]`,value:l[w],validateSpec:a.validateSpec,valueSpec:p}));return y}return fl({key:r,value:l,valueSpec:{}})},variableAnchorOffsetCollection:function(a){const r=a.key,l=a.value,p=Mr(l),y=a.styleSpec;if(p!=="array"||l.length<1||l.length%2!=0)return[new oe(r,l,"variableAnchorOffsetCollection requires a non-empty array of even length")];let w=[];for(let b=0;b<l.length;b+=2)w=w.concat(Gi({key:`${r}[${b}]`,value:l[b],valueSpec:y.layout_symbol["text-anchor"]})),w=w.concat(ao({key:`${r}[${b+1}]`,value:l[b+1],valueSpec:{length:2,value:"number"},validateSpec:a.validateSpec,style:a.style,styleSpec:y}));return w},sprite:jc};function LA(a){const r=a.value,l=a.valueSpec,p=a.styleSpec;return a.validateSpec=LA,l.expression&&ha(ai(r))?Vo(a):l.expression&&no(On(r))?nn(a):l.type&&yl[l.type]?yl[l.type](a):rn(er({},a,{valueSpec:l.type?p[l.type]:l}))}function qu(a){const r=a.value,l=a.key,p=oo(a);return p.length||(r.indexOf("{fontstack}")===-1&&p.push(new oe(l,r,'"glyphs" url must include a "{fontstack}" token')),r.indexOf("{range}")===-1&&p.push(new oe(l,r,'"glyphs" url must include a "{range}" token'))),p}function Ss(a,r=rt){let l=[];return l=l.concat(LA({key:"",value:a,valueSpec:r.$root,styleSpec:r,style:a,validateSpec:LA,objectElementValidators:{glyphs:qu,"*":()=>[]}})),a.constants&&(l=l.concat($i({key:"constants",value:a.constants,style:a,styleSpec:r,validateSpec:LA}))),Kc(l)}function ma(a){return function(r){return a({...r,validateSpec:LA})}}function Kc(a){return[].concat(a).sort((r,l)=>r.line-l.line)}function os(a){return function(...r){return Kc(a.apply(this,r))}}Ss.source=os(ma($o)),Ss.sprite=os(ma(jc)),Ss.glyphs=os(ma(qu)),Ss.light=os(ma(UA)),Ss.sky=os(ma(ml)),Ss.terrain=os(ma(Vc)),Ss.layer=os(ma(gl)),Ss.filter=os(ma(IA)),Ss.paintProperty=os(ma(Ko)),Ss.layoutProperty=os(ma(EA));const Qa=Ss,vl=Qa.light,fd=Qa.sky,Xu=Qa.paintProperty,$c=Qa.layoutProperty;function Gc(a,r){let l=!1;if(r&&r.length)for(const p of r)a.fire(new Ve(new Error(p.message))),l=!0;return l}class PA{constructor(r,l,p){const y=this.cells=[];if(r instanceof ArrayBuffer){this.arrayBuffer=r;const b=new Int32Array(this.arrayBuffer);r=b[0],this.d=(l=b[1])+2*(p=b[2]);for(let L=0;L<this.d*this.d;L++){const M=b[3+L],O=b[3+L+1];y.push(M===O?null:b.subarray(M,O))}const S=b[3+y.length+1];this.keys=b.subarray(b[3+y.length],S),this.bboxes=b.subarray(S),this.insert=this._insertReadonly}else{this.d=l+2*p;for(let b=0;b<this.d*this.d;b++)y.push([]);this.keys=[],this.bboxes=[]}this.n=l,this.extent=r,this.padding=p,this.scale=l/r,this.uid=0;const w=p/l*r;this.min=-w,this.max=r+w}insert(r,l,p,y,w){this._forEachCell(l,p,y,w,this._insertCell,this.uid++,void 0,void 0),this.keys.push(r),this.bboxes.push(l),this.bboxes.push(p),this.bboxes.push(y),this.bboxes.push(w)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(r,l,p,y,w,b){this.cells[w].push(b)}query(r,l,p,y,w){const b=this.min,S=this.max;if(r<=b&&l<=b&&S<=p&&S<=y&&!w)return Array.prototype.slice.call(this.keys);{const L=[];return this._forEachCell(r,l,p,y,this._queryCell,L,{},w),L}}_queryCell(r,l,p,y,w,b,S,L){const M=this.cells[w];if(M!==null){const O=this.keys,z=this.bboxes;for(let q=0;q<M.length;q++){const Y=M[q];if(S[Y]===void 0){const it=4*Y;(L?L(z[it+0],z[it+1],z[it+2],z[it+3]):r<=z[it+2]&&l<=z[it+3]&&p>=z[it+0]&&y>=z[it+1])?(S[Y]=!0,b.push(O[Y])):S[Y]=!1}}}}_forEachCell(r,l,p,y,w,b,S,L){const M=this._convertToCellCoord(r),O=this._convertToCellCoord(l),z=this._convertToCellCoord(p),q=this._convertToCellCoord(y);for(let Y=M;Y<=z;Y++)for(let it=O;it<=q;it++){const lt=this.d*it+Y;if((!L||L(this._convertFromCellCoord(Y),this._convertFromCellCoord(it),this._convertFromCellCoord(Y+1),this._convertFromCellCoord(it+1)))&&w.call(this,r,l,p,y,lt,b,S,L))return}}_convertFromCellCoord(r){return(r-this.padding)/this.scale}_convertToCellCoord(r){return Math.max(0,Math.min(this.d-1,Math.floor(r*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const r=this.cells,l=3+this.cells.length+1+1;let p=0;for(let b=0;b<this.cells.length;b++)p+=this.cells[b].length;const y=new Int32Array(l+p+this.keys.length+this.bboxes.length);y[0]=this.extent,y[1]=this.n,y[2]=this.padding;let w=l;for(let b=0;b<r.length;b++){const S=r[b];y[3+b]=w,y.set(S,w),w+=S.length}return y[3+r.length]=w,y.set(this.keys,w),w+=this.keys.length,y[3+r.length+1]=w,y.set(this.bboxes,w),w+=this.bboxes.length,y.buffer}static serialize(r,l){const p=r.toArrayBuffer();return l&&l.push(p),{buffer:p}}static deserialize(r){return new PA(r.buffer)}}const Is={};function Oe(a,r,l={}){if(Is[a])throw new Error(`${a} is already registered.`);Object.defineProperty(r,"_classRegistryKey",{value:a,writeable:!1}),Is[a]={klass:r,omit:l.omit||[],shallow:l.shallow||[]}}Oe("Object",Object),Oe("TransferableGridIndex",PA),Oe("Color",mr),Oe("Error",Error),Oe("AJAXError",Rt),Oe("ResolvedImage",Cn),Oe("StylePropertyFunction",fa),Oe("StyleExpression",Si,{omit:["_evaluator"]}),Oe("ZoomDependentExpression",Gs),Oe("ZoomConstantExpression",vn),Oe("CompoundExpression",mn,{omit:["_evaluate"]});for(const a in ua)ua[a]._classRegistryKey||Oe(`Expression_${a}`,ua[a]);function Zs(a){return a&&typeof ArrayBuffer<"u"&&(a instanceof ArrayBuffer||a.constructor&&a.constructor.name==="ArrayBuffer")}function As(a){return a.$name||a.constructor._classRegistryKey}function ya(a){return!function(r){if(r===null||typeof r!="object")return!1;const l=As(r);return!(!l||l==="Object")}(a)&&(a==null||typeof a=="boolean"||typeof a=="number"||typeof a=="string"||a instanceof Boolean||a instanceof Number||a instanceof String||a instanceof Date||a instanceof RegExp||a instanceof Blob||a instanceof Error||Zs(a)||jt(a)||ArrayBuffer.isView(a)||a instanceof ImageData)}function QA(a,r){if(ya(a))return(Zs(a)||jt(a))&&r&&r.push(a),ArrayBuffer.isView(a)&&r&&r.push(a.buffer),a instanceof ImageData&&r&&r.push(a.data.buffer),a;if(Array.isArray(a)){const w=[];for(const b of a)w.push(QA(b,r));return w}if(typeof a!="object")throw new Error("can't serialize object of type "+typeof a);const l=As(a);if(!l)throw new Error(`can't serialize object of unregistered class ${a.constructor.name}`);if(!Is[l])throw new Error(`${l} is not registered.`);const{klass:p}=Is[l],y=p.serialize?p.serialize(a,r):{};if(p.serialize){if(r&&y===r[r.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const w in a){if(!a.hasOwnProperty(w)||Is[l].omit.indexOf(w)>=0)continue;const b=a[w];y[w]=Is[l].shallow.indexOf(w)>=0?b:QA(b,r)}a instanceof Error&&(y.message=a.message)}if(y.$name)throw new Error("$name property is reserved for worker serialization logic.");return l!=="Object"&&(y.$name=l),y}function Go(a){if(ya(a))return a;if(Array.isArray(a))return a.map(Go);if(typeof a!="object")throw new Error("can't deserialize object of type "+typeof a);const r=As(a)||"Object";if(!Is[r])throw new Error(`can't deserialize unregistered class ${r}`);const{klass:l}=Is[r];if(!l)throw new Error(`can't deserialize unregistered class ${r}`);if(l.deserialize)return l.deserialize(a);const p=Object.create(l.prototype);for(const y of Object.keys(a)){if(y==="$name")continue;const w=a[y];p[y]=Is[r].shallow.indexOf(y)>=0?w:Go(w)}return p}class va{constructor(){this.first=!0}update(r,l){const p=Math.floor(r);return this.first?(this.first=!1,this.lastIntegerZoom=p,this.lastIntegerZoomTime=0,this.lastZoom=r,this.lastFloorZoom=p,!0):(this.lastFloorZoom>p?(this.lastIntegerZoom=p+1,this.lastIntegerZoomTime=l):this.lastFloorZoom<p&&(this.lastIntegerZoom=p,this.lastIntegerZoomTime=l),r!==this.lastZoom&&(this.lastZoom=r,this.lastFloorZoom=p,!0))}}const Cr={"Latin-1 Supplement":a=>a>=128&&a<=255,"Hangul Jamo":a=>a>=4352&&a<=4607,Khmer:a=>a>=6016&&a<=6143,"General Punctuation":a=>a>=8192&&a<=8303,"Letterlike Symbols":a=>a>=8448&&a<=8527,"Number Forms":a=>a>=8528&&a<=8591,"Miscellaneous Technical":a=>a>=8960&&a<=9215,"Control Pictures":a=>a>=9216&&a<=9279,"Optical Character Recognition":a=>a>=9280&&a<=9311,"Enclosed Alphanumerics":a=>a>=9312&&a<=9471,"Geometric Shapes":a=>a>=9632&&a<=9727,"Miscellaneous Symbols":a=>a>=9728&&a<=9983,"Miscellaneous Symbols and Arrows":a=>a>=11008&&a<=11263,"Ideographic Description Characters":a=>a>=12272&&a<=12287,"CJK Symbols and Punctuation":a=>a>=12288&&a<=12351,Katakana:a=>a>=12448&&a<=12543,Kanbun:a=>a>=12688&&a<=12703,"CJK Strokes":a=>a>=12736&&a<=12783,"Enclosed CJK Letters and Months":a=>a>=12800&&a<=13055,"CJK Compatibility":a=>a>=13056&&a<=13311,"Yijing Hexagram Symbols":a=>a>=19904&&a<=19967,"Private Use Area":a=>a>=57344&&a<=63743,"Vertical Forms":a=>a>=65040&&a<=65055,"CJK Compatibility Forms":a=>a>=65072&&a<=65103,"Small Form Variants":a=>a>=65104&&a<=65135,"Halfwidth and Fullwidth Forms":a=>a>=65280&&a<=65519};function qc(a){for(const r of a)if(Wc(r.charCodeAt(0)))return!0;return!1}function gd(a){for(const r of a)if(!qo(r.charCodeAt(0)))return!1;return!0}function nc(a){const r=a.map(l=>{try{return new RegExp(`\\p{sc=${l}}`,"u").source}catch{return null}}).filter(l=>l);return new RegExp(r.join("|"),"u")}const Wu=nc(["Arab","Dupl","Mong","Ougr","Syrc"]);function qo(a){return!Wu.test(String.fromCodePoint(a))}const Xc=nc(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function Wc(a){return!(a!==746&&a!==747&&(a<4352||!(Cr["CJK Compatibility Forms"](a)&&!(a>=65097&&a<=65103)||Cr["CJK Compatibility"](a)||Cr["CJK Strokes"](a)||!(!Cr["CJK Symbols and Punctuation"](a)||a>=12296&&a<=12305||a>=12308&&a<=12319||a===12336)||Cr["Enclosed CJK Letters and Months"](a)||Cr["Ideographic Description Characters"](a)||Cr.Kanbun(a)||Cr.Katakana(a)&&a!==12540||!(!Cr["Halfwidth and Fullwidth Forms"](a)||a===65288||a===65289||a===65293||a>=65306&&a<=65310||a===65339||a===65341||a===65343||a>=65371&&a<=65503||a===65507||a>=65512&&a<=65519)||!(!Cr["Small Form Variants"](a)||a>=65112&&a<=65118||a>=65123&&a<=65126)||Cr["Vertical Forms"](a)||Cr["Yijing Hexagram Symbols"](a)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(a))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(a))||Xc.test(String.fromCodePoint(a)))))}function wl(a){return!(Wc(a)||function(r){return!!(Cr["Latin-1 Supplement"](r)&&(r===167||r===169||r===174||r===177||r===188||r===189||r===190||r===215||r===247)||Cr["General Punctuation"](r)&&(r===8214||r===8224||r===8225||r===8240||r===8241||r===8251||r===8252||r===8258||r===8263||r===8264||r===8265||r===8273)||Cr["Letterlike Symbols"](r)||Cr["Number Forms"](r)||Cr["Miscellaneous Technical"](r)&&(r>=8960&&r<=8967||r>=8972&&r<=8991||r>=8996&&r<=9e3||r===9003||r>=9085&&r<=9114||r>=9150&&r<=9165||r===9167||r>=9169&&r<=9179||r>=9186&&r<=9215)||Cr["Control Pictures"](r)&&r!==9251||Cr["Optical Character Recognition"](r)||Cr["Enclosed Alphanumerics"](r)||Cr["Geometric Shapes"](r)||Cr["Miscellaneous Symbols"](r)&&!(r>=9754&&r<=9759)||Cr["Miscellaneous Symbols and Arrows"](r)&&(r>=11026&&r<=11055||r>=11088&&r<=11097||r>=11192&&r<=11243)||Cr["CJK Symbols and Punctuation"](r)||Cr.Katakana(r)||Cr["Private Use Area"](r)||Cr["CJK Compatibility Forms"](r)||Cr["Small Form Variants"](r)||Cr["Halfwidth and Fullwidth Forms"](r)||r===8734||r===8756||r===8757||r>=9984&&r<=10087||r>=10102&&r<=10131||r===65532||r===65533)}(a))}const sc=nc(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function Xo(a){return sc.test(String.fromCodePoint(a))}function Zc(a,r){return!(!r&&Xo(a)||a>=2304&&a<=3583||a>=3840&&a<=4255||Cr.Khmer(a))}function Zu(a){for(const r of a)if(Xo(r.charCodeAt(0)))return!0;return!1}const ls=new class{constructor(){this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null}setState(a){this.pluginStatus=a.pluginStatus,this.pluginURL=a.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(a){this.applyArabicShaping=a.applyArabicShaping,this.processBidirectionalText=a.processBidirectionalText,this.processStyledBidirectionalText=a.processStyledBidirectionalText}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getPluginURL(){return this.pluginURL}getRTLTextPluginStatus(){return this.pluginStatus}};class ci{constructor(r,l){this.zoom=r,l?(this.now=l.now,this.fadeDuration=l.fadeDuration,this.zoomHistory=l.zoomHistory,this.transition=l.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new va,this.transition={})}isSupportedScript(r){return function(l,p){for(const y of l)if(!Zc(y.charCodeAt(0),p))return!1;return!0}(r,ls.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const r=this.zoom,l=r-Math.floor(r),p=this.crossFadingFactor();return r>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:l+(1-l)*p}:{fromScale:.5,toScale:1,t:1-(1-p)*l}}}class kA{constructor(r,l){this.property=r,this.value=l,this.expression=function(p,y){if(ha(p))return new fa(p,y);if(no(p)){const w=FA(p,y);if(w.result==="error")throw new Error(w.value.map(b=>`${b.key}: ${b.message}`).join(", "));return w.value}{let w=p;return y.type==="color"&&typeof p=="string"?w=mr.parse(p):y.type!=="padding"||typeof p!="number"&&!Array.isArray(p)?y.type==="variableAnchorOffsetCollection"&&Array.isArray(p)&&(w=pn.parse(p)):w=fi.parse(p),{kind:"constant",evaluate:()=>w}}}(l===void 0?r.specification.default:l,r.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(r,l,p){return this.property.possiblyEvaluate(this,r,l,p)}}class ac{constructor(r){this.property=r,this.value=new kA(r,void 0)}transitioned(r,l){return new Yu(this.property,this.value,l,xt({},r.transition,this.transition),r.now)}untransitioned(){return new Yu(this.property,this.value,null,{},0)}}class oc{constructor(r){this._properties=r,this._values=Object.create(r.defaultTransitionablePropertyValues)}getValue(r){return st(this._values[r].value.value)}setValue(r,l){Object.prototype.hasOwnProperty.call(this._values,r)||(this._values[r]=new ac(this._values[r].property)),this._values[r].value=new kA(this._values[r].property,l===null?void 0:st(l))}getTransition(r){return st(this._values[r].transition)}setTransition(r,l){Object.prototype.hasOwnProperty.call(this._values,r)||(this._values[r]=new ac(this._values[r].property)),this._values[r].transition=st(l)||void 0}serialize(){const r={};for(const l of Object.keys(this._values)){const p=this.getValue(l);p!==void 0&&(r[l]=p);const y=this.getTransition(l);y!==void 0&&(r[`${l}-transition`]=y)}return r}transitioned(r,l){const p=new _l(this._properties);for(const y of Object.keys(this._values))p._values[y]=this._values[y].transitioned(r,l._values[y]);return p}untransitioned(){const r=new _l(this._properties);for(const l of Object.keys(this._values))r._values[l]=this._values[l].untransitioned();return r}}class Yu{constructor(r,l,p,y,w){this.property=r,this.value=l,this.begin=w+y.delay||0,this.end=this.begin+y.duration||0,r.specification.transition&&(y.delay||y.duration)&&(this.prior=p)}possiblyEvaluate(r,l,p){const y=r.now||0,w=this.value.possiblyEvaluate(r,l,p),b=this.prior;if(b){if(y>this.end)return this.prior=null,w;if(this.value.isDataDriven())return this.prior=null,w;if(y<this.begin)return b.possiblyEvaluate(r,l,p);{const S=(y-this.begin)/(this.end-this.begin);return this.property.interpolate(b.possiblyEvaluate(r,l,p),w,function(L){if(L<=0)return 0;if(L>=1)return 1;const M=L*L,O=M*L;return 4*(L<.5?O:3*(L-M)+O-.75)}(S))}}return w}}class _l{constructor(r){this._properties=r,this._values=Object.create(r.defaultTransitioningPropertyValues)}possiblyEvaluate(r,l,p){const y=new Ao(this._properties);for(const w of Object.keys(this._values))y._values[w]=this._values[w].possiblyEvaluate(r,l,p);return y}hasTransition(){for(const r of Object.keys(this._values))if(this._values[r].prior)return!0;return!1}}class bl{constructor(r){this._properties=r,this._values=Object.create(r.defaultPropertyValues)}hasValue(r){return this._values[r].value!==void 0}getValue(r){return st(this._values[r].value)}setValue(r,l){this._values[r]=new kA(this._values[r].property,l===null?void 0:st(l))}serialize(){const r={};for(const l of Object.keys(this._values)){const p=this.getValue(l);p!==void 0&&(r[l]=p)}return r}possiblyEvaluate(r,l,p){const y=new Ao(this._properties);for(const w of Object.keys(this._values))y._values[w]=this._values[w].possiblyEvaluate(r,l,p);return y}}class Ys{constructor(r,l,p){this.property=r,this.value=l,this.parameters=p}isConstant(){return this.value.kind==="constant"}constantOr(r){return this.value.kind==="constant"?this.value.value:r}evaluate(r,l,p,y){return this.property.evaluate(this.value,this.parameters,r,l,p,y)}}class Ao{constructor(r){this._properties=r,this._values=Object.create(r.defaultPossiblyEvaluatedValues)}get(r){return this._values[r]}}class Ge{constructor(r){this.specification=r}possiblyEvaluate(r,l){if(r.isDataDriven())throw new Error("Value should not be data driven");return r.expression.evaluate(l)}interpolate(r,l,p){const y=gn[this.specification.type];return y?y(r,l,p):r}}class hr{constructor(r,l){this.specification=r,this.overrides=l}possiblyEvaluate(r,l,p,y){return new Ys(this,r.expression.kind==="constant"||r.expression.kind==="camera"?{kind:"constant",value:r.expression.evaluate(l,null,{},p,y)}:r.expression,l)}interpolate(r,l,p){if(r.value.kind!=="constant"||l.value.kind!=="constant")return r;if(r.value.value===void 0||l.value.value===void 0)return new Ys(this,{kind:"constant",value:void 0},r.parameters);const y=gn[this.specification.type];if(y){const w=y(r.value.value,l.value.value,p);return new Ys(this,{kind:"constant",value:w},r.parameters)}return r}evaluate(r,l,p,y,w,b){return r.kind==="constant"?r.value:r.evaluate(l,p,y,w,b)}}class xl extends hr{possiblyEvaluate(r,l,p,y){if(r.value===void 0)return new Ys(this,{kind:"constant",value:void 0},l);if(r.expression.kind==="constant"){const w=r.expression.evaluate(l,null,{},p,y),b=r.property.specification.type==="resolvedImage"&&typeof w!="string"?w.name:w,S=this._calculate(b,b,b,l);return new Ys(this,{kind:"constant",value:S},l)}if(r.expression.kind==="camera"){const w=this._calculate(r.expression.evaluate({zoom:l.zoom-1}),r.expression.evaluate({zoom:l.zoom}),r.expression.evaluate({zoom:l.zoom+1}),l);return new Ys(this,{kind:"constant",value:w},l)}return new Ys(this,r.expression,l)}evaluate(r,l,p,y,w,b){if(r.kind==="source"){const S=r.evaluate(l,p,y,w,b);return this._calculate(S,S,S,l)}return r.kind==="composite"?this._calculate(r.evaluate({zoom:Math.floor(l.zoom)-1},p,y),r.evaluate({zoom:Math.floor(l.zoom)},p,y),r.evaluate({zoom:Math.floor(l.zoom)+1},p,y),l):r.value}_calculate(r,l,p,y){return y.zoom>y.zoomHistory.lastIntegerZoom?{from:r,to:l}:{from:p,to:l}}interpolate(r){return r}}class _{constructor(r){this.specification=r}possiblyEvaluate(r,l,p,y){if(r.value!==void 0){if(r.expression.kind==="constant"){const w=r.expression.evaluate(l,null,{},p,y);return this._calculate(w,w,w,l)}return this._calculate(r.expression.evaluate(new ci(Math.floor(l.zoom-1),l)),r.expression.evaluate(new ci(Math.floor(l.zoom),l)),r.expression.evaluate(new ci(Math.floor(l.zoom+1),l)),l)}}_calculate(r,l,p,y){return y.zoom>y.zoomHistory.lastIntegerZoom?{from:r,to:l}:{from:p,to:l}}interpolate(r){return r}}class F{constructor(r){this.specification=r}possiblyEvaluate(r,l,p,y){return!!r.expression.evaluate(l,null,{},p,y)}interpolate(){return!1}}class f{constructor(r){this.properties=r,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const l in r){const p=r[l];p.specification.overridable&&this.overridableProperties.push(l);const y=this.defaultPropertyValues[l]=new kA(p,void 0),w=this.defaultTransitionablePropertyValues[l]=new ac(p);this.defaultTransitioningPropertyValues[l]=w.untransitioned(),this.defaultPossiblyEvaluatedValues[l]=y.possiblyEvaluate({})}}}Oe("DataDrivenProperty",hr),Oe("DataConstantProperty",Ge),Oe("CrossFadedDataDrivenProperty",xl),Oe("CrossFadedProperty",_),Oe("ColorRampProperty",F);const t="-transition";class o extends ie{constructor(r,l){if(super(),this.id=r.id,this.type=r.type,this._featureFilter={filter:()=>!0,needGeometry:!1},r.type!=="custom"&&(this.metadata=r.metadata,this.minzoom=r.minzoom,this.maxzoom=r.maxzoom,r.type!=="background"&&(this.source=r.source,this.sourceLayer=r["source-layer"],this.filter=r.filter),l.layout&&(this._unevaluatedLayout=new bl(l.layout)),l.paint)){this._transitionablePaint=new oc(l.paint);for(const p in r.paint)this.setPaintProperty(p,r.paint[p],{validate:!1});for(const p in r.layout)this.setLayoutProperty(p,r.layout[p],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Ao(l.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(r){return r==="visibility"?this.visibility:this._unevaluatedLayout.getValue(r)}setLayoutProperty(r,l,p={}){l!=null&&this._validate($c,`layers.${this.id}.layout.${r}`,r,l,p)||(r!=="visibility"?this._unevaluatedLayout.setValue(r,l):this.visibility=l)}getPaintProperty(r){return r.endsWith(t)?this._transitionablePaint.getTransition(r.slice(0,-11)):this._transitionablePaint.getValue(r)}setPaintProperty(r,l,p={}){if(l!=null&&this._validate(Xu,`layers.${this.id}.paint.${r}`,r,l,p))return!1;if(r.endsWith(t))return this._transitionablePaint.setTransition(r.slice(0,-11),l||void 0),!1;{const y=this._transitionablePaint._values[r],w=y.property.specification["property-type"]==="cross-faded-data-driven",b=y.value.isDataDriven(),S=y.value;this._transitionablePaint.setValue(r,l),this._handleSpecialPaintPropertyUpdate(r);const L=this._transitionablePaint._values[r].value;return L.isDataDriven()||b||w||this._handleOverridablePaintPropertyUpdate(r,S,L)}}_handleSpecialPaintPropertyUpdate(r){}_handleOverridablePaintPropertyUpdate(r,l,p){return!1}isHidden(r){return!!(this.minzoom&&r<this.minzoom)||!!(this.maxzoom&&r>=this.maxzoom)||this.visibility==="none"}updateTransitions(r){this._transitioningPaint=this._transitionablePaint.transitioned(r,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(r,l){r.getCrossfadeParameters&&(this._crossfadeParameters=r.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(r,void 0,l)),this.paint=this._transitioningPaint.possiblyEvaluate(r,void 0,l)}serialize(){const r={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(r.layout=r.layout||{},r.layout.visibility=this.visibility),Xt(r,(l,p)=>!(l===void 0||p==="layout"&&!Object.keys(l).length||p==="paint"&&!Object.keys(l).length))}_validate(r,l,p,y,w={}){return(!w||w.validate!==!1)&&Gc(this,r.call(Qa,{key:l,layerType:this.type,objectKey:p,value:y,styleSpec:rt,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const r in this.paint._values){const l=this.paint.get(r);if(l instanceof Ys&&$s(l.property.specification)&&(l.value.kind==="source"||l.value.kind==="composite")&&l.value.isStateDependent)return!0}return!1}}const u={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class g{constructor(r,l){this._structArray=r,this._pos1=l*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class m{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(r,l){return r._trim(),l&&(r.isTransferred=!0,l.push(r.arrayBuffer)),{length:r.length,arrayBuffer:r.arrayBuffer}}static deserialize(r){const l=Object.create(this.prototype);return l.arrayBuffer=r.arrayBuffer,l.length=r.length,l.capacity=r.arrayBuffer.byteLength/l.bytesPerElement,l._refreshViews(),l}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(r){this.reserve(r),this.length=r}reserve(r){if(r>this.capacity){this.capacity=Math.max(r,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const l=this.uint8;this._refreshViews(),l&&this.uint8.set(l)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function x(a,r=1){let l=0,p=0;return{members:a.map(y=>{const w=u[y.type].BYTES_PER_ELEMENT,b=l=B(l,Math.max(r,w)),S=y.components||1;return p=Math.max(p,w),l+=w*S,{name:y.name,type:y.type,components:S,offset:b}}),size:B(l,Math.max(p,r)),alignment:r}}function B(a,r){return Math.ceil(a/r)*r}class E extends m{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,l){const p=this.length;return this.resize(p+1),this.emplace(p,r,l)}emplace(r,l,p){const y=2*r;return this.int16[y+0]=l,this.int16[y+1]=p,r}}E.prototype.bytesPerElement=4,Oe("StructArrayLayout2i4",E);class k extends m{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,l,p){const y=this.length;return this.resize(y+1),this.emplace(y,r,l,p)}emplace(r,l,p,y){const w=3*r;return this.int16[w+0]=l,this.int16[w+1]=p,this.int16[w+2]=y,r}}k.prototype.bytesPerElement=6,Oe("StructArrayLayout3i6",k);class N extends m{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,l,p,y){const w=this.length;return this.resize(w+1),this.emplace(w,r,l,p,y)}emplace(r,l,p,y,w){const b=4*r;return this.int16[b+0]=l,this.int16[b+1]=p,this.int16[b+2]=y,this.int16[b+3]=w,r}}N.prototype.bytesPerElement=8,Oe("StructArrayLayout4i8",N);class D extends m{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,l,p,y,w,b){const S=this.length;return this.resize(S+1),this.emplace(S,r,l,p,y,w,b)}emplace(r,l,p,y,w,b,S){const L=6*r;return this.int16[L+0]=l,this.int16[L+1]=p,this.int16[L+2]=y,this.int16[L+3]=w,this.int16[L+4]=b,this.int16[L+5]=S,r}}D.prototype.bytesPerElement=12,Oe("StructArrayLayout2i4i12",D);class j extends m{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,l,p,y,w,b){const S=this.length;return this.resize(S+1),this.emplace(S,r,l,p,y,w,b)}emplace(r,l,p,y,w,b,S){const L=4*r,M=8*r;return this.int16[L+0]=l,this.int16[L+1]=p,this.uint8[M+4]=y,this.uint8[M+5]=w,this.uint8[M+6]=b,this.uint8[M+7]=S,r}}j.prototype.bytesPerElement=8,Oe("StructArrayLayout2i4ub8",j);class G extends m{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,l){const p=this.length;return this.resize(p+1),this.emplace(p,r,l)}emplace(r,l,p){const y=2*r;return this.float32[y+0]=l,this.float32[y+1]=p,r}}G.prototype.bytesPerElement=8,Oe("StructArrayLayout2f8",G);class H extends m{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,l,p,y,w,b,S,L,M,O){const z=this.length;return this.resize(z+1),this.emplace(z,r,l,p,y,w,b,S,L,M,O)}emplace(r,l,p,y,w,b,S,L,M,O,z){const q=10*r;return this.uint16[q+0]=l,this.uint16[q+1]=p,this.uint16[q+2]=y,this.uint16[q+3]=w,this.uint16[q+4]=b,this.uint16[q+5]=S,this.uint16[q+6]=L,this.uint16[q+7]=M,this.uint16[q+8]=O,this.uint16[q+9]=z,r}}H.prototype.bytesPerElement=20,Oe("StructArrayLayout10ui20",H);class W extends m{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,l,p,y,w,b,S,L,M,O,z,q){const Y=this.length;return this.resize(Y+1),this.emplace(Y,r,l,p,y,w,b,S,L,M,O,z,q)}emplace(r,l,p,y,w,b,S,L,M,O,z,q,Y){const it=12*r;return this.int16[it+0]=l,this.int16[it+1]=p,this.int16[it+2]=y,this.int16[it+3]=w,this.uint16[it+4]=b,this.uint16[it+5]=S,this.uint16[it+6]=L,this.uint16[it+7]=M,this.int16[it+8]=O,this.int16[it+9]=z,this.int16[it+10]=q,this.int16[it+11]=Y,r}}W.prototype.bytesPerElement=24,Oe("StructArrayLayout4i4ui4i24",W);class nt extends m{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,l,p){const y=this.length;return this.resize(y+1),this.emplace(y,r,l,p)}emplace(r,l,p,y){const w=3*r;return this.float32[w+0]=l,this.float32[w+1]=p,this.float32[w+2]=y,r}}nt.prototype.bytesPerElement=12,Oe("StructArrayLayout3f12",nt);class ot extends m{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(r){const l=this.length;return this.resize(l+1),this.emplace(l,r)}emplace(r,l){return this.uint32[1*r+0]=l,r}}ot.prototype.bytesPerElement=4,Oe("StructArrayLayout1ul4",ot);class ct extends m{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,l,p,y,w,b,S,L,M){const O=this.length;return this.resize(O+1),this.emplace(O,r,l,p,y,w,b,S,L,M)}emplace(r,l,p,y,w,b,S,L,M,O){const z=10*r,q=5*r;return this.int16[z+0]=l,this.int16[z+1]=p,this.int16[z+2]=y,this.int16[z+3]=w,this.int16[z+4]=b,this.int16[z+5]=S,this.uint32[q+3]=L,this.uint16[z+8]=M,this.uint16[z+9]=O,r}}ct.prototype.bytesPerElement=20,Oe("StructArrayLayout6i1ul2ui20",ct);class At extends m{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,l,p,y,w,b){const S=this.length;return this.resize(S+1),this.emplace(S,r,l,p,y,w,b)}emplace(r,l,p,y,w,b,S){const L=6*r;return this.int16[L+0]=l,this.int16[L+1]=p,this.int16[L+2]=y,this.int16[L+3]=w,this.int16[L+4]=b,this.int16[L+5]=S,r}}At.prototype.bytesPerElement=12,Oe("StructArrayLayout2i2i2i12",At);class gt extends m{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,l,p,y,w){const b=this.length;return this.resize(b+1),this.emplace(b,r,l,p,y,w)}emplace(r,l,p,y,w,b){const S=4*r,L=8*r;return this.float32[S+0]=l,this.float32[S+1]=p,this.float32[S+2]=y,this.int16[L+6]=w,this.int16[L+7]=b,r}}gt.prototype.bytesPerElement=16,Oe("StructArrayLayout2f1f2i16",gt);class Tt extends m{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,l,p,y,w,b){const S=this.length;return this.resize(S+1),this.emplace(S,r,l,p,y,w,b)}emplace(r,l,p,y,w,b,S){const L=16*r,M=4*r,O=8*r;return this.uint8[L+0]=l,this.uint8[L+1]=p,this.float32[M+1]=y,this.float32[M+2]=w,this.int16[O+6]=b,this.int16[O+7]=S,r}}Tt.prototype.bytesPerElement=16,Oe("StructArrayLayout2ub2f2i16",Tt);class St extends m{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,l,p){const y=this.length;return this.resize(y+1),this.emplace(y,r,l,p)}emplace(r,l,p,y){const w=3*r;return this.uint16[w+0]=l,this.uint16[w+1]=p,this.uint16[w+2]=y,r}}St.prototype.bytesPerElement=6,Oe("StructArrayLayout3ui6",St);class ee extends m{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,l,p,y,w,b,S,L,M,O,z,q,Y,it,lt,wt,It){const Kt=this.length;return this.resize(Kt+1),this.emplace(Kt,r,l,p,y,w,b,S,L,M,O,z,q,Y,it,lt,wt,It)}emplace(r,l,p,y,w,b,S,L,M,O,z,q,Y,it,lt,wt,It,Kt){const Mt=24*r,Ht=12*r,re=48*r;return this.int16[Mt+0]=l,this.int16[Mt+1]=p,this.uint16[Mt+2]=y,this.uint16[Mt+3]=w,this.uint32[Ht+2]=b,this.uint32[Ht+3]=S,this.uint32[Ht+4]=L,this.uint16[Mt+10]=M,this.uint16[Mt+11]=O,this.uint16[Mt+12]=z,this.float32[Ht+7]=q,this.float32[Ht+8]=Y,this.uint8[re+36]=it,this.uint8[re+37]=lt,this.uint8[re+38]=wt,this.uint32[Ht+10]=It,this.int16[Mt+22]=Kt,r}}ee.prototype.bytesPerElement=48,Oe("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",ee);class Ae extends m{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,l,p,y,w,b,S,L,M,O,z,q,Y,it,lt,wt,It,Kt,Mt,Ht,re,_e,Ne,fr,De,ke,tr,Ke){const ze=this.length;return this.resize(ze+1),this.emplace(ze,r,l,p,y,w,b,S,L,M,O,z,q,Y,it,lt,wt,It,Kt,Mt,Ht,re,_e,Ne,fr,De,ke,tr,Ke)}emplace(r,l,p,y,w,b,S,L,M,O,z,q,Y,it,lt,wt,It,Kt,Mt,Ht,re,_e,Ne,fr,De,ke,tr,Ke,ze){const le=32*r,rr=16*r;return this.int16[le+0]=l,this.int16[le+1]=p,this.int16[le+2]=y,this.int16[le+3]=w,this.int16[le+4]=b,this.int16[le+5]=S,this.int16[le+6]=L,this.int16[le+7]=M,this.uint16[le+8]=O,this.uint16[le+9]=z,this.uint16[le+10]=q,this.uint16[le+11]=Y,this.uint16[le+12]=it,this.uint16[le+13]=lt,this.uint16[le+14]=wt,this.uint16[le+15]=It,this.uint16[le+16]=Kt,this.uint16[le+17]=Mt,this.uint16[le+18]=Ht,this.uint16[le+19]=re,this.uint16[le+20]=_e,this.uint16[le+21]=Ne,this.uint16[le+22]=fr,this.uint32[rr+12]=De,this.float32[rr+13]=ke,this.float32[rr+14]=tr,this.uint16[le+30]=Ke,this.uint16[le+31]=ze,r}}Ae.prototype.bytesPerElement=64,Oe("StructArrayLayout8i15ui1ul2f2ui64",Ae);class he extends m{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r){const l=this.length;return this.resize(l+1),this.emplace(l,r)}emplace(r,l){return this.float32[1*r+0]=l,r}}he.prototype.bytesPerElement=4,Oe("StructArrayLayout1f4",he);class ge extends m{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,l,p){const y=this.length;return this.resize(y+1),this.emplace(y,r,l,p)}emplace(r,l,p,y){const w=3*r;return this.uint16[6*r+0]=l,this.float32[w+1]=p,this.float32[w+2]=y,r}}ge.prototype.bytesPerElement=12,Oe("StructArrayLayout1ui2f12",ge);class pe extends m{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,l,p){const y=this.length;return this.resize(y+1),this.emplace(y,r,l,p)}emplace(r,l,p,y){const w=4*r;return this.uint32[2*r+0]=l,this.uint16[w+2]=p,this.uint16[w+3]=y,r}}pe.prototype.bytesPerElement=8,Oe("StructArrayLayout1ul2ui8",pe);class de extends m{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,l){const p=this.length;return this.resize(p+1),this.emplace(p,r,l)}emplace(r,l,p){const y=2*r;return this.uint16[y+0]=l,this.uint16[y+1]=p,r}}de.prototype.bytesPerElement=4,Oe("StructArrayLayout2ui4",de);class ye extends m{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r){const l=this.length;return this.resize(l+1),this.emplace(l,r)}emplace(r,l){return this.uint16[1*r+0]=l,r}}ye.prototype.bytesPerElement=2,Oe("StructArrayLayout1ui2",ye);class $e extends m{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,l,p,y){const w=this.length;return this.resize(w+1),this.emplace(w,r,l,p,y)}emplace(r,l,p,y,w){const b=4*r;return this.float32[b+0]=l,this.float32[b+1]=p,this.float32[b+2]=y,this.float32[b+3]=w,r}}$e.prototype.bytesPerElement=16,Oe("StructArrayLayout4f16",$e);class Be extends g{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new T(this.anchorPointX,this.anchorPointY)}}Be.prototype.size=20;class Ce extends ct{get(r){return new Be(this,r)}}Oe("CollisionBoxArray",Ce);class Je extends g{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(r){this._structArray.uint8[this._pos1+37]=r}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(r){this._structArray.uint8[this._pos1+38]=r}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(r){this._structArray.uint32[this._pos4+10]=r}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Je.prototype.size=48;class yr extends ee{get(r){return new Je(this,r)}}Oe("PlacedSymbolArray",yr);class pr extends g{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(r){this._structArray.uint32[this._pos4+12]=r}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}pr.prototype.size=64;class xr extends Ae{get(r){return new pr(this,r)}}Oe("SymbolInstanceArray",xr);class Lr extends he{getoffsetX(r){return this.float32[1*r+0]}}Oe("GlyphOffsetArray",Lr);class ei extends k{getx(r){return this.int16[3*r+0]}gety(r){return this.int16[3*r+1]}gettileUnitDistanceFromAnchor(r){return this.int16[3*r+2]}}Oe("SymbolLineVertexArray",ei);class _i extends g{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}_i.prototype.size=12;class Gr extends ge{get(r){return new _i(this,r)}}Oe("TextAnchorOffsetArray",Gr);class Ui extends g{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Ui.prototype.size=8;class ri extends pe{get(r){return new Ui(this,r)}}Oe("FeatureIndexArray",ri);class Ii extends E{}class zi extends E{}class Rn extends E{}class cs extends D{}class bi extends j{}class lo extends G{}class us extends H{}class Bl extends W{}class MA extends nt{}class Tn extends ot{}class zn extends At{}class sn extends Tt{}class Un extends St{}class Di extends de{}const wn=x([{name:"a_pos",components:2,type:"Int16"}],4),{members:Ln}=wn;class Hr{constructor(r=[]){this.segments=r}prepareSegment(r,l,p,y){let w=this.segments[this.segments.length-1];return r>Hr.MAX_VERTEX_ARRAY_LENGTH&&mt(`Max vertices per segment is ${Hr.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${r}`),(!w||w.vertexLength+r>Hr.MAX_VERTEX_ARRAY_LENGTH||w.sortKey!==y)&&(w={vertexOffset:l.length,primitiveOffset:p.length,vertexLength:0,primitiveLength:0},y!==void 0&&(w.sortKey=y),this.segments.push(w)),w}get(){return this.segments}destroy(){for(const r of this.segments)for(const l in r.vaos)r.vaos[l].destroy()}static simpleSegment(r,l,p,y){return new Hr([{vertexOffset:r,primitiveOffset:l,vertexLength:p,primitiveLength:y,vaos:{},sortKey:0}])}}function wa(a,r){return 256*(a=Lt(Math.floor(a),0,255))+Lt(Math.floor(r),0,255)}Hr.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Oe("SegmentVector",Hr);const co=x([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var ka={exports:{}},DA={exports:{}};DA.exports=function(a,r){var l,p,y,w,b,S,L,M;for(p=a.length-(l=3&a.length),y=r,b=3432918353,S=461845907,M=0;M<p;)L=255&a.charCodeAt(M)|(255&a.charCodeAt(++M))<<8|(255&a.charCodeAt(++M))<<16|(255&a.charCodeAt(++M))<<24,++M,y=27492+(65535&(w=5*(65535&(y=(y^=L=(65535&(L=(L=(65535&L)*b+(((L>>>16)*b&65535)<<16)&4294967295)<<15|L>>>17))*S+(((L>>>16)*S&65535)<<16)&4294967295)<<13|y>>>19))+((5*(y>>>16)&65535)<<16)&4294967295))+((58964+(w>>>16)&65535)<<16);switch(L=0,l){case 3:L^=(255&a.charCodeAt(M+2))<<16;case 2:L^=(255&a.charCodeAt(M+1))<<8;case 1:y^=L=(65535&(L=(L=(65535&(L^=255&a.charCodeAt(M)))*b+(((L>>>16)*b&65535)<<16)&4294967295)<<15|L>>>17))*S+(((L>>>16)*S&65535)<<16)&4294967295}return y^=a.length,y=2246822507*(65535&(y^=y>>>16))+((2246822507*(y>>>16)&65535)<<16)&4294967295,y=3266489909*(65535&(y^=y>>>13))+((3266489909*(y>>>16)&65535)<<16)&4294967295,(y^=y>>>16)>>>0};var md=DA.exports,Ju={exports:{}};Ju.exports=function(a,r){for(var l,p=a.length,y=r^p,w=0;p>=4;)l=1540483477*(65535&(l=255&a.charCodeAt(w)|(255&a.charCodeAt(++w))<<8|(255&a.charCodeAt(++w))<<16|(255&a.charCodeAt(++w))<<24))+((1540483477*(l>>>16)&65535)<<16),y=1540483477*(65535&y)+((1540483477*(y>>>16)&65535)<<16)^(l=1540483477*(65535&(l^=l>>>24))+((1540483477*(l>>>16)&65535)<<16)),p-=4,++w;switch(p){case 3:y^=(255&a.charCodeAt(w+2))<<16;case 2:y^=(255&a.charCodeAt(w+1))<<8;case 1:y=1540483477*(65535&(y^=255&a.charCodeAt(w)))+((1540483477*(y>>>16)&65535)<<16)}return y=1540483477*(65535&(y^=y>>>13))+((1540483477*(y>>>16)&65535)<<16),(y^=y>>>15)>>>0};var _a=md,Ma=Ju.exports;ka.exports=_a,ka.exports.murmur3=_a,ka.exports.murmur2=Ma;var Ac=v(ka.exports);class Cl{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(r,l,p,y){this.ids.push(lc(r)),this.positions.push(l,p,y)}getPositions(r){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const l=lc(r);let p=0,y=this.ids.length-1;for(;p<y;){const b=p+y>>1;this.ids[b]>=l?y=b:p=b+1}const w=[];for(;this.ids[p]===l;)w.push({index:this.positions[3*p],start:this.positions[3*p+1],end:this.positions[3*p+2]}),p++;return w}static serialize(r,l){const p=new Float64Array(r.ids),y=new Uint32Array(r.positions);return Fl(p,y,0,p.length-1),l&&l.push(p.buffer,y.buffer),{ids:p,positions:y}}static deserialize(r){const l=new Cl;return l.ids=r.ids,l.positions=r.positions,l.indexed=!0,l}}function lc(a){const r=+a;return!isNaN(r)&&r<=Number.MAX_SAFE_INTEGER?r:Ac(String(a))}function Fl(a,r,l,p){for(;l<p;){const y=a[l+p>>1];let w=l-1,b=p+1;for(;;){do w++;while(a[w]<y);do b--;while(a[b]>y);if(w>=b)break;Da(a,w,b),Da(r,3*w,3*b),Da(r,3*w+1,3*b+1),Da(r,3*w+2,3*b+2)}b-l<p-b?(Fl(a,r,l,b),l=b+1):(Fl(a,r,b+1,p),p=b)}}function Da(a,r,l){const p=a[r];a[r]=a[l],a[l]=p}Oe("FeaturePositionMap",Cl);class NA{constructor(r,l){this.gl=r.gl,this.location=l}}class Yc extends NA{constructor(r,l){super(r,l),this.current=0}set(r){this.current!==r&&(this.current=r,this.gl.uniform1f(this.location,r))}}class Jc extends NA{constructor(r,l){super(r,l),this.current=[0,0,0,0]}set(r){r[0]===this.current[0]&&r[1]===this.current[1]&&r[2]===this.current[2]&&r[3]===this.current[3]||(this.current=r,this.gl.uniform4f(this.location,r[0],r[1],r[2],r[3]))}}class th extends NA{constructor(r,l){super(r,l),this.current=mr.transparent}set(r){r.r===this.current.r&&r.g===this.current.g&&r.b===this.current.b&&r.a===this.current.a||(this.current=r,this.gl.uniform4f(this.location,r.r,r.g,r.b,r.a))}}const tu=new Float32Array(16);function eh(a){return[wa(255*a.r,255*a.g),wa(255*a.b,255*a.a)]}class eu{constructor(r,l,p){this.value=r,this.uniformNames=l.map(y=>`u_${y}`),this.type=p}setUniform(r,l,p){r.set(p.constantOr(this.value))}getBinding(r,l,p){return this.type==="color"?new th(r,l):new Yc(r,l)}}class Wo{constructor(r,l){this.uniformNames=l.map(p=>`u_${p}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(r,l){this.pixelRatioFrom=l.pixelRatio,this.pixelRatioTo=r.pixelRatio,this.patternFrom=l.tlbr,this.patternTo=r.tlbr}setUniform(r,l,p,y){const w=y==="u_pattern_to"?this.patternTo:y==="u_pattern_from"?this.patternFrom:y==="u_pixel_ratio_to"?this.pixelRatioTo:y==="u_pixel_ratio_from"?this.pixelRatioFrom:null;w&&r.set(w)}getBinding(r,l,p){return p.substr(0,9)==="u_pattern"?new Jc(r,l):new Yc(r,l)}}class uo{constructor(r,l,p,y){this.expression=r,this.type=p,this.maxValue=0,this.paintVertexAttributes=l.map(w=>({name:`a_${w}`,type:"Float32",components:p==="color"?2:1,offset:0})),this.paintVertexArray=new y}populatePaintArray(r,l,p,y,w){const b=this.paintVertexArray.length,S=this.expression.evaluate(new ci(0),l,{},y,[],w);this.paintVertexArray.resize(r),this._setPaintValue(b,r,S)}updatePaintArray(r,l,p,y){const w=this.expression.evaluate({zoom:0},p,y);this._setPaintValue(r,l,w)}_setPaintValue(r,l,p){if(this.type==="color"){const y=eh(p);for(let w=r;w<l;w++)this.paintVertexArray.emplace(w,y[0],y[1])}else{for(let y=r;y<l;y++)this.paintVertexArray.emplace(y,p);this.maxValue=Math.max(this.maxValue,Math.abs(p))}}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Js{constructor(r,l,p,y,w,b){this.expression=r,this.uniformNames=l.map(S=>`u_${S}_t`),this.type=p,this.useIntegerZoom=y,this.zoom=w,this.maxValue=0,this.paintVertexAttributes=l.map(S=>({name:`a_${S}`,type:"Float32",components:p==="color"?4:2,offset:0})),this.paintVertexArray=new b}populatePaintArray(r,l,p,y,w){const b=this.expression.evaluate(new ci(this.zoom),l,{},y,[],w),S=this.expression.evaluate(new ci(this.zoom+1),l,{},y,[],w),L=this.paintVertexArray.length;this.paintVertexArray.resize(r),this._setPaintValue(L,r,b,S)}updatePaintArray(r,l,p,y){const w=this.expression.evaluate({zoom:this.zoom},p,y),b=this.expression.evaluate({zoom:this.zoom+1},p,y);this._setPaintValue(r,l,w,b)}_setPaintValue(r,l,p,y){if(this.type==="color"){const w=eh(p),b=eh(y);for(let S=r;S<l;S++)this.paintVertexArray.emplace(S,w[0],w[1],b[0],b[1])}else{for(let w=r;w<l;w++)this.paintVertexArray.emplace(w,p,y);this.maxValue=Math.max(this.maxValue,Math.abs(p),Math.abs(y))}}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(r,l){const p=this.useIntegerZoom?Math.floor(l.zoom):l.zoom,y=Lt(this.expression.interpolationFactor(p,this.zoom,this.zoom+1),0,1);r.set(y)}getBinding(r,l,p){return new Yc(r,l)}}class hs{constructor(r,l,p,y,w,b){this.expression=r,this.type=l,this.useIntegerZoom=p,this.zoom=y,this.layerId=b,this.zoomInPaintVertexArray=new w,this.zoomOutPaintVertexArray=new w}populatePaintArray(r,l,p){const y=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(r),this.zoomOutPaintVertexArray.resize(r),this._setPaintValues(y,r,l.patterns&&l.patterns[this.layerId],p)}updatePaintArray(r,l,p,y,w){this._setPaintValues(r,l,p.patterns&&p.patterns[this.layerId],w)}_setPaintValues(r,l,p,y){if(!y||!p)return;const{min:w,mid:b,max:S}=p,L=y[w],M=y[b],O=y[S];if(L&&M&&O)for(let z=r;z<l;z++)this.zoomInPaintVertexArray.emplace(z,M.tl[0],M.tl[1],M.br[0],M.br[1],L.tl[0],L.tl[1],L.br[0],L.br[1],M.pixelRatio,L.pixelRatio),this.zoomOutPaintVertexArray.emplace(z,M.tl[0],M.tl[1],M.br[0],M.br[1],O.tl[0],O.tl[1],O.br[0],O.br[1],M.pixelRatio,O.pixelRatio)}upload(r){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=r.createVertexBuffer(this.zoomInPaintVertexArray,co.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=r.createVertexBuffer(this.zoomOutPaintVertexArray,co.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class yd{constructor(r,l,p){this.binders={},this._buffers=[];const y=[];for(const w in r.paint._values){if(!p(w))continue;const b=r.paint.get(w);if(!(b instanceof Ys&&$s(b.property.specification)))continue;const S=uy(w,r.type),L=b.value,M=b.property.specification.type,O=b.property.useIntegerZoom,z=b.property.specification["property-type"],q=z==="cross-faded"||z==="cross-faded-data-driven";if(L.kind==="constant")this.binders[w]=q?new Wo(L.value,S):new eu(L.value,S,M),y.push(`/u_${w}`);else if(L.kind==="source"||q){const Y=vd(w,M,"source");this.binders[w]=q?new hs(L,M,O,l,Y,r.id):new uo(L,S,M,Y),y.push(`/a_${w}`)}else{const Y=vd(w,M,"composite");this.binders[w]=new Js(L,S,M,O,l,Y),y.push(`/z_${w}`)}}this.cacheKey=y.sort().join("")}getMaxValue(r){const l=this.binders[r];return l instanceof uo||l instanceof Js?l.maxValue:0}populatePaintArrays(r,l,p,y,w){for(const b in this.binders){const S=this.binders[b];(S instanceof uo||S instanceof Js||S instanceof hs)&&S.populatePaintArray(r,l,p,y,w)}}setConstantPatternPositions(r,l){for(const p in this.binders){const y=this.binders[p];y instanceof Wo&&y.setConstantPatternPositions(r,l)}}updatePaintArrays(r,l,p,y,w){let b=!1;for(const S in r){const L=l.getPositions(S);for(const M of L){const O=p.feature(M.index);for(const z in this.binders){const q=this.binders[z];if((q instanceof uo||q instanceof Js||q instanceof hs)&&q.expression.isStateDependent===!0){const Y=y.paint.get(z);q.expression=Y.value,q.updatePaintArray(M.start,M.end,O,r[S],w),b=!0}}}}return b}defines(){const r=[];for(const l in this.binders){const p=this.binders[l];(p instanceof eu||p instanceof Wo)&&r.push(...p.uniformNames.map(y=>`#define HAS_UNIFORM_${y}`))}return r}getBinderAttributes(){const r=[];for(const l in this.binders){const p=this.binders[l];if(p instanceof uo||p instanceof Js)for(let y=0;y<p.paintVertexAttributes.length;y++)r.push(p.paintVertexAttributes[y].name);else if(p instanceof hs)for(let y=0;y<co.members.length;y++)r.push(co.members[y].name)}return r}getBinderUniforms(){const r=[];for(const l in this.binders){const p=this.binders[l];if(p instanceof eu||p instanceof Wo||p instanceof Js)for(const y of p.uniformNames)r.push(y)}return r}getPaintVertexBuffers(){return this._buffers}getUniforms(r,l){const p=[];for(const y in this.binders){const w=this.binders[y];if(w instanceof eu||w instanceof Wo||w instanceof Js){for(const b of w.uniformNames)if(l[b]){const S=w.getBinding(r,l[b],b);p.push({name:b,property:y,binding:S})}}}return p}setUniforms(r,l,p,y){for(const{name:w,property:b,binding:S}of l)this.binders[b].setUniform(S,y,p.get(b),w)}updatePaintBuffers(r){this._buffers=[];for(const l in this.binders){const p=this.binders[l];if(r&&p instanceof hs){const y=r.fromScale===2?p.zoomInPaintVertexBuffer:p.zoomOutPaintVertexBuffer;y&&this._buffers.push(y)}else(p instanceof uo||p instanceof Js)&&p.paintVertexBuffer&&this._buffers.push(p.paintVertexBuffer)}}upload(r){for(const l in this.binders){const p=this.binders[l];(p instanceof uo||p instanceof Js||p instanceof hs)&&p.upload(r)}this.updatePaintBuffers()}destroy(){for(const r in this.binders){const l=this.binders[r];(l instanceof uo||l instanceof Js||l instanceof hs)&&l.destroy()}}}class OA{constructor(r,l,p=()=>!0){this.programConfigurations={};for(const y of r)this.programConfigurations[y.id]=new yd(y,l,p);this.needsUpload=!1,this._featureMap=new Cl,this._bufferOffset=0}populatePaintArrays(r,l,p,y,w,b){for(const S in this.programConfigurations)this.programConfigurations[S].populatePaintArrays(r,l,y,w,b);l.id!==void 0&&this._featureMap.add(l.id,p,this._bufferOffset,r),this._bufferOffset=r,this.needsUpload=!0}updatePaintArrays(r,l,p,y){for(const w of p)this.needsUpload=this.programConfigurations[w.id].updatePaintArrays(r,this._featureMap,l,w,y)||this.needsUpload}get(r){return this.programConfigurations[r]}upload(r){if(this.needsUpload){for(const l in this.programConfigurations)this.programConfigurations[l].upload(r);this.needsUpload=!1}}destroy(){for(const r in this.programConfigurations)this.programConfigurations[r].destroy()}}function uy(a,r){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[a]||[a.replace(`${r}-`,"").replace(/-/g,"_")]}function vd(a,r,l){const p={color:{source:G,composite:$e},number:{source:he,composite:G}},y=function(w){return{"line-pattern":{source:us,composite:us},"fill-pattern":{source:us,composite:us},"fill-extrusion-pattern":{source:us,composite:us}}[w]}(a);return y&&y[l]||p[r][l]}Oe("ConstantBinder",eu),Oe("CrossFadedConstantBinder",Wo),Oe("SourceExpressionBinder",uo),Oe("CrossFadedCompositeBinder",hs),Oe("CompositeExpressionBinder",Js),Oe("ProgramConfiguration",yd,{omit:["_buffers"]}),Oe("ProgramConfigurationSet",OA);const xi=8192,wd=Math.pow(2,14)-1,_d=-wd-1;function Sl(a){const r=xi/a.extent,l=a.loadGeometry();for(let p=0;p<l.length;p++){const y=l[p];for(let w=0;w<y.length;w++){const b=y[w],S=Math.round(b.x*r),L=Math.round(b.y*r);b.x=Lt(S,_d,wd),b.y=Lt(L,_d,wd),(S<b.x||S>b.x+1||L<b.y||L>b.y+1)&&mt("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return l}function RA(a,r){return{type:a.type,id:a.id,properties:a.properties,geometry:r?Sl(a):[]}}function rh(a,r,l,p,y){a.emplaceBack(2*r+(p+1)/2,2*l+(y+1)/2)}class Il{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(l=>l.id),this.index=r.index,this.hasPattern=!1,this.layoutVertexArray=new zi,this.indexArray=new Un,this.segments=new Hr,this.programConfigurations=new OA(r.layers,r.zoom),this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(r,l,p){const y=this.layers[0],w=[];let b=null,S=!1;y.type==="circle"&&(b=y.layout.get("circle-sort-key"),S=!b.isConstant());for(const{feature:L,id:M,index:O,sourceLayerIndex:z}of r){const q=this.layers[0]._featureFilter.needGeometry,Y=RA(L,q);if(!this.layers[0]._featureFilter.filter(new ci(this.zoom),Y,p))continue;const it=S?b.evaluate(Y,{},p):void 0,lt={id:M,properties:L.properties,type:L.type,sourceLayerIndex:z,index:O,geometry:q?Y.geometry:Sl(L),patterns:{},sortKey:it};w.push(lt)}S&&w.sort((L,M)=>L.sortKey-M.sortKey);for(const L of w){const{geometry:M,index:O,sourceLayerIndex:z}=L,q=r[O].feature;this.addFeature(L,M,O,p),l.featureIndex.insert(q,M,O,z,this.index)}}update(r,l,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,l,this.stateDependentLayers,p)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,Ln),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(r,l,p,y){for(const w of l)for(const b of w){const S=b.x,L=b.y;if(S<0||S>=xi||L<0||L>=xi)continue;const M=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,r.sortKey),O=M.vertexLength;rh(this.layoutVertexArray,S,L,-1,-1),rh(this.layoutVertexArray,S,L,1,-1),rh(this.layoutVertexArray,S,L,1,1),rh(this.layoutVertexArray,S,L,-1,1),this.indexArray.emplaceBack(O,O+1,O+2),this.indexArray.emplaceBack(O,O+3,O+2),M.vertexLength+=4,M.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,p,{},y)}}function ih(a,r){for(let l=0;l<a.length;l++)if(HA(r,a[l]))return!0;for(let l=0;l<r.length;l++)if(HA(a,r[l]))return!0;return!!po(a,r)}function nh(a,r,l){return!!HA(a,r)||!!ru(r,a,l)}function ho(a,r){if(a.length===1)return Wf(r,a[0]);for(let l=0;l<r.length;l++){const p=r[l];for(let y=0;y<p.length;y++)if(HA(a,p[y]))return!0}for(let l=0;l<a.length;l++)if(Wf(r,a[l]))return!0;for(let l=0;l<r.length;l++)if(po(a,r[l]))return!0;return!1}function zA(a,r,l){if(a.length>1){if(po(a,r))return!0;for(let p=0;p<r.length;p++)if(ru(r[p],a,l))return!0}for(let p=0;p<a.length;p++)if(ru(a[p],r,l))return!0;return!1}function po(a,r){if(a.length===0||r.length===0)return!1;for(let l=0;l<a.length-1;l++){const p=a[l],y=a[l+1];for(let w=0;w<r.length-1;w++)if(sh(p,y,r[w],r[w+1]))return!0}return!1}function sh(a,r,l,p){return vt(a,l,p)!==vt(r,l,p)&&vt(a,r,l)!==vt(a,r,p)}function ru(a,r,l){const p=l*l;if(r.length===1)return a.distSqr(r[0])<p;for(let y=1;y<r.length;y++)if(bd(a,r[y-1],r[y])<p)return!0;return!1}function bd(a,r,l){const p=r.distSqr(l);if(p===0)return a.distSqr(r);const y=((a.x-r.x)*(l.x-r.x)+(a.y-r.y)*(l.y-r.y))/p;return a.distSqr(y<0?r:y>1?l:l.sub(r)._mult(y)._add(r))}function Wf(a,r){let l,p,y,w=!1;for(let b=0;b<a.length;b++){l=a[b];for(let S=0,L=l.length-1;S<l.length;L=S++)p=l[S],y=l[L],p.y>r.y!=y.y>r.y&&r.x<(y.x-p.x)*(r.y-p.y)/(y.y-p.y)+p.x&&(w=!w)}return w}function HA(a,r){let l=!1;for(let p=0,y=a.length-1;p<a.length;y=p++){const w=a[p],b=a[y];w.y>r.y!=b.y>r.y&&r.x<(b.x-w.x)*(r.y-w.y)/(b.y-w.y)+w.x&&(l=!l)}return l}function xd(a,r,l){const p=l[0],y=l[2];if(a.x<p.x&&r.x<p.x||a.x>y.x&&r.x>y.x||a.y<p.y&&r.y<p.y||a.y>y.y&&r.y>y.y)return!1;const w=vt(a,r,l[0]);return w!==vt(a,r,l[1])||w!==vt(a,r,l[2])||w!==vt(a,r,l[3])}function Bd(a,r,l){const p=r.paint.get(a).value;return p.kind==="constant"?p.value:l.programConfigurations.get(r.id).getMaxValue(a)}function Zf(a){return Math.sqrt(a[0]*a[0]+a[1]*a[1])}function Yf(a,r,l,p,y){if(!r[0]&&!r[1])return a;const w=T.convert(r)._mult(y);l==="viewport"&&w._rotate(-p);const b=[];for(let S=0;S<a.length;S++)b.push(a[S].sub(w));return b}let L5,P5;Oe("CircleBucket",Il,{omit:["layers"]});var w7={get paint(){return P5=P5||new f({"circle-radius":new hr(rt.paint_circle["circle-radius"]),"circle-color":new hr(rt.paint_circle["circle-color"]),"circle-blur":new hr(rt.paint_circle["circle-blur"]),"circle-opacity":new hr(rt.paint_circle["circle-opacity"]),"circle-translate":new Ge(rt.paint_circle["circle-translate"]),"circle-translate-anchor":new Ge(rt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Ge(rt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Ge(rt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new hr(rt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new hr(rt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new hr(rt.paint_circle["circle-stroke-opacity"])})},get layout(){return L5=L5||new f({"circle-sort-key":new hr(rt.layout_circle["circle-sort-key"])})}},Es=1e-6,ah=typeof Float32Array<"u"?Float32Array:Array;function hy(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}function Q5(a,r,l){var p=r[0],y=r[1],w=r[2],b=r[3],S=r[4],L=r[5],M=r[6],O=r[7],z=r[8],q=r[9],Y=r[10],it=r[11],lt=r[12],wt=r[13],It=r[14],Kt=r[15],Mt=l[0],Ht=l[1],re=l[2],_e=l[3];return a[0]=Mt*p+Ht*S+re*z+_e*lt,a[1]=Mt*y+Ht*L+re*q+_e*wt,a[2]=Mt*w+Ht*M+re*Y+_e*It,a[3]=Mt*b+Ht*O+re*it+_e*Kt,a[4]=(Mt=l[4])*p+(Ht=l[5])*S+(re=l[6])*z+(_e=l[7])*lt,a[5]=Mt*y+Ht*L+re*q+_e*wt,a[6]=Mt*w+Ht*M+re*Y+_e*It,a[7]=Mt*b+Ht*O+re*it+_e*Kt,a[8]=(Mt=l[8])*p+(Ht=l[9])*S+(re=l[10])*z+(_e=l[11])*lt,a[9]=Mt*y+Ht*L+re*q+_e*wt,a[10]=Mt*w+Ht*M+re*Y+_e*It,a[11]=Mt*b+Ht*O+re*it+_e*Kt,a[12]=(Mt=l[12])*p+(Ht=l[13])*S+(re=l[14])*z+(_e=l[15])*lt,a[13]=Mt*y+Ht*L+re*q+_e*wt,a[14]=Mt*w+Ht*M+re*Y+_e*It,a[15]=Mt*b+Ht*O+re*it+_e*Kt,a}Math.hypot||(Math.hypot=function(){for(var a=0,r=arguments.length;r--;)a+=arguments[r]*arguments[r];return Math.sqrt(a)});var Cd,_7=Q5;function Jf(a,r,l){var p=r[0],y=r[1],w=r[2],b=r[3];return a[0]=l[0]*p+l[4]*y+l[8]*w+l[12]*b,a[1]=l[1]*p+l[5]*y+l[9]*w+l[13]*b,a[2]=l[2]*p+l[6]*y+l[10]*w+l[14]*b,a[3]=l[3]*p+l[7]*y+l[11]*w+l[15]*b,a}Cd=new ah(4),ah!=Float32Array&&(Cd[0]=0,Cd[1]=0,Cd[2]=0,Cd[3]=0);class b7 extends o{constructor(r){super(r,w7)}createBucket(r){return new Il(r)}queryRadius(r){const l=r;return Bd("circle-radius",this,l)+Bd("circle-stroke-width",this,l)+Zf(this.paint.get("circle-translate"))}queryIntersectsFeature(r,l,p,y,w,b,S,L){const M=Yf(r,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),b.angle,S),O=this.paint.get("circle-radius").evaluate(l,p)+this.paint.get("circle-stroke-width").evaluate(l,p),z=this.paint.get("circle-pitch-alignment")==="map",q=z?M:function(it,lt){return it.map(wt=>k5(wt,lt))}(M,L),Y=z?O*S:O;for(const it of y)for(const lt of it){const wt=z?lt:k5(lt,L);let It=Y;const Kt=Jf([],[lt.x,lt.y,0,1],L);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?It*=Kt[3]/b.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(It*=b.cameraToCenterDistance/Kt[3]),nh(q,wt,It))return!0}return!1}}function k5(a,r){const l=Jf([],[a.x,a.y,0,1],r);return new T(l[0]/l[3],l[1]/l[3])}class M5 extends Il{}let D5;Oe("HeatmapBucket",M5,{omit:["layers"]});var x7={get paint(){return D5=D5||new f({"heatmap-radius":new hr(rt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new hr(rt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Ge(rt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new F(rt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Ge(rt.paint_heatmap["heatmap-opacity"])})}};function dy(a,{width:r,height:l},p,y){if(y){if(y instanceof Uint8ClampedArray)y=new Uint8Array(y.buffer);else if(y.length!==r*l*p)throw new RangeError(`mismatched image size. expected: ${y.length} but got: ${r*l*p}`)}else y=new Uint8Array(r*l*p);return a.width=r,a.height=l,a.data=y,a}function N5(a,{width:r,height:l},p){if(r===a.width&&l===a.height)return;const y=dy({},{width:r,height:l},p);py(a,y,{x:0,y:0},{x:0,y:0},{width:Math.min(a.width,r),height:Math.min(a.height,l)},p),a.width=r,a.height=l,a.data=y.data}function py(a,r,l,p,y,w){if(y.width===0||y.height===0)return r;if(y.width>a.width||y.height>a.height||l.x>a.width-y.width||l.y>a.height-y.height)throw new RangeError("out of range source coordinates for image copy");if(y.width>r.width||y.height>r.height||p.x>r.width-y.width||p.y>r.height-y.height)throw new RangeError("out of range destination coordinates for image copy");const b=a.data,S=r.data;if(b===S)throw new Error("srcData equals dstData, so image is already copied");for(let L=0;L<y.height;L++){const M=((l.y+L)*a.width+l.x)*w,O=((p.y+L)*r.width+p.x)*w;for(let z=0;z<y.width*w;z++)S[O+z]=b[M+z]}return r}class Fd{constructor(r,l){dy(this,r,1,l)}resize(r){N5(this,r,1)}clone(){return new Fd({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(r,l,p,y,w){py(r,l,p,y,w,1)}}class Na{constructor(r,l){dy(this,r,4,l)}resize(r){N5(this,r,4)}replace(r,l){l?this.data.set(r):this.data=r instanceof Uint8ClampedArray?new Uint8Array(r.buffer):r}clone(){return new Na({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(r,l,p,y,w){py(r,l,p,y,w,4)}}function O5(a){const r={},l=a.resolution||256,p=a.clips?a.clips.length:1,y=a.image||new Na({width:l,height:p});if(Math.log(l)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${l}`);const w=(b,S,L)=>{r[a.evaluationKey]=L;const M=a.expression.evaluate(r);y.data[b+S+0]=Math.floor(255*M.r/M.a),y.data[b+S+1]=Math.floor(255*M.g/M.a),y.data[b+S+2]=Math.floor(255*M.b/M.a),y.data[b+S+3]=Math.floor(255*M.a)};if(a.clips)for(let b=0,S=0;b<p;++b,S+=4*l)for(let L=0,M=0;L<l;L++,M+=4){const O=L/(l-1),{start:z,end:q}=a.clips[b];w(S,M,z*(1-O)+q*O)}else for(let b=0,S=0;b<l;b++,S+=4)w(0,S,b/(l-1));return y}Oe("AlphaImage",Fd),Oe("RGBAImage",Na);const fy="big-fb";class B7 extends o{createBucket(r){return new M5(r)}constructor(r){super(r,x7),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(r){r==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=O5({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(fy)&&this.heatmapFbos.delete(fy)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let R5;var C7={get paint(){return R5=R5||new f({"hillshade-illumination-direction":new Ge(rt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Ge(rt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Ge(rt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Ge(rt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Ge(rt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Ge(rt.paint_hillshade["hillshade-accent-color"])})}};class F7 extends o{constructor(r){super(r,C7)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const S7=x([{name:"a_pos",components:2,type:"Int16"}],4),{members:I7}=S7;function z5(a,r,l=2){const p=r&&r.length,y=p?r[0]*l:a.length;let w=H5(a,0,y,l,!0);const b=[];if(!w||w.next===w.prev)return b;let S,L,M;if(p&&(w=function(O,z,q,Y){const it=[];for(let lt=0,wt=z.length;lt<wt;lt++){const It=H5(O,z[lt]*Y,lt<wt-1?z[lt+1]*Y:O.length,Y,!1);It===It.next&&(It.steiner=!0),it.push(M7(It))}it.sort(P7);for(let lt=0;lt<it.length;lt++)q=Q7(it[lt],q);return q}(a,r,w,l)),a.length>80*l){S=1/0,L=1/0;let O=-1/0,z=-1/0;for(let q=l;q<y;q+=l){const Y=a[q],it=a[q+1];Y<S&&(S=Y),it<L&&(L=it),Y>O&&(O=Y),it>z&&(z=it)}M=Math.max(O-S,z-L),M=M!==0?32767/M:0}return Sd(w,b,l,S,L,M,0),b}function H5(a,r,l,p,y){let w;if(y===function(b,S,L,M){let O=0;for(let z=S,q=L-M;z<L;z+=M)O+=(b[q]-b[z])*(b[z+1]+b[q+1]),q=z;return O}(a,r,l,p)>0)for(let b=r;b<l;b+=p)w=K5(b/p|0,a[b],a[b+1],w);else for(let b=l-p;b>=r;b-=p)w=K5(b/p|0,a[b],a[b+1],w);return w&&tg(w,w.next)&&(Ed(w),w=w.next),w}function iu(a,r){if(!a)return a;r||(r=a);let l,p=a;do if(l=!1,p.steiner||!tg(p,p.next)&&Zi(p.prev,p,p.next)!==0)p=p.next;else{if(Ed(p),p=r=p.prev,p===p.next)break;l=!0}while(l||p!==r);return r}function Sd(a,r,l,p,y,w,b){if(!a)return;!b&&w&&function(L,M,O,z){let q=L;do q.z===0&&(q.z=gy(q.x,q.y,M,O,z)),q.prevZ=q.prev,q.nextZ=q.next,q=q.next;while(q!==L);q.prevZ.nextZ=null,q.prevZ=null,function(Y){let it,lt=1;do{let wt,It=Y;Y=null;let Kt=null;for(it=0;It;){it++;let Mt=It,Ht=0;for(let _e=0;_e<lt&&(Ht++,Mt=Mt.nextZ,Mt);_e++);let re=lt;for(;Ht>0||re>0&&Mt;)Ht!==0&&(re===0||!Mt||It.z<=Mt.z)?(wt=It,It=It.nextZ,Ht--):(wt=Mt,Mt=Mt.nextZ,re--),Kt?Kt.nextZ=wt:Y=wt,wt.prevZ=Kt,Kt=wt;It=Mt}Kt.nextZ=null,lt*=2}while(it>1)}(q)}(a,p,y,w);let S=a;for(;a.prev!==a.next;){const L=a.prev,M=a.next;if(w?T7(a,p,y,w):E7(a))r.push(L.i,a.i,M.i),Ed(a),a=M.next,S=M.next;else if((a=M)===S){b?b===1?Sd(a=U7(iu(a),r),r,l,p,y,w,2):b===2&&L7(a,r,l,p,y,w):Sd(iu(a),r,l,p,y,w,1);break}}}function E7(a){const r=a.prev,l=a,p=a.next;if(Zi(r,l,p)>=0)return!1;const y=r.x,w=l.x,b=p.x,S=r.y,L=l.y,M=p.y,O=y<w?y<b?y:b:w<b?w:b,z=S<L?S<M?S:M:L<M?L:M,q=y>w?y>b?y:b:w>b?w:b,Y=S>L?S>M?S:M:L>M?L:M;let it=p.next;for(;it!==r;){if(it.x>=O&&it.x<=q&&it.y>=z&&it.y<=Y&&oh(y,S,w,L,b,M,it.x,it.y)&&Zi(it.prev,it,it.next)>=0)return!1;it=it.next}return!0}function T7(a,r,l,p){const y=a.prev,w=a,b=a.next;if(Zi(y,w,b)>=0)return!1;const S=y.x,L=w.x,M=b.x,O=y.y,z=w.y,q=b.y,Y=S<L?S<M?S:M:L<M?L:M,it=O<z?O<q?O:q:z<q?z:q,lt=S>L?S>M?S:M:L>M?L:M,wt=O>z?O>q?O:q:z>q?z:q,It=gy(Y,it,r,l,p),Kt=gy(lt,wt,r,l,p);let Mt=a.prevZ,Ht=a.nextZ;for(;Mt&&Mt.z>=It&&Ht&&Ht.z<=Kt;){if(Mt.x>=Y&&Mt.x<=lt&&Mt.y>=it&&Mt.y<=wt&&Mt!==y&&Mt!==b&&oh(S,O,L,z,M,q,Mt.x,Mt.y)&&Zi(Mt.prev,Mt,Mt.next)>=0||(Mt=Mt.prevZ,Ht.x>=Y&&Ht.x<=lt&&Ht.y>=it&&Ht.y<=wt&&Ht!==y&&Ht!==b&&oh(S,O,L,z,M,q,Ht.x,Ht.y)&&Zi(Ht.prev,Ht,Ht.next)>=0))return!1;Ht=Ht.nextZ}for(;Mt&&Mt.z>=It;){if(Mt.x>=Y&&Mt.x<=lt&&Mt.y>=it&&Mt.y<=wt&&Mt!==y&&Mt!==b&&oh(S,O,L,z,M,q,Mt.x,Mt.y)&&Zi(Mt.prev,Mt,Mt.next)>=0)return!1;Mt=Mt.prevZ}for(;Ht&&Ht.z<=Kt;){if(Ht.x>=Y&&Ht.x<=lt&&Ht.y>=it&&Ht.y<=wt&&Ht!==y&&Ht!==b&&oh(S,O,L,z,M,q,Ht.x,Ht.y)&&Zi(Ht.prev,Ht,Ht.next)>=0)return!1;Ht=Ht.nextZ}return!0}function U7(a,r){let l=a;do{const p=l.prev,y=l.next.next;!tg(p,y)&&V5(p,l,l.next,y)&&Id(p,y)&&Id(y,p)&&(r.push(p.i,l.i,y.i),Ed(l),Ed(l.next),l=a=y),l=l.next}while(l!==a);return iu(l)}function L7(a,r,l,p,y,w){let b=a;do{let S=b.next.next;for(;S!==b.prev;){if(b.i!==S.i&&D7(b,S)){let L=j5(b,S);return b=iu(b,b.next),L=iu(L,L.next),Sd(b,r,l,p,y,w,0),void Sd(L,r,l,p,y,w,0)}S=S.next}b=b.next}while(b!==a)}function P7(a,r){return a.x-r.x}function Q7(a,r){const l=function(y,w){let b=w;const S=y.x,L=y.y;let M,O=-1/0;do{if(L<=b.y&&L>=b.next.y&&b.next.y!==b.y){const lt=b.x+(L-b.y)*(b.next.x-b.x)/(b.next.y-b.y);if(lt<=S&&lt>O&&(O=lt,M=b.x<b.next.x?b:b.next,lt===S))return M}b=b.next}while(b!==w);if(!M)return null;const z=M,q=M.x,Y=M.y;let it=1/0;b=M;do{if(S>=b.x&&b.x>=q&&S!==b.x&&oh(L<Y?S:O,L,q,Y,L<Y?O:S,L,b.x,b.y)){const lt=Math.abs(L-b.y)/(S-b.x);Id(b,y)&&(lt<it||lt===it&&(b.x>M.x||b.x===M.x&&k7(M,b)))&&(M=b,it=lt)}b=b.next}while(b!==z);return M}(a,r);if(!l)return r;const p=j5(l,a);return iu(p,p.next),iu(l,l.next)}function k7(a,r){return Zi(a.prev,a,r.prev)<0&&Zi(r.next,a,a.next)<0}function gy(a,r,l,p,y){return(a=1431655765&((a=858993459&((a=252645135&((a=16711935&((a=(a-l)*y|0)|a<<8))|a<<4))|a<<2))|a<<1))|(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r=(r-p)*y|0)|r<<8))|r<<4))|r<<2))|r<<1))<<1}function M7(a){let r=a,l=a;do(r.x<l.x||r.x===l.x&&r.y<l.y)&&(l=r),r=r.next;while(r!==a);return l}function oh(a,r,l,p,y,w,b,S){return(y-b)*(r-S)>=(a-b)*(w-S)&&(a-b)*(p-S)>=(l-b)*(r-S)&&(l-b)*(w-S)>=(y-b)*(p-S)}function D7(a,r){return a.next.i!==r.i&&a.prev.i!==r.i&&!function(l,p){let y=l;do{if(y.i!==l.i&&y.next.i!==l.i&&y.i!==p.i&&y.next.i!==p.i&&V5(y,y.next,l,p))return!0;y=y.next}while(y!==l);return!1}(a,r)&&(Id(a,r)&&Id(r,a)&&function(l,p){let y=l,w=!1;const b=(l.x+p.x)/2,S=(l.y+p.y)/2;do y.y>S!=y.next.y>S&&y.next.y!==y.y&&b<(y.next.x-y.x)*(S-y.y)/(y.next.y-y.y)+y.x&&(w=!w),y=y.next;while(y!==l);return w}(a,r)&&(Zi(a.prev,a,r.prev)||Zi(a,r.prev,r))||tg(a,r)&&Zi(a.prev,a,a.next)>0&&Zi(r.prev,r,r.next)>0)}function Zi(a,r,l){return(r.y-a.y)*(l.x-r.x)-(r.x-a.x)*(l.y-r.y)}function tg(a,r){return a.x===r.x&&a.y===r.y}function V5(a,r,l,p){const y=rg(Zi(a,r,l)),w=rg(Zi(a,r,p)),b=rg(Zi(l,p,a)),S=rg(Zi(l,p,r));return y!==w&&b!==S||!(y!==0||!eg(a,l,r))||!(w!==0||!eg(a,p,r))||!(b!==0||!eg(l,a,p))||!(S!==0||!eg(l,r,p))}function eg(a,r,l){return r.x<=Math.max(a.x,l.x)&&r.x>=Math.min(a.x,l.x)&&r.y<=Math.max(a.y,l.y)&&r.y>=Math.min(a.y,l.y)}function rg(a){return a>0?1:a<0?-1:0}function Id(a,r){return Zi(a.prev,a,a.next)<0?Zi(a,r,a.next)>=0&&Zi(a,a.prev,r)>=0:Zi(a,r,a.prev)<0||Zi(a,a.next,r)<0}function j5(a,r){const l=my(a.i,a.x,a.y),p=my(r.i,r.x,r.y),y=a.next,w=r.prev;return a.next=r,r.prev=a,l.next=y,y.prev=l,p.next=l,l.prev=p,w.next=p,p.prev=w,p}function K5(a,r,l,p){const y=my(a,r,l);return p?(y.next=p.next,y.prev=p,p.next.prev=y,p.next=y):(y.prev=y,y.next=y),y}function Ed(a){a.next.prev=a.prev,a.prev.next=a.next,a.prevZ&&(a.prevZ.nextZ=a.nextZ),a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function my(a,r,l){return{i:a,x:r,y:l,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function yy(a,r,l){const p=l.patternDependencies;let y=!1;for(const w of r){const b=w.paint.get(`${a}-pattern`);b.isConstant()||(y=!0);const S=b.constantOr(null);S&&(y=!0,p[S.to]=!0,p[S.from]=!0)}return y}function vy(a,r,l,p,y){const w=y.patternDependencies;for(const b of r){const S=b.paint.get(`${a}-pattern`).value;if(S.kind!=="constant"){let L=S.evaluate({zoom:p-1},l,{},y.availableImages),M=S.evaluate({zoom:p},l,{},y.availableImages),O=S.evaluate({zoom:p+1},l,{},y.availableImages);L=L&&L.name?L.name:L,M=M&&M.name?M.name:M,O=O&&O.name?O.name:O,w[L]=!0,w[M]=!0,w[O]=!0,l.patterns[b.id]={min:L,mid:M,max:O}}}return l}class wy{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(l=>l.id),this.index=r.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Rn,this.indexArray=new Un,this.indexArray2=new Di,this.programConfigurations=new OA(r.layers,r.zoom),this.segments=new Hr,this.segments2=new Hr,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(r,l,p){this.hasPattern=yy("fill",this.layers,l);const y=this.layers[0].layout.get("fill-sort-key"),w=!y.isConstant(),b=[];for(const{feature:S,id:L,index:M,sourceLayerIndex:O}of r){const z=this.layers[0]._featureFilter.needGeometry,q=RA(S,z);if(!this.layers[0]._featureFilter.filter(new ci(this.zoom),q,p))continue;const Y=w?y.evaluate(q,{},p,l.availableImages):void 0,it={id:L,properties:S.properties,type:S.type,sourceLayerIndex:O,index:M,geometry:z?q.geometry:Sl(S),patterns:{},sortKey:Y};b.push(it)}w&&b.sort((S,L)=>S.sortKey-L.sortKey);for(const S of b){const{geometry:L,index:M,sourceLayerIndex:O}=S;if(this.hasPattern){const z=vy("fill",this.layers,S,this.zoom,l);this.patternFeatures.push(z)}else this.addFeature(S,L,M,p,{});l.featureIndex.insert(r[M].feature,L,M,O,this.index)}}update(r,l,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,l,this.stateDependentLayers,p)}addFeatures(r,l,p){for(const y of this.patternFeatures)this.addFeature(y,y.geometry,y.index,l,p)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,I7),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.indexBuffer2=r.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(r,l,p,y,w){for(const b of la(l,500)){let S=0;for(const Y of b)S+=Y.length;const L=this.segments.prepareSegment(S,this.layoutVertexArray,this.indexArray),M=L.vertexLength,O=[],z=[];for(const Y of b){if(Y.length===0)continue;Y!==b[0]&&z.push(O.length/2);const it=this.segments2.prepareSegment(Y.length,this.layoutVertexArray,this.indexArray2),lt=it.vertexLength;this.layoutVertexArray.emplaceBack(Y[0].x,Y[0].y),this.indexArray2.emplaceBack(lt+Y.length-1,lt),O.push(Y[0].x),O.push(Y[0].y);for(let wt=1;wt<Y.length;wt++)this.layoutVertexArray.emplaceBack(Y[wt].x,Y[wt].y),this.indexArray2.emplaceBack(lt+wt-1,lt+wt),O.push(Y[wt].x),O.push(Y[wt].y);it.vertexLength+=Y.length,it.primitiveLength+=Y.length}const q=z5(O,z);for(let Y=0;Y<q.length;Y+=3)this.indexArray.emplaceBack(M+q[Y],M+q[Y+1],M+q[Y+2]);L.vertexLength+=S,L.primitiveLength+=q.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,p,w,y)}}let $5,G5;Oe("FillBucket",wy,{omit:["layers","patternFeatures"]});var N7={get paint(){return G5=G5||new f({"fill-antialias":new Ge(rt.paint_fill["fill-antialias"]),"fill-opacity":new hr(rt.paint_fill["fill-opacity"]),"fill-color":new hr(rt.paint_fill["fill-color"]),"fill-outline-color":new hr(rt.paint_fill["fill-outline-color"]),"fill-translate":new Ge(rt.paint_fill["fill-translate"]),"fill-translate-anchor":new Ge(rt.paint_fill["fill-translate-anchor"]),"fill-pattern":new xl(rt.paint_fill["fill-pattern"])})},get layout(){return $5=$5||new f({"fill-sort-key":new hr(rt.layout_fill["fill-sort-key"])})}};class O7 extends o{constructor(r){super(r,N7)}recalculate(r,l){super.recalculate(r,l);const p=this.paint._values["fill-outline-color"];p.value.kind==="constant"&&p.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(r){return new wy(r)}queryRadius(){return Zf(this.paint.get("fill-translate"))}queryIntersectsFeature(r,l,p,y,w,b,S){return ho(Yf(r,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),b.angle,S),y)}isTileClipped(){return!0}}const R7=x([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),z7=x([{name:"a_centroid",components:2,type:"Int16"}],4),{members:H7}=R7;var cc={},V7=C,q5=Ah;function Ah(a,r,l,p,y){this.properties={},this.extent=l,this.type=0,this._pbf=a,this._geometry=-1,this._keys=p,this._values=y,a.readFields(j7,this,r)}function j7(a,r,l){a==1?r.id=l.readVarint():a==2?function(p,y){for(var w=p.readVarint()+p.pos;p.pos<w;){var b=y._keys[p.readVarint()],S=y._values[p.readVarint()];y.properties[b]=S}}(l,r):a==3?r.type=l.readVarint():a==4&&(r._geometry=l.pos)}function K7(a){for(var r,l,p=0,y=0,w=a.length,b=w-1;y<w;b=y++)p+=((l=a[b]).x-(r=a[y]).x)*(r.y+l.y);return p}Ah.types=["Unknown","Point","LineString","Polygon"],Ah.prototype.loadGeometry=function(){var a=this._pbf;a.pos=this._geometry;for(var r,l=a.readVarint()+a.pos,p=1,y=0,w=0,b=0,S=[];a.pos<l;){if(y<=0){var L=a.readVarint();p=7&L,y=L>>3}if(y--,p===1||p===2)w+=a.readSVarint(),b+=a.readSVarint(),p===1&&(r&&S.push(r),r=[]),r.push(new V7(w,b));else{if(p!==7)throw new Error("unknown command "+p);r&&r.push(r[0].clone())}}return r&&S.push(r),S},Ah.prototype.bbox=function(){var a=this._pbf;a.pos=this._geometry;for(var r=a.readVarint()+a.pos,l=1,p=0,y=0,w=0,b=1/0,S=-1/0,L=1/0,M=-1/0;a.pos<r;){if(p<=0){var O=a.readVarint();l=7&O,p=O>>3}if(p--,l===1||l===2)(y+=a.readSVarint())<b&&(b=y),y>S&&(S=y),(w+=a.readSVarint())<L&&(L=w),w>M&&(M=w);else if(l!==7)throw new Error("unknown command "+l)}return[b,L,S,M]},Ah.prototype.toGeoJSON=function(a,r,l){var p,y,w=this.extent*Math.pow(2,l),b=this.extent*a,S=this.extent*r,L=this.loadGeometry(),M=Ah.types[this.type];function O(Y){for(var it=0;it<Y.length;it++){var lt=Y[it];Y[it]=[360*(lt.x+b)/w-180,360/Math.PI*Math.atan(Math.exp((180-360*(lt.y+S)/w)*Math.PI/180))-90]}}switch(this.type){case 1:var z=[];for(p=0;p<L.length;p++)z[p]=L[p][0];O(L=z);break;case 2:for(p=0;p<L.length;p++)O(L[p]);break;case 3:for(L=function(Y){var it=Y.length;if(it<=1)return[Y];for(var lt,wt,It=[],Kt=0;Kt<it;Kt++){var Mt=K7(Y[Kt]);Mt!==0&&(wt===void 0&&(wt=Mt<0),wt===Mt<0?(lt&&It.push(lt),lt=[Y[Kt]]):lt.push(Y[Kt]))}return lt&&It.push(lt),It}(L),p=0;p<L.length;p++)for(y=0;y<L[p].length;y++)O(L[p][y])}L.length===1?L=L[0]:M="Multi"+M;var q={type:"Feature",geometry:{type:M,coordinates:L},properties:this.properties};return"id"in this&&(q.id=this.id),q};var $7=q5,X5=W5;function W5(a,r){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=a,this._keys=[],this._values=[],this._features=[],a.readFields(G7,this,r),this.length=this._features.length}function G7(a,r,l){a===15?r.version=l.readVarint():a===1?r.name=l.readString():a===5?r.extent=l.readVarint():a===2?r._features.push(l.pos):a===3?r._keys.push(l.readString()):a===4&&r._values.push(function(p){for(var y=null,w=p.readVarint()+p.pos;p.pos<w;){var b=p.readVarint()>>3;y=b===1?p.readString():b===2?p.readFloat():b===3?p.readDouble():b===4?p.readVarint64():b===5?p.readVarint():b===6?p.readSVarint():b===7?p.readBoolean():null}return y}(l))}W5.prototype.feature=function(a){if(a<0||a>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[a];var r=this._pbf.readVarint()+this._pbf.pos;return new $7(this._pbf,r,this.extent,this._keys,this._values)};var q7=X5;function X7(a,r,l){if(a===3){var p=new q7(l,l.readVarint()+l.pos);p.length&&(r[p.name]=p)}}cc.VectorTile=function(a,r){this.layers=a.readFields(X7,{},r)},cc.VectorTileFeature=q5,cc.VectorTileLayer=X5;const W7=cc.VectorTileFeature.types,_y=Math.pow(2,13);function Td(a,r,l,p,y,w,b,S){a.emplaceBack(r,l,2*Math.floor(p*_y)+b,y*_y*2,w*_y*2,Math.round(S))}class by{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(l=>l.id),this.index=r.index,this.hasPattern=!1,this.layoutVertexArray=new cs,this.centroidVertexArray=new Ii,this.indexArray=new Un,this.programConfigurations=new OA(r.layers,r.zoom),this.segments=new Hr,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(r,l,p){this.features=[],this.hasPattern=yy("fill-extrusion",this.layers,l);for(const{feature:y,id:w,index:b,sourceLayerIndex:S}of r){const L=this.layers[0]._featureFilter.needGeometry,M=RA(y,L);if(!this.layers[0]._featureFilter.filter(new ci(this.zoom),M,p))continue;const O={id:w,sourceLayerIndex:S,index:b,geometry:L?M.geometry:Sl(y),properties:y.properties,type:y.type,patterns:{}};this.hasPattern?this.features.push(vy("fill-extrusion",this.layers,O,this.zoom,l)):this.addFeature(O,O.geometry,b,p,{}),l.featureIndex.insert(y,O.geometry,b,S,this.index,!0)}}addFeatures(r,l,p){for(const y of this.features){const{geometry:w}=y;this.addFeature(y,w,y.index,l,p)}}update(r,l,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,l,this.stateDependentLayers,p)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,H7),this.centroidVertexBuffer=r.createVertexBuffer(this.centroidVertexArray,z7.members,!0),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(r,l,p,y,w){for(const b of la(l,500)){const S={x:0,y:0,vertexCount:0};let L=0;for(const it of b)L+=it.length;let M=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const it of b){if(it.length===0||Y7(it))continue;let lt=0;for(let wt=0;wt<it.length;wt++){const It=it[wt];if(wt>=1){const Kt=it[wt-1];if(!Z7(It,Kt)){M.vertexLength+4>Hr.MAX_VERTEX_ARRAY_LENGTH&&(M=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const Mt=It.sub(Kt)._perp()._unit(),Ht=Kt.dist(It);lt+Ht>32768&&(lt=0),Td(this.layoutVertexArray,It.x,It.y,Mt.x,Mt.y,0,0,lt),Td(this.layoutVertexArray,It.x,It.y,Mt.x,Mt.y,0,1,lt),S.x+=2*It.x,S.y+=2*It.y,S.vertexCount+=2,lt+=Ht,Td(this.layoutVertexArray,Kt.x,Kt.y,Mt.x,Mt.y,0,0,lt),Td(this.layoutVertexArray,Kt.x,Kt.y,Mt.x,Mt.y,0,1,lt),S.x+=2*Kt.x,S.y+=2*Kt.y,S.vertexCount+=2;const re=M.vertexLength;this.indexArray.emplaceBack(re,re+2,re+1),this.indexArray.emplaceBack(re+1,re+2,re+3),M.vertexLength+=4,M.primitiveLength+=2}}}}if(M.vertexLength+L>Hr.MAX_VERTEX_ARRAY_LENGTH&&(M=this.segments.prepareSegment(L,this.layoutVertexArray,this.indexArray)),W7[r.type]!=="Polygon")continue;const O=[],z=[],q=M.vertexLength;for(const it of b)if(it.length!==0){it!==b[0]&&z.push(O.length/2);for(let lt=0;lt<it.length;lt++){const wt=it[lt];Td(this.layoutVertexArray,wt.x,wt.y,0,0,1,1,0),S.x+=wt.x,S.y+=wt.y,S.vertexCount+=1,O.push(wt.x),O.push(wt.y)}}const Y=z5(O,z);for(let it=0;it<Y.length;it+=3)this.indexArray.emplaceBack(q+Y[it],q+Y[it+2],q+Y[it+1]);M.primitiveLength+=Y.length/3,M.vertexLength+=L;for(let it=0;it<S.vertexCount;it++){const lt=Math.floor(S.x/S.vertexCount),wt=Math.floor(S.y/S.vertexCount);this.centroidVertexArray.emplaceBack(lt,wt)}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,p,w,y)}}function Z7(a,r){return a.x===r.x&&(a.x<0||a.x>xi)||a.y===r.y&&(a.y<0||a.y>xi)}function Y7(a){return a.every(r=>r.x<0)||a.every(r=>r.x>xi)||a.every(r=>r.y<0)||a.every(r=>r.y>xi)}let Z5;Oe("FillExtrusionBucket",by,{omit:["layers","features"]});var J7={get paint(){return Z5=Z5||new f({"fill-extrusion-opacity":new Ge(rt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new hr(rt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Ge(rt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Ge(rt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new xl(rt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new hr(rt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new hr(rt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Ge(rt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class tz extends o{constructor(r){super(r,J7)}createBucket(r){return new by(r)}queryRadius(){return Zf(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(r,l,p,y,w,b,S,L){const M=Yf(r,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),b.angle,S),O=this.paint.get("fill-extrusion-height").evaluate(l,p),z=this.paint.get("fill-extrusion-base").evaluate(l,p),q=function(it,lt,wt,It){const Kt=[];for(const Mt of it){const Ht=[Mt.x,Mt.y,0,1];Jf(Ht,Ht,lt),Kt.push(new T(Ht[0]/Ht[3],Ht[1]/Ht[3]))}return Kt}(M,L),Y=function(it,lt,wt,It){const Kt=[],Mt=[],Ht=It[8]*lt,re=It[9]*lt,_e=It[10]*lt,Ne=It[11]*lt,fr=It[8]*wt,De=It[9]*wt,ke=It[10]*wt,tr=It[11]*wt;for(const Ke of it){const ze=[],le=[];for(const rr of Ke){const Ze=rr.x,Br=rr.y,gi=It[0]*Ze+It[4]*Br+It[12],hi=It[1]*Ze+It[5]*Br+It[13],Pn=It[2]*Ze+It[6]*Br+It[14],fo=It[3]*Ze+It[7]*Br+It[15],Wn=Pn+_e,Qn=fo+Ne,Ts=gi+fr,Us=hi+De,Ls=Pn+ke,qi=fo+tr,kn=new T((gi+Ht)/Qn,(hi+re)/Qn);kn.z=Wn/Qn,ze.push(kn);const ds=new T(Ts/qi,Us/qi);ds.z=Ls/qi,le.push(ds)}Kt.push(ze),Mt.push(le)}return[Kt,Mt]}(y,z,O,L);return function(it,lt,wt){let It=1/0;ho(wt,lt)&&(It=Y5(wt,lt[0]));for(let Kt=0;Kt<lt.length;Kt++){const Mt=lt[Kt],Ht=it[Kt];for(let re=0;re<Mt.length-1;re++){const _e=Mt[re],Ne=[_e,Mt[re+1],Ht[re+1],Ht[re],_e];ih(wt,Ne)&&(It=Math.min(It,Y5(wt,Ne)))}}return It!==1/0&&It}(Y[0],Y[1],q)}}function Ud(a,r){return a.x*r.x+a.y*r.y}function Y5(a,r){if(a.length===1){let l=0;const p=r[l++];let y;for(;!y||p.equals(y);)if(y=r[l++],!y)return 1/0;for(;l<r.length;l++){const w=r[l],b=a[0],S=y.sub(p),L=w.sub(p),M=b.sub(p),O=Ud(S,S),z=Ud(S,L),q=Ud(L,L),Y=Ud(M,S),it=Ud(M,L),lt=O*q-z*z,wt=(q*Y-z*it)/lt,It=(O*it-z*Y)/lt,Kt=p.z*(1-wt-It)+y.z*wt+w.z*It;if(isFinite(Kt))return Kt}return 1/0}{let l=1/0;for(const p of r)l=Math.min(l,p.z);return l}}const ez=x([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:rz}=ez,iz=x([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:nz}=iz,sz=cc.VectorTileFeature.types,az=Math.cos(Math.PI/180*37.5),J5=Math.pow(2,14)/.5;class xy{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(l=>l.id),this.index=r.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(l=>{this.gradients[l.id]={}}),this.layoutVertexArray=new bi,this.layoutVertexArray2=new lo,this.indexArray=new Un,this.programConfigurations=new OA(r.layers,r.zoom),this.segments=new Hr,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(r,l,p){this.hasPattern=yy("line",this.layers,l);const y=this.layers[0].layout.get("line-sort-key"),w=!y.isConstant(),b=[];for(const{feature:S,id:L,index:M,sourceLayerIndex:O}of r){const z=this.layers[0]._featureFilter.needGeometry,q=RA(S,z);if(!this.layers[0]._featureFilter.filter(new ci(this.zoom),q,p))continue;const Y=w?y.evaluate(q,{},p):void 0,it={id:L,properties:S.properties,type:S.type,sourceLayerIndex:O,index:M,geometry:z?q.geometry:Sl(S),patterns:{},sortKey:Y};b.push(it)}w&&b.sort((S,L)=>S.sortKey-L.sortKey);for(const S of b){const{geometry:L,index:M,sourceLayerIndex:O}=S;if(this.hasPattern){const z=vy("line",this.layers,S,this.zoom,l);this.patternFeatures.push(z)}else this.addFeature(S,L,M,p,{});l.featureIndex.insert(r[M].feature,L,M,O,this.index)}}update(r,l,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,l,this.stateDependentLayers,p)}addFeatures(r,l,p){for(const y of this.patternFeatures)this.addFeature(y,y.geometry,y.index,l,p)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=r.createVertexBuffer(this.layoutVertexArray2,nz)),this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,rz),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(r){if(r.properties&&Object.prototype.hasOwnProperty.call(r.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(r.properties,"mapbox_clip_end"))return{start:+r.properties.mapbox_clip_start,end:+r.properties.mapbox_clip_end}}addFeature(r,l,p,y,w){const b=this.layers[0].layout,S=b.get("line-join").evaluate(r,{}),L=b.get("line-cap"),M=b.get("line-miter-limit"),O=b.get("line-round-limit");this.lineClips=this.lineFeatureClips(r);for(const z of l)this.addLine(z,r,S,L,M,O);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,p,w,y)}addLine(r,l,p,y,w,b){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let It=0;It<r.length-1;It++)this.totalDistance+=r[It].dist(r[It+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const S=sz[l.type]==="Polygon";let L=r.length;for(;L>=2&&r[L-1].equals(r[L-2]);)L--;let M=0;for(;M<L-1&&r[M].equals(r[M+1]);)M++;if(L<(S?3:2))return;p==="bevel"&&(w=1.05);const O=this.overscaling<=16?15*xi/(512*this.overscaling):0,z=this.segments.prepareSegment(10*L,this.layoutVertexArray,this.indexArray);let q,Y,it,lt,wt;this.e1=this.e2=-1,S&&(q=r[L-2],wt=r[M].sub(q)._unit()._perp());for(let It=M;It<L;It++){if(it=It===L-1?S?r[M+1]:void 0:r[It+1],it&&r[It].equals(it))continue;wt&&(lt=wt),q&&(Y=q),q=r[It],wt=it?it.sub(q)._unit()._perp():lt,lt=lt||wt;let Kt=lt.add(wt);Kt.x===0&&Kt.y===0||Kt._unit();const Mt=lt.x*wt.x+lt.y*wt.y,Ht=Kt.x*wt.x+Kt.y*wt.y,re=Ht!==0?1/Ht:1/0,_e=2*Math.sqrt(2-2*Ht),Ne=Ht<az&&Y&&it,fr=lt.x*wt.y-lt.y*wt.x>0;if(Ne&&It>M){const tr=q.dist(Y);if(tr>2*O){const Ke=q.sub(q.sub(Y)._mult(O/tr)._round());this.updateDistance(Y,Ke),this.addCurrentVertex(Ke,lt,0,0,z),Y=Ke}}const De=Y&&it;let ke=De?p:S?"butt":y;if(De&&ke==="round"&&(re<b?ke="miter":re<=2&&(ke="fakeround")),ke==="miter"&&re>w&&(ke="bevel"),ke==="bevel"&&(re>2&&(ke="flipbevel"),re<w&&(ke="miter")),Y&&this.updateDistance(Y,q),ke==="miter")Kt._mult(re),this.addCurrentVertex(q,Kt,0,0,z);else if(ke==="flipbevel"){if(re>100)Kt=wt.mult(-1);else{const tr=re*lt.add(wt).mag()/lt.sub(wt).mag();Kt._perp()._mult(tr*(fr?-1:1))}this.addCurrentVertex(q,Kt,0,0,z),this.addCurrentVertex(q,Kt.mult(-1),0,0,z)}else if(ke==="bevel"||ke==="fakeround"){const tr=-Math.sqrt(re*re-1),Ke=fr?tr:0,ze=fr?0:tr;if(Y&&this.addCurrentVertex(q,lt,Ke,ze,z),ke==="fakeround"){const le=Math.round(180*_e/Math.PI/20);for(let rr=1;rr<le;rr++){let Ze=rr/le;if(Ze!==.5){const gi=Ze-.5;Ze+=Ze*gi*(Ze-1)*((1.0904+Mt*(Mt*(3.55645-1.43519*Mt)-3.2452))*gi*gi+(.848013+Mt*(.215638*Mt-1.06021)))}const Br=wt.sub(lt)._mult(Ze)._add(lt)._unit()._mult(fr?-1:1);this.addHalfVertex(q,Br.x,Br.y,!1,fr,0,z)}}it&&this.addCurrentVertex(q,wt,-Ke,-ze,z)}else if(ke==="butt")this.addCurrentVertex(q,Kt,0,0,z);else if(ke==="square"){const tr=Y?1:-1;this.addCurrentVertex(q,Kt,tr,tr,z)}else ke==="round"&&(Y&&(this.addCurrentVertex(q,lt,0,0,z),this.addCurrentVertex(q,lt,1,1,z,!0)),it&&(this.addCurrentVertex(q,wt,-1,-1,z,!0),this.addCurrentVertex(q,wt,0,0,z)));if(Ne&&It<L-1){const tr=q.dist(it);if(tr>2*O){const Ke=q.add(it.sub(q)._mult(O/tr)._round());this.updateDistance(q,Ke),this.addCurrentVertex(Ke,wt,0,0,z),q=Ke}}}}addCurrentVertex(r,l,p,y,w,b=!1){const S=l.y*y-l.x,L=-l.y-l.x*y;this.addHalfVertex(r,l.x+l.y*p,l.y-l.x*p,b,!1,p,w),this.addHalfVertex(r,S,L,b,!0,-y,w),this.distance>J5/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(r,l,p,y,w,b))}addHalfVertex({x:r,y:l},p,y,w,b,S,L){const M=.5*(this.lineClips?this.scaledDistance*(J5-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((r<<1)+(w?1:0),(l<<1)+(b?1:0),Math.round(63*p)+128,Math.round(63*y)+128,1+(S===0?0:S<0?-1:1)|(63&M)<<2,M>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const O=L.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,O),L.primitiveLength++),b?this.e2=O:this.e1=O}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(r,l){this.distance+=r.dist(l),this.updateScaledDistance()}}let tC,eC;Oe("LineBucket",xy,{omit:["layers","patternFeatures"]});var rC={get paint(){return eC=eC||new f({"line-opacity":new hr(rt.paint_line["line-opacity"]),"line-color":new hr(rt.paint_line["line-color"]),"line-translate":new Ge(rt.paint_line["line-translate"]),"line-translate-anchor":new Ge(rt.paint_line["line-translate-anchor"]),"line-width":new hr(rt.paint_line["line-width"]),"line-gap-width":new hr(rt.paint_line["line-gap-width"]),"line-offset":new hr(rt.paint_line["line-offset"]),"line-blur":new hr(rt.paint_line["line-blur"]),"line-dasharray":new _(rt.paint_line["line-dasharray"]),"line-pattern":new xl(rt.paint_line["line-pattern"]),"line-gradient":new F(rt.paint_line["line-gradient"])})},get layout(){return tC=tC||new f({"line-cap":new Ge(rt.layout_line["line-cap"]),"line-join":new hr(rt.layout_line["line-join"]),"line-miter-limit":new Ge(rt.layout_line["line-miter-limit"]),"line-round-limit":new Ge(rt.layout_line["line-round-limit"]),"line-sort-key":new hr(rt.layout_line["line-sort-key"])})}};class oz extends hr{possiblyEvaluate(r,l){return l=new ci(Math.floor(l.zoom),{now:l.now,fadeDuration:l.fadeDuration,zoomHistory:l.zoomHistory,transition:l.transition}),super.possiblyEvaluate(r,l)}evaluate(r,l,p,y){return l=xt({},l,{zoom:Math.floor(l.zoom)}),super.evaluate(r,l,p,y)}}let ig;class Az extends o{constructor(r){super(r,rC),this.gradientVersion=0,ig||(ig=new oz(rC.paint.properties["line-width"].specification),ig.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(r){if(r==="line-gradient"){const l=this.gradientExpression();this.stepInterpolant=!!function(p){return p._styleExpression!==void 0}(l)&&l._styleExpression.expression instanceof Za,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(r,l){super.recalculate(r,l),this.paint._values["line-floorwidth"]=ig.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,r)}createBucket(r){return new xy(r)}queryRadius(r){const l=r,p=iC(Bd("line-width",this,l),Bd("line-gap-width",this,l)),y=Bd("line-offset",this,l);return p/2+Math.abs(y)+Zf(this.paint.get("line-translate"))}queryIntersectsFeature(r,l,p,y,w,b,S){const L=Yf(r,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),b.angle,S),M=S/2*iC(this.paint.get("line-width").evaluate(l,p),this.paint.get("line-gap-width").evaluate(l,p)),O=this.paint.get("line-offset").evaluate(l,p);return O&&(y=function(z,q){const Y=[];for(let it=0;it<z.length;it++){const lt=z[it],wt=[];for(let It=0;It<lt.length;It++){const Kt=lt[It-1],Mt=lt[It],Ht=lt[It+1],re=It===0?new T(0,0):Mt.sub(Kt)._unit()._perp(),_e=It===lt.length-1?new T(0,0):Ht.sub(Mt)._unit()._perp(),Ne=re._add(_e)._unit(),fr=Ne.x*_e.x+Ne.y*_e.y;fr!==0&&Ne._mult(1/fr),wt.push(Ne._mult(q)._add(Mt))}Y.push(wt)}return Y}(y,O*S)),function(z,q,Y){for(let it=0;it<q.length;it++){const lt=q[it];if(z.length>=3){for(let wt=0;wt<lt.length;wt++)if(HA(z,lt[wt]))return!0}if(zA(z,lt,Y))return!0}return!1}(L,y,M)}isTileClipped(){return!0}}function iC(a,r){return r>0?r+2*a:a}const lz=x([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),cz=x([{name:"a_projected_pos",components:3,type:"Float32"}],4);x([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const uz=x([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);x([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const nC=x([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),hz=x([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function dz(a,r,l){return a.sections.forEach(p=>{p.text=function(y,w,b){const S=w.layout.get("text-transform").evaluate(b,{});return S==="uppercase"?y=y.toLocaleUpperCase():S==="lowercase"&&(y=y.toLocaleLowerCase()),ls.applyArabicShaping&&(y=ls.applyArabicShaping(y)),y}(p.text,r,l)}),a}x([{name:"triangle",components:3,type:"Uint16"}]),x([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),x([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),x([{type:"Float32",name:"offsetX"}]),x([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),x([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const Ld={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};var _n=24,sC=ui,aC=function(a,r,l,p,y){var w,b,S=8*y-p-1,L=(1<<S)-1,M=L>>1,O=-7,z=y-1,q=-1,Y=a[r+z];for(z+=q,w=Y&(1<<-O)-1,Y>>=-O,O+=S;O>0;w=256*w+a[r+z],z+=q,O-=8);for(b=w&(1<<-O)-1,w>>=-O,O+=p;O>0;b=256*b+a[r+z],z+=q,O-=8);if(w===0)w=1-M;else{if(w===L)return b?NaN:1/0*(Y?-1:1);b+=Math.pow(2,p),w-=M}return(Y?-1:1)*b*Math.pow(2,w-p)},oC=function(a,r,l,p,y,w){var b,S,L,M=8*w-y-1,O=(1<<M)-1,z=O>>1,q=y===23?Math.pow(2,-24)-Math.pow(2,-77):0,Y=0,it=1,lt=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(S=isNaN(r)?1:0,b=O):(b=Math.floor(Math.log(r)/Math.LN2),r*(L=Math.pow(2,-b))<1&&(b--,L*=2),(r+=b+z>=1?q/L:q*Math.pow(2,1-z))*L>=2&&(b++,L/=2),b+z>=O?(S=0,b=O):b+z>=1?(S=(r*L-1)*Math.pow(2,y),b+=z):(S=r*Math.pow(2,z-1)*Math.pow(2,y),b=0));y>=8;a[l+Y]=255&S,Y+=it,S/=256,y-=8);for(b=b<<y|S,M+=y;M>0;a[l+Y]=255&b,Y+=it,b/=256,M-=8);a[l+Y-it]|=128*lt};function ui(a){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(a)?a:new Uint8Array(a||0),this.pos=0,this.type=0,this.length=this.buf.length}ui.Varint=0,ui.Fixed64=1,ui.Bytes=2,ui.Fixed32=5;var By=4294967296,AC=1/By,lC=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");function El(a){return a.type===ui.Bytes?a.readVarint()+a.pos:a.pos+1}function lh(a,r,l){return l?4294967296*r+(a>>>0):4294967296*(r>>>0)+(a>>>0)}function cC(a,r,l){var p=r<=16383?1:r<=2097151?2:r<=268435455?3:Math.floor(Math.log(r)/(7*Math.LN2));l.realloc(p);for(var y=l.pos-1;y>=a;y--)l.buf[y+p]=l.buf[y]}function pz(a,r){for(var l=0;l<a.length;l++)r.writeVarint(a[l])}function fz(a,r){for(var l=0;l<a.length;l++)r.writeSVarint(a[l])}function gz(a,r){for(var l=0;l<a.length;l++)r.writeFloat(a[l])}function mz(a,r){for(var l=0;l<a.length;l++)r.writeDouble(a[l])}function yz(a,r){for(var l=0;l<a.length;l++)r.writeBoolean(a[l])}function vz(a,r){for(var l=0;l<a.length;l++)r.writeFixed32(a[l])}function wz(a,r){for(var l=0;l<a.length;l++)r.writeSFixed32(a[l])}function _z(a,r){for(var l=0;l<a.length;l++)r.writeFixed64(a[l])}function bz(a,r){for(var l=0;l<a.length;l++)r.writeSFixed64(a[l])}function ng(a,r){return(a[r]|a[r+1]<<8|a[r+2]<<16)+16777216*a[r+3]}function ch(a,r,l){a[l]=r,a[l+1]=r>>>8,a[l+2]=r>>>16,a[l+3]=r>>>24}function uC(a,r){return(a[r]|a[r+1]<<8|a[r+2]<<16)+(a[r+3]<<24)}ui.prototype={destroy:function(){this.buf=null},readFields:function(a,r,l){for(l=l||this.length;this.pos<l;){var p=this.readVarint(),y=p>>3,w=this.pos;this.type=7&p,a(y,r,this),this.pos===w&&this.skip(p)}return r},readMessage:function(a,r){return this.readFields(a,r,this.readVarint()+this.pos)},readFixed32:function(){var a=ng(this.buf,this.pos);return this.pos+=4,a},readSFixed32:function(){var a=uC(this.buf,this.pos);return this.pos+=4,a},readFixed64:function(){var a=ng(this.buf,this.pos)+ng(this.buf,this.pos+4)*By;return this.pos+=8,a},readSFixed64:function(){var a=ng(this.buf,this.pos)+uC(this.buf,this.pos+4)*By;return this.pos+=8,a},readFloat:function(){var a=aC(this.buf,this.pos,!0,23,4);return this.pos+=4,a},readDouble:function(){var a=aC(this.buf,this.pos,!0,52,8);return this.pos+=8,a},readVarint:function(a){var r,l,p=this.buf;return r=127&(l=p[this.pos++]),l<128?r:(r|=(127&(l=p[this.pos++]))<<7,l<128?r:(r|=(127&(l=p[this.pos++]))<<14,l<128?r:(r|=(127&(l=p[this.pos++]))<<21,l<128?r:function(y,w,b){var S,L,M=b.buf;if(S=(112&(L=M[b.pos++]))>>4,L<128||(S|=(127&(L=M[b.pos++]))<<3,L<128)||(S|=(127&(L=M[b.pos++]))<<10,L<128)||(S|=(127&(L=M[b.pos++]))<<17,L<128)||(S|=(127&(L=M[b.pos++]))<<24,L<128)||(S|=(1&(L=M[b.pos++]))<<31,L<128))return lh(y,S,w);throw new Error("Expected varint not more than 10 bytes")}(r|=(15&(l=p[this.pos]))<<28,a,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var a=this.readVarint();return a%2==1?(a+1)/-2:a/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var a=this.readVarint()+this.pos,r=this.pos;return this.pos=a,a-r>=12&&lC?function(l,p,y){return lC.decode(l.subarray(p,y))}(this.buf,r,a):function(l,p,y){for(var w="",b=p;b<y;){var S,L,M,O=l[b],z=null,q=O>239?4:O>223?3:O>191?2:1;if(b+q>y)break;q===1?O<128&&(z=O):q===2?(192&(S=l[b+1]))==128&&(z=(31&O)<<6|63&S)<=127&&(z=null):q===3?(L=l[b+2],(192&(S=l[b+1]))==128&&(192&L)==128&&((z=(15&O)<<12|(63&S)<<6|63&L)<=2047||z>=55296&&z<=57343)&&(z=null)):q===4&&(L=l[b+2],M=l[b+3],(192&(S=l[b+1]))==128&&(192&L)==128&&(192&M)==128&&((z=(15&O)<<18|(63&S)<<12|(63&L)<<6|63&M)<=65535||z>=1114112)&&(z=null)),z===null?(z=65533,q=1):z>65535&&(z-=65536,w+=String.fromCharCode(z>>>10&1023|55296),z=56320|1023&z),w+=String.fromCharCode(z),b+=q}return w}(this.buf,r,a)},readBytes:function(){var a=this.readVarint()+this.pos,r=this.buf.subarray(this.pos,a);return this.pos=a,r},readPackedVarint:function(a,r){if(this.type!==ui.Bytes)return a.push(this.readVarint(r));var l=El(this);for(a=a||[];this.pos<l;)a.push(this.readVarint(r));return a},readPackedSVarint:function(a){if(this.type!==ui.Bytes)return a.push(this.readSVarint());var r=El(this);for(a=a||[];this.pos<r;)a.push(this.readSVarint());return a},readPackedBoolean:function(a){if(this.type!==ui.Bytes)return a.push(this.readBoolean());var r=El(this);for(a=a||[];this.pos<r;)a.push(this.readBoolean());return a},readPackedFloat:function(a){if(this.type!==ui.Bytes)return a.push(this.readFloat());var r=El(this);for(a=a||[];this.pos<r;)a.push(this.readFloat());return a},readPackedDouble:function(a){if(this.type!==ui.Bytes)return a.push(this.readDouble());var r=El(this);for(a=a||[];this.pos<r;)a.push(this.readDouble());return a},readPackedFixed32:function(a){if(this.type!==ui.Bytes)return a.push(this.readFixed32());var r=El(this);for(a=a||[];this.pos<r;)a.push(this.readFixed32());return a},readPackedSFixed32:function(a){if(this.type!==ui.Bytes)return a.push(this.readSFixed32());var r=El(this);for(a=a||[];this.pos<r;)a.push(this.readSFixed32());return a},readPackedFixed64:function(a){if(this.type!==ui.Bytes)return a.push(this.readFixed64());var r=El(this);for(a=a||[];this.pos<r;)a.push(this.readFixed64());return a},readPackedSFixed64:function(a){if(this.type!==ui.Bytes)return a.push(this.readSFixed64());var r=El(this);for(a=a||[];this.pos<r;)a.push(this.readSFixed64());return a},skip:function(a){var r=7&a;if(r===ui.Varint)for(;this.buf[this.pos++]>127;);else if(r===ui.Bytes)this.pos=this.readVarint()+this.pos;else if(r===ui.Fixed32)this.pos+=4;else{if(r!==ui.Fixed64)throw new Error("Unimplemented type: "+r);this.pos+=8}},writeTag:function(a,r){this.writeVarint(a<<3|r)},realloc:function(a){for(var r=this.length||16;r<this.pos+a;)r*=2;if(r!==this.length){var l=new Uint8Array(r);l.set(this.buf),this.buf=l,this.length=r}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(a){this.realloc(4),ch(this.buf,a,this.pos),this.pos+=4},writeSFixed32:function(a){this.realloc(4),ch(this.buf,a,this.pos),this.pos+=4},writeFixed64:function(a){this.realloc(8),ch(this.buf,-1&a,this.pos),ch(this.buf,Math.floor(a*AC),this.pos+4),this.pos+=8},writeSFixed64:function(a){this.realloc(8),ch(this.buf,-1&a,this.pos),ch(this.buf,Math.floor(a*AC),this.pos+4),this.pos+=8},writeVarint:function(a){(a=+a||0)>268435455||a<0?function(r,l){var p,y;if(r>=0?(p=r%4294967296|0,y=r/4294967296|0):(y=~(-r/4294967296),4294967295^(p=~(-r%4294967296))?p=p+1|0:(p=0,y=y+1|0)),r>=18446744073709552e3||r<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");l.realloc(10),function(w,b,S){S.buf[S.pos++]=127&w|128,w>>>=7,S.buf[S.pos++]=127&w|128,w>>>=7,S.buf[S.pos++]=127&w|128,w>>>=7,S.buf[S.pos++]=127&w|128,S.buf[S.pos]=127&(w>>>=7)}(p,0,l),function(w,b){var S=(7&w)<<4;b.buf[b.pos++]|=S|((w>>>=3)?128:0),w&&(b.buf[b.pos++]=127&w|((w>>>=7)?128:0),w&&(b.buf[b.pos++]=127&w|((w>>>=7)?128:0),w&&(b.buf[b.pos++]=127&w|((w>>>=7)?128:0),w&&(b.buf[b.pos++]=127&w|((w>>>=7)?128:0),w&&(b.buf[b.pos++]=127&w)))))}(y,l)}(a,this):(this.realloc(4),this.buf[this.pos++]=127&a|(a>127?128:0),a<=127||(this.buf[this.pos++]=127&(a>>>=7)|(a>127?128:0),a<=127||(this.buf[this.pos++]=127&(a>>>=7)|(a>127?128:0),a<=127||(this.buf[this.pos++]=a>>>7&127))))},writeSVarint:function(a){this.writeVarint(a<0?2*-a-1:2*a)},writeBoolean:function(a){this.writeVarint(!!a)},writeString:function(a){a=String(a),this.realloc(4*a.length),this.pos++;var r=this.pos;this.pos=function(p,y,w){for(var b,S,L=0;L<y.length;L++){if((b=y.charCodeAt(L))>55295&&b<57344){if(!S){b>56319||L+1===y.length?(p[w++]=239,p[w++]=191,p[w++]=189):S=b;continue}if(b<56320){p[w++]=239,p[w++]=191,p[w++]=189,S=b;continue}b=S-55296<<10|b-56320|65536,S=null}else S&&(p[w++]=239,p[w++]=191,p[w++]=189,S=null);b<128?p[w++]=b:(b<2048?p[w++]=b>>6|192:(b<65536?p[w++]=b>>12|224:(p[w++]=b>>18|240,p[w++]=b>>12&63|128),p[w++]=b>>6&63|128),p[w++]=63&b|128)}return w}(this.buf,a,this.pos);var l=this.pos-r;l>=128&&cC(r,l,this),this.pos=r-1,this.writeVarint(l),this.pos+=l},writeFloat:function(a){this.realloc(4),oC(this.buf,a,this.pos,!0,23,4),this.pos+=4},writeDouble:function(a){this.realloc(8),oC(this.buf,a,this.pos,!0,52,8),this.pos+=8},writeBytes:function(a){var r=a.length;this.writeVarint(r),this.realloc(r);for(var l=0;l<r;l++)this.buf[this.pos++]=a[l]},writeRawMessage:function(a,r){this.pos++;var l=this.pos;a(r,this);var p=this.pos-l;p>=128&&cC(l,p,this),this.pos=l-1,this.writeVarint(p),this.pos+=p},writeMessage:function(a,r,l){this.writeTag(a,ui.Bytes),this.writeRawMessage(r,l)},writePackedVarint:function(a,r){r.length&&this.writeMessage(a,pz,r)},writePackedSVarint:function(a,r){r.length&&this.writeMessage(a,fz,r)},writePackedBoolean:function(a,r){r.length&&this.writeMessage(a,yz,r)},writePackedFloat:function(a,r){r.length&&this.writeMessage(a,gz,r)},writePackedDouble:function(a,r){r.length&&this.writeMessage(a,mz,r)},writePackedFixed32:function(a,r){r.length&&this.writeMessage(a,vz,r)},writePackedSFixed32:function(a,r){r.length&&this.writeMessage(a,wz,r)},writePackedFixed64:function(a,r){r.length&&this.writeMessage(a,_z,r)},writePackedSFixed64:function(a,r){r.length&&this.writeMessage(a,bz,r)},writeBytesField:function(a,r){this.writeTag(a,ui.Bytes),this.writeBytes(r)},writeFixed32Field:function(a,r){this.writeTag(a,ui.Fixed32),this.writeFixed32(r)},writeSFixed32Field:function(a,r){this.writeTag(a,ui.Fixed32),this.writeSFixed32(r)},writeFixed64Field:function(a,r){this.writeTag(a,ui.Fixed64),this.writeFixed64(r)},writeSFixed64Field:function(a,r){this.writeTag(a,ui.Fixed64),this.writeSFixed64(r)},writeVarintField:function(a,r){this.writeTag(a,ui.Varint),this.writeVarint(r)},writeSVarintField:function(a,r){this.writeTag(a,ui.Varint),this.writeSVarint(r)},writeStringField:function(a,r){this.writeTag(a,ui.Bytes),this.writeString(r)},writeFloatField:function(a,r){this.writeTag(a,ui.Fixed32),this.writeFloat(r)},writeDoubleField:function(a,r){this.writeTag(a,ui.Fixed64),this.writeDouble(r)},writeBooleanField:function(a,r){this.writeVarintField(a,!!r)}};var Cy=v(sC);const Fy=3;function xz(a,r,l){a===1&&l.readMessage(Bz,r)}function Bz(a,r,l){if(a===3){const{id:p,bitmap:y,width:w,height:b,left:S,top:L,advance:M}=l.readMessage(Cz,{});r.push({id:p,bitmap:new Fd({width:w+2*Fy,height:b+2*Fy},y),metrics:{width:w,height:b,left:S,top:L,advance:M}})}}function Cz(a,r,l){a===1?r.id=l.readVarint():a===2?r.bitmap=l.readBytes():a===3?r.width=l.readVarint():a===4?r.height=l.readVarint():a===5?r.left=l.readSVarint():a===6?r.top=l.readSVarint():a===7&&(r.advance=l.readVarint())}const hC=Fy;function dC(a){let r=0,l=0;for(const b of a)r+=b.w*b.h,l=Math.max(l,b.w);a.sort((b,S)=>S.h-b.h);const p=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(r/.95)),l),h:1/0}];let y=0,w=0;for(const b of a)for(let S=p.length-1;S>=0;S--){const L=p[S];if(!(b.w>L.w||b.h>L.h)){if(b.x=L.x,b.y=L.y,w=Math.max(w,b.y+b.h),y=Math.max(y,b.x+b.w),b.w===L.w&&b.h===L.h){const M=p.pop();S<p.length&&(p[S]=M)}else b.h===L.h?(L.x+=b.w,L.w-=b.w):b.w===L.w?(L.y+=b.h,L.h-=b.h):(p.push({x:L.x+b.w,y:L.y,w:L.w-b.w,h:b.h}),L.y+=b.h,L.h-=b.h);break}}return{w:y,h:w,fill:r/(y*w)||0}}const ta=1;class Sy{constructor(r,{pixelRatio:l,version:p,stretchX:y,stretchY:w,content:b,textFitWidth:S,textFitHeight:L}){this.paddedRect=r,this.pixelRatio=l,this.stretchX=y,this.stretchY=w,this.content=b,this.version=p,this.textFitWidth=S,this.textFitHeight=L}get tl(){return[this.paddedRect.x+ta,this.paddedRect.y+ta]}get br(){return[this.paddedRect.x+this.paddedRect.w-ta,this.paddedRect.y+this.paddedRect.h-ta]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*ta)/this.pixelRatio,(this.paddedRect.h-2*ta)/this.pixelRatio]}}class pC{constructor(r,l){const p={},y={};this.haveRenderCallbacks=[];const w=[];this.addImages(r,p,w),this.addImages(l,y,w);const{w:b,h:S}=dC(w),L=new Na({width:b||1,height:S||1});for(const M in r){const O=r[M],z=p[M].paddedRect;Na.copy(O.data,L,{x:0,y:0},{x:z.x+ta,y:z.y+ta},O.data)}for(const M in l){const O=l[M],z=y[M].paddedRect,q=z.x+ta,Y=z.y+ta,it=O.data.width,lt=O.data.height;Na.copy(O.data,L,{x:0,y:0},{x:q,y:Y},O.data),Na.copy(O.data,L,{x:0,y:lt-1},{x:q,y:Y-1},{width:it,height:1}),Na.copy(O.data,L,{x:0,y:0},{x:q,y:Y+lt},{width:it,height:1}),Na.copy(O.data,L,{x:it-1,y:0},{x:q-1,y:Y},{width:1,height:lt}),Na.copy(O.data,L,{x:0,y:0},{x:q+it,y:Y},{width:1,height:lt})}this.image=L,this.iconPositions=p,this.patternPositions=y}addImages(r,l,p){for(const y in r){const w=r[y],b={x:0,y:0,w:w.data.width+2*ta,h:w.data.height+2*ta};p.push(b),l[y]=new Sy(b,w),w.hasRenderCallback&&this.haveRenderCallbacks.push(y)}}patchUpdatedImages(r,l){r.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const p in r.updatedImages)this.patchUpdatedImage(this.iconPositions[p],r.getImage(p),l),this.patchUpdatedImage(this.patternPositions[p],r.getImage(p),l)}patchUpdatedImage(r,l,p){if(!r||!l||r.version===l.version)return;r.version=l.version;const[y,w]=r.tl;p.update(l.data,void 0,{x:y,y:w})}}var uc;Oe("ImagePosition",Sy),Oe("ImageAtlas",pC),d.ah=void 0,(uc=d.ah||(d.ah={}))[uc.none=0]="none",uc[uc.horizontal=1]="horizontal",uc[uc.vertical=2]="vertical",uc[uc.horizontalOnly=3]="horizontalOnly";const Pd=-17;class Qd{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(r,l){const p=new Qd;return p.scale=r||1,p.fontStack=l,p}static forImage(r){const l=new Qd;return l.imageName=r,l}}class uh{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(r,l){const p=new uh;for(let y=0;y<r.sections.length;y++){const w=r.sections[y];w.image?p.addImageSection(w):p.addTextSection(w,l)}return p}length(){return this.text.length}getSection(r){return this.sections[this.sectionIndex[r]]}getSectionIndex(r){return this.sectionIndex[r]}getCharCode(r){return this.text.charCodeAt(r)}verticalizePunctuation(){this.text=function(r){let l="";for(let p=0;p<r.length;p++){const y=r.charCodeAt(p+1)||null,w=r.charCodeAt(p-1)||null;l+=y&&wl(y)&&!Ld[r[p+1]]||w&&wl(w)&&!Ld[r[p-1]]||!Ld[r[p]]?r[p]:Ld[r[p]]}return l}(this.text)}trim(){let r=0;for(let p=0;p<this.text.length&&ag[this.text.charCodeAt(p)];p++)r++;let l=this.text.length;for(let p=this.text.length-1;p>=0&&p>=r&&ag[this.text.charCodeAt(p)];p--)l--;this.text=this.text.substring(r,l),this.sectionIndex=this.sectionIndex.slice(r,l)}substring(r,l){const p=new uh;return p.text=this.text.substring(r,l),p.sectionIndex=this.sectionIndex.slice(r,l),p.sections=this.sections,p}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((r,l)=>Math.max(r,this.sections[l].scale),0)}addTextSection(r,l){this.text+=r.text,this.sections.push(Qd.forText(r.scale,r.fontStack||l));const p=this.sections.length-1;for(let y=0;y<r.text.length;++y)this.sectionIndex.push(p)}addImageSection(r){const l=r.image?r.image.name:"";if(l.length===0)return void mt("Can't add FormattedSection with an empty image.");const p=this.getNextImageSectionCharCode();p?(this.text+=String.fromCharCode(p),this.sections.push(Qd.forImage(l)),this.sectionIndex.push(this.sections.length-1)):mt("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function sg(a,r,l,p,y,w,b,S,L,M,O,z,q,Y,it){const lt=uh.fromFeature(a,y);let wt;z===d.ah.vertical&&lt.verticalizePunctuation();const{processBidirectionalText:It,processStyledBidirectionalText:Kt}=ls;if(It&&lt.sections.length===1){wt=[];const re=It(lt.toString(),Iy(lt,M,w,r,p,Y));for(const _e of re){const Ne=new uh;Ne.text=_e,Ne.sections=lt.sections;for(let fr=0;fr<_e.length;fr++)Ne.sectionIndex.push(0);wt.push(Ne)}}else if(Kt){wt=[];const re=Kt(lt.text,lt.sectionIndex,Iy(lt,M,w,r,p,Y));for(const _e of re){const Ne=new uh;Ne.text=_e[0],Ne.sectionIndex=_e[1],Ne.sections=lt.sections,wt.push(Ne)}}else wt=function(re,_e){const Ne=[],fr=re.text;let De=0;for(const ke of _e)Ne.push(re.substring(De,ke)),De=ke;return De<fr.length&&Ne.push(re.substring(De,fr.length)),Ne}(lt,Iy(lt,M,w,r,p,Y));const Mt=[],Ht={positionedLines:Mt,text:lt.toString(),top:O[1],bottom:O[1],left:O[0],right:O[0],writingMode:z,iconsInText:!1,verticalizable:!1};return function(re,_e,Ne,fr,De,ke,tr,Ke,ze,le,rr,Ze){let Br=0,gi=Pd,hi=0,Pn=0;const fo=Ke==="right"?1:Ke==="left"?0:.5;let Wn=0;for(const qi of De){qi.trim();const kn=qi.getMaxScale(),ds=(kn-1)*_n,Zn={positionedGlyphs:[],lineOffset:0};re.positionedLines[Wn]=Zn;const Ps=Zn.positionedGlyphs;let Yn=0;if(!qi.length()){gi+=ke,++Wn;continue}for(let ea=0;ea<qi.length();ea++){const ii=qi.getSection(ea),Bi=qi.getSectionIndex(ea),Ei=qi.getCharCode(ea);let ba=0,Hi=null,fh=null,jA=null,KA=_n;const go=!(ze===d.ah.horizontal||!rr&&!Wc(Ei)||rr&&(ag[Ei]||(Qn=Ei,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(Qn)))));if(ii.imageName){const za=fr[ii.imageName];if(!za)continue;jA=ii.imageName,re.iconsInText=re.iconsInText||!0,fh=za.paddedRect;const Hn=za.displaySize;ii.scale=ii.scale*_n/Ze,Hi={width:Hn[0],height:Hn[1],left:ta,top:-hC,advance:go?Hn[1]:Hn[0]},ba=ds+(_n-Hn[1]*ii.scale),KA=Hi.advance;const Tl=go?Hn[0]*ii.scale-_n*kn:Hn[1]*ii.scale-_n*kn;Tl>0&&Tl>Yn&&(Yn=Tl)}else{const za=Ne[ii.fontStack],Hn=za&&za[Ei];if(Hn&&Hn.rect)fh=Hn.rect,Hi=Hn.metrics;else{const Tl=_e[ii.fontStack],Rd=Tl&&Tl[Ei];if(!Rd)continue;Hi=Rd.metrics}ba=(kn-ii.scale)*_n}go?(re.verticalizable=!0,Ps.push({glyph:Ei,imageName:jA,x:Br,y:gi+ba,vertical:go,scale:ii.scale,fontStack:ii.fontStack,sectionIndex:Bi,metrics:Hi,rect:fh}),Br+=KA*ii.scale+le):(Ps.push({glyph:Ei,imageName:jA,x:Br,y:gi+ba,vertical:go,scale:ii.scale,fontStack:ii.fontStack,sectionIndex:Bi,metrics:Hi,rect:fh}),Br+=Hi.advance*ii.scale+le)}Ps.length!==0&&(hi=Math.max(Br-le,hi),Ez(Ps,0,Ps.length-1,fo,Yn)),Br=0;const Ra=ke*kn+Yn;Zn.lineOffset=Math.max(Yn,ds),gi+=Ra,Pn=Math.max(Ra,Pn),++Wn}var Qn;const Ts=gi-Pd,{horizontalAlign:Us,verticalAlign:Ls}=Ey(tr);(function(qi,kn,ds,Zn,Ps,Yn,Ra,ea,ii){const Bi=(kn-ds)*Ps;let Ei=0;Ei=Yn!==Ra?-ea*Zn-Pd:(-Zn*ii+.5)*Ra;for(const ba of qi)for(const Hi of ba.positionedGlyphs)Hi.x+=Bi,Hi.y+=Ei})(re.positionedLines,fo,Us,Ls,hi,Pn,ke,Ts,De.length),re.top+=-Ls*Ts,re.bottom=re.top+Ts,re.left+=-Us*hi,re.right=re.left+hi}(Ht,r,l,p,wt,b,S,L,z,M,q,it),!function(re){for(const _e of re)if(_e.positionedGlyphs.length!==0)return!1;return!0}(Mt)&&Ht}const ag={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Fz={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},Sz={40:!0};function fC(a,r,l,p,y,w){if(r.imageName){const b=p[r.imageName];return b?b.displaySize[0]*r.scale*_n/w+y:0}{const b=l[r.fontStack],S=b&&b[a];return S?S.metrics.advance*r.scale+y:0}}function gC(a,r,l,p){const y=Math.pow(a-r,2);return p?a<r?y/2:2*y:y+Math.abs(l)*l}function Iz(a,r,l){let p=0;return a===10&&(p-=1e4),l&&(p+=150),a!==40&&a!==65288||(p+=50),r!==41&&r!==65289||(p+=50),p}function mC(a,r,l,p,y,w){let b=null,S=gC(r,l,y,w);for(const L of p){const M=gC(r-L.x,l,y,w)+L.badness;M<=S&&(b=L,S=M)}return{index:a,x:r,priorBreak:b,badness:S}}function yC(a){return a?yC(a.priorBreak).concat(a.index):[]}function Iy(a,r,l,p,y,w){if(!a)return[];const b=[],S=function(z,q,Y,it,lt,wt){let It=0;for(let Kt=0;Kt<z.length();Kt++){const Mt=z.getSection(Kt);It+=fC(z.getCharCode(Kt),Mt,it,lt,q,wt)}return It/Math.max(1,Math.ceil(It/Y))}(a,r,l,p,y,w),L=a.text.indexOf("​")>=0;let M=0;for(let z=0;z<a.length();z++){const q=a.getSection(z),Y=a.getCharCode(z);if(ag[Y]||(M+=fC(Y,q,p,y,r,w)),z<a.length()-1){const it=!((O=Y)<11904)&&(!!Cr["CJK Compatibility Forms"](O)||!!Cr["CJK Compatibility"](O)||!!Cr["CJK Strokes"](O)||!!Cr["CJK Symbols and Punctuation"](O)||!!Cr["Enclosed CJK Letters and Months"](O)||!!Cr["Halfwidth and Fullwidth Forms"](O)||!!Cr["Ideographic Description Characters"](O)||!!Cr["Vertical Forms"](O)||Xc.test(String.fromCodePoint(O)));(Fz[Y]||it||q.imageName||z!==a.length()-2&&Sz[a.getCharCode(z+1)])&&b.push(mC(z+1,M,S,b,Iz(Y,a.getCharCode(z+1),it&&L),!1))}}var O;return yC(mC(a.length(),M,S,b,0,!0))}function Ey(a){let r=.5,l=.5;switch(a){case"right":case"top-right":case"bottom-right":r=1;break;case"left":case"top-left":case"bottom-left":r=0}switch(a){case"bottom":case"bottom-right":case"bottom-left":l=1;break;case"top":case"top-right":case"top-left":l=0}return{horizontalAlign:r,verticalAlign:l}}function Ez(a,r,l,p,y){if(!p&&!y)return;const w=a[l],b=(a[l].x+w.metrics.advance*w.scale)*p;for(let S=r;S<=l;S++)a[S].x-=b,a[S].y+=y}function Tz(a,r,l){const{horizontalAlign:p,verticalAlign:y}=Ey(l),w=r[0]-a.displaySize[0]*p,b=r[1]-a.displaySize[1]*y;return{image:a,top:b,bottom:b+a.displaySize[1],left:w,right:w+a.displaySize[0]}}function vC(a){var r,l;let p=a.left,y=a.top,w=a.right-p,b=a.bottom-y;const S=(r=a.image.textFitWidth)!==null&&r!==void 0?r:"stretchOrShrink",L=(l=a.image.textFitHeight)!==null&&l!==void 0?l:"stretchOrShrink",M=(a.image.content[2]-a.image.content[0])/(a.image.content[3]-a.image.content[1]);if(L==="proportional"){if(S==="stretchOnly"&&w/b<M||S==="proportional"){const O=Math.ceil(b*M);p*=O/w,w=O}}else if(S==="proportional"&&L==="stretchOnly"&&M!==0&&w/b>M){const O=Math.ceil(w/M);y*=O/b,b=O}return{x1:p,y1:y,x2:p+w,y2:y+b}}function wC(a,r,l,p,y,w){const b=a.image;let S;if(b.content){const wt=b.content,It=b.pixelRatio||1;S=[wt[0]/It,wt[1]/It,b.displaySize[0]-wt[2]/It,b.displaySize[1]-wt[3]/It]}const L=r.left*w,M=r.right*w;let O,z,q,Y;l==="width"||l==="both"?(Y=y[0]+L-p[3],z=y[0]+M+p[1]):(Y=y[0]+(L+M-b.displaySize[0])/2,z=Y+b.displaySize[0]);const it=r.top*w,lt=r.bottom*w;return l==="height"||l==="both"?(O=y[1]+it-p[0],q=y[1]+lt+p[2]):(O=y[1]+(it+lt-b.displaySize[1])/2,q=O+b.displaySize[1]),{image:b,top:O,right:z,bottom:q,left:Y,collisionPadding:S}}const kd=255,VA=128,hc=kd*VA;function _C(a,r){const{expression:l}=r;if(l.kind==="constant")return{kind:"constant",layoutSize:l.evaluate(new ci(a+1))};if(l.kind==="source")return{kind:"source"};{const{zoomStops:p,interpolationType:y}=l;let w=0;for(;w<p.length&&p[w]<=a;)w++;w=Math.max(0,w-1);let b=w;for(;b<p.length&&p[b]<a+1;)b++;b=Math.min(p.length-1,b);const S=p[w],L=p[b];return l.kind==="composite"?{kind:"composite",minZoom:S,maxZoom:L,interpolationType:y}:{kind:"camera",minZoom:S,maxZoom:L,minSize:l.evaluate(new ci(S)),maxSize:l.evaluate(new ci(L)),interpolationType:y}}}function Ty(a,r,l){let p="never";const y=a.get(r);return y?p=y:a.get(l)&&(p="always"),p}const Uz=cc.VectorTileFeature.types,Lz=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function og(a,r,l,p,y,w,b,S,L,M,O,z,q){const Y=S?Math.min(hc,Math.round(S[0])):0,it=S?Math.min(hc,Math.round(S[1])):0;a.emplaceBack(r,l,Math.round(32*p),Math.round(32*y),w,b,(Y<<1)+(L?1:0),it,16*M,16*O,256*z,256*q)}function Uy(a,r,l){a.emplaceBack(r.x,r.y,l),a.emplaceBack(r.x,r.y,l),a.emplaceBack(r.x,r.y,l),a.emplaceBack(r.x,r.y,l)}function Pz(a){for(const r of a.sections)if(Zu(r.text))return!0;return!1}class Ly{constructor(r){this.layoutVertexArray=new Bl,this.indexArray=new Un,this.programConfigurations=r,this.segments=new Hr,this.dynamicLayoutVertexArray=new MA,this.opacityVertexArray=new Tn,this.hasVisibleVertices=!1,this.placedSymbolArray=new yr}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(r,l,p,y){this.isEmpty()||(p&&(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,lz.members),this.indexBuffer=r.createIndexBuffer(this.indexArray,l),this.dynamicLayoutVertexBuffer=r.createVertexBuffer(this.dynamicLayoutVertexArray,cz.members,!0),this.opacityVertexBuffer=r.createVertexBuffer(this.opacityVertexArray,Lz,!0),this.opacityVertexBuffer.itemSize=1),(p||y)&&this.programConfigurations.upload(r))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Oe("SymbolBuffers",Ly);class Py{constructor(r,l,p){this.layoutVertexArray=new r,this.layoutAttributes=l,this.indexArray=new p,this.segments=new Hr,this.collisionVertexArray=new sn}upload(r){this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=r.createVertexBuffer(this.collisionVertexArray,uz.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Oe("CollisionBuffers",Py);class hh{constructor(r){this.collisionBoxArray=r.collisionBoxArray,this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(b=>b.id),this.index=r.index,this.pixelRatio=r.pixelRatio,this.sourceLayerIndex=r.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=hy([]),this.placementViewportMatrix=hy([]);const l=this.layers[0]._unevaluatedLayout._values;this.textSizeData=_C(this.zoom,l["text-size"]),this.iconSizeData=_C(this.zoom,l["icon-size"]);const p=this.layers[0].layout,y=p.get("symbol-sort-key"),w=p.get("symbol-z-order");this.canOverlap=Ty(p,"text-overlap","text-allow-overlap")!=="never"||Ty(p,"icon-overlap","icon-allow-overlap")!=="never"||p.get("text-ignore-placement")||p.get("icon-ignore-placement"),this.sortFeaturesByKey=w!=="viewport-y"&&!y.isConstant(),this.sortFeaturesByY=(w==="viewport-y"||w==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,p.get("symbol-placement")==="point"&&(this.writingModes=p.get("text-writing-mode").map(b=>d.ah[b])),this.stateDependentLayerIds=this.layers.filter(b=>b.isStateDependent()).map(b=>b.id),this.sourceID=r.sourceID}createArrays(){this.text=new Ly(new OA(this.layers,this.zoom,r=>/^text/.test(r))),this.icon=new Ly(new OA(this.layers,this.zoom,r=>/^icon/.test(r))),this.glyphOffsetArray=new Lr,this.lineVertexArray=new ei,this.symbolInstances=new xr,this.textAnchorOffsets=new Gr}calculateGlyphDependencies(r,l,p,y,w){for(let b=0;b<r.length;b++)if(l[r.charCodeAt(b)]=!0,(p||y)&&w){const S=Ld[r.charAt(b)];S&&(l[S.charCodeAt(0)]=!0)}}populate(r,l,p){const y=this.layers[0],w=y.layout,b=w.get("text-font"),S=w.get("text-field"),L=w.get("icon-image"),M=(S.value.kind!=="constant"||S.value.value instanceof yi&&!S.value.value.isEmpty()||S.value.value.toString().length>0)&&(b.value.kind!=="constant"||b.value.value.length>0),O=L.value.kind!=="constant"||!!L.value.value||Object.keys(L.parameters).length>0,z=w.get("symbol-sort-key");if(this.features=[],!M&&!O)return;const q=l.iconDependencies,Y=l.glyphDependencies,it=l.availableImages,lt=new ci(this.zoom);for(const{feature:wt,id:It,index:Kt,sourceLayerIndex:Mt}of r){const Ht=y._featureFilter.needGeometry,re=RA(wt,Ht);if(!y._featureFilter.filter(lt,re,p))continue;let _e,Ne;if(Ht||(re.geometry=Sl(wt)),M){const De=y.getValueAndResolveTokens("text-field",re,p,it),ke=yi.factory(De),tr=this.hasRTLText=this.hasRTLText||Pz(ke);(!tr||ls.getRTLTextPluginStatus()==="unavailable"||tr&&ls.isParsed())&&(_e=dz(ke,y,re))}if(O){const De=y.getValueAndResolveTokens("icon-image",re,p,it);Ne=De instanceof Cn?De:Cn.fromString(De)}if(!_e&&!Ne)continue;const fr=this.sortFeaturesByKey?z.evaluate(re,{},p):void 0;if(this.features.push({id:It,text:_e,icon:Ne,index:Kt,sourceLayerIndex:Mt,geometry:re.geometry,properties:wt.properties,type:Uz[wt.type],sortKey:fr}),Ne&&(q[Ne.name]=!0),_e){const De=b.evaluate(re,{},p).join(","),ke=w.get("text-rotation-alignment")!=="viewport"&&w.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(d.ah.vertical)>=0;for(const tr of _e.sections)if(tr.image)q[tr.image.name]=!0;else{const Ke=qc(_e.toString()),ze=tr.fontStack||De,le=Y[ze]=Y[ze]||{};this.calculateGlyphDependencies(tr.text,le,ke,this.allowVerticalPlacement,Ke)}}}w.get("symbol-placement")==="line"&&(this.features=function(wt){const It={},Kt={},Mt=[];let Ht=0;function re(De){Mt.push(wt[De]),Ht++}function _e(De,ke,tr){const Ke=Kt[De];return delete Kt[De],Kt[ke]=Ke,Mt[Ke].geometry[0].pop(),Mt[Ke].geometry[0]=Mt[Ke].geometry[0].concat(tr[0]),Ke}function Ne(De,ke,tr){const Ke=It[ke];return delete It[ke],It[De]=Ke,Mt[Ke].geometry[0].shift(),Mt[Ke].geometry[0]=tr[0].concat(Mt[Ke].geometry[0]),Ke}function fr(De,ke,tr){const Ke=tr?ke[0][ke[0].length-1]:ke[0][0];return`${De}:${Ke.x}:${Ke.y}`}for(let De=0;De<wt.length;De++){const ke=wt[De],tr=ke.geometry,Ke=ke.text?ke.text.toString():null;if(!Ke){re(De);continue}const ze=fr(Ke,tr),le=fr(Ke,tr,!0);if(ze in Kt&&le in It&&Kt[ze]!==It[le]){const rr=Ne(ze,le,tr),Ze=_e(ze,le,Mt[rr].geometry);delete It[ze],delete Kt[le],Kt[fr(Ke,Mt[Ze].geometry,!0)]=Ze,Mt[rr].geometry=null}else ze in Kt?_e(ze,le,tr):le in It?Ne(ze,le,tr):(re(De),It[ze]=Ht-1,Kt[le]=Ht-1)}return Mt.filter(De=>De.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((wt,It)=>wt.sortKey-It.sortKey)}update(r,l,p){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(r,l,this.layers,p),this.icon.programConfigurations.updatePaintArrays(r,l,this.layers,p))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(r){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(r),this.iconCollisionBox.upload(r)),this.text.upload(r,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(r,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(r,l){const p=this.lineVertexArray.length;if(r.segment!==void 0){let y=r.dist(l[r.segment+1]),w=r.dist(l[r.segment]);const b={};for(let S=r.segment+1;S<l.length;S++)b[S]={x:l[S].x,y:l[S].y,tileUnitDistanceFromAnchor:y},S<l.length-1&&(y+=l[S+1].dist(l[S]));for(let S=r.segment||0;S>=0;S--)b[S]={x:l[S].x,y:l[S].y,tileUnitDistanceFromAnchor:w},S>0&&(w+=l[S-1].dist(l[S]));for(let S=0;S<l.length;S++){const L=b[S];this.lineVertexArray.emplaceBack(L.x,L.y,L.tileUnitDistanceFromAnchor)}}return{lineStartIndex:p,lineLength:this.lineVertexArray.length-p}}addSymbols(r,l,p,y,w,b,S,L,M,O,z,q){const Y=r.indexArray,it=r.layoutVertexArray,lt=r.segments.prepareSegment(4*l.length,it,Y,this.canOverlap?b.sortKey:void 0),wt=this.glyphOffsetArray.length,It=lt.vertexLength,Kt=this.allowVerticalPlacement&&S===d.ah.vertical?Math.PI/2:0,Mt=b.text&&b.text.sections;for(let Ht=0;Ht<l.length;Ht++){const{tl:re,tr:_e,bl:Ne,br:fr,tex:De,pixelOffsetTL:ke,pixelOffsetBR:tr,minFontScaleX:Ke,minFontScaleY:ze,glyphOffset:le,isSDF:rr,sectionIndex:Ze}=l[Ht],Br=lt.vertexLength,gi=le[1];og(it,L.x,L.y,re.x,gi+re.y,De.x,De.y,p,rr,ke.x,ke.y,Ke,ze),og(it,L.x,L.y,_e.x,gi+_e.y,De.x+De.w,De.y,p,rr,tr.x,ke.y,Ke,ze),og(it,L.x,L.y,Ne.x,gi+Ne.y,De.x,De.y+De.h,p,rr,ke.x,tr.y,Ke,ze),og(it,L.x,L.y,fr.x,gi+fr.y,De.x+De.w,De.y+De.h,p,rr,tr.x,tr.y,Ke,ze),Uy(r.dynamicLayoutVertexArray,L,Kt),Y.emplaceBack(Br,Br+1,Br+2),Y.emplaceBack(Br+1,Br+2,Br+3),lt.vertexLength+=4,lt.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(le[0]),Ht!==l.length-1&&Ze===l[Ht+1].sectionIndex||r.programConfigurations.populatePaintArrays(it.length,b,b.index,{},q,Mt&&Mt[Ze])}r.placedSymbolArray.emplaceBack(L.x,L.y,wt,this.glyphOffsetArray.length-wt,It,M,O,L.segment,p?p[0]:0,p?p[1]:0,y[0],y[1],S,0,!1,0,z)}_addCollisionDebugVertex(r,l,p,y,w,b){return l.emplaceBack(0,0),r.emplaceBack(p.x,p.y,y,w,Math.round(b.x),Math.round(b.y))}addCollisionDebugVertices(r,l,p,y,w,b,S){const L=w.segments.prepareSegment(4,w.layoutVertexArray,w.indexArray),M=L.vertexLength,O=w.layoutVertexArray,z=w.collisionVertexArray,q=S.anchorX,Y=S.anchorY;this._addCollisionDebugVertex(O,z,b,q,Y,new T(r,l)),this._addCollisionDebugVertex(O,z,b,q,Y,new T(p,l)),this._addCollisionDebugVertex(O,z,b,q,Y,new T(p,y)),this._addCollisionDebugVertex(O,z,b,q,Y,new T(r,y)),L.vertexLength+=4;const it=w.indexArray;it.emplaceBack(M,M+1),it.emplaceBack(M+1,M+2),it.emplaceBack(M+2,M+3),it.emplaceBack(M+3,M),L.primitiveLength+=4}addDebugCollisionBoxes(r,l,p,y){for(let w=r;w<l;w++){const b=this.collisionBoxArray.get(w);this.addCollisionDebugVertices(b.x1,b.y1,b.x2,b.y2,y?this.textCollisionBox:this.iconCollisionBox,b.anchorPoint,p)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Py(zn,nC.members,Di),this.iconCollisionBox=new Py(zn,nC.members,Di);for(let r=0;r<this.symbolInstances.length;r++){const l=this.symbolInstances.get(r);this.addDebugCollisionBoxes(l.textBoxStartIndex,l.textBoxEndIndex,l,!0),this.addDebugCollisionBoxes(l.verticalTextBoxStartIndex,l.verticalTextBoxEndIndex,l,!0),this.addDebugCollisionBoxes(l.iconBoxStartIndex,l.iconBoxEndIndex,l,!1),this.addDebugCollisionBoxes(l.verticalIconBoxStartIndex,l.verticalIconBoxEndIndex,l,!1)}}_deserializeCollisionBoxesForSymbol(r,l,p,y,w,b,S,L,M){const O={};for(let z=l;z<p;z++){const q=r.get(z);O.textBox={x1:q.x1,y1:q.y1,x2:q.x2,y2:q.y2,anchorPointX:q.anchorPointX,anchorPointY:q.anchorPointY},O.textFeatureIndex=q.featureIndex;break}for(let z=y;z<w;z++){const q=r.get(z);O.verticalTextBox={x1:q.x1,y1:q.y1,x2:q.x2,y2:q.y2,anchorPointX:q.anchorPointX,anchorPointY:q.anchorPointY},O.verticalTextFeatureIndex=q.featureIndex;break}for(let z=b;z<S;z++){const q=r.get(z);O.iconBox={x1:q.x1,y1:q.y1,x2:q.x2,y2:q.y2,anchorPointX:q.anchorPointX,anchorPointY:q.anchorPointY},O.iconFeatureIndex=q.featureIndex;break}for(let z=L;z<M;z++){const q=r.get(z);O.verticalIconBox={x1:q.x1,y1:q.y1,x2:q.x2,y2:q.y2,anchorPointX:q.anchorPointX,anchorPointY:q.anchorPointY},O.verticalIconFeatureIndex=q.featureIndex;break}return O}deserializeCollisionBoxes(r){this.collisionArrays=[];for(let l=0;l<this.symbolInstances.length;l++){const p=this.symbolInstances.get(l);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(r,p.textBoxStartIndex,p.textBoxEndIndex,p.verticalTextBoxStartIndex,p.verticalTextBoxEndIndex,p.iconBoxStartIndex,p.iconBoxEndIndex,p.verticalIconBoxStartIndex,p.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(r,l){const p=r.placedSymbolArray.get(l),y=p.vertexStartIndex+4*p.numGlyphs;for(let w=p.vertexStartIndex;w<y;w+=4)r.indexArray.emplaceBack(w,w+1,w+2),r.indexArray.emplaceBack(w+1,w+2,w+3)}getSortedSymbolIndexes(r){if(this.sortedAngle===r&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const l=Math.sin(r),p=Math.cos(r),y=[],w=[],b=[];for(let S=0;S<this.symbolInstances.length;++S){b.push(S);const L=this.symbolInstances.get(S);y.push(0|Math.round(l*L.anchorX+p*L.anchorY)),w.push(L.featureIndex)}return b.sort((S,L)=>y[S]-y[L]||w[L]-w[S]),b}addToSortKeyRanges(r,l){const p=this.sortKeyRanges[this.sortKeyRanges.length-1];p&&p.sortKey===l?p.symbolInstanceEnd=r+1:this.sortKeyRanges.push({sortKey:l,symbolInstanceStart:r,symbolInstanceEnd:r+1})}sortFeatures(r){if(this.sortFeaturesByY&&this.sortedAngle!==r&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(r),this.sortedAngle=r,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const l of this.symbolInstanceIndexes){const p=this.symbolInstances.get(l);this.featureSortOrder.push(p.featureIndex),[p.rightJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.leftJustifiedTextSymbolIndex].forEach((y,w,b)=>{y>=0&&b.indexOf(y)===w&&this.addIndicesForPlacedSymbol(this.text,y)}),p.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,p.verticalPlacedTextSymbolIndex),p.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,p.placedIconSymbolIndex),p.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,p.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let bC,xC;Oe("SymbolBucket",hh,{omit:["layers","collisionBoxArray","features","compareText"]}),hh.MAX_GLYPHS=65535,hh.addDynamicAttributes=Uy;var Qy={get paint(){return xC=xC||new f({"icon-opacity":new hr(rt.paint_symbol["icon-opacity"]),"icon-color":new hr(rt.paint_symbol["icon-color"]),"icon-halo-color":new hr(rt.paint_symbol["icon-halo-color"]),"icon-halo-width":new hr(rt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new hr(rt.paint_symbol["icon-halo-blur"]),"icon-translate":new Ge(rt.paint_symbol["icon-translate"]),"icon-translate-anchor":new Ge(rt.paint_symbol["icon-translate-anchor"]),"text-opacity":new hr(rt.paint_symbol["text-opacity"]),"text-color":new hr(rt.paint_symbol["text-color"],{runtimeType:_r,getOverride:a=>a.textColor,hasOverride:a=>!!a.textColor}),"text-halo-color":new hr(rt.paint_symbol["text-halo-color"]),"text-halo-width":new hr(rt.paint_symbol["text-halo-width"]),"text-halo-blur":new hr(rt.paint_symbol["text-halo-blur"]),"text-translate":new Ge(rt.paint_symbol["text-translate"]),"text-translate-anchor":new Ge(rt.paint_symbol["text-translate-anchor"])})},get layout(){return bC=bC||new f({"symbol-placement":new Ge(rt.layout_symbol["symbol-placement"]),"symbol-spacing":new Ge(rt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Ge(rt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new hr(rt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Ge(rt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Ge(rt.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Ge(rt.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Ge(rt.layout_symbol["icon-ignore-placement"]),"icon-optional":new Ge(rt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Ge(rt.layout_symbol["icon-rotation-alignment"]),"icon-size":new hr(rt.layout_symbol["icon-size"]),"icon-text-fit":new Ge(rt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Ge(rt.layout_symbol["icon-text-fit-padding"]),"icon-image":new hr(rt.layout_symbol["icon-image"]),"icon-rotate":new hr(rt.layout_symbol["icon-rotate"]),"icon-padding":new hr(rt.layout_symbol["icon-padding"]),"icon-keep-upright":new Ge(rt.layout_symbol["icon-keep-upright"]),"icon-offset":new hr(rt.layout_symbol["icon-offset"]),"icon-anchor":new hr(rt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Ge(rt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Ge(rt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Ge(rt.layout_symbol["text-rotation-alignment"]),"text-field":new hr(rt.layout_symbol["text-field"]),"text-font":new hr(rt.layout_symbol["text-font"]),"text-size":new hr(rt.layout_symbol["text-size"]),"text-max-width":new hr(rt.layout_symbol["text-max-width"]),"text-line-height":new Ge(rt.layout_symbol["text-line-height"]),"text-letter-spacing":new hr(rt.layout_symbol["text-letter-spacing"]),"text-justify":new hr(rt.layout_symbol["text-justify"]),"text-radial-offset":new hr(rt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Ge(rt.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new hr(rt.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new hr(rt.layout_symbol["text-anchor"]),"text-max-angle":new Ge(rt.layout_symbol["text-max-angle"]),"text-writing-mode":new Ge(rt.layout_symbol["text-writing-mode"]),"text-rotate":new hr(rt.layout_symbol["text-rotate"]),"text-padding":new Ge(rt.layout_symbol["text-padding"]),"text-keep-upright":new Ge(rt.layout_symbol["text-keep-upright"]),"text-transform":new hr(rt.layout_symbol["text-transform"]),"text-offset":new hr(rt.layout_symbol["text-offset"]),"text-allow-overlap":new Ge(rt.layout_symbol["text-allow-overlap"]),"text-overlap":new Ge(rt.layout_symbol["text-overlap"]),"text-ignore-placement":new Ge(rt.layout_symbol["text-ignore-placement"]),"text-optional":new Ge(rt.layout_symbol["text-optional"])})}};class BC{constructor(r){if(r.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=r.property.overrides?r.property.overrides.runtimeType:Zr,this.defaultValue=r}evaluate(r){if(r.formattedSection){const l=this.defaultValue.property.overrides;if(l&&l.hasOverride(r.formattedSection))return l.getOverride(r.formattedSection)}return r.feature&&r.featureState?this.defaultValue.evaluate(r.feature,r.featureState):this.defaultValue.property.specification.default}eachChild(r){this.defaultValue.isConstant()||r(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Oe("FormatSectionOverride",BC,{omit:["defaultValue"]});class Ag extends o{constructor(r){super(r,Qy)}recalculate(r,l){if(super.recalculate(r,l),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const p=this.layout.get("text-writing-mode");if(p){const y=[];for(const w of p)y.indexOf(w)<0&&y.push(w);this.layout._values["text-writing-mode"]=y}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(r,l,p,y){const w=this.layout.get(r).evaluate(l,{},p,y),b=this._unevaluatedLayout._values[r];return b.isDataDriven()||no(b.value)||!w?w:function(S,L){return L.replace(/{([^{}]+)}/g,(M,O)=>S&&O in S?String(S[O]):"")}(l.properties,w)}createBucket(r){return new hh(r)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const r of Qy.paint.overridableProperties){if(!Ag.hasPaintOverride(this.layout,r))continue;const l=this.paint.get(r),p=new BC(l),y=new Si(p,l.property.specification);let w=null;w=l.value.kind==="constant"||l.value.kind==="source"?new vn("source",y):new Gs("composite",y,l.value.zoomStops),this.paint._values[r]=new Ys(l.property,w,l.parameters)}}_handleOverridablePaintPropertyUpdate(r,l,p){return!(!this.layout||l.isDataDriven()||p.isDataDriven())&&Ag.hasPaintOverride(this.layout,r)}static hasPaintOverride(r,l){const p=r.get("text-field"),y=Qy.paint.properties[l];let w=!1;const b=S=>{for(const L of S)if(y.overrides&&y.overrides.hasOverride(L))return void(w=!0)};if(p.value.kind==="constant"&&p.value.value instanceof yi)b(p.value.value.sections);else if(p.value.kind==="source"){const S=M=>{w||(M instanceof $n&&Qi(M.value)===Kr?b(M.value.sections):M instanceof mA?b(M.sections):M.eachChild(S))},L=p.value;L._styleExpression&&S(L._styleExpression.expression)}return w}}let CC;var Qz={get paint(){return CC=CC||new f({"background-color":new Ge(rt.paint_background["background-color"]),"background-pattern":new _(rt.paint_background["background-pattern"]),"background-opacity":new Ge(rt.paint_background["background-opacity"])})}};class kz extends o{constructor(r){super(r,Qz)}}let FC;var Mz={get paint(){return FC=FC||new f({"raster-opacity":new Ge(rt.paint_raster["raster-opacity"]),"raster-hue-rotate":new Ge(rt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Ge(rt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Ge(rt.paint_raster["raster-brightness-max"]),"raster-saturation":new Ge(rt.paint_raster["raster-saturation"]),"raster-contrast":new Ge(rt.paint_raster["raster-contrast"]),"raster-resampling":new Ge(rt.paint_raster["raster-resampling"]),"raster-fade-duration":new Ge(rt.paint_raster["raster-fade-duration"])})}};class Dz extends o{constructor(r){super(r,Mz)}}class Nz extends o{constructor(r){super(r,{}),this.onAdd=l=>{this.implementation.onAdd&&this.implementation.onAdd(l,l.painter.context.gl)},this.onRemove=l=>{this.implementation.onRemove&&this.implementation.onRemove(l,l.painter.context.gl)},this.implementation=r}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class Oz{constructor(r){this._methodToThrottle=r,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const ky=63710088e-1;class dc{constructor(r,l){if(isNaN(r)||isNaN(l))throw new Error(`Invalid LngLat object: (${r}, ${l})`);if(this.lng=+r,this.lat=+l,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new dc(Ut(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(r){const l=Math.PI/180,p=this.lat*l,y=r.lat*l,w=Math.sin(p)*Math.sin(y)+Math.cos(p)*Math.cos(y)*Math.cos((r.lng-this.lng)*l);return ky*Math.acos(Math.min(w,1))}static convert(r){if(r instanceof dc)return r;if(Array.isArray(r)&&(r.length===2||r.length===3))return new dc(Number(r[0]),Number(r[1]));if(!Array.isArray(r)&&typeof r=="object"&&r!==null)return new dc(Number("lng"in r?r.lng:r.lon),Number(r.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const SC=2*Math.PI*ky;function IC(a){return SC*Math.cos(a*Math.PI/180)}function EC(a){return(180+a)/360}function TC(a){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+a*Math.PI/360)))/360}function UC(a,r){return a/IC(r)}function My(a){return 360/Math.PI*Math.atan(Math.exp((180-360*a)*Math.PI/180))-90}class Md{constructor(r,l,p=0){this.x=+r,this.y=+l,this.z=+p}static fromLngLat(r,l=0){const p=dc.convert(r);return new Md(EC(p.lng),TC(p.lat),UC(l,p.lat))}toLngLat(){return new dc(360*this.x-180,My(this.y))}toAltitude(){return this.z*IC(My(this.y))}meterInMercatorCoordinateUnits(){return 1/SC*(r=My(this.y),1/Math.cos(r*Math.PI/180));var r}}function LC(a,r,l){var p=2*Math.PI*6378137/256/Math.pow(2,l);return[a*p-2*Math.PI*6378137/2,r*p-2*Math.PI*6378137/2]}class Dy{constructor(r,l,p){if(!function(y,w,b){return!(y<0||y>25||b<0||b>=Math.pow(2,y)||w<0||w>=Math.pow(2,y))}(r,l,p))throw new Error(`x=${l}, y=${p}, z=${r} outside of bounds. 0<=x<${Math.pow(2,r)}, 0<=y<${Math.pow(2,r)} 0<=z<=25 `);this.z=r,this.x=l,this.y=p,this.key=Dd(0,r,r,l,p)}equals(r){return this.z===r.z&&this.x===r.x&&this.y===r.y}url(r,l,p){const y=(b=this.y,S=this.z,L=LC(256*(w=this.x),256*(b=Math.pow(2,S)-b-1),S),M=LC(256*(w+1),256*(b+1),S),L[0]+","+L[1]+","+M[0]+","+M[1]);var w,b,S,L,M;const O=function(z,q,Y){let it,lt="";for(let wt=z;wt>0;wt--)it=1<<wt-1,lt+=(q&it?1:0)+(Y&it?2:0);return lt}(this.z,this.x,this.y);return r[(this.x+this.y)%r.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(p==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,l>1?"@2x":"").replace(/{quadkey}/g,O).replace(/{bbox-epsg-3857}/g,y)}isChildOf(r){const l=this.z-r.z;return l>0&&r.x===this.x>>l&&r.y===this.y>>l}getTilePoint(r){const l=Math.pow(2,this.z);return new T((r.x*l-this.x)*xi,(r.y*l-this.y)*xi)}toString(){return`${this.z}/${this.x}/${this.y}`}}class PC{constructor(r,l){this.wrap=r,this.canonical=l,this.key=Dd(r,l.z,l.z,l.x,l.y)}}class Oa{constructor(r,l,p,y,w){if(r<p)throw new Error(`overscaledZ should be >= z; overscaledZ = ${r}; z = ${p}`);this.overscaledZ=r,this.wrap=l,this.canonical=new Dy(p,+y,+w),this.key=Dd(l,r,p,y,w)}clone(){return new Oa(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(r){return this.overscaledZ===r.overscaledZ&&this.wrap===r.wrap&&this.canonical.equals(r.canonical)}scaledTo(r){if(r>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${r}; overscaledZ = ${this.overscaledZ}`);const l=this.canonical.z-r;return r>this.canonical.z?new Oa(r,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Oa(r,this.wrap,r,this.canonical.x>>l,this.canonical.y>>l)}calculateScaledKey(r,l){if(r>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${r}; overscaledZ = ${this.overscaledZ}`);const p=this.canonical.z-r;return r>this.canonical.z?Dd(this.wrap*+l,r,this.canonical.z,this.canonical.x,this.canonical.y):Dd(this.wrap*+l,r,r,this.canonical.x>>p,this.canonical.y>>p)}isChildOf(r){if(r.wrap!==this.wrap)return!1;const l=this.canonical.z-r.canonical.z;return r.overscaledZ===0||r.overscaledZ<this.overscaledZ&&r.canonical.x===this.canonical.x>>l&&r.canonical.y===this.canonical.y>>l}children(r){if(this.overscaledZ>=r)return[new Oa(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const l=this.canonical.z+1,p=2*this.canonical.x,y=2*this.canonical.y;return[new Oa(l,this.wrap,l,p,y),new Oa(l,this.wrap,l,p+1,y),new Oa(l,this.wrap,l,p,y+1),new Oa(l,this.wrap,l,p+1,y+1)]}isLessThan(r){return this.wrap<r.wrap||!(this.wrap>r.wrap)&&(this.overscaledZ<r.overscaledZ||!(this.overscaledZ>r.overscaledZ)&&(this.canonical.x<r.canonical.x||!(this.canonical.x>r.canonical.x)&&this.canonical.y<r.canonical.y))}wrapped(){return new Oa(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(r){return new Oa(this.overscaledZ,r,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new PC(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(r){return this.canonical.getTilePoint(new Md(r.x-this.wrap,r.y))}}function Dd(a,r,l,p,y){(a*=2)<0&&(a=-1*a-1);const w=1<<l;return(w*w*a+w*y+p).toString(36)+l.toString(36)+r.toString(36)}Oe("CanonicalTileID",Dy),Oe("OverscaledTileID",Oa,{omit:["posMatrix"]});class QC{constructor(r,l,p,y=1,w=1,b=1,S=0){if(this.uid=r,l.height!==l.width)throw new RangeError("DEM tiles must be square");if(p&&!["mapbox","terrarium","custom"].includes(p))return void mt(`"${p}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=l.height;const L=this.dim=l.height-2;switch(this.data=new Uint32Array(l.data.buffer),p){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=y,this.greenFactor=w,this.blueFactor=b,this.baseShift=S;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let M=0;M<L;M++)this.data[this._idx(-1,M)]=this.data[this._idx(0,M)],this.data[this._idx(L,M)]=this.data[this._idx(L-1,M)],this.data[this._idx(M,-1)]=this.data[this._idx(M,0)],this.data[this._idx(M,L)]=this.data[this._idx(M,L-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(L,-1)]=this.data[this._idx(L-1,0)],this.data[this._idx(-1,L)]=this.data[this._idx(0,L-1)],this.data[this._idx(L,L)]=this.data[this._idx(L-1,L-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let M=0;M<L;M++)for(let O=0;O<L;O++){const z=this.get(M,O);z>this.max&&(this.max=z),z<this.min&&(this.min=z)}}get(r,l){const p=new Uint8Array(this.data.buffer),y=4*this._idx(r,l);return this.unpack(p[y],p[y+1],p[y+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(r,l){if(r<-1||r>=this.dim+1||l<-1||l>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(l+1)*this.stride+(r+1)}unpack(r,l,p){return r*this.redFactor+l*this.greenFactor+p*this.blueFactor-this.baseShift}getPixels(){return new Na({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(r,l,p){if(this.dim!==r.dim)throw new Error("dem dimension mismatch");let y=l*this.dim,w=l*this.dim+this.dim,b=p*this.dim,S=p*this.dim+this.dim;switch(l){case-1:y=w-1;break;case 1:w=y+1}switch(p){case-1:b=S-1;break;case 1:S=b+1}const L=-l*this.dim,M=-p*this.dim;for(let O=b;O<S;O++)for(let z=y;z<w;z++)this.data[this._idx(z,O)]=r.data[this._idx(z+L,O+M)]}}Oe("DEMData",QC);class kC{constructor(r){this._stringToNumber={},this._numberToString=[];for(let l=0;l<r.length;l++){const p=r[l];this._stringToNumber[p]=l,this._numberToString[l]=p}}encode(r){return this._stringToNumber[r]}decode(r){if(r>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${r} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[r]}}class MC{constructor(r,l,p,y,w){this.type="Feature",this._vectorTileFeature=r,r._z=l,r._x=p,r._y=y,this.properties=r.properties,this.id=w}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(r){this._geometry=r}toJSON(){const r={geometry:this.geometry};for(const l in this)l!=="_geometry"&&l!=="_vectorTileFeature"&&(r[l]=this[l]);return r}}class DC{constructor(r,l){this.tileID=r,this.x=r.canonical.x,this.y=r.canonical.y,this.z=r.canonical.z,this.grid=new PA(xi,16,0),this.grid3D=new PA(xi,16,0),this.featureIndexArray=new ri,this.promoteId=l}insert(r,l,p,y,w,b){const S=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(p,y,w);const L=b?this.grid3D:this.grid;for(let M=0;M<l.length;M++){const O=l[M],z=[1/0,1/0,-1/0,-1/0];for(let q=0;q<O.length;q++){const Y=O[q];z[0]=Math.min(z[0],Y.x),z[1]=Math.min(z[1],Y.y),z[2]=Math.max(z[2],Y.x),z[3]=Math.max(z[3],Y.y)}z[0]<xi&&z[1]<xi&&z[2]>=0&&z[3]>=0&&L.insert(S,z[0],z[1],z[2],z[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new cc.VectorTile(new Cy(this.rawTileData)).layers,this.sourceLayerCoder=new kC(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(r,l,p,y){this.loadVTLayers();const w=r.params||{},b=xi/r.tileSize/r.scale,S=Pa(w.filter),L=r.queryGeometry,M=r.queryPadding*b,O=OC(L),z=this.grid.query(O.minX-M,O.minY-M,O.maxX+M,O.maxY+M),q=OC(r.cameraQueryGeometry),Y=this.grid3D.query(q.minX-M,q.minY-M,q.maxX+M,q.maxY+M,(wt,It,Kt,Mt)=>function(Ht,re,_e,Ne,fr){for(const ke of Ht)if(re<=ke.x&&_e<=ke.y&&Ne>=ke.x&&fr>=ke.y)return!0;const De=[new T(re,_e),new T(re,fr),new T(Ne,fr),new T(Ne,_e)];if(Ht.length>2){for(const ke of De)if(HA(Ht,ke))return!0}for(let ke=0;ke<Ht.length-1;ke++)if(xd(Ht[ke],Ht[ke+1],De))return!0;return!1}(r.cameraQueryGeometry,wt-M,It-M,Kt+M,Mt+M));for(const wt of Y)z.push(wt);z.sort(Rz);const it={};let lt;for(let wt=0;wt<z.length;wt++){const It=z[wt];if(It===lt)continue;lt=It;const Kt=this.featureIndexArray.get(It);let Mt=null;this.loadMatchingFeature(it,Kt.bucketIndex,Kt.sourceLayerIndex,Kt.featureIndex,S,w.layers,w.availableImages,l,p,y,(Ht,re,_e)=>(Mt||(Mt=Sl(Ht)),re.queryIntersectsFeature(L,Ht,_e,Mt,this.z,r.transform,b,r.pixelPosMatrix)))}return it}loadMatchingFeature(r,l,p,y,w,b,S,L,M,O,z){const q=this.bucketLayerIDs[l];if(b&&!function(wt,It){for(let Kt=0;Kt<wt.length;Kt++)if(It.indexOf(wt[Kt])>=0)return!0;return!1}(b,q))return;const Y=this.sourceLayerCoder.decode(p),it=this.vtLayers[Y].feature(y);if(w.needGeometry){const wt=RA(it,!0);if(!w.filter(new ci(this.tileID.overscaledZ),wt,this.tileID.canonical))return}else if(!w.filter(new ci(this.tileID.overscaledZ),it))return;const lt=this.getId(it,Y);for(let wt=0;wt<q.length;wt++){const It=q[wt];if(b&&b.indexOf(It)<0)continue;const Kt=L[It];if(!Kt)continue;let Mt={};lt&&O&&(Mt=O.getState(Kt.sourceLayer||"_geojsonTileLayer",lt));const Ht=xt({},M[It]);Ht.paint=NC(Ht.paint,Kt.paint,it,Mt,S),Ht.layout=NC(Ht.layout,Kt.layout,it,Mt,S);const re=!z||z(it,Kt,Mt);if(!re)continue;const _e=new MC(it,this.z,this.x,this.y,lt);_e.layer=Ht;let Ne=r[It];Ne===void 0&&(Ne=r[It]=[]),Ne.push({featureIndex:y,feature:_e,intersectionZ:re})}}lookupSymbolFeatures(r,l,p,y,w,b,S,L){const M={};this.loadVTLayers();const O=Pa(w);for(const z of r)this.loadMatchingFeature(M,p,y,z,O,b,S,L,l);return M}hasLayer(r){for(const l of this.bucketLayerIDs)for(const p of l)if(r===p)return!0;return!1}getId(r,l){let p=r.id;return this.promoteId&&(p=r.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[l]],typeof p=="boolean"&&(p=Number(p))),p}}function NC(a,r,l,p,y){return kt(a,(w,b)=>{const S=r instanceof Ao?r.get(b):null;return S&&S.evaluate?S.evaluate(l,p,y):S})}function OC(a){let r=1/0,l=1/0,p=-1/0,y=-1/0;for(const w of a)r=Math.min(r,w.x),l=Math.min(l,w.y),p=Math.max(p,w.x),y=Math.max(y,w.y);return{minX:r,minY:l,maxX:p,maxY:y}}function Rz(a,r){return r-a}function RC(a,r,l,p,y){const w=[];for(let b=0;b<a.length;b++){const S=a[b];let L;for(let M=0;M<S.length-1;M++){let O=S[M],z=S[M+1];O.x<r&&z.x<r||(O.x<r?O=new T(r,O.y+(r-O.x)/(z.x-O.x)*(z.y-O.y))._round():z.x<r&&(z=new T(r,O.y+(r-O.x)/(z.x-O.x)*(z.y-O.y))._round()),O.y<l&&z.y<l||(O.y<l?O=new T(O.x+(l-O.y)/(z.y-O.y)*(z.x-O.x),l)._round():z.y<l&&(z=new T(O.x+(l-O.y)/(z.y-O.y)*(z.x-O.x),l)._round()),O.x>=p&&z.x>=p||(O.x>=p?O=new T(p,O.y+(p-O.x)/(z.x-O.x)*(z.y-O.y))._round():z.x>=p&&(z=new T(p,O.y+(p-O.x)/(z.x-O.x)*(z.y-O.y))._round()),O.y>=y&&z.y>=y||(O.y>=y?O=new T(O.x+(y-O.y)/(z.y-O.y)*(z.x-O.x),y)._round():z.y>=y&&(z=new T(O.x+(y-O.y)/(z.y-O.y)*(z.x-O.x),y)._round()),L&&O.equals(L[L.length-1])||(L=[O],w.push(L)),L.push(z)))))}}return w}Oe("FeatureIndex",DC,{omit:["rawTileData","sourceLayerCoder"]});class pc extends T{constructor(r,l,p,y){super(r,l),this.angle=p,y!==void 0&&(this.segment=y)}clone(){return new pc(this.x,this.y,this.angle,this.segment)}}function zC(a,r,l,p,y){if(r.segment===void 0||l===0)return!0;let w=r,b=r.segment+1,S=0;for(;S>-l/2;){if(b--,b<0)return!1;S-=a[b].dist(w),w=a[b]}S+=a[b].dist(a[b+1]),b++;const L=[];let M=0;for(;S<l/2;){const O=a[b],z=a[b+1];if(!z)return!1;let q=a[b-1].angleTo(O)-O.angleTo(z);for(q=Math.abs((q+3*Math.PI)%(2*Math.PI)-Math.PI),L.push({distance:S,angleDelta:q}),M+=q;S-L[0].distance>p;)M-=L.shift().angleDelta;if(M>y)return!1;b++,S+=O.dist(z)}return!0}function HC(a){let r=0;for(let l=0;l<a.length-1;l++)r+=a[l].dist(a[l+1]);return r}function VC(a,r,l){return a?.6*r*l:0}function jC(a,r){return Math.max(a?a.right-a.left:0,r?r.right-r.left:0)}function zz(a,r,l,p,y,w){const b=VC(l,y,w),S=jC(l,p)*w;let L=0;const M=HC(a)/2;for(let O=0;O<a.length-1;O++){const z=a[O],q=a[O+1],Y=z.dist(q);if(L+Y>M){const it=(M-L)/Y,lt=gn.number(z.x,q.x,it),wt=gn.number(z.y,q.y,it),It=new pc(lt,wt,q.angleTo(z),O);return It._round(),!b||zC(a,It,S,b,r)?It:void 0}L+=Y}}function Hz(a,r,l,p,y,w,b,S,L){const M=VC(p,w,b),O=jC(p,y),z=O*b,q=a[0].x===0||a[0].x===L||a[0].y===0||a[0].y===L;return r-z<r/4&&(r=z+r/4),KC(a,q?r/2*S%r:(O/2+2*w)*b*S%r,r,M,l,z,q,!1,L)}function KC(a,r,l,p,y,w,b,S,L){const M=w/2,O=HC(a);let z=0,q=r-l,Y=[];for(let it=0;it<a.length-1;it++){const lt=a[it],wt=a[it+1],It=lt.dist(wt),Kt=wt.angleTo(lt);for(;q+l<z+It;){q+=l;const Mt=(q-z)/It,Ht=gn.number(lt.x,wt.x,Mt),re=gn.number(lt.y,wt.y,Mt);if(Ht>=0&&Ht<L&&re>=0&&re<L&&q-M>=0&&q+M<=O){const _e=new pc(Ht,re,Kt,it);_e._round(),p&&!zC(a,_e,w,p,y)||Y.push(_e)}}z+=It}return S||Y.length||b||(Y=KC(a,z/2,l,p,y,w,b,!0,L)),Y}Oe("Anchor",pc);const dh=ta;function $C(a,r,l,p){const y=[],w=a.image,b=w.pixelRatio,S=w.paddedRect.w-2*dh,L=w.paddedRect.h-2*dh;let M={x1:a.left,y1:a.top,x2:a.right,y2:a.bottom};const O=w.stretchX||[[0,S]],z=w.stretchY||[[0,L]],q=(le,rr)=>le+rr[1]-rr[0],Y=O.reduce(q,0),it=z.reduce(q,0),lt=S-Y,wt=L-it;let It=0,Kt=Y,Mt=0,Ht=it,re=0,_e=lt,Ne=0,fr=wt;if(w.content&&p){const le=w.content,rr=le[2]-le[0],Ze=le[3]-le[1];(w.textFitWidth||w.textFitHeight)&&(M=vC(a)),It=lg(O,0,le[0]),Mt=lg(z,0,le[1]),Kt=lg(O,le[0],le[2]),Ht=lg(z,le[1],le[3]),re=le[0]-It,Ne=le[1]-Mt,_e=rr-Kt,fr=Ze-Ht}const De=M.x1,ke=M.y1,tr=M.x2-De,Ke=M.y2-ke,ze=(le,rr,Ze,Br)=>{const gi=cg(le.stretch-It,Kt,tr,De),hi=ug(le.fixed-re,_e,le.stretch,Y),Pn=cg(rr.stretch-Mt,Ht,Ke,ke),fo=ug(rr.fixed-Ne,fr,rr.stretch,it),Wn=cg(Ze.stretch-It,Kt,tr,De),Qn=ug(Ze.fixed-re,_e,Ze.stretch,Y),Ts=cg(Br.stretch-Mt,Ht,Ke,ke),Us=ug(Br.fixed-Ne,fr,Br.stretch,it),Ls=new T(gi,Pn),qi=new T(Wn,Pn),kn=new T(Wn,Ts),ds=new T(gi,Ts),Zn=new T(hi/b,fo/b),Ps=new T(Qn/b,Us/b),Yn=r*Math.PI/180;if(Yn){const ii=Math.sin(Yn),Bi=Math.cos(Yn),Ei=[Bi,-ii,ii,Bi];Ls._matMult(Ei),qi._matMult(Ei),ds._matMult(Ei),kn._matMult(Ei)}const Ra=le.stretch+le.fixed,ea=rr.stretch+rr.fixed;return{tl:Ls,tr:qi,bl:ds,br:kn,tex:{x:w.paddedRect.x+dh+Ra,y:w.paddedRect.y+dh+ea,w:Ze.stretch+Ze.fixed-Ra,h:Br.stretch+Br.fixed-ea},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Zn,pixelOffsetBR:Ps,minFontScaleX:_e/b/tr,minFontScaleY:fr/b/Ke,isSDF:l}};if(p&&(w.stretchX||w.stretchY)){const le=GC(O,lt,Y),rr=GC(z,wt,it);for(let Ze=0;Ze<le.length-1;Ze++){const Br=le[Ze],gi=le[Ze+1];for(let hi=0;hi<rr.length-1;hi++)y.push(ze(Br,rr[hi],gi,rr[hi+1]))}}else y.push(ze({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:S+1},{fixed:0,stretch:L+1}));return y}function lg(a,r,l){let p=0;for(const y of a)p+=Math.max(r,Math.min(l,y[1]))-Math.max(r,Math.min(l,y[0]));return p}function GC(a,r,l){const p=[{fixed:-dh,stretch:0}];for(const[y,w]of a){const b=p[p.length-1];p.push({fixed:y-b.stretch,stretch:b.stretch}),p.push({fixed:y-b.stretch,stretch:b.stretch+(w-y)})}return p.push({fixed:r+dh,stretch:l}),p}function cg(a,r,l,p){return a/r*l+p}function ug(a,r,l,p){return a-r*l/p}class hg{constructor(r,l,p,y,w,b,S,L,M,O){var z;if(this.boxStartIndex=r.length,M){let q=b.top,Y=b.bottom;const it=b.collisionPadding;it&&(q-=it[1],Y+=it[3]);let lt=Y-q;lt>0&&(lt=Math.max(10,lt),this.circleDiameter=lt)}else{const q=!((z=b.image)===null||z===void 0)&&z.content&&(b.image.textFitWidth||b.image.textFitHeight)?vC(b):{x1:b.left,y1:b.top,x2:b.right,y2:b.bottom};q.y1=q.y1*S-L[0],q.y2=q.y2*S+L[2],q.x1=q.x1*S-L[3],q.x2=q.x2*S+L[1];const Y=b.collisionPadding;if(Y&&(q.x1-=Y[0]*S,q.y1-=Y[1]*S,q.x2+=Y[2]*S,q.y2+=Y[3]*S),O){const it=new T(q.x1,q.y1),lt=new T(q.x2,q.y1),wt=new T(q.x1,q.y2),It=new T(q.x2,q.y2),Kt=O*Math.PI/180;it._rotate(Kt),lt._rotate(Kt),wt._rotate(Kt),It._rotate(Kt),q.x1=Math.min(it.x,lt.x,wt.x,It.x),q.x2=Math.max(it.x,lt.x,wt.x,It.x),q.y1=Math.min(it.y,lt.y,wt.y,It.y),q.y2=Math.max(it.y,lt.y,wt.y,It.y)}r.emplaceBack(l.x,l.y,q.x1,q.y1,q.x2,q.y2,p,y,w)}this.boxEndIndex=r.length}}class Vz{constructor(r=[],l=(p,y)=>p<y?-1:p>y?1:0){if(this.data=r,this.length=this.data.length,this.compare=l,this.length>0)for(let p=(this.length>>1)-1;p>=0;p--)this._down(p)}push(r){this.data.push(r),this._up(this.length++)}pop(){if(this.length===0)return;const r=this.data[0],l=this.data.pop();return--this.length>0&&(this.data[0]=l,this._down(0)),r}peek(){return this.data[0]}_up(r){const{data:l,compare:p}=this,y=l[r];for(;r>0;){const w=r-1>>1,b=l[w];if(p(y,b)>=0)break;l[r]=b,r=w}l[r]=y}_down(r){const{data:l,compare:p}=this,y=this.length>>1,w=l[r];for(;r<y;){let b=1+(r<<1);const S=b+1;if(S<this.length&&p(l[S],l[b])<0&&(b=S),p(l[b],w)>=0)break;l[r]=l[b],r=b}l[r]=w}}function jz(a,r=1,l=!1){let p=1/0,y=1/0,w=-1/0,b=-1/0;const S=a[0];for(let Y=0;Y<S.length;Y++){const it=S[Y];(!Y||it.x<p)&&(p=it.x),(!Y||it.y<y)&&(y=it.y),(!Y||it.x>w)&&(w=it.x),(!Y||it.y>b)&&(b=it.y)}const L=Math.min(w-p,b-y);let M=L/2;const O=new Vz([],Kz);if(L===0)return new T(p,y);for(let Y=p;Y<w;Y+=L)for(let it=y;it<b;it+=L)O.push(new ph(Y+M,it+M,M,a));let z=function(Y){let it=0,lt=0,wt=0;const It=Y[0];for(let Kt=0,Mt=It.length,Ht=Mt-1;Kt<Mt;Ht=Kt++){const re=It[Kt],_e=It[Ht],Ne=re.x*_e.y-_e.x*re.y;lt+=(re.x+_e.x)*Ne,wt+=(re.y+_e.y)*Ne,it+=3*Ne}return new ph(lt/it,wt/it,0,Y)}(a),q=O.length;for(;O.length;){const Y=O.pop();(Y.d>z.d||!z.d)&&(z=Y,l&&console.log("found best %d after %d probes",Math.round(1e4*Y.d)/1e4,q)),Y.max-z.d<=r||(M=Y.h/2,O.push(new ph(Y.p.x-M,Y.p.y-M,M,a)),O.push(new ph(Y.p.x+M,Y.p.y-M,M,a)),O.push(new ph(Y.p.x-M,Y.p.y+M,M,a)),O.push(new ph(Y.p.x+M,Y.p.y+M,M,a)),q+=4)}return l&&(console.log(`num probes: ${q}`),console.log(`best distance: ${z.d}`)),z.p}function Kz(a,r){return r.max-a.max}function ph(a,r,l,p){this.p=new T(a,r),this.h=l,this.d=function(y,w){let b=!1,S=1/0;for(let L=0;L<w.length;L++){const M=w[L];for(let O=0,z=M.length,q=z-1;O<z;q=O++){const Y=M[O],it=M[q];Y.y>y.y!=it.y>y.y&&y.x<(it.x-Y.x)*(y.y-Y.y)/(it.y-Y.y)+Y.x&&(b=!b),S=Math.min(S,bd(y,Y,it))}}return(b?1:-1)*Math.sqrt(S)}(this.p,p),this.max=this.d+this.h*Math.SQRT2}var Xn;d.aq=void 0,(Xn=d.aq||(d.aq={}))[Xn.center=1]="center",Xn[Xn.left=2]="left",Xn[Xn.right=3]="right",Xn[Xn.top=4]="top",Xn[Xn.bottom=5]="bottom",Xn[Xn["top-left"]=6]="top-left",Xn[Xn["top-right"]=7]="top-right",Xn[Xn["bottom-left"]=8]="bottom-left",Xn[Xn["bottom-right"]=9]="bottom-right";const fc=7,Ny=Number.POSITIVE_INFINITY;function qC(a,r){return r[1]!==Ny?function(l,p,y){let w=0,b=0;switch(p=Math.abs(p),y=Math.abs(y),l){case"top-right":case"top-left":case"top":b=y-fc;break;case"bottom-right":case"bottom-left":case"bottom":b=-y+fc}switch(l){case"top-right":case"bottom-right":case"right":w=-p;break;case"top-left":case"bottom-left":case"left":w=p}return[w,b]}(a,r[0],r[1]):function(l,p){let y=0,w=0;p<0&&(p=0);const b=p/Math.SQRT2;switch(l){case"top-right":case"top-left":w=b-fc;break;case"bottom-right":case"bottom-left":w=-b+fc;break;case"bottom":w=-p+fc;break;case"top":w=p-fc}switch(l){case"top-right":case"bottom-right":y=-b;break;case"top-left":case"bottom-left":y=b;break;case"left":y=p;break;case"right":y=-p}return[y,w]}(a,r[0])}function XC(a,r,l){var p;const y=a.layout,w=(p=y.get("text-variable-anchor-offset"))===null||p===void 0?void 0:p.evaluate(r,{},l);if(w){const S=w.values,L=[];for(let M=0;M<S.length;M+=2){const O=L[M]=S[M],z=S[M+1].map(q=>q*_n);O.startsWith("top")?z[1]-=fc:O.startsWith("bottom")&&(z[1]+=fc),L[M+1]=z}return new pn(L)}const b=y.get("text-variable-anchor");if(b){let S;S=a._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[y.get("text-radial-offset").evaluate(r,{},l)*_n,Ny]:y.get("text-offset").evaluate(r,{},l).map(M=>M*_n);const L=[];for(const M of b)L.push(M,qC(M,S));return new pn(L)}return null}function Oy(a){switch(a){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function $z(a,r,l,p,y,w,b,S,L,M,O){let z=w.textMaxSize.evaluate(r,{});z===void 0&&(z=b);const q=a.layers[0].layout,Y=q.get("icon-offset").evaluate(r,{},O),it=ZC(l.horizontal),lt=b/24,wt=a.tilePixelRatio*lt,It=a.tilePixelRatio*z/24,Kt=a.tilePixelRatio*S,Mt=a.tilePixelRatio*q.get("symbol-spacing"),Ht=q.get("text-padding")*a.tilePixelRatio,re=function(le,rr,Ze,Br=1){const gi=le.get("icon-padding").evaluate(rr,{},Ze),hi=gi&&gi.values;return[hi[0]*Br,hi[1]*Br,hi[2]*Br,hi[3]*Br]}(q,r,O,a.tilePixelRatio),_e=q.get("text-max-angle")/180*Math.PI,Ne=q.get("text-rotation-alignment")!=="viewport"&&q.get("symbol-placement")!=="point",fr=q.get("icon-rotation-alignment")==="map"&&q.get("symbol-placement")!=="point",De=q.get("symbol-placement"),ke=Mt/2,tr=q.get("icon-text-fit");let Ke;p&&tr!=="none"&&(a.allowVerticalPlacement&&l.vertical&&(Ke=wC(p,l.vertical,tr,q.get("icon-text-fit-padding"),Y,lt)),it&&(p=wC(p,it,tr,q.get("icon-text-fit-padding"),Y,lt)));const ze=(le,rr)=>{rr.x<0||rr.x>=xi||rr.y<0||rr.y>=xi||function(Ze,Br,gi,hi,Pn,fo,Wn,Qn,Ts,Us,Ls,qi,kn,ds,Zn,Ps,Yn,Ra,ea,ii,Bi,Ei,ba,Hi,fh){const jA=Ze.addToLineVertexArray(Br,gi);let KA,go,za,Hn,Tl=0,Rd=0,e4=0,r4=0,Gy=-1,qy=-1;const Ul={};let i4=Ac("");if(Ze.allowVerticalPlacement&&hi.vertical){const ps=Qn.layout.get("text-rotate").evaluate(Bi,{},Hi)+90;za=new hg(Ts,Br,Us,Ls,qi,hi.vertical,kn,ds,Zn,ps),Wn&&(Hn=new hg(Ts,Br,Us,Ls,qi,Wn,Yn,Ra,Zn,ps))}if(Pn){const ps=Qn.layout.get("icon-rotate").evaluate(Bi,{}),Ha=Qn.layout.get("icon-text-fit")!=="none",nu=$C(Pn,ps,ba,Ha),Yo=Wn?$C(Wn,ps,ba,Ha):void 0;go=new hg(Ts,Br,Us,Ls,qi,Pn,Yn,Ra,!1,ps),Tl=4*nu.length;const su=Ze.iconSizeData;let $A=null;su.kind==="source"?($A=[VA*Qn.layout.get("icon-size").evaluate(Bi,{})],$A[0]>hc&&mt(`${Ze.layerIds[0]}: Value for "icon-size" is >= ${kd}. Reduce your "icon-size".`)):su.kind==="composite"&&($A=[VA*Ei.compositeIconSizes[0].evaluate(Bi,{},Hi),VA*Ei.compositeIconSizes[1].evaluate(Bi,{},Hi)],($A[0]>hc||$A[1]>hc)&&mt(`${Ze.layerIds[0]}: Value for "icon-size" is >= ${kd}. Reduce your "icon-size".`)),Ze.addSymbols(Ze.icon,nu,$A,ii,ea,Bi,d.ah.none,Br,jA.lineStartIndex,jA.lineLength,-1,Hi),Gy=Ze.icon.placedSymbolArray.length-1,Yo&&(Rd=4*Yo.length,Ze.addSymbols(Ze.icon,Yo,$A,ii,ea,Bi,d.ah.vertical,Br,jA.lineStartIndex,jA.lineLength,-1,Hi),qy=Ze.icon.placedSymbolArray.length-1)}const n4=Object.keys(hi.horizontal);for(const ps of n4){const Ha=hi.horizontal[ps];if(!KA){i4=Ac(Ha.text);const Yo=Qn.layout.get("text-rotate").evaluate(Bi,{},Hi);KA=new hg(Ts,Br,Us,Ls,qi,Ha,kn,ds,Zn,Yo)}const nu=Ha.positionedLines.length===1;if(e4+=WC(Ze,Br,Ha,fo,Qn,Zn,Bi,Ps,jA,hi.vertical?d.ah.horizontal:d.ah.horizontalOnly,nu?n4:[ps],Ul,Gy,Ei,Hi),nu)break}hi.vertical&&(r4+=WC(Ze,Br,hi.vertical,fo,Qn,Zn,Bi,Ps,jA,d.ah.vertical,["vertical"],Ul,qy,Ei,Hi));const Xz=KA?KA.boxStartIndex:Ze.collisionBoxArray.length,Wz=KA?KA.boxEndIndex:Ze.collisionBoxArray.length,Zz=za?za.boxStartIndex:Ze.collisionBoxArray.length,Yz=za?za.boxEndIndex:Ze.collisionBoxArray.length,Jz=go?go.boxStartIndex:Ze.collisionBoxArray.length,tH=go?go.boxEndIndex:Ze.collisionBoxArray.length,eH=Hn?Hn.boxStartIndex:Ze.collisionBoxArray.length,rH=Hn?Hn.boxEndIndex:Ze.collisionBoxArray.length;let Zo=-1;const pg=(ps,Ha)=>ps&&ps.circleDiameter?Math.max(ps.circleDiameter,Ha):Ha;Zo=pg(KA,Zo),Zo=pg(za,Zo),Zo=pg(go,Zo),Zo=pg(Hn,Zo);const s4=Zo>-1?1:0;s4&&(Zo*=fh/_n),Ze.glyphOffsetArray.length>=hh.MAX_GLYPHS&&mt("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Bi.sortKey!==void 0&&Ze.addToSortKeyRanges(Ze.symbolInstances.length,Bi.sortKey);const iH=XC(Qn,Bi,Hi),[nH,sH]=function(ps,Ha){const nu=ps.length,Yo=Ha==null?void 0:Ha.values;if((Yo==null?void 0:Yo.length)>0)for(let su=0;su<Yo.length;su+=2){const $A=Yo[su+1];ps.emplaceBack(d.aq[Yo[su]],$A[0],$A[1])}return[nu,ps.length]}(Ze.textAnchorOffsets,iH);Ze.symbolInstances.emplaceBack(Br.x,Br.y,Ul.right>=0?Ul.right:-1,Ul.center>=0?Ul.center:-1,Ul.left>=0?Ul.left:-1,Ul.vertical||-1,Gy,qy,i4,Xz,Wz,Zz,Yz,Jz,tH,eH,rH,Us,e4,r4,Tl,Rd,s4,0,kn,Zo,nH,sH)}(a,rr,le,l,p,y,Ke,a.layers[0],a.collisionBoxArray,r.index,r.sourceLayerIndex,a.index,wt,[Ht,Ht,Ht,Ht],Ne,L,Kt,re,fr,Y,r,w,M,O,b)};if(De==="line")for(const le of RC(r.geometry,0,0,xi,xi)){const rr=Hz(le,Mt,_e,l.vertical||it,p,24,It,a.overscaling,xi);for(const Ze of rr)it&&Gz(a,it.text,ke,Ze)||ze(le,Ze)}else if(De==="line-center"){for(const le of r.geometry)if(le.length>1){const rr=zz(le,_e,l.vertical||it,p,24,It);rr&&ze(le,rr)}}else if(r.type==="Polygon")for(const le of la(r.geometry,0)){const rr=jz(le,16);ze(le[0],new pc(rr.x,rr.y,0))}else if(r.type==="LineString")for(const le of r.geometry)ze(le,new pc(le[0].x,le[0].y,0));else if(r.type==="Point")for(const le of r.geometry)for(const rr of le)ze([rr],new pc(rr.x,rr.y,0))}function WC(a,r,l,p,y,w,b,S,L,M,O,z,q,Y,it){const lt=function(Kt,Mt,Ht,re,_e,Ne,fr,De){const ke=re.layout.get("text-rotate").evaluate(Ne,{})*Math.PI/180,tr=[];for(const Ke of Mt.positionedLines)for(const ze of Ke.positionedGlyphs){if(!ze.rect)continue;const le=ze.rect||{};let rr=hC+1,Ze=!0,Br=1,gi=0;const hi=(_e||De)&&ze.vertical,Pn=ze.metrics.advance*ze.scale/2;if(De&&Mt.verticalizable&&(gi=Ke.lineOffset/2-(ze.imageName?-(_n-ze.metrics.width*ze.scale)/2:(ze.scale-1)*_n)),ze.imageName){const ii=fr[ze.imageName];Ze=ii.sdf,Br=ii.pixelRatio,rr=ta/Br}const fo=_e?[ze.x+Pn,ze.y]:[0,0];let Wn=_e?[0,0]:[ze.x+Pn+Ht[0],ze.y+Ht[1]-gi],Qn=[0,0];hi&&(Qn=Wn,Wn=[0,0]);const Ts=ze.metrics.isDoubleResolution?2:1,Us=(ze.metrics.left-rr)*ze.scale-Pn+Wn[0],Ls=(-ze.metrics.top-rr)*ze.scale+Wn[1],qi=Us+le.w/Ts*ze.scale/Br,kn=Ls+le.h/Ts*ze.scale/Br,ds=new T(Us,Ls),Zn=new T(qi,Ls),Ps=new T(Us,kn),Yn=new T(qi,kn);if(hi){const ii=new T(-Pn,Pn-Pd),Bi=-Math.PI/2,Ei=_n/2-Pn,ba=new T(5-Pd-Ei,-(ze.imageName?Ei:0)),Hi=new T(...Qn);ds._rotateAround(Bi,ii)._add(ba)._add(Hi),Zn._rotateAround(Bi,ii)._add(ba)._add(Hi),Ps._rotateAround(Bi,ii)._add(ba)._add(Hi),Yn._rotateAround(Bi,ii)._add(ba)._add(Hi)}if(ke){const ii=Math.sin(ke),Bi=Math.cos(ke),Ei=[Bi,-ii,ii,Bi];ds._matMult(Ei),Zn._matMult(Ei),Ps._matMult(Ei),Yn._matMult(Ei)}const Ra=new T(0,0),ea=new T(0,0);tr.push({tl:ds,tr:Zn,bl:Ps,br:Yn,tex:le,writingMode:Mt.writingMode,glyphOffset:fo,sectionIndex:ze.sectionIndex,isSDF:Ze,pixelOffsetTL:Ra,pixelOffsetBR:ea,minFontScaleX:0,minFontScaleY:0})}return tr}(0,l,S,y,w,b,p,a.allowVerticalPlacement),wt=a.textSizeData;let It=null;wt.kind==="source"?(It=[VA*y.layout.get("text-size").evaluate(b,{})],It[0]>hc&&mt(`${a.layerIds[0]}: Value for "text-size" is >= ${kd}. Reduce your "text-size".`)):wt.kind==="composite"&&(It=[VA*Y.compositeTextSizes[0].evaluate(b,{},it),VA*Y.compositeTextSizes[1].evaluate(b,{},it)],(It[0]>hc||It[1]>hc)&&mt(`${a.layerIds[0]}: Value for "text-size" is >= ${kd}. Reduce your "text-size".`)),a.addSymbols(a.text,lt,It,S,w,b,M,r,L.lineStartIndex,L.lineLength,q,it);for(const Kt of O)z[Kt]=a.text.placedSymbolArray.length-1;return 4*lt.length}function ZC(a){for(const r in a)return a[r];return null}function Gz(a,r,l,p){const y=a.compareText;if(r in y){const w=y[r];for(let b=w.length-1;b>=0;b--)if(p.dist(w[b])<l)return!0}else y[r]=[];return y[r].push(p),!1}const YC=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class Ry{static from(r){if(!(r instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[l,p]=new Uint8Array(r,0,2);if(l!==219)throw new Error("Data does not appear to be in a KDBush format.");const y=p>>4;if(y!==1)throw new Error(`Got v${y} data when expected v1.`);const w=YC[15&p];if(!w)throw new Error("Unrecognized array type.");const[b]=new Uint16Array(r,2,1),[S]=new Uint32Array(r,4,1);return new Ry(S,b,w,r)}constructor(r,l=64,p=Float64Array,y){if(isNaN(r)||r<0)throw new Error(`Unpexpected numItems value: ${r}.`);this.numItems=+r,this.nodeSize=Math.min(Math.max(+l,2),65535),this.ArrayType=p,this.IndexArrayType=r<65536?Uint16Array:Uint32Array;const w=YC.indexOf(this.ArrayType),b=2*r*this.ArrayType.BYTES_PER_ELEMENT,S=r*this.IndexArrayType.BYTES_PER_ELEMENT,L=(8-S%8)%8;if(w<0)throw new Error(`Unexpected typed array class: ${p}.`);y&&y instanceof ArrayBuffer?(this.data=y,this.ids=new this.IndexArrayType(this.data,8,r),this.coords=new this.ArrayType(this.data,8+S+L,2*r),this._pos=2*r,this._finished=!0):(this.data=new ArrayBuffer(8+b+S+L),this.ids=new this.IndexArrayType(this.data,8,r),this.coords=new this.ArrayType(this.data,8+S+L,2*r),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+w]),new Uint16Array(this.data,2,1)[0]=l,new Uint32Array(this.data,4,1)[0]=r)}add(r,l){const p=this._pos>>1;return this.ids[p]=p,this.coords[this._pos++]=r,this.coords[this._pos++]=l,p}finish(){const r=this._pos>>1;if(r!==this.numItems)throw new Error(`Added ${r} items when expected ${this.numItems}.`);return zy(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(r,l,p,y){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:w,coords:b,nodeSize:S}=this,L=[0,w.length-1,0],M=[];for(;L.length;){const O=L.pop()||0,z=L.pop()||0,q=L.pop()||0;if(z-q<=S){for(let wt=q;wt<=z;wt++){const It=b[2*wt],Kt=b[2*wt+1];It>=r&&It<=p&&Kt>=l&&Kt<=y&&M.push(w[wt])}continue}const Y=q+z>>1,it=b[2*Y],lt=b[2*Y+1];it>=r&&it<=p&&lt>=l&&lt<=y&&M.push(w[Y]),(O===0?r<=it:l<=lt)&&(L.push(q),L.push(Y-1),L.push(1-O)),(O===0?p>=it:y>=lt)&&(L.push(Y+1),L.push(z),L.push(1-O))}return M}within(r,l,p){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:y,coords:w,nodeSize:b}=this,S=[0,y.length-1,0],L=[],M=p*p;for(;S.length;){const O=S.pop()||0,z=S.pop()||0,q=S.pop()||0;if(z-q<=b){for(let wt=q;wt<=z;wt++)t4(w[2*wt],w[2*wt+1],r,l)<=M&&L.push(y[wt]);continue}const Y=q+z>>1,it=w[2*Y],lt=w[2*Y+1];t4(it,lt,r,l)<=M&&L.push(y[Y]),(O===0?r-p<=it:l-p<=lt)&&(S.push(q),S.push(Y-1),S.push(1-O)),(O===0?r+p>=it:l+p>=lt)&&(S.push(Y+1),S.push(z),S.push(1-O))}return L}}function zy(a,r,l,p,y,w){if(y-p<=l)return;const b=p+y>>1;JC(a,r,b,p,y,w),zy(a,r,l,p,b-1,1-w),zy(a,r,l,b+1,y,1-w)}function JC(a,r,l,p,y,w){for(;y>p;){if(y-p>600){const M=y-p+1,O=l-p+1,z=Math.log(M),q=.5*Math.exp(2*z/3),Y=.5*Math.sqrt(z*q*(M-q)/M)*(O-M/2<0?-1:1);JC(a,r,l,Math.max(p,Math.floor(l-O*q/M+Y)),Math.min(y,Math.floor(l+(M-O)*q/M+Y)),w)}const b=r[2*l+w];let S=p,L=y;for(Nd(a,r,p,l),r[2*y+w]>b&&Nd(a,r,p,y);S<L;){for(Nd(a,r,S,L),S++,L--;r[2*S+w]<b;)S++;for(;r[2*L+w]>b;)L--}r[2*p+w]===b?Nd(a,r,p,L):(L++,Nd(a,r,L,y)),L<=l&&(p=L+1),l<=L&&(y=L-1)}}function Nd(a,r,l,p){Hy(a,l,p),Hy(r,2*l,2*p),Hy(r,2*l+1,2*p+1)}function Hy(a,r,l){const p=a[r];a[r]=a[l],a[l]=p}function t4(a,r,l,p){const y=a-l,w=r-p;return y*y+w*w}var Vy;d.bg=void 0,(Vy=d.bg||(d.bg={})).create="create",Vy.load="load",Vy.fullLoad="fullLoad";let dg=null,Od=[];const jy=1e3/60,Ky="loadTime",$y="fullLoadTime",qz={mark(a){performance.mark(a)},frame(a){const r=a;dg!=null&&Od.push(r-dg),dg=r},clearMetrics(){dg=null,Od=[],performance.clearMeasures(Ky),performance.clearMeasures($y);for(const a in d.bg)performance.clearMarks(d.bg[a])},getPerformanceMetrics(){performance.measure(Ky,d.bg.create,d.bg.load),performance.measure($y,d.bg.create,d.bg.fullLoad);const a=performance.getEntriesByName(Ky)[0].duration,r=performance.getEntriesByName($y)[0].duration,l=Od.length,p=1/(Od.reduce((w,b)=>w+b,0)/l/1e3),y=Od.filter(w=>w>jy).reduce((w,b)=>w+(b-jy)/jy,0);return{loadTime:a,fullLoadTime:r,fps:p,percentDroppedFrames:y/(l+y)*100,totalFrames:l}}};d.$=class extends N{},d.A=ah,d.B=fd,d.C=function(a){if(Vt==null){const r=a.navigator?a.navigator.userAgent:null;Vt=!!a.safari||!(!r||!(/\b(iPad|iPhone|iPod)\b/.test(r)||r.match("Safari")&&!r.match("Chrome")))}return Vt},d.D=Ge,d.E=ie,d.F=class{constructor(a,r){this.target=a,this.mapId=r,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new Oz(()=>this.process()),this.subscription=function(l,p,y,w){return l.addEventListener(p,y,!1),{unsubscribe:()=>{l.removeEventListener(p,y,!1)}}}(this.target,"message",l=>this.receive(l)),this.globalScope=$t(self)?a:window}registerMessageHandler(a,r){this.messageHandlers[a]=r}sendAsync(a,r){return new Promise((l,p)=>{const y=Math.round(1e18*Math.random()).toString(36).substring(0,10);this.resolveRejects[y]={resolve:l,reject:p},r&&r.signal.addEventListener("abort",()=>{delete this.resolveRejects[y];const S={id:y,type:"<cancel>",origin:location.origin,targetMapId:a.targetMapId,sourceMapId:this.mapId};this.target.postMessage(S)},{once:!0});const w=[],b=Object.assign(Object.assign({},a),{id:y,sourceMapId:this.mapId,origin:location.origin,data:QA(a.data,w)});this.target.postMessage(b,{transfer:w})})}receive(a){const r=a.data,l=r.id;if(!(r.origin!=="file://"&&location.origin!=="file://"&&r.origin!=="resource://android"&&location.origin!=="resource://android"&&r.origin!==location.origin||r.targetMapId&&this.mapId!==r.targetMapId)){if(r.type==="<cancel>"){delete this.tasks[l];const p=this.abortControllers[l];return delete this.abortControllers[l],void(p&&p.abort())}if($t(self)||r.mustQueue)return this.tasks[l]=r,this.taskQueue.push(l),void this.invoker.trigger();this.processTask(l,r)}}process(){if(this.taskQueue.length===0)return;const a=this.taskQueue.shift(),r=this.tasks[a];delete this.tasks[a],this.taskQueue.length>0&&this.invoker.trigger(),r&&this.processTask(a,r)}processTask(a,r){return A(this,void 0,void 0,function*(){if(r.type==="<response>"){const y=this.resolveRejects[a];return delete this.resolveRejects[a],y?void(r.error?y.reject(Go(r.error)):y.resolve(Go(r.data))):void 0}if(!this.messageHandlers[r.type])return void this.completeTask(a,new Error(`Could not find a registered handler for ${r.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const l=Go(r.data),p=new AbortController;this.abortControllers[a]=p;try{const y=yield this.messageHandlers[r.type](r.sourceMapId,l,p);this.completeTask(a,null,y)}catch(y){this.completeTask(a,y)}})}completeTask(a,r,l){const p=[];delete this.abortControllers[a];const y={id:a,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:r?QA(r):null,data:QA(l,p)};this.target.postMessage(y,{transfer:p})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},d.G=Ot,d.H=function(){var a=new ah(16);return ah!=Float32Array&&(a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[11]=0,a[12]=0,a[13]=0,a[14]=0),a[0]=1,a[5]=1,a[10]=1,a[15]=1,a},d.I=Sy,d.J=function(a,r,l){var p,y,w,b,S,L,M,O,z,q,Y,it,lt=l[0],wt=l[1],It=l[2];return r===a?(a[12]=r[0]*lt+r[4]*wt+r[8]*It+r[12],a[13]=r[1]*lt+r[5]*wt+r[9]*It+r[13],a[14]=r[2]*lt+r[6]*wt+r[10]*It+r[14],a[15]=r[3]*lt+r[7]*wt+r[11]*It+r[15]):(y=r[1],w=r[2],b=r[3],S=r[4],L=r[5],M=r[6],O=r[7],z=r[8],q=r[9],Y=r[10],it=r[11],a[0]=p=r[0],a[1]=y,a[2]=w,a[3]=b,a[4]=S,a[5]=L,a[6]=M,a[7]=O,a[8]=z,a[9]=q,a[10]=Y,a[11]=it,a[12]=p*lt+S*wt+z*It+r[12],a[13]=y*lt+L*wt+q*It+r[13],a[14]=w*lt+M*wt+Y*It+r[14],a[15]=b*lt+O*wt+it*It+r[15]),a},d.K=function(a,r,l){var p=l[0],y=l[1],w=l[2];return a[0]=r[0]*p,a[1]=r[1]*p,a[2]=r[2]*p,a[3]=r[3]*p,a[4]=r[4]*y,a[5]=r[5]*y,a[6]=r[6]*y,a[7]=r[7]*y,a[8]=r[8]*w,a[9]=r[9]*w,a[10]=r[10]*w,a[11]=r[11]*w,a[12]=r[12],a[13]=r[13],a[14]=r[14],a[15]=r[15],a},d.L=Q5,d.M=function(a,r){const l={};for(let p=0;p<r.length;p++){const y=r[p];y in a&&(l[y]=a[y])}return l},d.N=dc,d.O=EC,d.P=T,d.Q=TC,d.R=Na,d.S=Oa,d.T=oc,d.U=K,d.V=tt,d.W=Wt,d.X=xi,d.Y=x,d.Z=Md,d._=A,d.a=_t,d.a$=function(a,r){var l=a[0],p=a[1],y=a[2],w=a[3],b=a[4],S=a[5],L=a[6],M=a[7],O=a[8],z=a[9],q=a[10],Y=a[11],it=a[12],lt=a[13],wt=a[14],It=a[15],Kt=r[0],Mt=r[1],Ht=r[2],re=r[3],_e=r[4],Ne=r[5],fr=r[6],De=r[7],ke=r[8],tr=r[9],Ke=r[10],ze=r[11],le=r[12],rr=r[13],Ze=r[14],Br=r[15];return Math.abs(l-Kt)<=Es*Math.max(1,Math.abs(l),Math.abs(Kt))&&Math.abs(p-Mt)<=Es*Math.max(1,Math.abs(p),Math.abs(Mt))&&Math.abs(y-Ht)<=Es*Math.max(1,Math.abs(y),Math.abs(Ht))&&Math.abs(w-re)<=Es*Math.max(1,Math.abs(w),Math.abs(re))&&Math.abs(b-_e)<=Es*Math.max(1,Math.abs(b),Math.abs(_e))&&Math.abs(S-Ne)<=Es*Math.max(1,Math.abs(S),Math.abs(Ne))&&Math.abs(L-fr)<=Es*Math.max(1,Math.abs(L),Math.abs(fr))&&Math.abs(M-De)<=Es*Math.max(1,Math.abs(M),Math.abs(De))&&Math.abs(O-ke)<=Es*Math.max(1,Math.abs(O),Math.abs(ke))&&Math.abs(z-tr)<=Es*Math.max(1,Math.abs(z),Math.abs(tr))&&Math.abs(q-Ke)<=Es*Math.max(1,Math.abs(q),Math.abs(Ke))&&Math.abs(Y-ze)<=Es*Math.max(1,Math.abs(Y),Math.abs(ze))&&Math.abs(it-le)<=Es*Math.max(1,Math.abs(it),Math.abs(le))&&Math.abs(lt-rr)<=Es*Math.max(1,Math.abs(lt),Math.abs(rr))&&Math.abs(wt-Ze)<=Es*Math.max(1,Math.abs(wt),Math.abs(Ze))&&Math.abs(It-Br)<=Es*Math.max(1,Math.abs(It),Math.abs(Br))},d.a0=Hr,d.a1=Dy,d.a2=oe,d.a3=a=>{const r=window.document.createElement("video");return r.muted=!0,new Promise(l=>{r.onloadstart=()=>{l(r)};for(const p of a){const y=window.document.createElement("source");xe(p)||(r.crossOrigin="Anonymous"),y.src=p,r.appendChild(y)}})},d.a4=function(){return pt++},d.a5=Ce,d.a6=hh,d.a7=Pa,d.a8=RA,d.a9=MC,d.aA=function(a){if(a.type==="custom")return new Nz(a);switch(a.type){case"background":return new kz(a);case"circle":return new b7(a);case"fill":return new O7(a);case"fill-extrusion":return new tz(a);case"heatmap":return new B7(a);case"hillshade":return new F7(a);case"line":return new Az(a);case"raster":return new Dz(a);case"symbol":return new Ag(a)}},d.aB=st,d.aC=function(a,r){if(!a)return[{command:"setStyle",args:[r]}];let l=[];try{if(!se(a.version,r.version))return[{command:"setStyle",args:[r]}];se(a.center,r.center)||l.push({command:"setCenter",args:[r.center]}),se(a.zoom,r.zoom)||l.push({command:"setZoom",args:[r.zoom]}),se(a.bearing,r.bearing)||l.push({command:"setBearing",args:[r.bearing]}),se(a.pitch,r.pitch)||l.push({command:"setPitch",args:[r.pitch]}),se(a.sprite,r.sprite)||l.push({command:"setSprite",args:[r.sprite]}),se(a.glyphs,r.glyphs)||l.push({command:"setGlyphs",args:[r.glyphs]}),se(a.transition,r.transition)||l.push({command:"setTransition",args:[r.transition]}),se(a.light,r.light)||l.push({command:"setLight",args:[r.light]}),se(a.terrain,r.terrain)||l.push({command:"setTerrain",args:[r.terrain]}),se(a.sky,r.sky)||l.push({command:"setSky",args:[r.sky]}),se(a.projection,r.projection)||l.push({command:"setProjection",args:[r.projection]});const p={},y=[];(function(b,S,L,M){let O;for(O in S=S||{},b=b||{})Object.prototype.hasOwnProperty.call(b,O)&&(Object.prototype.hasOwnProperty.call(S,O)||Se(O,L,M));for(O in S)Object.prototype.hasOwnProperty.call(S,O)&&(Object.prototype.hasOwnProperty.call(b,O)?se(b[O],S[O])||(b[O].type==="geojson"&&S[O].type==="geojson"&&We(b,S,O)?fe(L,{command:"setGeoJSONSourceData",args:[O,S[O].data]}):Re(O,S,L,M)):Ue(O,S,L))})(a.sources,r.sources,y,p);const w=[];a.layers&&a.layers.forEach(b=>{"source"in b&&p[b.source]?l.push({command:"removeLayer",args:[b.id]}):w.push(b)}),l=l.concat(y),function(b,S,L){S=S||[];const M=(b=b||[]).map(wr),O=S.map(wr),z=b.reduce(Fr,{}),q=S.reduce(Fr,{}),Y=M.slice(),it=Object.create(null);let lt,wt,It,Kt,Mt;for(let Ht=0,re=0;Ht<M.length;Ht++)lt=M[Ht],Object.prototype.hasOwnProperty.call(q,lt)?re++:(fe(L,{command:"removeLayer",args:[lt]}),Y.splice(Y.indexOf(lt,re),1));for(let Ht=0,re=0;Ht<O.length;Ht++)lt=O[O.length-1-Ht],Y[Y.length-1-Ht]!==lt&&(Object.prototype.hasOwnProperty.call(z,lt)?(fe(L,{command:"removeLayer",args:[lt]}),Y.splice(Y.lastIndexOf(lt,Y.length-re),1)):re++,Kt=Y[Y.length-Ht],fe(L,{command:"addLayer",args:[q[lt],Kt]}),Y.splice(Y.length-Ht,0,lt),it[lt]=!0);for(let Ht=0;Ht<O.length;Ht++)if(lt=O[Ht],wt=z[lt],It=q[lt],!it[lt]&&!se(wt,It))if(se(wt.source,It.source)&&se(wt["source-layer"],It["source-layer"])&&se(wt.type,It.type)){for(Mt in ar(wt.layout,It.layout,L,lt,null,"setLayoutProperty"),ar(wt.paint,It.paint,L,lt,null,"setPaintProperty"),se(wt.filter,It.filter)||fe(L,{command:"setFilter",args:[lt,It.filter]}),se(wt.minzoom,It.minzoom)&&se(wt.maxzoom,It.maxzoom)||fe(L,{command:"setLayerZoomRange",args:[lt,It.minzoom,It.maxzoom]}),wt)Object.prototype.hasOwnProperty.call(wt,Mt)&&Mt!=="layout"&&Mt!=="paint"&&Mt!=="filter"&&Mt!=="metadata"&&Mt!=="minzoom"&&Mt!=="maxzoom"&&(Mt.indexOf("paint.")===0?ar(wt[Mt],It[Mt],L,lt,Mt.slice(6),"setPaintProperty"):se(wt[Mt],It[Mt])||fe(L,{command:"setLayerProperty",args:[lt,Mt,It[Mt]]}));for(Mt in It)Object.prototype.hasOwnProperty.call(It,Mt)&&!Object.prototype.hasOwnProperty.call(wt,Mt)&&Mt!=="layout"&&Mt!=="paint"&&Mt!=="filter"&&Mt!=="metadata"&&Mt!=="minzoom"&&Mt!=="maxzoom"&&(Mt.indexOf("paint.")===0?ar(wt[Mt],It[Mt],L,lt,Mt.slice(6),"setPaintProperty"):se(wt[Mt],It[Mt])||fe(L,{command:"setLayerProperty",args:[lt,Mt,It[Mt]]}))}else fe(L,{command:"removeLayer",args:[lt]}),Kt=Y[Y.lastIndexOf(lt)+1],fe(L,{command:"addLayer",args:[It,Kt]})}(w,r.layers,l)}catch(p){console.warn("Unable to compute style diff:",p),l=[{command:"setStyle",args:[r]}]}return l},d.aD=function(a){const r=[],l=a.id;return l===void 0&&r.push({message:`layers.${l}: missing required property "id"`}),a.render===void 0&&r.push({message:`layers.${l}: missing required method "render"`}),a.renderingMode&&a.renderingMode!=="2d"&&a.renderingMode!=="3d"&&r.push({message:`layers.${l}: property "renderingMode" must be either "2d" or "3d"`}),r},d.aE=function a(r,l){if(Array.isArray(r)){if(!Array.isArray(l)||r.length!==l.length)return!1;for(let p=0;p<r.length;p++)if(!a(r[p],l[p]))return!1;return!0}if(typeof r=="object"&&r!==null&&l!==null){if(typeof l!="object"||Object.keys(r).length!==Object.keys(l).length)return!1;for(const p in r)if(!a(r[p],l[p]))return!1;return!0}return r===l},d.aF=kt,d.aG=Xt,d.aH=class extends NA{constructor(a,r){super(a,r),this.current=0}set(a){this.current!==a&&(this.current=a,this.gl.uniform1i(this.location,a))}},d.aI=Yc,d.aJ=class extends NA{constructor(a,r){super(a,r),this.current=tu}set(a){if(a[12]!==this.current[12]||a[0]!==this.current[0])return this.current=a,void this.gl.uniformMatrix4fv(this.location,!1,a);for(let r=1;r<16;r++)if(a[r]!==this.current[r]){this.current=a,this.gl.uniformMatrix4fv(this.location,!1,a);break}}},d.aK=Jc,d.aL=th,d.aM=mr,d.aN=class extends NA{constructor(a,r){super(a,r),this.current=[0,0,0]}set(a){a[0]===this.current[0]&&a[1]===this.current[1]&&a[2]===this.current[2]||(this.current=a,this.gl.uniform3f(this.location,a[0],a[1],a[2]))}},d.aO=class extends NA{constructor(a,r){super(a,r),this.current=[0,0]}set(a){a[0]===this.current[0]&&a[1]===this.current[1]||(this.current=a,this.gl.uniform2f(this.location,a[0],a[1]))}},d.aP=function(a,r,l,p,y,w,b){var S=1/(r-l),L=1/(p-y),M=1/(w-b);return a[0]=-2*S,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=-2*L,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=2*M,a[11]=0,a[12]=(r+l)*S,a[13]=(y+p)*L,a[14]=(b+w)*M,a[15]=1,a},d.aQ=_7,d.aR=class extends gt{},d.aS=hz,d.aT=class extends St{},d.aU=fy,d.aV=function(a){return a<=1?1:Math.pow(2,Math.ceil(Math.log(a)/Math.LN2))},d.aW=O5,d.aX=Ii,d.aY=Un,d.aZ=class extends ye{},d.a_=function(a,r){return a[0]===r[0]&&a[1]===r[1]&&a[2]===r[2]&&a[3]===r[3]&&a[4]===r[4]&&a[5]===r[5]&&a[6]===r[6]&&a[7]===r[7]&&a[8]===r[8]&&a[9]===r[9]&&a[10]===r[10]&&a[11]===r[11]&&a[12]===r[12]&&a[13]===r[13]&&a[14]===r[14]&&a[15]===r[15]},d.aa=function(a){const r={};if(a.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(l,p,y,w)=>{const b=y||w;return r[p]=!b||b.toLowerCase(),""}),r["max-age"]){const l=parseInt(r["max-age"],10);isNaN(l)?delete r["max-age"]:r["max-age"]=l}return r},d.ab=function(a,r){const l=[];for(const p in a)p in r||l.push(p);return l},d.ac=Lt,d.ad=function(a,r,l){var p=Math.sin(l),y=Math.cos(l),w=r[0],b=r[1],S=r[2],L=r[3],M=r[4],O=r[5],z=r[6],q=r[7];return r!==a&&(a[8]=r[8],a[9]=r[9],a[10]=r[10],a[11]=r[11],a[12]=r[12],a[13]=r[13],a[14]=r[14],a[15]=r[15]),a[0]=w*y+M*p,a[1]=b*y+O*p,a[2]=S*y+z*p,a[3]=L*y+q*p,a[4]=M*y-w*p,a[5]=O*y-b*p,a[6]=z*y-S*p,a[7]=q*y-L*p,a},d.ae=function(a){var r=new ah(16);return r[0]=a[0],r[1]=a[1],r[2]=a[2],r[3]=a[3],r[4]=a[4],r[5]=a[5],r[6]=a[6],r[7]=a[7],r[8]=a[8],r[9]=a[9],r[10]=a[10],r[11]=a[11],r[12]=a[12],r[13]=a[13],r[14]=a[14],r[15]=a[15],r},d.af=Jf,d.ag=function(a,r){let l=0,p=0;if(a.kind==="constant")p=a.layoutSize;else if(a.kind!=="source"){const{interpolationType:y,minZoom:w,maxZoom:b}=a,S=y?Lt(lr.interpolationFactor(y,r,w,b),0,1):0;a.kind==="camera"?p=gn.number(a.minSize,a.maxSize,S):l=S}return{uSizeT:l,uSize:p}},d.ai=function(a,{uSize:r,uSizeT:l},{lowerSize:p,upperSize:y}){return a.kind==="source"?p/VA:a.kind==="composite"?gn.number(p/VA,y/VA,l):r},d.aj=Uy,d.ak=function(a,r,l,p){const y=r.y-a.y,w=r.x-a.x,b=p.y-l.y,S=p.x-l.x,L=b*w-S*y;if(L===0)return null;const M=(S*(a.y-l.y)-b*(a.x-l.x))/L;return new T(a.x+M*w,a.y+M*y)},d.al=RC,d.am=ih,d.an=hy,d.ao=function(a){let r=1/0,l=1/0,p=-1/0,y=-1/0;for(const w of a)r=Math.min(r,w.x),l=Math.min(l,w.y),p=Math.max(p,w.x),y=Math.max(y,w.y);return[r,l,p,y]},d.ap=_n,d.ar=Ty,d.as=function(a,r){var l=r[0],p=r[1],y=r[2],w=r[3],b=r[4],S=r[5],L=r[6],M=r[7],O=r[8],z=r[9],q=r[10],Y=r[11],it=r[12],lt=r[13],wt=r[14],It=r[15],Kt=l*S-p*b,Mt=l*L-y*b,Ht=l*M-w*b,re=p*L-y*S,_e=p*M-w*S,Ne=y*M-w*L,fr=O*lt-z*it,De=O*wt-q*it,ke=O*It-Y*it,tr=z*wt-q*lt,Ke=z*It-Y*lt,ze=q*It-Y*wt,le=Kt*ze-Mt*Ke+Ht*tr+re*ke-_e*De+Ne*fr;return le?(a[0]=(S*ze-L*Ke+M*tr)*(le=1/le),a[1]=(y*Ke-p*ze-w*tr)*le,a[2]=(lt*Ne-wt*_e+It*re)*le,a[3]=(q*_e-z*Ne-Y*re)*le,a[4]=(L*ke-b*ze-M*De)*le,a[5]=(l*ze-y*ke+w*De)*le,a[6]=(wt*Ht-it*Ne-It*Mt)*le,a[7]=(O*Ne-q*Ht+Y*Mt)*le,a[8]=(b*Ke-S*ke+M*fr)*le,a[9]=(p*ke-l*Ke-w*fr)*le,a[10]=(it*_e-lt*Ht+It*Kt)*le,a[11]=(z*Ht-O*_e-Y*Kt)*le,a[12]=(S*De-b*tr-L*fr)*le,a[13]=(l*tr-p*De+y*fr)*le,a[14]=(lt*Mt-it*re-wt*Kt)*le,a[15]=(O*re-z*Mt+q*Kt)*le,a):null},d.at=Oy,d.au=Ey,d.av=Ry,d.aw=function(){const a={},r=rt.$version;for(const l in rt.$root){const p=rt.$root[l];if(p.required){let y=null;y=l==="version"?r:p.type==="array"?[]:{},y!=null&&(a[l]=y)}}return a},d.ax=va,d.ay=Zt,d.az=function(a){a=a.slice();const r=Object.create(null);for(let l=0;l<a.length;l++)r[a[l].id]=a[l];for(let l=0;l<a.length;l++)"ref"in a[l]&&(a[l]=je(a[l],r[a[l].ref]));return a},d.b=jt,d.b0=function(a,r){return a[0]=r[0],a[1]=r[1],a[2]=r[2],a[3]=r[3],a[4]=r[4],a[5]=r[5],a[6]=r[6],a[7]=r[7],a[8]=r[8],a[9]=r[9],a[10]=r[10],a[11]=r[11],a[12]=r[12],a[13]=r[13],a[14]=r[14],a[15]=r[15],a},d.b1=function(a,r,l){return a[0]=r[0]*l[0],a[1]=r[1]*l[1],a[2]=r[2]*l[2],a[3]=r[3]*l[3],a},d.b2=function(a,r){return a[0]*r[0]+a[1]*r[1]+a[2]*r[2]+a[3]*r[3]},d.b3=Ut,d.b4=PC,d.b5=UC,d.b6=function(a,r,l,p,y){var w,b=1/Math.tan(r/2);return a[0]=b/l,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=b,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[11]=-1,a[12]=0,a[13]=0,a[15]=0,y!=null&&y!==1/0?(a[10]=(y+p)*(w=1/(p-y)),a[14]=2*y*p*w):(a[10]=-1,a[14]=-2*p),a},d.b7=function(a,r,l){var p=Math.sin(l),y=Math.cos(l),w=r[4],b=r[5],S=r[6],L=r[7],M=r[8],O=r[9],z=r[10],q=r[11];return r!==a&&(a[0]=r[0],a[1]=r[1],a[2]=r[2],a[3]=r[3],a[12]=r[12],a[13]=r[13],a[14]=r[14],a[15]=r[15]),a[4]=w*y+M*p,a[5]=b*y+O*p,a[6]=S*y+z*p,a[7]=L*y+q*p,a[8]=M*y-w*p,a[9]=O*y-b*p,a[10]=z*y-S*p,a[11]=q*y-L*p,a},d.b8=ht,d.b9=Bt,d.bA=sC,d.bB=function(a){return a.message===et},d.bC=Ki,d.bD=ls,d.ba=function(a){return a*Math.PI/180},d.bb=function(a,r){const{x:l,y:p}=Md.fromLngLat(r);return!(a<0||a>25||p<0||p>=1||l<0||l>=1)},d.bc=function(a,r){return a[0]=r[0],a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=r[1],a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=r[2],a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},d.bd=class extends k{},d.be=ky,d.bf=qz,d.bh=Rt,d.bi=function(a,r){_t.REGISTERED_PROTOCOLS[a]=r},d.bj=function(a){delete _t.REGISTERED_PROTOCOLS[a]},d.bk=function(a,r){const l={};for(let y=0;y<a.length;y++){const w=r&&r[a[y].id]||Mi(a[y]);r&&(r[a[y].id]=w);let b=l[w];b||(b=l[w]=[]),b.push(a[y])}const p=[];for(const y in l)p.push(l[y]);return p},d.bl=Oe,d.bm=kC,d.bn=DC,d.bo=pC,d.bp=function(a){a.bucket.createArrays(),a.bucket.tilePixelRatio=xi/(512*a.bucket.overscaling),a.bucket.compareText={},a.bucket.iconsNeedLinear=!1;const r=a.bucket.layers[0],l=r.layout,p=r._unevaluatedLayout._values,y={layoutIconSize:p["icon-size"].possiblyEvaluate(new ci(a.bucket.zoom+1),a.canonical),layoutTextSize:p["text-size"].possiblyEvaluate(new ci(a.bucket.zoom+1),a.canonical),textMaxSize:p["text-size"].possiblyEvaluate(new ci(18))};if(a.bucket.textSizeData.kind==="composite"){const{minZoom:M,maxZoom:O}=a.bucket.textSizeData;y.compositeTextSizes=[p["text-size"].possiblyEvaluate(new ci(M),a.canonical),p["text-size"].possiblyEvaluate(new ci(O),a.canonical)]}if(a.bucket.iconSizeData.kind==="composite"){const{minZoom:M,maxZoom:O}=a.bucket.iconSizeData;y.compositeIconSizes=[p["icon-size"].possiblyEvaluate(new ci(M),a.canonical),p["icon-size"].possiblyEvaluate(new ci(O),a.canonical)]}const w=l.get("text-line-height")*_n,b=l.get("text-rotation-alignment")!=="viewport"&&l.get("symbol-placement")!=="point",S=l.get("text-keep-upright"),L=l.get("text-size");for(const M of a.bucket.features){const O=l.get("text-font").evaluate(M,{},a.canonical).join(","),z=L.evaluate(M,{},a.canonical),q=y.layoutTextSize.evaluate(M,{},a.canonical),Y=y.layoutIconSize.evaluate(M,{},a.canonical),it={horizontal:{},vertical:void 0},lt=M.text;let wt,It=[0,0];if(lt){const Ht=lt.toString(),re=l.get("text-letter-spacing").evaluate(M,{},a.canonical)*_n,_e=gd(Ht)?re:0,Ne=l.get("text-anchor").evaluate(M,{},a.canonical),fr=XC(r,M,a.canonical);if(!fr){const Ke=l.get("text-radial-offset").evaluate(M,{},a.canonical);It=Ke?qC(Ne,[Ke*_n,Ny]):l.get("text-offset").evaluate(M,{},a.canonical).map(ze=>ze*_n)}let De=b?"center":l.get("text-justify").evaluate(M,{},a.canonical);const ke=l.get("symbol-placement")==="point"?l.get("text-max-width").evaluate(M,{},a.canonical)*_n:1/0,tr=()=>{a.bucket.allowVerticalPlacement&&qc(Ht)&&(it.vertical=sg(lt,a.glyphMap,a.glyphPositions,a.imagePositions,O,ke,w,Ne,"left",_e,It,d.ah.vertical,!0,q,z))};if(!b&&fr){const Ke=new Set;if(De==="auto")for(let le=0;le<fr.values.length;le+=2)Ke.add(Oy(fr.values[le]));else Ke.add(De);let ze=!1;for(const le of Ke)if(!it.horizontal[le])if(ze)it.horizontal[le]=it.horizontal[0];else{const rr=sg(lt,a.glyphMap,a.glyphPositions,a.imagePositions,O,ke,w,"center",le,_e,It,d.ah.horizontal,!1,q,z);rr&&(it.horizontal[le]=rr,ze=rr.positionedLines.length===1)}tr()}else{De==="auto"&&(De=Oy(Ne));const Ke=sg(lt,a.glyphMap,a.glyphPositions,a.imagePositions,O,ke,w,Ne,De,_e,It,d.ah.horizontal,!1,q,z);Ke&&(it.horizontal[De]=Ke),tr(),qc(Ht)&&b&&S&&(it.vertical=sg(lt,a.glyphMap,a.glyphPositions,a.imagePositions,O,ke,w,Ne,De,_e,It,d.ah.vertical,!1,q,z))}}let Kt=!1;if(M.icon&&M.icon.name){const Ht=a.imageMap[M.icon.name];Ht&&(wt=Tz(a.imagePositions[M.icon.name],l.get("icon-offset").evaluate(M,{},a.canonical),l.get("icon-anchor").evaluate(M,{},a.canonical)),Kt=!!Ht.sdf,a.bucket.sdfIcons===void 0?a.bucket.sdfIcons=Kt:a.bucket.sdfIcons!==Kt&&mt("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Ht.pixelRatio!==a.bucket.pixelRatio||l.get("icon-rotate").constantOr(1)!==0)&&(a.bucket.iconsNeedLinear=!0))}const Mt=ZC(it.horizontal)||it.vertical;a.bucket.iconsInText=!!Mt&&Mt.iconsInText,(Mt||wt)&&$z(a.bucket,M,it,wt,a.imageMap,y,q,Y,It,Kt,a.canonical)}a.showCollisionBoxes&&a.bucket.generateCollisionDebugBuffers()},d.bq=xy,d.br=wy,d.bs=by,d.bt=cc,d.bu=Cy,d.bv=class{constructor(a){this._marks={start:[a.url,"start"].join("#"),end:[a.url,"end"].join("#"),measure:a.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let a=performance.getEntriesByName(this._marks.measure);return a.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),a=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),a}},d.bw=function(a,r,l,p,y){return A(this,void 0,void 0,function*(){if(tt())try{return yield Wt(a,r,l,p,y)}catch{}return function(w,b,S,L,M){const O=w.width,z=w.height;Yt&&me||(Yt=new OffscreenCanvas(O,z),me=Yt.getContext("2d",{willReadFrequently:!0})),Yt.width=O,Yt.height=z,me.drawImage(w,0,0,O,z);const q=me.getImageData(b,S,L,M);return me.clearRect(0,0,O,z),q.data}(a,r,l,p,y)})},d.bx=QC,d.by=v,d.bz=C,d.c=dt,d.d=a=>A(void 0,void 0,void 0,function*(){if(a.byteLength===0)return createImageBitmap(new ImageData(1,1));const r=new Blob([new Uint8Array(a)],{type:"image/png"});try{return createImageBitmap(r)}catch(l){throw new Error(`Could not load image because of ${l.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),d.e=xt,d.f=a=>new Promise((r,l)=>{const p=new Image;p.onload=()=>{r(p),URL.revokeObjectURL(p.src),p.onload=null,window.requestAnimationFrame(()=>{p.src=zt})},p.onerror=()=>l(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const y=new Blob([new Uint8Array(a)],{type:"image/png"});p.src=a.byteLength?URL.createObjectURL(y):zt}),d.g=Ct,d.h=(a,r)=>Jt(xt(a,{type:"json"}),r),d.i=$t,d.j=Ve,d.k=Ee,d.l=(a,r)=>Jt(xt(a,{type:"arrayBuffer"}),r),d.m=Jt,d.n=function(a){return new Cy(a).readFields(xz,[])},d.o=Fd,d.p=dC,d.q=f,d.r=vl,d.s=xe,d.t=Gc,d.u=Qa,d.v=rt,d.w=mt,d.x=function([a,r,l]){return r+=90,r*=Math.PI/180,l*=Math.PI/180,{x:a*Math.cos(r)*Math.sin(l),y:a*Math.sin(r)*Math.sin(l),z:a*Math.cos(l)}},d.y=gn,d.z=ci}),c("worker",["./shared"],function(d){class A{constructor($){this.keyCache={},$&&this.replace($)}replace($){this._layerConfigs={},this._layers={},this.update($,[])}update($,X){for(const ft of $){this._layerConfigs[ft.id]=ft;const Qt=this._layers[ft.id]=d.aA(ft);Qt._featureFilter=d.a7(Qt.filter),this.keyCache[ft.id]&&delete this.keyCache[ft.id]}for(const ft of X)delete this.keyCache[ft],delete this._layerConfigs[ft],delete this._layers[ft];this.familiesBySource={};const at=d.bk(Object.values(this._layerConfigs),this.keyCache);for(const ft of at){const Qt=ft.map(Gt=>this._layers[Gt.id]),Nt=Qt[0];if(Nt.visibility==="none")continue;const Pt=Nt.source||"";let Et=this.familiesBySource[Pt];Et||(Et=this.familiesBySource[Pt]={});const te=Nt.sourceLayer||"_geojsonTileLayer";let ae=Et[te];ae||(ae=Et[te]=[]),ae.push(Qt)}}}class v{constructor($){const X={},at=[];for(const Pt in $){const Et=$[Pt],te=X[Pt]={};for(const ae in Et){const Gt=Et[+ae];if(!Gt||Gt.bitmap.width===0||Gt.bitmap.height===0)continue;const ue={x:0,y:0,w:Gt.bitmap.width+2,h:Gt.bitmap.height+2};at.push(ue),te[ae]={rect:ue,metrics:Gt.metrics}}}const{w:ft,h:Qt}=d.p(at),Nt=new d.o({width:ft||1,height:Qt||1});for(const Pt in $){const Et=$[Pt];for(const te in Et){const ae=Et[+te];if(!ae||ae.bitmap.width===0||ae.bitmap.height===0)continue;const Gt=X[Pt][te].rect;d.o.copy(ae.bitmap,Nt,{x:0,y:0},{x:Gt.x+1,y:Gt.y+1},ae.bitmap)}}this.image=Nt,this.positions=X}}d.bl("GlyphAtlas",v);class C{constructor($){this.tileID=new d.S($.tileID.overscaledZ,$.tileID.wrap,$.tileID.canonical.z,$.tileID.canonical.x,$.tileID.canonical.y),this.uid=$.uid,this.zoom=$.zoom,this.pixelRatio=$.pixelRatio,this.tileSize=$.tileSize,this.source=$.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=$.showCollisionBoxes,this.collectResourceTiming=!!$.collectResourceTiming,this.returnDependencies=!!$.returnDependencies,this.promoteId=$.promoteId,this.inFlightDependencies=[]}parse($,X,at,ft){return d._(this,void 0,void 0,function*(){this.status="parsing",this.data=$,this.collisionBoxArray=new d.a5;const Qt=new d.bm(Object.keys($.layers).sort()),Nt=new d.bn(this.tileID,this.promoteId);Nt.bucketLayerIDs=[];const Pt={},Et={featureIndex:Nt,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:at},te=X.familiesBySource[this.source];for(const gr in te){const zr=$.layers[gr];if(!zr)continue;zr.version===1&&d.w(`Vector tile source "${this.source}" layer "${gr}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Jr=Qt.encode(gr),Ft=[];for(let Ie=0;Ie<zr.length;Ie++){const ve=zr.feature(Ie),Pr=Nt.getId(ve,gr);Ft.push({feature:ve,id:Pr,index:Ie,sourceLayerIndex:Jr})}for(const Ie of te[gr]){const ve=Ie[0];ve.source!==this.source&&d.w(`layer.source = ${ve.source} does not equal this.source = ${this.source}`),ve.minzoom&&this.zoom<Math.floor(ve.minzoom)||ve.maxzoom&&this.zoom>=ve.maxzoom||ve.visibility!=="none"&&(I(Ie,this.zoom,at),(Pt[ve.id]=ve.createBucket({index:Nt.bucketLayerIDs.length,layers:Ie,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Jr,sourceID:this.source})).populate(Ft,Et,this.tileID.canonical),Nt.bucketLayerIDs.push(Ie.map(Pr=>Pr.id)))}}const ae=d.aF(Et.glyphDependencies,gr=>Object.keys(gr).map(Number));this.inFlightDependencies.forEach(gr=>gr==null?void 0:gr.abort()),this.inFlightDependencies=[];let Gt=Promise.resolve({});if(Object.keys(ae).length){const gr=new AbortController;this.inFlightDependencies.push(gr),Gt=ft.sendAsync({type:"GG",data:{stacks:ae,source:this.source,tileID:this.tileID,type:"glyphs"}},gr)}const ue=Object.keys(Et.iconDependencies);let Me=Promise.resolve({});if(ue.length){const gr=new AbortController;this.inFlightDependencies.push(gr),Me=ft.sendAsync({type:"GI",data:{icons:ue,source:this.source,tileID:this.tileID,type:"icons"}},gr)}const Xe=Object.keys(Et.patternDependencies);let Sr=Promise.resolve({});if(Xe.length){const gr=new AbortController;this.inFlightDependencies.push(gr),Sr=ft.sendAsync({type:"GI",data:{icons:Xe,source:this.source,tileID:this.tileID,type:"patterns"}},gr)}const[nr,br,Ar]=yield Promise.all([Gt,Me,Sr]),Yr=new v(nr),$r=new d.bo(br,Ar);for(const gr in Pt){const zr=Pt[gr];zr instanceof d.a6?(I(zr.layers,this.zoom,at),d.bp({bucket:zr,glyphMap:nr,glyphPositions:Yr.positions,imageMap:br,imagePositions:$r.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):zr.hasPattern&&(zr instanceof d.bq||zr instanceof d.br||zr instanceof d.bs)&&(I(zr.layers,this.zoom,at),zr.addFeatures(Et,this.tileID.canonical,$r.patternPositions))}return this.status="done",{buckets:Object.values(Pt).filter(gr=>!gr.isEmpty()),featureIndex:Nt,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Yr.image,imageAtlas:$r,glyphMap:this.returnDependencies?nr:null,iconMap:this.returnDependencies?br:null,glyphPositions:this.returnDependencies?Yr.positions:null}})}}function I(yt,$,X){const at=new d.z($);for(const ft of yt)ft.recalculate(at,X)}class T{constructor($,X,at){this.actor=$,this.layerIndex=X,this.availableImages=at,this.fetching={},this.loading={},this.loaded={}}loadVectorTile($,X){return d._(this,void 0,void 0,function*(){const at=yield d.l($.request,X);try{return{vectorTile:new d.bt.VectorTile(new d.bu(at.data)),rawData:at.data,cacheControl:at.cacheControl,expires:at.expires}}catch(ft){const Qt=new Uint8Array(at.data);let Nt=`Unable to parse the tile at ${$.request.url}, `;throw Nt+=Qt[0]===31&&Qt[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${ft.message}`,new Error(Nt)}})}loadTile($){return d._(this,void 0,void 0,function*(){const X=$.uid,at=!!($&&$.request&&$.request.collectResourceTiming)&&new d.bv($.request),ft=new C($);this.loading[X]=ft;const Qt=new AbortController;ft.abort=Qt;try{const Nt=yield this.loadVectorTile($,Qt);if(delete this.loading[X],!Nt)return null;const Pt=Nt.rawData,Et={};Nt.expires&&(Et.expires=Nt.expires),Nt.cacheControl&&(Et.cacheControl=Nt.cacheControl);const te={};if(at){const Gt=at.finish();Gt&&(te.resourceTiming=JSON.parse(JSON.stringify(Gt)))}ft.vectorTile=Nt.vectorTile;const ae=ft.parse(Nt.vectorTile,this.layerIndex,this.availableImages,this.actor);this.loaded[X]=ft,this.fetching[X]={rawTileData:Pt,cacheControl:Et,resourceTiming:te};try{const Gt=yield ae;return d.e({rawTileData:Pt.slice(0)},Gt,Et,te)}finally{delete this.fetching[X]}}catch(Nt){throw delete this.loading[X],ft.status="done",this.loaded[X]=ft,Nt}})}reloadTile($){return d._(this,void 0,void 0,function*(){const X=$.uid;if(!this.loaded||!this.loaded[X])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const at=this.loaded[X];if(at.showCollisionBoxes=$.showCollisionBoxes,at.status==="parsing"){const ft=yield at.parse(at.vectorTile,this.layerIndex,this.availableImages,this.actor);let Qt;if(this.fetching[X]){const{rawTileData:Nt,cacheControl:Pt,resourceTiming:Et}=this.fetching[X];delete this.fetching[X],Qt=d.e({rawTileData:Nt.slice(0)},ft,Pt,Et)}else Qt=ft;return Qt}if(at.status==="done"&&at.vectorTile)return at.parse(at.vectorTile,this.layerIndex,this.availableImages,this.actor)})}abortTile($){return d._(this,void 0,void 0,function*(){const X=this.loading,at=$.uid;X&&X[at]&&X[at].abort&&(X[at].abort.abort(),delete X[at])})}removeTile($){return d._(this,void 0,void 0,function*(){this.loaded&&this.loaded[$.uid]&&delete this.loaded[$.uid]})}}class P{constructor(){this.loaded={}}loadTile($){return d._(this,void 0,void 0,function*(){const{uid:X,encoding:at,rawImageData:ft,redFactor:Qt,greenFactor:Nt,blueFactor:Pt,baseShift:Et}=$,te=ft.width+2,ae=ft.height+2,Gt=d.b(ft)?new d.R({width:te,height:ae},yield d.bw(ft,-1,-1,te,ae)):ft,ue=new d.bx(X,Gt,at,Qt,Nt,Pt,Et);return this.loaded=this.loaded||{},this.loaded[X]=ue,ue})}removeTile($){const X=this.loaded,at=$.uid;X&&X[at]&&delete X[at]}}function U(yt,$){if(yt.length!==0){V(yt[0],$);for(var X=1;X<yt.length;X++)V(yt[X],!$)}}function V(yt,$){for(var X=0,at=0,ft=0,Qt=yt.length,Nt=Qt-1;ft<Qt;Nt=ft++){var Pt=(yt[ft][0]-yt[Nt][0])*(yt[Nt][1]+yt[ft][1]),Et=X+Pt;at+=Math.abs(X)>=Math.abs(Pt)?X-Et+Pt:Pt-Et+X,X=Et}X+at>=0!=!!$&&yt.reverse()}var R=d.by(function yt($,X){var at,ft=$&&$.type;if(ft==="FeatureCollection")for(at=0;at<$.features.length;at++)yt($.features[at],X);else if(ft==="GeometryCollection")for(at=0;at<$.geometries.length;at++)yt($.geometries[at],X);else if(ft==="Feature")yt($.geometry,X);else if(ft==="Polygon")U($.coordinates,X);else if(ft==="MultiPolygon")for(at=0;at<$.coordinates.length;at++)U($.coordinates[at],X);return $});const Z=d.bt.VectorTileFeature.prototype.toGeoJSON;var K={exports:{}},tt=d.bz,ht=d.bt.VectorTileFeature,Bt=Lt;function Lt(yt,$){this.options=$||{},this.features=yt,this.length=yt.length}function Ut(yt,$){this.id=typeof yt.id=="number"?yt.id:void 0,this.type=yt.type,this.rawGeometry=yt.type===1?[yt.geometry]:yt.geometry,this.properties=yt.tags,this.extent=$||4096}Lt.prototype.feature=function(yt){return new Ut(this.features[yt],this.options.extent)},Ut.prototype.loadGeometry=function(){var yt=this.rawGeometry;this.geometry=[];for(var $=0;$<yt.length;$++){for(var X=yt[$],at=[],ft=0;ft<X.length;ft++)at.push(new tt(X[ft][0],X[ft][1]));this.geometry.push(at)}return this.geometry},Ut.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var yt=this.geometry,$=1/0,X=-1/0,at=1/0,ft=-1/0,Qt=0;Qt<yt.length;Qt++)for(var Nt=yt[Qt],Pt=0;Pt<Nt.length;Pt++){var Et=Nt[Pt];$=Math.min($,Et.x),X=Math.max(X,Et.x),at=Math.min(at,Et.y),ft=Math.max(ft,Et.y)}return[$,at,X,ft]},Ut.prototype.toGeoJSON=ht.prototype.toGeoJSON;var xt=d.bA,pt=Bt;function kt(yt){var $=new xt;return function(X,at){for(var ft in X.layers)at.writeMessage(3,Xt,X.layers[ft])}(yt,$),$.finish()}function Xt(yt,$){var X;$.writeVarintField(15,yt.version||1),$.writeStringField(1,yt.name||""),$.writeVarintField(5,yt.extent||4096);var at={keys:[],values:[],keycache:{},valuecache:{}};for(X=0;X<yt.length;X++)at.feature=yt.feature(X),$.writeMessage(2,st,at);var ft=at.keys;for(X=0;X<ft.length;X++)$.writeStringField(3,ft[X]);var Qt=at.values;for(X=0;X<Qt.length;X++)$.writeMessage(4,Vt,Qt[X])}function st(yt,$){var X=yt.feature;X.id!==void 0&&$.writeVarintField(1,X.id),$.writeMessage(2,ut,yt),$.writeVarintField(3,X.type),$.writeMessage(4,$t,X)}function ut(yt,$){var X=yt.feature,at=yt.keys,ft=yt.values,Qt=yt.keycache,Nt=yt.valuecache;for(var Pt in X.properties){var Et=X.properties[Pt],te=Qt[Pt];if(Et!==null){te===void 0&&(at.push(Pt),Qt[Pt]=te=at.length-1),$.writeVarint(te);var ae=typeof Et;ae!=="string"&&ae!=="boolean"&&ae!=="number"&&(Et=JSON.stringify(Et));var Gt=ae+":"+Et,ue=Nt[Gt];ue===void 0&&(ft.push(Et),Nt[Gt]=ue=ft.length-1),$.writeVarint(ue)}}}function mt(yt,$){return($<<3)+(7&yt)}function vt(yt){return yt<<1^yt>>31}function $t(yt,$){for(var X=yt.loadGeometry(),at=yt.type,ft=0,Qt=0,Nt=X.length,Pt=0;Pt<Nt;Pt++){var Et=X[Pt],te=1;at===1&&(te=Et.length),$.writeVarint(mt(1,te));for(var ae=at===3?Et.length-1:Et.length,Gt=0;Gt<ae;Gt++){Gt===1&&at!==1&&$.writeVarint(mt(2,ae-1));var ue=Et[Gt].x-ft,Me=Et[Gt].y-Qt;$.writeVarint(vt(ue)),$.writeVarint(vt(Me)),ft+=ue,Qt+=Me}at===3&&$.writeVarint(mt(7,1))}}function Vt(yt,$){var X=typeof yt;X==="string"?$.writeStringField(1,yt):X==="boolean"?$.writeBooleanField(7,yt):X==="number"&&(yt%1!=0?$.writeDoubleField(3,yt):yt<0?$.writeSVarintField(6,yt):$.writeVarintField(5,yt))}K.exports=kt,K.exports.fromVectorTileJs=kt,K.exports.fromGeojsonVt=function(yt,$){$=$||{};var X={};for(var at in yt)X[at]=new pt(yt[at].features,$),X[at].name=at,X[at].version=$.version,X[at].extent=$.extent;return kt({layers:X})},K.exports.GeoJSONWrapper=pt;var jt=d.by(K.exports);const zt={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:yt=>yt},Wt=Math.fround||(Yt=new Float32Array(1),yt=>(Yt[0]=+yt,Yt[0]));var Yt;const me=3,et=5,dt=6;class _t{constructor($){this.options=Object.assign(Object.create(zt),$),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load($){const{log:X,minZoom:at,maxZoom:ft}=this.options;X&&console.time("total time");const Qt=`prepare ${$.length} points`;X&&console.time(Qt),this.points=$;const Nt=[];for(let Et=0;Et<$.length;Et++){const te=$[Et];if(!te.geometry)continue;const[ae,Gt]=te.geometry.coordinates,ue=Wt(Rt(ae)),Me=Wt(Zt(Gt));Nt.push(ue,Me,1/0,Et,-1,1),this.options.reduce&&Nt.push(0)}let Pt=this.trees[ft+1]=this._createTree(Nt);X&&console.timeEnd(Qt);for(let Et=ft;Et>=at;Et--){const te=+Date.now();Pt=this.trees[Et]=this._createTree(this._cluster(Pt,Et)),X&&console.log("z%d: %d clusters in %dms",Et,Pt.numItems,+Date.now()-te)}return X&&console.timeEnd("total time"),this}getClusters($,X){let at=(($[0]+180)%360+360)%360-180;const ft=Math.max(-90,Math.min(90,$[1]));let Qt=$[2]===180?180:(($[2]+180)%360+360)%360-180;const Nt=Math.max(-90,Math.min(90,$[3]));if($[2]-$[0]>=360)at=-180,Qt=180;else if(at>Qt){const Gt=this.getClusters([at,ft,180,Nt],X),ue=this.getClusters([-180,ft,Qt,Nt],X);return Gt.concat(ue)}const Pt=this.trees[this._limitZoom(X)],Et=Pt.range(Rt(at),Zt(Nt),Rt(Qt),Zt(ft)),te=Pt.data,ae=[];for(const Gt of Et){const ue=this.stride*Gt;ae.push(te[ue+et]>1?Ct(te,ue,this.clusterProps):this.points[te[ue+me]])}return ae}getChildren($){const X=this._getOriginId($),at=this._getOriginZoom($),ft="No cluster with the specified id.",Qt=this.trees[at];if(!Qt)throw new Error(ft);const Nt=Qt.data;if(X*this.stride>=Nt.length)throw new Error(ft);const Pt=this.options.radius/(this.options.extent*Math.pow(2,at-1)),Et=Qt.within(Nt[X*this.stride],Nt[X*this.stride+1],Pt),te=[];for(const ae of Et){const Gt=ae*this.stride;Nt[Gt+4]===$&&te.push(Nt[Gt+et]>1?Ct(Nt,Gt,this.clusterProps):this.points[Nt[Gt+me]])}if(te.length===0)throw new Error(ft);return te}getLeaves($,X,at){const ft=[];return this._appendLeaves(ft,$,X=X||10,at=at||0,0),ft}getTile($,X,at){const ft=this.trees[this._limitZoom($)],Qt=Math.pow(2,$),{extent:Nt,radius:Pt}=this.options,Et=Pt/Nt,te=(at-Et)/Qt,ae=(at+1+Et)/Qt,Gt={features:[]};return this._addTileFeatures(ft.range((X-Et)/Qt,te,(X+1+Et)/Qt,ae),ft.data,X,at,Qt,Gt),X===0&&this._addTileFeatures(ft.range(1-Et/Qt,te,1,ae),ft.data,Qt,at,Qt,Gt),X===Qt-1&&this._addTileFeatures(ft.range(0,te,Et/Qt,ae),ft.data,-1,at,Qt,Gt),Gt.features.length?Gt:null}getClusterExpansionZoom($){let X=this._getOriginZoom($)-1;for(;X<=this.options.maxZoom;){const at=this.getChildren($);if(X++,at.length!==1)break;$=at[0].properties.cluster_id}return X}_appendLeaves($,X,at,ft,Qt){const Nt=this.getChildren(X);for(const Pt of Nt){const Et=Pt.properties;if(Et&&Et.cluster?Qt+Et.point_count<=ft?Qt+=Et.point_count:Qt=this._appendLeaves($,Et.cluster_id,at,ft,Qt):Qt<ft?Qt++:$.push(Pt),$.length===at)break}return Qt}_createTree($){const X=new d.av($.length/this.stride|0,this.options.nodeSize,Float32Array);for(let at=0;at<$.length;at+=this.stride)X.add($[at],$[at+1]);return X.finish(),X.data=$,X}_addTileFeatures($,X,at,ft,Qt,Nt){for(const Pt of $){const Et=Pt*this.stride,te=X[Et+et]>1;let ae,Gt,ue;if(te)ae=Ot(X,Et,this.clusterProps),Gt=X[Et],ue=X[Et+1];else{const Sr=this.points[X[Et+me]];ae=Sr.properties;const[nr,br]=Sr.geometry.coordinates;Gt=Rt(nr),ue=Zt(br)}const Me={type:1,geometry:[[Math.round(this.options.extent*(Gt*Qt-at)),Math.round(this.options.extent*(ue*Qt-ft))]],tags:ae};let Xe;Xe=te||this.options.generateId?X[Et+me]:this.points[X[Et+me]].id,Xe!==void 0&&(Me.id=Xe),Nt.features.push(Me)}}_limitZoom($){return Math.max(this.options.minZoom,Math.min(Math.floor(+$),this.options.maxZoom+1))}_cluster($,X){const{radius:at,extent:ft,reduce:Qt,minPoints:Nt}=this.options,Pt=at/(ft*Math.pow(2,X)),Et=$.data,te=[],ae=this.stride;for(let Gt=0;Gt<Et.length;Gt+=ae){if(Et[Gt+2]<=X)continue;Et[Gt+2]=X;const ue=Et[Gt],Me=Et[Gt+1],Xe=$.within(Et[Gt],Et[Gt+1],Pt),Sr=Et[Gt+et];let nr=Sr;for(const br of Xe){const Ar=br*ae;Et[Ar+2]>X&&(nr+=Et[Ar+et])}if(nr>Sr&&nr>=Nt){let br,Ar=ue*Sr,Yr=Me*Sr,$r=-1;const gr=((Gt/ae|0)<<5)+(X+1)+this.points.length;for(const zr of Xe){const Jr=zr*ae;if(Et[Jr+2]<=X)continue;Et[Jr+2]=X;const Ft=Et[Jr+et];Ar+=Et[Jr]*Ft,Yr+=Et[Jr+1]*Ft,Et[Jr+4]=gr,Qt&&(br||(br=this._map(Et,Gt,!0),$r=this.clusterProps.length,this.clusterProps.push(br)),Qt(br,this._map(Et,Jr)))}Et[Gt+4]=gr,te.push(Ar/nr,Yr/nr,1/0,gr,-1,nr),Qt&&te.push($r)}else{for(let br=0;br<ae;br++)te.push(Et[Gt+br]);if(nr>1)for(const br of Xe){const Ar=br*ae;if(!(Et[Ar+2]<=X)){Et[Ar+2]=X;for(let Yr=0;Yr<ae;Yr++)te.push(Et[Ar+Yr])}}}}return te}_getOriginId($){return $-this.points.length>>5}_getOriginZoom($){return($-this.points.length)%32}_map($,X,at){if($[X+et]>1){const Nt=this.clusterProps[$[X+dt]];return at?Object.assign({},Nt):Nt}const ft=this.points[$[X+me]].properties,Qt=this.options.map(ft);return at&&Qt===ft?Object.assign({},Qt):Qt}}function Ct(yt,$,X){return{type:"Feature",id:yt[$+me],properties:Ot(yt,$,X),geometry:{type:"Point",coordinates:[(at=yt[$],360*(at-.5)),Jt(yt[$+1])]}};var at}function Ot(yt,$,X){const at=yt[$+et],ft=at>=1e4?`${Math.round(at/1e3)}k`:at>=1e3?Math.round(at/100)/10+"k":at,Qt=yt[$+dt],Nt=Qt===-1?{}:Object.assign({},X[Qt]);return Object.assign(Nt,{cluster:!0,cluster_id:yt[$+me],point_count:at,point_count_abbreviated:ft})}function Rt(yt){return yt/360+.5}function Zt(yt){const $=Math.sin(yt*Math.PI/180),X=.5-.25*Math.log((1+$)/(1-$))/Math.PI;return X<0?0:X>1?1:X}function Jt(yt){const $=(180-360*yt)*Math.PI/180;return 360*Math.atan(Math.exp($))/Math.PI-90}function xe(yt,$,X,at){let ft=at;const Qt=$+(X-$>>1);let Nt,Pt=X-$;const Et=yt[$],te=yt[$+1],ae=yt[X],Gt=yt[X+1];for(let ue=$+3;ue<X;ue+=3){const Me=we(yt[ue],yt[ue+1],Et,te,ae,Gt);if(Me>ft)Nt=ue,ft=Me;else if(Me===ft){const Xe=Math.abs(ue-Qt);Xe<Pt&&(Nt=ue,Pt=Xe)}}ft>at&&(Nt-$>3&&xe(yt,$,Nt,at),yt[Nt+2]=ft,X-Nt>3&&xe(yt,Nt,X,at))}function we(yt,$,X,at,ft,Qt){let Nt=ft-X,Pt=Qt-at;if(Nt!==0||Pt!==0){const Et=((yt-X)*Nt+($-at)*Pt)/(Nt*Nt+Pt*Pt);Et>1?(X=ft,at=Qt):Et>0&&(X+=Nt*Et,at+=Pt*Et)}return Nt=yt-X,Pt=$-at,Nt*Nt+Pt*Pt}function Te(yt,$,X,at){const ft={id:yt??null,type:$,geometry:X,tags:at,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if($==="Point"||$==="MultiPoint"||$==="LineString")Ee(ft,X);else if($==="Polygon")Ee(ft,X[0]);else if($==="MultiLineString")for(const Qt of X)Ee(ft,Qt);else if($==="MultiPolygon")for(const Qt of X)Ee(ft,Qt[0]);return ft}function Ee(yt,$){for(let X=0;X<$.length;X+=3)yt.minX=Math.min(yt.minX,$[X]),yt.minY=Math.min(yt.minY,$[X+1]),yt.maxX=Math.max(yt.maxX,$[X]),yt.maxY=Math.max(yt.maxY,$[X+1])}function Ve(yt,$,X,at){if(!$.geometry)return;const ft=$.geometry.coordinates;if(ft&&ft.length===0)return;const Qt=$.geometry.type,Nt=Math.pow(X.tolerance/((1<<X.maxZoom)*X.extent),2);let Pt=[],Et=$.id;if(X.promoteId?Et=$.properties[X.promoteId]:X.generateId&&(Et=at||0),Qt==="Point")ie(ft,Pt);else if(Qt==="MultiPoint")for(const te of ft)ie(te,Pt);else if(Qt==="LineString")rt(ft,Pt,Nt,!1);else if(Qt==="MultiLineString"){if(X.lineMetrics){for(const te of ft)Pt=[],rt(te,Pt,Nt,!1),yt.push(Te(Et,"LineString",Pt,$.properties));return}dr(ft,Pt,Nt,!1)}else if(Qt==="Polygon")dr(ft,Pt,Nt,!0);else{if(Qt!=="MultiPolygon"){if(Qt==="GeometryCollection"){for(const te of $.geometry.geometries)Ve(yt,{id:Et,geometry:te,properties:$.properties},X,at);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const te of ft){const ae=[];dr(te,ae,Nt,!0),Pt.push(ae)}}yt.push(Te(Et,Qt,Pt,$.properties))}function ie(yt,$){$.push(je(yt[0]),se(yt[1]),0)}function rt(yt,$,X,at){let ft,Qt,Nt=0;for(let Et=0;Et<yt.length;Et++){const te=je(yt[Et][0]),ae=se(yt[Et][1]);$.push(te,ae,0),Et>0&&(Nt+=at?(ft*ae-te*Qt)/2:Math.sqrt(Math.pow(te-ft,2)+Math.pow(ae-Qt,2))),ft=te,Qt=ae}const Pt=$.length-3;$[2]=1,xe($,0,Pt,X),$[Pt+2]=1,$.size=Math.abs(Nt),$.start=0,$.end=$.size}function dr(yt,$,X,at){for(let ft=0;ft<yt.length;ft++){const Qt=[];rt(yt[ft],Qt,X,at),$.push(Qt)}}function je(yt){return yt/360+.5}function se(yt){const $=Math.sin(yt*Math.PI/180),X=.5-.25*Math.log((1+$)/(1-$))/Math.PI;return X<0?0:X>1?1:X}function fe(yt,$,X,at,ft,Qt,Nt,Pt){if(at/=$,Qt>=(X/=$)&&Nt<at)return yt;if(Nt<X||Qt>=at)return null;const Et=[];for(const te of yt){const ae=te.geometry;let Gt=te.type;const ue=ft===0?te.minX:te.minY,Me=ft===0?te.maxX:te.maxY;if(ue>=X&&Me<at){Et.push(te);continue}if(Me<X||ue>=at)continue;let Xe=[];if(Gt==="Point"||Gt==="MultiPoint")Ue(ae,Xe,X,at,ft);else if(Gt==="LineString")Se(ae,Xe,X,at,ft,!1,Pt.lineMetrics);else if(Gt==="MultiLineString")We(ae,Xe,X,at,ft,!1);else if(Gt==="Polygon")We(ae,Xe,X,at,ft,!0);else if(Gt==="MultiPolygon")for(const Sr of ae){const nr=[];We(Sr,nr,X,at,ft,!0),nr.length&&Xe.push(nr)}if(Xe.length){if(Pt.lineMetrics&&Gt==="LineString"){for(const Sr of Xe)Et.push(Te(te.id,Gt,Sr,te.tags));continue}Gt!=="LineString"&&Gt!=="MultiLineString"||(Xe.length===1?(Gt="LineString",Xe=Xe[0]):Gt="MultiLineString"),Gt!=="Point"&&Gt!=="MultiPoint"||(Gt=Xe.length===3?"Point":"MultiPoint"),Et.push(Te(te.id,Gt,Xe,te.tags))}}return Et.length?Et:null}function Ue(yt,$,X,at,ft){for(let Qt=0;Qt<yt.length;Qt+=3){const Nt=yt[Qt+ft];Nt>=X&&Nt<=at&&ar($,yt[Qt],yt[Qt+1],yt[Qt+2])}}function Se(yt,$,X,at,ft,Qt,Nt){let Pt=Re(yt);const Et=ft===0?wr:Fr;let te,ae,Gt=yt.start;for(let nr=0;nr<yt.length-3;nr+=3){const br=yt[nr],Ar=yt[nr+1],Yr=yt[nr+2],$r=yt[nr+3],gr=yt[nr+4],zr=ft===0?br:Ar,Jr=ft===0?$r:gr;let Ft=!1;Nt&&(te=Math.sqrt(Math.pow(br-$r,2)+Math.pow(Ar-gr,2))),zr<X?Jr>X&&(ae=Et(Pt,br,Ar,$r,gr,X),Nt&&(Pt.start=Gt+te*ae)):zr>at?Jr<at&&(ae=Et(Pt,br,Ar,$r,gr,at),Nt&&(Pt.start=Gt+te*ae)):ar(Pt,br,Ar,Yr),Jr<X&&zr>=X&&(ae=Et(Pt,br,Ar,$r,gr,X),Ft=!0),Jr>at&&zr<=at&&(ae=Et(Pt,br,Ar,$r,gr,at),Ft=!0),!Qt&&Ft&&(Nt&&(Pt.end=Gt+te*ae),$.push(Pt),Pt=Re(yt)),Nt&&(Gt+=te)}let ue=yt.length-3;const Me=yt[ue],Xe=yt[ue+1],Sr=ft===0?Me:Xe;Sr>=X&&Sr<=at&&ar(Pt,Me,Xe,yt[ue+2]),ue=Pt.length-3,Qt&&ue>=3&&(Pt[ue]!==Pt[0]||Pt[ue+1]!==Pt[1])&&ar(Pt,Pt[0],Pt[1],Pt[2]),Pt.length&&$.push(Pt)}function Re(yt){const $=[];return $.size=yt.size,$.start=yt.start,$.end=yt.end,$}function We(yt,$,X,at,ft,Qt){for(const Nt of yt)Se(Nt,$,X,at,ft,Qt,!1)}function ar(yt,$,X,at){yt.push($,X,at)}function wr(yt,$,X,at,ft,Qt){const Nt=(Qt-$)/(at-$);return ar(yt,Qt,X+(ft-X)*Nt,1),Nt}function Fr(yt,$,X,at,ft,Qt){const Nt=(Qt-X)/(ft-X);return ar(yt,$+(at-$)*Nt,Qt,1),Nt}function oe(yt,$){const X=[];for(let at=0;at<yt.length;at++){const ft=yt[at],Qt=ft.type;let Nt;if(Qt==="Point"||Qt==="MultiPoint"||Qt==="LineString")Nt=er(ft.geometry,$);else if(Qt==="MultiLineString"||Qt==="Polygon"){Nt=[];for(const Pt of ft.geometry)Nt.push(er(Pt,$))}else if(Qt==="MultiPolygon"){Nt=[];for(const Pt of ft.geometry){const Et=[];for(const te of Pt)Et.push(er(te,$));Nt.push(Et)}}X.push(Te(ft.id,Qt,Nt,ft.tags))}return X}function er(yt,$){const X=[];X.size=yt.size,yt.start!==void 0&&(X.start=yt.start,X.end=yt.end);for(let at=0;at<yt.length;at+=3)X.push(yt[at]+$,yt[at+1],yt[at+2]);return X}function or(yt,$){if(yt.transformed)return yt;const X=1<<yt.z,at=yt.x,ft=yt.y;for(const Qt of yt.features){const Nt=Qt.geometry,Pt=Qt.type;if(Qt.geometry=[],Pt===1)for(let Et=0;Et<Nt.length;Et+=2)Qt.geometry.push(Le(Nt[Et],Nt[Et+1],$,X,at,ft));else for(let Et=0;Et<Nt.length;Et++){const te=[];for(let ae=0;ae<Nt[Et].length;ae+=2)te.push(Le(Nt[Et][ae],Nt[Et][ae+1],$,X,at,ft));Qt.geometry.push(te)}}return yt.transformed=!0,yt}function Le(yt,$,X,at,ft,Qt){return[Math.round(X*(yt*at-ft)),Math.round(X*($*at-Qt))]}function Zr(yt,$,X,at,ft){const Qt=$===ft.maxZoom?0:ft.tolerance/((1<<$)*ft.extent),Nt={features:[],numPoints:0,numSimplified:0,numFeatures:yt.length,source:null,x:X,y:at,z:$,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const Pt of yt)ce(Nt,Pt,Qt,ft);return Nt}function ce(yt,$,X,at){const ft=$.geometry,Qt=$.type,Nt=[];if(yt.minX=Math.min(yt.minX,$.minX),yt.minY=Math.min(yt.minY,$.minY),yt.maxX=Math.max(yt.maxX,$.maxX),yt.maxY=Math.max(yt.maxY,$.maxY),Qt==="Point"||Qt==="MultiPoint")for(let Pt=0;Pt<ft.length;Pt+=3)Nt.push(ft[Pt],ft[Pt+1]),yt.numPoints++,yt.numSimplified++;else if(Qt==="LineString")ir(Nt,ft,yt,X,!1,!1);else if(Qt==="MultiLineString"||Qt==="Polygon")for(let Pt=0;Pt<ft.length;Pt++)ir(Nt,ft[Pt],yt,X,Qt==="Polygon",Pt===0);else if(Qt==="MultiPolygon")for(let Pt=0;Pt<ft.length;Pt++){const Et=ft[Pt];for(let te=0;te<Et.length;te++)ir(Nt,Et[te],yt,X,!0,te===0)}if(Nt.length){let Pt=$.tags||null;if(Qt==="LineString"&&at.lineMetrics){Pt={};for(const te in $.tags)Pt[te]=$.tags[te];Pt.mapbox_clip_start=ft.start/ft.size,Pt.mapbox_clip_end=ft.end/ft.size}const Et={geometry:Nt,type:Qt==="Polygon"||Qt==="MultiPolygon"?3:Qt==="LineString"||Qt==="MultiLineString"?2:1,tags:Pt};$.id!==null&&(Et.id=$.id),yt.features.push(Et)}}function ir(yt,$,X,at,ft,Qt){const Nt=at*at;if(at>0&&$.size<(ft?Nt:at))return void(X.numPoints+=$.length/3);const Pt=[];for(let Et=0;Et<$.length;Et+=3)(at===0||$[Et+2]>Nt)&&(X.numSimplified++,Pt.push($[Et],$[Et+1])),X.numPoints++;ft&&function(Et,te){let ae=0;for(let Gt=0,ue=Et.length,Me=ue-2;Gt<ue;Me=Gt,Gt+=2)ae+=(Et[Gt]-Et[Me])*(Et[Gt+1]+Et[Me+1]);if(ae>0===te)for(let Gt=0,ue=Et.length;Gt<ue/2;Gt+=2){const Me=Et[Gt],Xe=Et[Gt+1];Et[Gt]=Et[ue-2-Gt],Et[Gt+1]=Et[ue-1-Gt],Et[ue-2-Gt]=Me,Et[ue-1-Gt]=Xe}}(Pt,Qt),yt.push(Pt)}const Pe={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class _r{constructor($,X){const at=(X=this.options=function(Qt,Nt){for(const Pt in Nt)Qt[Pt]=Nt[Pt];return Qt}(Object.create(Pe),X)).debug;if(at&&console.time("preprocess data"),X.maxZoom<0||X.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(X.promoteId&&X.generateId)throw new Error("promoteId and generateId cannot be used together.");let ft=function(Qt,Nt){const Pt=[];if(Qt.type==="FeatureCollection")for(let Et=0;Et<Qt.features.length;Et++)Ve(Pt,Qt.features[Et],Nt,Et);else Ve(Pt,Qt.type==="Feature"?Qt:{geometry:Qt},Nt);return Pt}($,X);this.tiles={},this.tileCoords=[],at&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",X.indexMaxZoom,X.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),ft=function(Qt,Nt){const Pt=Nt.buffer/Nt.extent;let Et=Qt;const te=fe(Qt,1,-1-Pt,Pt,0,-1,2,Nt),ae=fe(Qt,1,1-Pt,2+Pt,0,-1,2,Nt);return(te||ae)&&(Et=fe(Qt,1,-Pt,1+Pt,0,-1,2,Nt)||[],te&&(Et=oe(te,1).concat(Et)),ae&&(Et=Et.concat(oe(ae,-1)))),Et}(ft,X),ft.length&&this.splitTile(ft,0,0,0),at&&(ft.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile($,X,at,ft,Qt,Nt,Pt){const Et=[$,X,at,ft],te=this.options,ae=te.debug;for(;Et.length;){ft=Et.pop(),at=Et.pop(),X=Et.pop(),$=Et.pop();const Gt=1<<X,ue=ni(X,at,ft);let Me=this.tiles[ue];if(!Me&&(ae>1&&console.time("creation"),Me=this.tiles[ue]=Zr($,X,at,ft,te),this.tileCoords.push({z:X,x:at,y:ft}),ae)){ae>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",X,at,ft,Me.numFeatures,Me.numPoints,Me.numSimplified),console.timeEnd("creation"));const Ft=`z${X}`;this.stats[Ft]=(this.stats[Ft]||0)+1,this.total++}if(Me.source=$,Qt==null){if(X===te.indexMaxZoom||Me.numPoints<=te.indexMaxPoints)continue}else{if(X===te.maxZoom||X===Qt)continue;if(Qt!=null){const Ft=Qt-X;if(at!==Nt>>Ft||ft!==Pt>>Ft)continue}}if(Me.source=null,$.length===0)continue;ae>1&&console.time("clipping");const Xe=.5*te.buffer/te.extent,Sr=.5-Xe,nr=.5+Xe,br=1+Xe;let Ar=null,Yr=null,$r=null,gr=null,zr=fe($,Gt,at-Xe,at+nr,0,Me.minX,Me.maxX,te),Jr=fe($,Gt,at+Sr,at+br,0,Me.minX,Me.maxX,te);$=null,zr&&(Ar=fe(zr,Gt,ft-Xe,ft+nr,1,Me.minY,Me.maxY,te),Yr=fe(zr,Gt,ft+Sr,ft+br,1,Me.minY,Me.maxY,te),zr=null),Jr&&($r=fe(Jr,Gt,ft-Xe,ft+nr,1,Me.minY,Me.maxY,te),gr=fe(Jr,Gt,ft+Sr,ft+br,1,Me.minY,Me.maxY,te),Jr=null),ae>1&&console.timeEnd("clipping"),Et.push(Ar||[],X+1,2*at,2*ft),Et.push(Yr||[],X+1,2*at,2*ft+1),Et.push($r||[],X+1,2*at+1,2*ft),Et.push(gr||[],X+1,2*at+1,2*ft+1)}}getTile($,X,at){$=+$,X=+X,at=+at;const ft=this.options,{extent:Qt,debug:Nt}=ft;if($<0||$>24)return null;const Pt=1<<$,Et=ni($,X=X+Pt&Pt-1,at);if(this.tiles[Et])return or(this.tiles[Et],Qt);Nt>1&&console.log("drilling down to z%d-%d-%d",$,X,at);let te,ae=$,Gt=X,ue=at;for(;!te&&ae>0;)ae--,Gt>>=1,ue>>=1,te=this.tiles[ni(ae,Gt,ue)];return te&&te.source?(Nt>1&&(console.log("found parent tile z%d-%d-%d",ae,Gt,ue),console.time("drilling down")),this.splitTile(te.source,ae,Gt,ue,$,X,at),Nt>1&&console.timeEnd("drilling down"),this.tiles[Et]?or(this.tiles[Et],Qt):null):null}}function ni(yt,$,X){return 32*((1<<yt)*X+$)+yt}function Qe(yt,$){return $?yt.properties[$]:yt.id}function mi(yt,$){if(yt==null)return!0;if(yt.type==="Feature")return Qe(yt,$)!=null;if(yt.type==="FeatureCollection"){const X=new Set;for(const at of yt.features){const ft=Qe(at,$);if(ft==null||X.has(ft))return!1;X.add(ft)}return!0}return!1}function Kr(yt,$){const X=new Map;if(yt!=null)if(yt.type==="Feature")X.set(Qe(yt,$),yt);else for(const at of yt.features)X.set(Qe(at,$),at);return X}class si extends T{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile($,X){return d._(this,void 0,void 0,function*(){const at=$.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const ft=this._geoJSONIndex.getTile(at.z,at.x,at.y);if(!ft)return null;const Qt=new class{constructor(Pt){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=d.X,this.length=Pt.length,this._features=Pt}feature(Pt){return new class{constructor(Et){this._feature=Et,this.extent=d.X,this.type=Et.type,this.properties=Et.tags,"id"in Et&&!isNaN(Et.id)&&(this.id=parseInt(Et.id,10))}loadGeometry(){if(this._feature.type===1){const Et=[];for(const te of this._feature.geometry)Et.push([new d.P(te[0],te[1])]);return Et}{const Et=[];for(const te of this._feature.geometry){const ae=[];for(const Gt of te)ae.push(new d.P(Gt[0],Gt[1]));Et.push(ae)}return Et}}toGeoJSON(Et,te,ae){return Z.call(this,Et,te,ae)}}(this._features[Pt])}}(ft.features);let Nt=jt(Qt);return Nt.byteOffset===0&&Nt.byteLength===Nt.buffer.byteLength||(Nt=new Uint8Array(Nt)),{vectorTile:Qt,rawData:Nt.buffer}})}loadData($){return d._(this,void 0,void 0,function*(){var X;(X=this._pendingRequest)===null||X===void 0||X.abort();const at=!!($&&$.request&&$.request.collectResourceTiming)&&new d.bv($.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON($,this._pendingRequest),this._geoJSONIndex=$.cluster?new _t(function({superclusterOptions:Nt,clusterProperties:Pt}){if(!Pt||!Nt)return Nt;const Et={},te={},ae={accumulated:null,zoom:0},Gt={properties:null},ue=Object.keys(Pt);for(const Me of ue){const[Xe,Sr]=Pt[Me],nr=d.bC(Sr),br=d.bC(typeof Xe=="string"?[Xe,["accumulated"],["get",Me]]:Xe);Et[Me]=nr.value,te[Me]=br.value}return Nt.map=Me=>{Gt.properties=Me;const Xe={};for(const Sr of ue)Xe[Sr]=Et[Sr].evaluate(ae,Gt);return Xe},Nt.reduce=(Me,Xe)=>{Gt.properties=Xe;for(const Sr of ue)ae.accumulated=Me[Sr],Me[Sr]=te[Sr].evaluate(ae,Gt)},Nt}($)).load((yield this._pendingData).features):(ft=yield this._pendingData,new _r(ft,$.geojsonVtOptions)),this.loaded={};const Qt={};if(at){const Nt=at.finish();Nt&&(Qt.resourceTiming={},Qt.resourceTiming[$.source]=JSON.parse(JSON.stringify(Nt)))}return Qt}catch(Qt){if(delete this._pendingRequest,d.bB(Qt))return{abandoned:!0};throw Qt}var ft})}getData(){return d._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile($){const X=this.loaded;return X&&X[$.uid]?super.reloadTile($):this.loadTile($)}loadAndProcessGeoJSON($,X){return d._(this,void 0,void 0,function*(){let at=yield this.loadGeoJSON($,X);if(delete this._pendingRequest,typeof at!="object")throw new Error(`Input data given to '${$.source}' is not a valid GeoJSON object.`);if(R(at,!0),$.filter){const ft=d.bC($.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(ft.result==="error")throw new Error(ft.value.map(Nt=>`${Nt.key}: ${Nt.message}`).join(", "));at={type:"FeatureCollection",features:at.features.filter(Nt=>ft.value.evaluate({zoom:0},Nt))}}return at})}loadGeoJSON($,X){return d._(this,void 0,void 0,function*(){const{promoteId:at}=$;if($.request){const ft=yield d.h($.request,X);return this._dataUpdateable=mi(ft.data,at)?Kr(ft.data,at):void 0,ft.data}if(typeof $.data=="string")try{const ft=JSON.parse($.data);return this._dataUpdateable=mi(ft,at)?Kr(ft,at):void 0,ft}catch{throw new Error(`Input data given to '${$.source}' is not a valid GeoJSON object.`)}if(!$.dataDiff)throw new Error(`Input data given to '${$.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${$.source}`);return function(ft,Qt,Nt){var Pt,Et,te,ae;if(Qt.removeAll&&ft.clear(),Qt.remove)for(const Gt of Qt.remove)ft.delete(Gt);if(Qt.add)for(const Gt of Qt.add){const ue=Qe(Gt,Nt);ue!=null&&ft.set(ue,Gt)}if(Qt.update)for(const Gt of Qt.update){let ue=ft.get(Gt.id);if(ue==null)continue;const Me=!Gt.removeAllProperties&&(((Pt=Gt.removeProperties)===null||Pt===void 0?void 0:Pt.length)>0||((Et=Gt.addOrUpdateProperties)===null||Et===void 0?void 0:Et.length)>0);if((Gt.newGeometry||Gt.removeAllProperties||Me)&&(ue=Object.assign({},ue),ft.set(Gt.id,ue),Me&&(ue.properties=Object.assign({},ue.properties))),Gt.newGeometry&&(ue.geometry=Gt.newGeometry),Gt.removeAllProperties)ue.properties={};else if(((te=Gt.removeProperties)===null||te===void 0?void 0:te.length)>0)for(const Xe of Gt.removeProperties)Object.prototype.hasOwnProperty.call(ue.properties,Xe)&&delete ue.properties[Xe];if(((ae=Gt.addOrUpdateProperties)===null||ae===void 0?void 0:ae.length)>0)for(const{key:Xe,value:Sr}of Gt.addOrUpdateProperties)ue.properties[Xe]=Sr}}(this._dataUpdateable,$.dataDiff,at),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource($){return d._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom($){return this._geoJSONIndex.getClusterExpansionZoom($.clusterId)}getClusterChildren($){return this._geoJSONIndex.getChildren($.clusterId)}getClusterLeaves($){return this._geoJSONIndex.getLeaves($.clusterId,$.limit,$.offset)}}class Xr{constructor($){this.self=$,this.actor=new d.F($),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(X,at)=>{if(this.externalWorkerSourceTypes[X])throw new Error(`Worker source with name "${X}" already registered.`);this.externalWorkerSourceTypes[X]=at},this.self.addProtocol=d.bi,this.self.removeProtocol=d.bj,this.self.registerRTLTextPlugin=X=>{if(d.bD.isParsed())throw new Error("RTL text plugin already registered.");d.bD.setMethods(X)},this.actor.registerMessageHandler("LDT",(X,at)=>this._getDEMWorkerSource(X,at.source).loadTile(at)),this.actor.registerMessageHandler("RDT",(X,at)=>d._(this,void 0,void 0,function*(){this._getDEMWorkerSource(X,at.source).removeTile(at)})),this.actor.registerMessageHandler("GCEZ",(X,at)=>d._(this,void 0,void 0,function*(){return this._getWorkerSource(X,at.type,at.source).getClusterExpansionZoom(at)})),this.actor.registerMessageHandler("GCC",(X,at)=>d._(this,void 0,void 0,function*(){return this._getWorkerSource(X,at.type,at.source).getClusterChildren(at)})),this.actor.registerMessageHandler("GCL",(X,at)=>d._(this,void 0,void 0,function*(){return this._getWorkerSource(X,at.type,at.source).getClusterLeaves(at)})),this.actor.registerMessageHandler("LD",(X,at)=>this._getWorkerSource(X,at.type,at.source).loadData(at)),this.actor.registerMessageHandler("GD",(X,at)=>this._getWorkerSource(X,at.type,at.source).getData()),this.actor.registerMessageHandler("LT",(X,at)=>this._getWorkerSource(X,at.type,at.source).loadTile(at)),this.actor.registerMessageHandler("RT",(X,at)=>this._getWorkerSource(X,at.type,at.source).reloadTile(at)),this.actor.registerMessageHandler("AT",(X,at)=>this._getWorkerSource(X,at.type,at.source).abortTile(at)),this.actor.registerMessageHandler("RMT",(X,at)=>this._getWorkerSource(X,at.type,at.source).removeTile(at)),this.actor.registerMessageHandler("RS",(X,at)=>d._(this,void 0,void 0,function*(){if(!this.workerSources[X]||!this.workerSources[X][at.type]||!this.workerSources[X][at.type][at.source])return;const ft=this.workerSources[X][at.type][at.source];delete this.workerSources[X][at.type][at.source],ft.removeSource!==void 0&&ft.removeSource(at)})),this.actor.registerMessageHandler("RM",X=>d._(this,void 0,void 0,function*(){delete this.layerIndexes[X],delete this.availableImages[X],delete this.workerSources[X],delete this.demWorkerSources[X]})),this.actor.registerMessageHandler("SR",(X,at)=>d._(this,void 0,void 0,function*(){this.referrer=at})),this.actor.registerMessageHandler("SRPS",(X,at)=>this._syncRTLPluginState(X,at)),this.actor.registerMessageHandler("IS",(X,at)=>d._(this,void 0,void 0,function*(){this.self.importScripts(at)})),this.actor.registerMessageHandler("SI",(X,at)=>this._setImages(X,at)),this.actor.registerMessageHandler("UL",(X,at)=>d._(this,void 0,void 0,function*(){this._getLayerIndex(X).update(at.layers,at.removedIds)})),this.actor.registerMessageHandler("SL",(X,at)=>d._(this,void 0,void 0,function*(){this._getLayerIndex(X).replace(at)}))}_setImages($,X){return d._(this,void 0,void 0,function*(){this.availableImages[$]=X;for(const at in this.workerSources[$]){const ft=this.workerSources[$][at];for(const Qt in ft)ft[Qt].availableImages=X}})}_syncRTLPluginState($,X){return d._(this,void 0,void 0,function*(){if(d.bD.isParsed())return d.bD.getState();if(X.pluginStatus!=="loading")return d.bD.setState(X),X;const at=X.pluginURL;if(this.self.importScripts(at),d.bD.isParsed()){const ft={pluginStatus:"loaded",pluginURL:at};return d.bD.setState(ft),ft}throw d.bD.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${at}`)})}_getAvailableImages($){let X=this.availableImages[$];return X||(X=[]),X}_getLayerIndex($){let X=this.layerIndexes[$];return X||(X=this.layerIndexes[$]=new A),X}_getWorkerSource($,X,at){if(this.workerSources[$]||(this.workerSources[$]={}),this.workerSources[$][X]||(this.workerSources[$][X]={}),!this.workerSources[$][X][at]){const ft={sendAsync:(Qt,Nt)=>(Qt.targetMapId=$,this.actor.sendAsync(Qt,Nt))};switch(X){case"vector":this.workerSources[$][X][at]=new T(ft,this._getLayerIndex($),this._getAvailableImages($));break;case"geojson":this.workerSources[$][X][at]=new si(ft,this._getLayerIndex($),this._getAvailableImages($));break;default:this.workerSources[$][X][at]=new this.externalWorkerSourceTypes[X](ft,this._getLayerIndex($),this._getAvailableImages($))}}return this.workerSources[$][X][at]}_getDEMWorkerSource($,X){return this.demWorkerSources[$]||(this.demWorkerSources[$]={}),this.demWorkerSources[$][X]||(this.demWorkerSources[$][X]=new P),this.demWorkerSources[$][X]}}return d.i(self)&&(self.worker=new Xr(self)),Xr}),c("index",["exports","./shared"],function(d,A){var v="4.7.1";let C,I;const T={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frameAsync:f=>new Promise((t,o)=>{const u=requestAnimationFrame(t);f.signal.addEventListener("abort",()=>{cancelAnimationFrame(u),o(A.c())})}),getImageData(f,t=0){return this.getImageCanvasContext(f).getImageData(-t,-t,f.width+2*t,f.height+2*t)},getImageCanvasContext(f){const t=window.document.createElement("canvas"),o=t.getContext("2d",{willReadFrequently:!0});if(!o)throw new Error("failed to create canvas 2d context");return t.width=f.width,t.height=f.height,o.drawImage(f,0,0,f.width,f.height),o},resolveURL:f=>(C||(C=document.createElement("a")),C.href=f,C.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(I==null&&(I=matchMedia("(prefers-reduced-motion: reduce)")),I.matches)}};class P{static testProp(t){if(!P.docStyle)return t[0];for(let o=0;o<t.length;o++)if(t[o]in P.docStyle)return t[o];return t[0]}static create(t,o,u){const g=window.document.createElement(t);return o!==void 0&&(g.className=o),u&&u.appendChild(g),g}static createNS(t,o){return window.document.createElementNS(t,o)}static disableDrag(){P.docStyle&&P.selectProp&&(P.userSelect=P.docStyle[P.selectProp],P.docStyle[P.selectProp]="none")}static enableDrag(){P.docStyle&&P.selectProp&&(P.docStyle[P.selectProp]=P.userSelect)}static setTransform(t,o){t.style[P.transformProp]=o}static addEventListener(t,o,u,g={}){t.addEventListener(o,u,"passive"in g?g:g.capture)}static removeEventListener(t,o,u,g={}){t.removeEventListener(o,u,"passive"in g?g:g.capture)}static suppressClickInternal(t){t.preventDefault(),t.stopPropagation(),window.removeEventListener("click",P.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",P.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",P.suppressClickInternal,!0)},0)}static getScale(t){const o=t.getBoundingClientRect();return{x:o.width/t.offsetWidth||1,y:o.height/t.offsetHeight||1,boundingClientRect:o}}static getPoint(t,o,u){const g=o.boundingClientRect;return new A.P((u.clientX-g.left)/o.x-t.clientLeft,(u.clientY-g.top)/o.y-t.clientTop)}static mousePos(t,o){const u=P.getScale(t);return P.getPoint(t,u,o)}static touchPos(t,o){const u=[],g=P.getScale(t);for(let m=0;m<o.length;m++)u.push(P.getPoint(t,g,o[m]));return u}static mouseButton(t){return t.button}static remove(t){t.parentNode&&t.parentNode.removeChild(t)}}P.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,P.selectProp=P.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),P.transformProp=P.testProp(["transform","WebkitTransform"]);const U={supported:!1,testSupport:function(f){!Z&&R&&(K?tt(f):V=f)}};let V,R,Z=!1,K=!1;function tt(f){const t=f.createTexture();f.bindTexture(f.TEXTURE_2D,t);try{if(f.texImage2D(f.TEXTURE_2D,0,f.RGBA,f.RGBA,f.UNSIGNED_BYTE,R),f.isContextLost())return;U.supported=!0}catch{}f.deleteTexture(t),Z=!0}var ht;typeof document<"u"&&(R=document.createElement("img"),R.onload=()=>{V&&tt(V),V=null,K=!0},R.onerror=()=>{Z=!0,V=null},R.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(f){let t,o,u,g;f.resetRequestQueue=()=>{t=[],o=0,u=0,g={}},f.addThrottleControl=E=>{const k=u++;return g[k]=E,k},f.removeThrottleControl=E=>{delete g[E],x()},f.getImage=(E,k,N=!0)=>new Promise((D,j)=>{U.supported&&(E.headers||(E.headers={}),E.headers.accept="image/webp,*/*"),A.e(E,{type:"image"}),t.push({abortController:k,requestParameters:E,supportImageRefresh:N,state:"queued",onError:G=>{j(G)},onSuccess:G=>{D(G)}}),x()});const m=E=>A._(this,void 0,void 0,function*(){E.state="running";const{requestParameters:k,supportImageRefresh:N,onError:D,onSuccess:j,abortController:G}=E,H=N===!1&&!A.i(self)&&!A.g(k.url)&&(!k.headers||Object.keys(k.headers).reduce((ot,ct)=>ot&&ct==="accept",!0));o++;const W=H?B(k,G):A.m(k,G);try{const ot=yield W;delete E.abortController,E.state="completed",ot.data instanceof HTMLImageElement||A.b(ot.data)?j(ot):ot.data&&j({data:yield(nt=ot.data,typeof createImageBitmap=="function"?A.d(nt):A.f(nt)),cacheControl:ot.cacheControl,expires:ot.expires})}catch(ot){delete E.abortController,D(ot)}finally{o--,x()}var nt}),x=()=>{const E=(()=>{for(const k of Object.keys(g))if(g[k]())return!0;return!1})()?A.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:A.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let k=o;k<E&&t.length>0;k++){const N=t.shift();N.abortController.signal.aborted?k--:m(N)}},B=(E,k)=>new Promise((N,D)=>{const j=new Image,G=E.url,H=E.credentials;H&&H==="include"?j.crossOrigin="use-credentials":(H&&H==="same-origin"||!A.s(G))&&(j.crossOrigin="anonymous"),k.signal.addEventListener("abort",()=>{j.src="",D(A.c())}),j.fetchPriority="high",j.onload=()=>{j.onerror=j.onload=null,N({data:j})},j.onerror=()=>{j.onerror=j.onload=null,k.signal.aborted||D(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},j.src=G})}(ht||(ht={})),ht.resetRequestQueue();class Bt{constructor(t){this._transformRequestFn=t}transformRequest(t,o){return this._transformRequestFn&&this._transformRequestFn(t,o)||{url:t}}setTransformRequest(t){this._transformRequestFn=t}}function Lt(f){var t=new A.A(3);return t[0]=f[0],t[1]=f[1],t[2]=f[2],t}var Ut,xt=function(f,t,o){return f[0]=t[0]-o[0],f[1]=t[1]-o[1],f[2]=t[2]-o[2],f};Ut=new A.A(3),A.A!=Float32Array&&(Ut[0]=0,Ut[1]=0,Ut[2]=0);var pt=function(f){var t=f[0],o=f[1];return t*t+o*o};function kt(f){const t=[];if(typeof f=="string")t.push({id:"default",url:f});else if(f&&f.length>0){const o=[];for(const{id:u,url:g}of f){const m=`${u}${g}`;o.indexOf(m)===-1&&(o.push(m),t.push({id:u,url:g}))}}return t}function Xt(f,t,o){const u=f.split("?");return u[0]+=`${t}${o}`,u.join("?")}(function(){var f=new A.A(2);A.A!=Float32Array&&(f[0]=0,f[1]=0)})();class st{constructor(t,o,u,g){this.context=t,this.format=u,this.texture=t.gl.createTexture(),this.update(o,g)}update(t,o,u){const{width:g,height:m}=t,x=!(this.size&&this.size[0]===g&&this.size[1]===m||u),{context:B}=this,{gl:E}=B;if(this.useMipmap=!!(o&&o.useMipmap),E.bindTexture(E.TEXTURE_2D,this.texture),B.pixelStoreUnpackFlipY.set(!1),B.pixelStoreUnpack.set(1),B.pixelStoreUnpackPremultiplyAlpha.set(this.format===E.RGBA&&(!o||o.premultiply!==!1)),x)this.size=[g,m],t instanceof HTMLImageElement||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement||t instanceof ImageData||A.b(t)?E.texImage2D(E.TEXTURE_2D,0,this.format,this.format,E.UNSIGNED_BYTE,t):E.texImage2D(E.TEXTURE_2D,0,this.format,g,m,0,this.format,E.UNSIGNED_BYTE,t.data);else{const{x:k,y:N}=u||{x:0,y:0};t instanceof HTMLImageElement||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement||t instanceof ImageData||A.b(t)?E.texSubImage2D(E.TEXTURE_2D,0,k,N,E.RGBA,E.UNSIGNED_BYTE,t):E.texSubImage2D(E.TEXTURE_2D,0,k,N,g,m,E.RGBA,E.UNSIGNED_BYTE,t.data)}this.useMipmap&&this.isSizePowerOfTwo()&&E.generateMipmap(E.TEXTURE_2D)}bind(t,o,u){const{context:g}=this,{gl:m}=g;m.bindTexture(m.TEXTURE_2D,this.texture),u!==m.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(u=m.LINEAR),t!==this.filter&&(m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MAG_FILTER,t),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MIN_FILTER,u||t),this.filter=t),o!==this.wrap&&(m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_S,o),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_T,o),this.wrap=o)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:t}=this.context;t.deleteTexture(this.texture),this.texture=null}}function ut(f){const{userImage:t}=f;return!!(t&&t.render&&t.render())&&(f.data.replace(new Uint8Array(t.data.buffer)),!0)}class mt extends A.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new A.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(t){if(this.loaded!==t&&(this.loaded=t,t)){for(const{ids:o,promiseResolve:u}of this.requestors)u(this._getImagesForIds(o));this.requestors=[]}}getImage(t){const o=this.images[t];if(o&&!o.data&&o.spriteData){const u=o.spriteData;o.data=new A.R({width:u.width,height:u.height},u.context.getImageData(u.x,u.y,u.width,u.height).data),o.spriteData=null}return o}addImage(t,o){if(this.images[t])throw new Error(`Image id ${t} already exist, use updateImage instead`);this._validate(t,o)&&(this.images[t]=o)}_validate(t,o){let u=!0;const g=o.data||o.spriteData;return this._validateStretch(o.stretchX,g&&g.width)||(this.fire(new A.j(new Error(`Image "${t}" has invalid "stretchX" value`))),u=!1),this._validateStretch(o.stretchY,g&&g.height)||(this.fire(new A.j(new Error(`Image "${t}" has invalid "stretchY" value`))),u=!1),this._validateContent(o.content,o)||(this.fire(new A.j(new Error(`Image "${t}" has invalid "content" value`))),u=!1),u}_validateStretch(t,o){if(!t)return!0;let u=0;for(const g of t){if(g[0]<u||g[1]<g[0]||o<g[1])return!1;u=g[1]}return!0}_validateContent(t,o){if(!t)return!0;if(t.length!==4)return!1;const u=o.spriteData,g=u&&u.width||o.data.width,m=u&&u.height||o.data.height;return!(t[0]<0||g<t[0]||t[1]<0||m<t[1]||t[2]<0||g<t[2]||t[3]<0||m<t[3]||t[2]<t[0]||t[3]<t[1])}updateImage(t,o,u=!0){const g=this.getImage(t);if(u&&(g.data.width!==o.data.width||g.data.height!==o.data.height))throw new Error(`size mismatch between old image (${g.data.width}x${g.data.height}) and new image (${o.data.width}x${o.data.height}).`);o.version=g.version+1,this.images[t]=o,this.updatedImages[t]=!0}removeImage(t){const o=this.images[t];delete this.images[t],delete this.patterns[t],o.userImage&&o.userImage.onRemove&&o.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(t){return new Promise((o,u)=>{let g=!0;if(!this.isLoaded())for(const m of t)this.images[m]||(g=!1);this.isLoaded()||g?o(this._getImagesForIds(t)):this.requestors.push({ids:t,promiseResolve:o})})}_getImagesForIds(t){const o={};for(const u of t){let g=this.getImage(u);g||(this.fire(new A.k("styleimagemissing",{id:u})),g=this.getImage(u)),g?o[u]={data:g.data.clone(),pixelRatio:g.pixelRatio,sdf:g.sdf,version:g.version,stretchX:g.stretchX,stretchY:g.stretchY,content:g.content,textFitWidth:g.textFitWidth,textFitHeight:g.textFitHeight,hasRenderCallback:!!(g.userImage&&g.userImage.render)}:A.w(`Image "${u}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return o}getPixelSize(){const{width:t,height:o}=this.atlasImage;return{width:t,height:o}}getPattern(t){const o=this.patterns[t],u=this.getImage(t);if(!u)return null;if(o&&o.position.version===u.version)return o.position;if(o)o.position.version=u.version;else{const g={w:u.data.width+2,h:u.data.height+2,x:0,y:0},m=new A.I(g,u);this.patterns[t]={bin:g,position:m}}return this._updatePatternAtlas(),this.patterns[t].position}bind(t){const o=t.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new st(t,this.atlasImage,o.RGBA),this.atlasTexture.bind(o.LINEAR,o.CLAMP_TO_EDGE)}_updatePatternAtlas(){const t=[];for(const m in this.patterns)t.push(this.patterns[m].bin);const{w:o,h:u}=A.p(t),g=this.atlasImage;g.resize({width:o||1,height:u||1});for(const m in this.patterns){const{bin:x}=this.patterns[m],B=x.x+1,E=x.y+1,k=this.getImage(m).data,N=k.width,D=k.height;A.R.copy(k,g,{x:0,y:0},{x:B,y:E},{width:N,height:D}),A.R.copy(k,g,{x:0,y:D-1},{x:B,y:E-1},{width:N,height:1}),A.R.copy(k,g,{x:0,y:0},{x:B,y:E+D},{width:N,height:1}),A.R.copy(k,g,{x:N-1,y:0},{x:B-1,y:E},{width:1,height:D}),A.R.copy(k,g,{x:0,y:0},{x:B+N,y:E},{width:1,height:D})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(t){for(const o of t){if(this.callbackDispatchedThisFrame[o])continue;this.callbackDispatchedThisFrame[o]=!0;const u=this.getImage(o);u||A.w(`Image with ID: "${o}" was not found`),ut(u)&&this.updateImage(o,u)}}}const vt=1e20;function $t(f,t,o,u,g,m,x,B,E){for(let k=t;k<t+u;k++)Vt(f,o*m+k,m,g,x,B,E);for(let k=o;k<o+g;k++)Vt(f,k*m+t,1,u,x,B,E)}function Vt(f,t,o,u,g,m,x){m[0]=0,x[0]=-vt,x[1]=vt,g[0]=f[t];for(let B=1,E=0,k=0;B<u;B++){g[B]=f[t+B*o];const N=B*B;do{const D=m[E];k=(g[B]-g[D]+N-D*D)/(B-D)/2}while(k<=x[E]&&--E>-1);E++,m[E]=B,x[E]=k,x[E+1]=vt}for(let B=0,E=0;B<u;B++){for(;x[E+1]<B;)E++;const k=m[E],N=B-k;f[t+B*o]=g[k]+N*N}}class jt{constructor(t,o){this.requestManager=t,this.localIdeographFontFamily=o,this.entries={}}setURL(t){this.url=t}getGlyphs(t){return A._(this,void 0,void 0,function*(){const o=[];for(const m in t)for(const x of t[m])o.push(this._getAndCacheGlyphsPromise(m,x));const u=yield Promise.all(o),g={};for(const{stack:m,id:x,glyph:B}of u)g[m]||(g[m]={}),g[m][x]=B&&{id:B.id,bitmap:B.bitmap.clone(),metrics:B.metrics};return g})}_getAndCacheGlyphsPromise(t,o){return A._(this,void 0,void 0,function*(){let u=this.entries[t];u||(u=this.entries[t]={glyphs:{},requests:{},ranges:{}});let g=u.glyphs[o];if(g!==void 0)return{stack:t,id:o,glyph:g};if(g=this._tinySDF(u,t,o),g)return u.glyphs[o]=g,{stack:t,id:o,glyph:g};const m=Math.floor(o/256);if(256*m>65535)throw new Error("glyphs > 65535 not supported");if(u.ranges[m])return{stack:t,id:o,glyph:g};if(!this.url)throw new Error("glyphsUrl is not set");if(!u.requests[m]){const B=jt.loadGlyphRange(t,m,this.url,this.requestManager);u.requests[m]=B}const x=yield u.requests[m];for(const B in x)this._doesCharSupportLocalGlyph(+B)||(u.glyphs[+B]=x[+B]);return u.ranges[m]=!0,{stack:t,id:o,glyph:x[o]||null}})}_doesCharSupportLocalGlyph(t){return!!this.localIdeographFontFamily&&new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(t))}_tinySDF(t,o,u){const g=this.localIdeographFontFamily;if(!g||!this._doesCharSupportLocalGlyph(u))return;let m=t.tinySDF;if(!m){let B="400";/bold/i.test(o)?B="900":/medium/i.test(o)?B="500":/light/i.test(o)&&(B="200"),m=t.tinySDF=new jt.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:g,fontWeight:B})}const x=m.draw(String.fromCharCode(u));return{id:u,bitmap:new A.o({width:x.width||60,height:x.height||60},x.data),metrics:{width:x.glyphWidth/2||24,height:x.glyphHeight/2||24,left:x.glyphLeft/2+.5||0,top:x.glyphTop/2-27.5||-8,advance:x.glyphAdvance/2||24,isDoubleResolution:!0}}}}jt.loadGlyphRange=function(f,t,o,u){return A._(this,void 0,void 0,function*(){const g=256*t,m=g+255,x=u.transformRequest(o.replace("{fontstack}",f).replace("{range}",`${g}-${m}`),"Glyphs"),B=yield A.l(x,new AbortController);if(!B||!B.data)throw new Error(`Could not load glyph range. range: ${t}, ${g}-${m}`);const E={};for(const k of A.n(B.data))E[k.id]=k;return E})},jt.TinySDF=class{constructor({fontSize:f=24,buffer:t=3,radius:o=8,cutoff:u=.25,fontFamily:g="sans-serif",fontWeight:m="normal",fontStyle:x="normal"}={}){this.buffer=t,this.cutoff=u,this.radius=o;const B=this.size=f+4*t,E=this._createCanvas(B),k=this.ctx=E.getContext("2d",{willReadFrequently:!0});k.font=`${x} ${m} ${f}px ${g}`,k.textBaseline="alphabetic",k.textAlign="left",k.fillStyle="black",this.gridOuter=new Float64Array(B*B),this.gridInner=new Float64Array(B*B),this.f=new Float64Array(B),this.z=new Float64Array(B+1),this.v=new Uint16Array(B)}_createCanvas(f){const t=document.createElement("canvas");return t.width=t.height=f,t}draw(f){const{width:t,actualBoundingBoxAscent:o,actualBoundingBoxDescent:u,actualBoundingBoxLeft:g,actualBoundingBoxRight:m}=this.ctx.measureText(f),x=Math.ceil(o),B=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(m-g))),E=Math.min(this.size-this.buffer,x+Math.ceil(u)),k=B+2*this.buffer,N=E+2*this.buffer,D=Math.max(k*N,0),j=new Uint8ClampedArray(D),G={data:j,width:k,height:N,glyphWidth:B,glyphHeight:E,glyphTop:x,glyphLeft:0,glyphAdvance:t};if(B===0||E===0)return G;const{ctx:H,buffer:W,gridInner:nt,gridOuter:ot}=this;H.clearRect(W,W,B,E),H.fillText(f,W,W+x);const ct=H.getImageData(W,W,B,E);ot.fill(vt,0,D),nt.fill(0,0,D);for(let At=0;At<E;At++)for(let gt=0;gt<B;gt++){const Tt=ct.data[4*(At*B+gt)+3]/255;if(Tt===0)continue;const St=(At+W)*k+gt+W;if(Tt===1)ot[St]=0,nt[St]=vt;else{const ee=.5-Tt;ot[St]=ee>0?ee*ee:0,nt[St]=ee<0?ee*ee:0}}$t(ot,0,0,k,N,k,this.f,this.v,this.z),$t(nt,W,W,B,E,k,this.f,this.v,this.z);for(let At=0;At<D;At++){const gt=Math.sqrt(ot[At])-Math.sqrt(nt[At]);j[At]=Math.round(255-255*(gt/this.radius+this.cutoff))}return G}};class zt{constructor(){this.specification=A.v.light.position}possiblyEvaluate(t,o){return A.x(t.expression.evaluate(o))}interpolate(t,o,u){return{x:A.y.number(t.x,o.x,u),y:A.y.number(t.y,o.y,u),z:A.y.number(t.z,o.z,u)}}}let Wt;class Yt extends A.E{constructor(t){super(),Wt=Wt||new A.q({anchor:new A.D(A.v.light.anchor),position:new zt,color:new A.D(A.v.light.color),intensity:new A.D(A.v.light.intensity)}),this._transitionable=new A.T(Wt),this.setLight(t),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(t,o={}){if(!this._validate(A.r,t,o))for(const u in t){const g=t[u];u.endsWith("-transition")?this._transitionable.setTransition(u.slice(0,-11),g):this._transitionable.setValue(u,g)}}updateTransitions(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(t){this.properties=this._transitioning.possiblyEvaluate(t)}_validate(t,o,u){return(!u||u.validate!==!1)&&A.t(this,t.call(A.u,{value:o,style:{glyphs:!0,sprite:!0},styleSpec:A.v}))}}const me=new A.q({"sky-color":new A.D(A.v.sky["sky-color"]),"horizon-color":new A.D(A.v.sky["horizon-color"]),"fog-color":new A.D(A.v.sky["fog-color"]),"fog-ground-blend":new A.D(A.v.sky["fog-ground-blend"]),"horizon-fog-blend":new A.D(A.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new A.D(A.v.sky["sky-horizon-blend"]),"atmosphere-blend":new A.D(A.v.sky["atmosphere-blend"])});class et extends A.E{constructor(t){super(),this._transitionable=new A.T(me),this.setSky(t),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new A.z(0))}setSky(t,o={}){if(!this._validate(A.B,t,o)){t||(t={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const u in t){const g=t[u];u.endsWith("-transition")?this._transitionable.setTransition(u.slice(0,-11),g):this._transitionable.setValue(u,g)}}}getSky(){return this._transitionable.serialize()}updateTransitions(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(t){this.properties=this._transitioning.possiblyEvaluate(t)}_validate(t,o,u={}){return(u==null?void 0:u.validate)!==!1&&A.t(this,t.call(A.u,A.e({value:o,style:{glyphs:!0,sprite:!0},styleSpec:A.v})))}calculateFogBlendOpacity(t){return t<60?0:t<70?(t-60)/10:1}}class dt{constructor(t,o){this.width=t,this.height=o,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(t,o){const u=t.join(",")+String(o);return this.dashEntry[u]||(this.dashEntry[u]=this.addDash(t,o)),this.dashEntry[u]}getDashRanges(t,o,u){const g=[];let m=t.length%2==1?-t[t.length-1]*u:0,x=t[0]*u,B=!0;g.push({left:m,right:x,isDash:B,zeroLength:t[0]===0});let E=t[0];for(let k=1;k<t.length;k++){B=!B;const N=t[k];m=E*u,E+=N,x=E*u,g.push({left:m,right:x,isDash:B,zeroLength:N===0})}return g}addRoundDash(t,o,u){const g=o/2;for(let m=-u;m<=u;m++){const x=this.width*(this.nextRow+u+m);let B=0,E=t[B];for(let k=0;k<this.width;k++){k/E.right>1&&(E=t[++B]);const N=Math.abs(k-E.left),D=Math.abs(k-E.right),j=Math.min(N,D);let G;const H=m/u*(g+1);if(E.isDash){const W=g-Math.abs(H);G=Math.sqrt(j*j+W*W)}else G=g-Math.sqrt(j*j+H*H);this.data[x+k]=Math.max(0,Math.min(255,G+128))}}}addRegularDash(t){for(let B=t.length-1;B>=0;--B){const E=t[B],k=t[B+1];E.zeroLength?t.splice(B,1):k&&k.isDash===E.isDash&&(k.left=E.left,t.splice(B,1))}const o=t[0],u=t[t.length-1];o.isDash===u.isDash&&(o.left=u.left-this.width,u.right=o.right+this.width);const g=this.width*this.nextRow;let m=0,x=t[m];for(let B=0;B<this.width;B++){B/x.right>1&&(x=t[++m]);const E=Math.abs(B-x.left),k=Math.abs(B-x.right),N=Math.min(E,k);this.data[g+B]=Math.max(0,Math.min(255,(x.isDash?N:-N)+128))}}addDash(t,o){const u=o?7:0,g=2*u+1;if(this.nextRow+g>this.height)return A.w("LineAtlas out of space"),null;let m=0;for(let B=0;B<t.length;B++)m+=t[B];if(m!==0){const B=this.width/m,E=this.getDashRanges(t,this.width,B);o?this.addRoundDash(E,B,u):this.addRegularDash(E)}const x={y:(this.nextRow+u+.5)/this.height,height:2*u/this.height,width:m};return this.nextRow+=g,this.dirty=!0,x}bind(t){const o=t.gl;this.texture?(o.bindTexture(o.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,o.texSubImage2D(o.TEXTURE_2D,0,0,0,this.width,this.height,o.ALPHA,o.UNSIGNED_BYTE,this.data))):(this.texture=o.createTexture(),o.bindTexture(o.TEXTURE_2D,this.texture),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.REPEAT),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.REPEAT),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.LINEAR),o.texImage2D(o.TEXTURE_2D,0,o.ALPHA,this.width,this.height,0,o.ALPHA,o.UNSIGNED_BYTE,this.data))}}const _t="maplibre_preloaded_worker_pool";class Ct{constructor(){this.active={}}acquire(t){if(!this.workers)for(this.workers=[];this.workers.length<Ct.workerCount;)this.workers.push(new Worker(A.a.WORKER_URL));return this.active[t]=!0,this.workers.slice()}release(t){delete this.active[t],this.numActive()===0&&(this.workers.forEach(o=>{o.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[_t]}numActive(){return Object.keys(this.active).length}}const Ot=Math.floor(T.hardwareConcurrency/2);let Rt,Zt;function Jt(){return Rt||(Rt=new Ct),Rt}Ct.workerCount=A.C(globalThis)?Math.max(Math.min(Ot,3),1):1;class xe{constructor(t,o){this.workerPool=t,this.actors=[],this.currentActor=0,this.id=o;const u=this.workerPool.acquire(o);for(let g=0;g<u.length;g++){const m=new A.F(u[g],o);m.name=`Worker ${g}`,this.actors.push(m)}if(!this.actors.length)throw new Error("No actors found")}broadcast(t,o){const u=[];for(const g of this.actors)u.push(g.sendAsync({type:t,data:o}));return Promise.all(u)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(t=!0){this.actors.forEach(o=>{o.remove()}),this.actors=[],t&&this.workerPool.release(this.id)}registerMessageHandler(t,o){for(const u of this.actors)u.registerMessageHandler(t,o)}}function we(){return Zt||(Zt=new xe(Jt(),A.G),Zt.registerMessageHandler("GR",(f,t,o)=>A.m(t,o))),Zt}function Te(f,t){const o=A.H();return A.J(o,o,[1,1,0]),A.K(o,o,[.5*f.width,.5*f.height,1]),A.L(o,o,f.calculatePosMatrix(t.toUnwrapped()))}function Ee(f,t,o,u,g,m){const x=function(D,j,G){if(D)for(const H of D){const W=j[H];if(W&&W.source===G&&W.type==="fill-extrusion")return!0}else for(const H in j){const W=j[H];if(W.source===G&&W.type==="fill-extrusion")return!0}return!1}(g&&g.layers,t,f.id),B=m.maxPitchScaleFactor(),E=f.tilesIn(u,B,x);E.sort(Ve);const k=[];for(const D of E)k.push({wrappedTileID:D.tileID.wrapped().key,queryResults:D.tile.queryRenderedFeatures(t,o,f._state,D.queryGeometry,D.cameraQueryGeometry,D.scale,g,m,B,Te(f.transform,D.tileID))});const N=function(D){const j={},G={};for(const H of D){const W=H.queryResults,nt=H.wrappedTileID,ot=G[nt]=G[nt]||{};for(const ct in W){const At=W[ct],gt=ot[ct]=ot[ct]||{},Tt=j[ct]=j[ct]||[];for(const St of At)gt[St.featureIndex]||(gt[St.featureIndex]=!0,Tt.push(St))}}return j}(k);for(const D in N)N[D].forEach(j=>{const G=j.feature,H=f.getFeatureState(G.layer["source-layer"],G.id);G.source=G.layer.source,G.layer["source-layer"]&&(G.sourceLayer=G.layer["source-layer"]),G.state=H});return N}function Ve(f,t){const o=f.tileID,u=t.tileID;return o.overscaledZ-u.overscaledZ||o.canonical.y-u.canonical.y||o.wrap-u.wrap||o.canonical.x-u.canonical.x}function ie(f,t,o){return A._(this,void 0,void 0,function*(){let u=f;if(f.url?u=(yield A.h(t.transformRequest(f.url,"Source"),o)).data:yield T.frameAsync(o),!u)return null;const g=A.M(A.e(u,f),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in u&&u.vector_layers&&(g.vectorLayerIds=u.vector_layers.map(m=>m.id)),g})}class rt{constructor(t,o){t&&(o?this.setSouthWest(t).setNorthEast(o):Array.isArray(t)&&(t.length===4?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1])))}setNorthEast(t){return this._ne=t instanceof A.N?new A.N(t.lng,t.lat):A.N.convert(t),this}setSouthWest(t){return this._sw=t instanceof A.N?new A.N(t.lng,t.lat):A.N.convert(t),this}extend(t){const o=this._sw,u=this._ne;let g,m;if(t instanceof A.N)g=t,m=t;else{if(!(t instanceof rt))return Array.isArray(t)?t.length===4||t.every(Array.isArray)?this.extend(rt.convert(t)):this.extend(A.N.convert(t)):t&&("lng"in t||"lon"in t)&&"lat"in t?this.extend(A.N.convert(t)):this;if(g=t._sw,m=t._ne,!g||!m)return this}return o||u?(o.lng=Math.min(g.lng,o.lng),o.lat=Math.min(g.lat,o.lat),u.lng=Math.max(m.lng,u.lng),u.lat=Math.max(m.lat,u.lat)):(this._sw=new A.N(g.lng,g.lat),this._ne=new A.N(m.lng,m.lat)),this}getCenter(){return new A.N((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new A.N(this.getWest(),this.getNorth())}getSouthEast(){return new A.N(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(t){const{lng:o,lat:u}=A.N.convert(t);let g=this._sw.lng<=o&&o<=this._ne.lng;return this._sw.lng>this._ne.lng&&(g=this._sw.lng>=o&&o>=this._ne.lng),this._sw.lat<=u&&u<=this._ne.lat&&g}static convert(t){return t instanceof rt?t:t&&new rt(t)}static fromLngLat(t,o=0){const u=360*o/40075017,g=u/Math.cos(Math.PI/180*t.lat);return new rt(new A.N(t.lng-g,t.lat-u),new A.N(t.lng+g,t.lat+u))}adjustAntiMeridian(){const t=new A.N(this._sw.lng,this._sw.lat),o=new A.N(this._ne.lng,this._ne.lat);return new rt(t,t.lng>o.lng?new A.N(o.lng+360,o.lat):o)}}class dr{constructor(t,o,u){this.bounds=rt.convert(this.validateBounds(t)),this.minzoom=o||0,this.maxzoom=u||24}validateBounds(t){return Array.isArray(t)&&t.length===4?[Math.max(-180,t[0]),Math.max(-90,t[1]),Math.min(180,t[2]),Math.min(90,t[3])]:[-180,-90,180,90]}contains(t){const o=Math.pow(2,t.z),u=Math.floor(A.O(this.bounds.getWest())*o),g=Math.floor(A.Q(this.bounds.getNorth())*o),m=Math.ceil(A.O(this.bounds.getEast())*o),x=Math.ceil(A.Q(this.bounds.getSouth())*o);return t.x>=u&&t.x<m&&t.y>=g&&t.y<x}}class je extends A.E{constructor(t,o,u,g){if(super(),this.id=t,this.dispatcher=u,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,A.e(this,A.M(o,["url","scheme","tileSize","promoteId"])),this._options=A.e({type:"vector"},o),this._collectResourceTiming=o.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(g)}load(){return A._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new A.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const t=yield ie(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),t&&(A.e(this,t),t.bounds&&(this.tileBounds=new dr(t.bounds,this.minzoom,this.maxzoom)),this.fire(new A.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new A.k("data",{dataType:"source",sourceDataType:"content"})))}catch(t){this._tileJSONRequest=null,this.fire(new A.j(t))}})}loaded(){return this._loaded}hasTile(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)}onAdd(t){this.map=t,this.load()}setSourceProperty(t){this._tileJSONRequest&&this._tileJSONRequest.abort(),t(),this.load()}setTiles(t){return this.setSourceProperty(()=>{this._options.tiles=t}),this}setUrl(t){return this.setSourceProperty(()=>{this.url=t,this._options.url=t}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return A.e({},this._options)}loadTile(t){return A._(this,void 0,void 0,function*(){const o=t.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),u={request:this.map._requestManager.transformRequest(o,"Tile"),uid:t.uid,tileID:t.tileID,zoom:t.tileID.overscaledZ,tileSize:this.tileSize*t.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};u.request.collectResourceTiming=this._collectResourceTiming;let g="RT";if(t.actor&&t.state!=="expired"){if(t.state==="loading")return new Promise((m,x)=>{t.reloadPromise={resolve:m,reject:x}})}else t.actor=this.dispatcher.getActor(),g="LT";t.abortController=new AbortController;try{const m=yield t.actor.sendAsync({type:g,data:u},t.abortController);if(delete t.abortController,t.aborted)return;this._afterTileLoadWorkerResponse(t,m)}catch(m){if(delete t.abortController,t.aborted)return;if(m&&m.status!==404)throw m;this._afterTileLoadWorkerResponse(t,null)}})}_afterTileLoadWorkerResponse(t,o){if(o&&o.resourceTiming&&(t.resourceTiming=o.resourceTiming),o&&this.map._refreshExpiredTiles&&t.setExpiryData(o),t.loadVectorData(o,this.map.painter),t.reloadPromise){const u=t.reloadPromise;t.reloadPromise=null,this.loadTile(t).then(u.resolve).catch(u.reject)}}abortTile(t){return A._(this,void 0,void 0,function*(){t.abortController&&(t.abortController.abort(),delete t.abortController),t.actor&&(yield t.actor.sendAsync({type:"AT",data:{uid:t.uid,type:this.type,source:this.id}}))})}unloadTile(t){return A._(this,void 0,void 0,function*(){t.unloadVectorData(),t.actor&&(yield t.actor.sendAsync({type:"RMT",data:{uid:t.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class se extends A.E{constructor(t,o,u,g){super(),this.id=t,this.dispatcher=u,this.setEventedParent(g),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=A.e({type:"raster"},o),A.e(this,A.M(o,["url","scheme","tileSize"]))}load(){return A._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new A.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const t=yield ie(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,t&&(A.e(this,t),t.bounds&&(this.tileBounds=new dr(t.bounds,this.minzoom,this.maxzoom)),this.fire(new A.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new A.k("data",{dataType:"source",sourceDataType:"content"})))}catch(t){this._tileJSONRequest=null,this.fire(new A.j(t))}})}loaded(){return this._loaded}onAdd(t){this.map=t,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(t){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),t(),this.load()}setTiles(t){return this.setSourceProperty(()=>{this._options.tiles=t}),this}setUrl(t){return this.setSourceProperty(()=>{this.url=t,this._options.url=t}),this}serialize(){return A.e({},this._options)}hasTile(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)}loadTile(t){return A._(this,void 0,void 0,function*(){const o=t.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);t.abortController=new AbortController;try{const u=yield ht.getImage(this.map._requestManager.transformRequest(o,"Tile"),t.abortController,this.map._refreshExpiredTiles);if(delete t.abortController,t.aborted)return void(t.state="unloaded");if(u&&u.data){this.map._refreshExpiredTiles&&u.cacheControl&&u.expires&&t.setExpiryData({cacheControl:u.cacheControl,expires:u.expires});const g=this.map.painter.context,m=g.gl,x=u.data;t.texture=this.map.painter.getTileTexture(x.width),t.texture?t.texture.update(x,{useMipmap:!0}):(t.texture=new st(g,x,m.RGBA,{useMipmap:!0}),t.texture.bind(m.LINEAR,m.CLAMP_TO_EDGE,m.LINEAR_MIPMAP_NEAREST)),t.state="loaded"}}catch(u){if(delete t.abortController,t.aborted)t.state="unloaded";else if(u)throw t.state="errored",u}})}abortTile(t){return A._(this,void 0,void 0,function*(){t.abortController&&(t.abortController.abort(),delete t.abortController)})}unloadTile(t){return A._(this,void 0,void 0,function*(){t.texture&&this.map.painter.saveTileTexture(t.texture)})}hasTransition(){return!1}}class fe extends se{constructor(t,o,u,g){super(t,o,u,g),this.type="raster-dem",this.maxzoom=22,this._options=A.e({type:"raster-dem"},o),this.encoding=o.encoding||"mapbox",this.redFactor=o.redFactor,this.greenFactor=o.greenFactor,this.blueFactor=o.blueFactor,this.baseShift=o.baseShift}loadTile(t){return A._(this,void 0,void 0,function*(){const o=t.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),u=this.map._requestManager.transformRequest(o,"Tile");t.neighboringTiles=this._getNeighboringTiles(t.tileID),t.abortController=new AbortController;try{const g=yield ht.getImage(u,t.abortController,this.map._refreshExpiredTiles);if(delete t.abortController,t.aborted)return void(t.state="unloaded");if(g&&g.data){const m=g.data;this.map._refreshExpiredTiles&&g.cacheControl&&g.expires&&t.setExpiryData({cacheControl:g.cacheControl,expires:g.expires});const x=A.b(m)&&A.U()?m:yield this.readImageNow(m),B={type:this.type,uid:t.uid,source:this.id,rawImageData:x,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!t.actor||t.state==="expired"){t.actor=this.dispatcher.getActor();const E=yield t.actor.sendAsync({type:"LDT",data:B});t.dem=E,t.needsHillshadePrepare=!0,t.needsTerrainPrepare=!0,t.state="loaded"}}}catch(g){if(delete t.abortController,t.aborted)t.state="unloaded";else if(g)throw t.state="errored",g}})}readImageNow(t){return A._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&A.V()){const o=t.width+2,u=t.height+2;try{return new A.R({width:o,height:u},yield A.W(t,-1,-1,o,u))}catch{}}return T.getImageData(t,1)})}_getNeighboringTiles(t){const o=t.canonical,u=Math.pow(2,o.z),g=(o.x-1+u)%u,m=o.x===0?t.wrap-1:t.wrap,x=(o.x+1+u)%u,B=o.x+1===u?t.wrap+1:t.wrap,E={};return E[new A.S(t.overscaledZ,m,o.z,g,o.y).key]={backfilled:!1},E[new A.S(t.overscaledZ,B,o.z,x,o.y).key]={backfilled:!1},o.y>0&&(E[new A.S(t.overscaledZ,m,o.z,g,o.y-1).key]={backfilled:!1},E[new A.S(t.overscaledZ,t.wrap,o.z,o.x,o.y-1).key]={backfilled:!1},E[new A.S(t.overscaledZ,B,o.z,x,o.y-1).key]={backfilled:!1}),o.y+1<u&&(E[new A.S(t.overscaledZ,m,o.z,g,o.y+1).key]={backfilled:!1},E[new A.S(t.overscaledZ,t.wrap,o.z,o.x,o.y+1).key]={backfilled:!1},E[new A.S(t.overscaledZ,B,o.z,x,o.y+1).key]={backfilled:!1}),E}unloadTile(t){return A._(this,void 0,void 0,function*(){t.demTexture&&this.map.painter.saveTileTexture(t.demTexture),t.fbo&&(t.fbo.destroy(),delete t.fbo),t.dem&&delete t.dem,delete t.neighboringTiles,t.state="unloaded",t.actor&&(yield t.actor.sendAsync({type:"RDT",data:{type:this.type,uid:t.uid,source:this.id}}))})}}class Ue extends A.E{constructor(t,o,u,g){super(),this.id=t,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=u.getActor(),this.setEventedParent(g),this._data=o.data,this._options=A.e({},o),this._collectResourceTiming=o.collectResourceTiming,o.maxzoom!==void 0&&(this.maxzoom=o.maxzoom),o.type&&(this.type=o.type),o.attribution&&(this.attribution=o.attribution),this.promoteId=o.promoteId;const m=A.X/this.tileSize;o.clusterMaxZoom!==void 0&&this.maxzoom<=o.clusterMaxZoom&&A.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${o.clusterMaxZoom}".`),this.workerOptions=A.e({source:this.id,cluster:o.cluster||!1,geojsonVtOptions:{buffer:(o.buffer!==void 0?o.buffer:128)*m,tolerance:(o.tolerance!==void 0?o.tolerance:.375)*m,extent:A.X,maxZoom:this.maxzoom,lineMetrics:o.lineMetrics||!1,generateId:o.generateId||!1},superclusterOptions:{maxZoom:o.clusterMaxZoom!==void 0?o.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,o.clusterMinPoints||2),extent:A.X,radius:(o.clusterRadius||50)*m,log:!1,generateId:o.generateId||!1},clusterProperties:o.clusterProperties,filter:o.filter},o.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}load(){return A._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(t){this.map=t,this.load()}setData(t){return this._data=t,this._updateWorkerData(),this}updateData(t){return this._updateWorkerData(t),this}getData(){return A._(this,void 0,void 0,function*(){const t=A.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:t})})}setClusterOptions(t){return this.workerOptions.cluster=t.cluster,t&&(t.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=t.clusterRadius),t.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=t.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(t){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:t,source:this.id}})}getClusterChildren(t){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:t,source:this.id}})}getClusterLeaves(t,o,u){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:t,limit:o,offset:u}})}_updateWorkerData(t){return A._(this,void 0,void 0,function*(){const o=A.e({type:this.type},this.workerOptions);t?o.dataDiff=t:typeof this._data=="string"?(o.request=this.map._requestManager.transformRequest(T.resolveURL(this._data),"Source"),o.request.collectResourceTiming=this._collectResourceTiming):o.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new A.k("dataloading",{dataType:"source"}));try{const u=yield this.actor.sendAsync({type:"LD",data:o});if(this._pendingLoads--,this._removed||u.abandoned)return void this.fire(new A.k("dataabort",{dataType:"source"}));let g=null;u.resourceTiming&&u.resourceTiming[this.id]&&(g=u.resourceTiming[this.id].slice(0));const m={dataType:"source"};this._collectResourceTiming&&g&&g.length>0&&A.e(m,{resourceTiming:g}),this.fire(new A.k("data",Object.assign(Object.assign({},m),{sourceDataType:"metadata"}))),this.fire(new A.k("data",Object.assign(Object.assign({},m),{sourceDataType:"content"})))}catch(u){if(this._pendingLoads--,this._removed)return void this.fire(new A.k("dataabort",{dataType:"source"}));this.fire(new A.j(u))}})}loaded(){return this._pendingLoads===0}loadTile(t){return A._(this,void 0,void 0,function*(){const o=t.actor?"RT":"LT";t.actor=this.actor;const u={type:this.type,uid:t.uid,tileID:t.tileID,zoom:t.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};t.abortController=new AbortController;const g=yield this.actor.sendAsync({type:o,data:u},t.abortController);delete t.abortController,t.unloadVectorData(),t.aborted||t.loadVectorData(g,this.map.painter,o==="RT")})}abortTile(t){return A._(this,void 0,void 0,function*(){t.abortController&&(t.abortController.abort(),delete t.abortController),t.aborted=!0})}unloadTile(t){return A._(this,void 0,void 0,function*(){t.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:t.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return A.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var Se=A.Y([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Re extends A.E{constructor(t,o,u,g){super(),this.id=t,this.dispatcher=u,this.coordinates=o.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(g),this.options=o}load(t){return A._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new A.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const o=yield ht.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,o&&o.data&&(this.image=o.data,t&&(this.coordinates=t),this._finishLoading())}catch(o){this._request=null,this._loaded=!0,this.fire(new A.j(o))}})}loaded(){return this._loaded}updateImage(t){return t.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=t.url,this.load(t.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new A.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(t){this.map=t,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(t){this.coordinates=t;const o=t.map(A.Z.fromLngLat);this.tileID=function(g){let m=1/0,x=1/0,B=-1/0,E=-1/0;for(const j of g)m=Math.min(m,j.x),x=Math.min(x,j.y),B=Math.max(B,j.x),E=Math.max(E,j.y);const k=Math.max(B-m,E-x),N=Math.max(0,Math.floor(-Math.log(k)/Math.LN2)),D=Math.pow(2,N);return new A.a1(N,Math.floor((m+B)/2*D),Math.floor((x+E)/2*D))}(o),this.minzoom=this.maxzoom=this.tileID.z;const u=o.map(g=>this.tileID.getTilePoint(g)._round());return this._boundsArray=new A.$,this._boundsArray.emplaceBack(u[0].x,u[0].y,0,0),this._boundsArray.emplaceBack(u[1].x,u[1].y,A.X,0),this._boundsArray.emplaceBack(u[3].x,u[3].y,0,A.X),this._boundsArray.emplaceBack(u[2].x,u[2].y,A.X,A.X),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new A.k("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const t=this.map.painter.context,o=t.gl;this.boundsBuffer||(this.boundsBuffer=t.createVertexBuffer(this._boundsArray,Se.members)),this.boundsSegments||(this.boundsSegments=A.a0.simpleSegment(0,0,4,2)),this.texture||(this.texture=new st(t,this.image,o.RGBA),this.texture.bind(o.LINEAR,o.CLAMP_TO_EDGE));let u=!1;for(const g in this.tiles){const m=this.tiles[g];m.state!=="loaded"&&(m.state="loaded",m.texture=this.texture,u=!0)}u&&this.fire(new A.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(t){return A._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(t.tileID.canonical)?(this.tiles[String(t.tileID.wrap)]=t,t.buckets={}):t.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class We extends Re{constructor(t,o,u,g){super(t,o,u,g),this.roundZoom=!0,this.type="video",this.options=o}load(){return A._(this,void 0,void 0,function*(){this._loaded=!1;const t=this.options;this.urls=[];for(const o of t.urls)this.urls.push(this.map._requestManager.transformRequest(o,"Source").url);try{const o=yield A.a3(this.urls);if(this._loaded=!0,!o)return;this.video=o,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(o){this.fire(new A.j(o))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(t){if(this.video){const o=this.video.seekable;t<o.start(0)||t>o.end(0)?this.fire(new A.j(new A.a2(`sources.${this.id}`,null,`Playback for this video can be set only between the ${o.start(0)} and ${o.end(0)}-second mark.`))):this.video.currentTime=t}}getVideo(){return this.video}onAdd(t){this.map||(this.map=t,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const t=this.map.painter.context,o=t.gl;this.boundsBuffer||(this.boundsBuffer=t.createVertexBuffer(this._boundsArray,Se.members)),this.boundsSegments||(this.boundsSegments=A.a0.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(o.LINEAR,o.CLAMP_TO_EDGE),o.texSubImage2D(o.TEXTURE_2D,0,0,0,o.RGBA,o.UNSIGNED_BYTE,this.video)):(this.texture=new st(t,this.video,o.RGBA),this.texture.bind(o.LINEAR,o.CLAMP_TO_EDGE));let u=!1;for(const g in this.tiles){const m=this.tiles[g];m.state!=="loaded"&&(m.state="loaded",m.texture=this.texture,u=!0)}u&&this.fire(new A.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class ar extends Re{constructor(t,o,u,g){super(t,o,u,g),o.coordinates?Array.isArray(o.coordinates)&&o.coordinates.length===4&&!o.coordinates.some(m=>!Array.isArray(m)||m.length!==2||m.some(x=>typeof x!="number"))||this.fire(new A.j(new A.a2(`sources.${t}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new A.j(new A.a2(`sources.${t}`,null,'missing required property "coordinates"'))),o.animate&&typeof o.animate!="boolean"&&this.fire(new A.j(new A.a2(`sources.${t}`,null,'optional "animate" property must be a boolean value'))),o.canvas?typeof o.canvas=="string"||o.canvas instanceof HTMLCanvasElement||this.fire(new A.j(new A.a2(`sources.${t}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new A.j(new A.a2(`sources.${t}`,null,'missing required property "canvas"'))),this.options=o,this.animate=o.animate===void 0||o.animate}load(){return A._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new A.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(t){this.map=t,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let t=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,t=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,t=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const o=this.map.painter.context,u=o.gl;this.boundsBuffer||(this.boundsBuffer=o.createVertexBuffer(this._boundsArray,Se.members)),this.boundsSegments||(this.boundsSegments=A.a0.simpleSegment(0,0,4,2)),this.texture?(t||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new st(o,this.canvas,u.RGBA,{premultiply:!0});let g=!1;for(const m in this.tiles){const x=this.tiles[m];x.state!=="loaded"&&(x.state="loaded",x.texture=this.texture,g=!0)}g&&this.fire(new A.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const t of[this.canvas.width,this.canvas.height])if(isNaN(t)||t<=0)return!0;return!1}}const wr={},Fr=f=>{switch(f){case"geojson":return Ue;case"image":return Re;case"raster":return se;case"raster-dem":return fe;case"vector":return je;case"video":return We;case"canvas":return ar}return wr[f]},oe="RTLPluginLoaded";class er extends A.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=we()}_syncState(t){return this.status=t,this.dispatcher.broadcast("SRPS",{pluginStatus:t,pluginURL:this.url}).catch(o=>{throw this.status="error",o})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(t){return A._(this,arguments,void 0,function*(o,u=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=T.resolveURL(o),!this.url)throw new Error(`requested url ${o} is invalid`);if(this.status==="unavailable"){if(!u)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return A._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new A.k(oe))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let or=null;function Le(){return or||(or=new er),or}class Zr{constructor(t,o){this.timeAdded=0,this.fadeEndTime=0,this.tileID=t,this.uid=A.a4(),this.uses=0,this.tileSize=o,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(t){const o=t+this.timeAdded;o<this.fadeEndTime||(this.fadeEndTime=o)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(t){this.demTexture&&t.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(t,o,u){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",t){t.featureIndex&&(this.latestFeatureIndex=t.featureIndex,t.rawTileData?(this.latestRawTileData=t.rawTileData,this.latestFeatureIndex.rawTileData=t.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=t.collisionBoxArray,this.buckets=function(g,m){const x={};if(!m)return x;for(const B of g){const E=B.layerIds.map(k=>m.getLayer(k)).filter(Boolean);if(E.length!==0){B.layers=E,B.stateDependentLayerIds&&(B.stateDependentLayers=B.stateDependentLayerIds.map(k=>E.filter(N=>N.id===k)[0]));for(const k of E)x[k.id]=B}}return x}(t.buckets,o.style),this.hasSymbolBuckets=!1;for(const g in this.buckets){const m=this.buckets[g];if(m instanceof A.a6){if(this.hasSymbolBuckets=!0,!u)break;m.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const g in this.buckets){const m=this.buckets[g];if(m instanceof A.a6&&m.hasRTLText){this.hasRTLText=!0,Le().lazyLoad();break}}this.queryPadding=0;for(const g in this.buckets){const m=this.buckets[g];this.queryPadding=Math.max(this.queryPadding,o.style.getLayer(g).queryRadius(m))}t.imageAtlas&&(this.imageAtlas=t.imageAtlas),t.glyphAtlasImage&&(this.glyphAtlasImage=t.glyphAtlasImage)}else this.collisionBoxArray=new A.a5}unloadVectorData(){for(const t in this.buckets)this.buckets[t].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(t){return this.buckets[t.id]}upload(t){for(const u in this.buckets){const g=this.buckets[u];g.uploadPending()&&g.upload(t)}const o=t.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new st(t,this.imageAtlas.image,o.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new st(t,this.glyphAtlasImage,o.ALPHA),this.glyphAtlasImage=null)}prepare(t){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(t,this.imageAtlasTexture)}queryRenderedFeatures(t,o,u,g,m,x,B,E,k,N){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:g,cameraQueryGeometry:m,scale:x,tileSize:this.tileSize,pixelPosMatrix:N,transform:E,params:B,queryPadding:this.queryPadding*k},t,o,u):{}}querySourceFeatures(t,o){const u=this.latestFeatureIndex;if(!u||!u.rawTileData)return;const g=u.loadVTLayers(),m=o&&o.sourceLayer?o.sourceLayer:"",x=g._geojsonTileLayer||g[m];if(!x)return;const B=A.a7(o&&o.filter),{z:E,x:k,y:N}=this.tileID.canonical,D={z:E,x:k,y:N};for(let j=0;j<x.length;j++){const G=x.feature(j);if(B.needGeometry){const nt=A.a8(G,!0);if(!B.filter(new A.z(this.tileID.overscaledZ),nt,this.tileID.canonical))continue}else if(!B.filter(new A.z(this.tileID.overscaledZ),G))continue;const H=u.getId(G,m),W=new A.a9(G,E,k,N,H);W.tile=D,t.push(W)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(t){const o=this.expirationTime;if(t.cacheControl){const u=A.aa(t.cacheControl);u["max-age"]&&(this.expirationTime=Date.now()+1e3*u["max-age"])}else t.expires&&(this.expirationTime=new Date(t.expires).getTime());if(this.expirationTime){const u=Date.now();let g=!1;if(this.expirationTime>u)g=!1;else if(o)if(this.expirationTime<o)g=!0;else{const m=this.expirationTime-o;m?this.expirationTime=u+Math.max(m,3e4):g=!0}else g=!0;g?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(t,o){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(t).length===0)return;const u=this.latestFeatureIndex.loadVTLayers();for(const g in this.buckets){if(!o.style.hasLayer(g))continue;const m=this.buckets[g],x=m.layers[0].sourceLayer||"_geojsonTileLayer",B=u[x],E=t[x];if(!B||!E||Object.keys(E).length===0)continue;m.update(E,B,this.imageAtlas&&this.imageAtlas.patternPositions||{});const k=o&&o.style&&o.style.getLayer(g);k&&(this.queryPadding=Math.max(this.queryPadding,k.queryRadius(m)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<T.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(t){this.symbolFadeHoldUntil=T.now()+t}setDependencies(t,o){const u={};for(const g of o)u[g]=!0;this.dependencies[t]=u}hasDependency(t,o){for(const u of t){const g=this.dependencies[u];if(g){for(const m of o)if(g[m])return!0}}return!1}}class ce{constructor(t,o){this.max=t,this.onRemove=o,this.reset()}reset(){for(const t in this.data)for(const o of this.data[t])o.timeout&&clearTimeout(o.timeout),this.onRemove(o.value);return this.data={},this.order=[],this}add(t,o,u){const g=t.wrapped().key;this.data[g]===void 0&&(this.data[g]=[]);const m={value:o,timeout:void 0};if(u!==void 0&&(m.timeout=setTimeout(()=>{this.remove(t,m)},u)),this.data[g].push(m),this.order.push(g),this.order.length>this.max){const x=this._getAndRemoveByKey(this.order[0]);x&&this.onRemove(x)}return this}has(t){return t.wrapped().key in this.data}getAndRemove(t){return this.has(t)?this._getAndRemoveByKey(t.wrapped().key):null}_getAndRemoveByKey(t){const o=this.data[t].shift();return o.timeout&&clearTimeout(o.timeout),this.data[t].length===0&&delete this.data[t],this.order.splice(this.order.indexOf(t),1),o.value}getByKey(t){const o=this.data[t];return o?o[0].value:null}get(t){return this.has(t)?this.data[t.wrapped().key][0].value:null}remove(t,o){if(!this.has(t))return this;const u=t.wrapped().key,g=o===void 0?0:this.data[u].indexOf(o),m=this.data[u][g];return this.data[u].splice(g,1),m.timeout&&clearTimeout(m.timeout),this.data[u].length===0&&delete this.data[u],this.onRemove(m.value),this.order.splice(this.order.indexOf(u),1),this}setMaxSize(t){for(this.max=t;this.order.length>this.max;){const o=this._getAndRemoveByKey(this.order[0]);o&&this.onRemove(o)}return this}filter(t){const o=[];for(const u in this.data)for(const g of this.data[u])t(g.value)||o.push(g);for(const u of o)this.remove(u.value.tileID,u)}}class ir{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(t,o,u){const g=String(o);if(this.stateChanges[t]=this.stateChanges[t]||{},this.stateChanges[t][g]=this.stateChanges[t][g]||{},A.e(this.stateChanges[t][g],u),this.deletedStates[t]===null){this.deletedStates[t]={};for(const m in this.state[t])m!==g&&(this.deletedStates[t][m]=null)}else if(this.deletedStates[t]&&this.deletedStates[t][g]===null){this.deletedStates[t][g]={};for(const m in this.state[t][g])u[m]||(this.deletedStates[t][g][m]=null)}else for(const m in u)this.deletedStates[t]&&this.deletedStates[t][g]&&this.deletedStates[t][g][m]===null&&delete this.deletedStates[t][g][m]}removeFeatureState(t,o,u){if(this.deletedStates[t]===null)return;const g=String(o);if(this.deletedStates[t]=this.deletedStates[t]||{},u&&o!==void 0)this.deletedStates[t][g]!==null&&(this.deletedStates[t][g]=this.deletedStates[t][g]||{},this.deletedStates[t][g][u]=null);else if(o!==void 0)if(this.stateChanges[t]&&this.stateChanges[t][g])for(u in this.deletedStates[t][g]={},this.stateChanges[t][g])this.deletedStates[t][g][u]=null;else this.deletedStates[t][g]=null;else this.deletedStates[t]=null}getState(t,o){const u=String(o),g=A.e({},(this.state[t]||{})[u],(this.stateChanges[t]||{})[u]);if(this.deletedStates[t]===null)return{};if(this.deletedStates[t]){const m=this.deletedStates[t][o];if(m===null)return{};for(const x in m)delete g[x]}return g}initializeTileState(t,o){t.setFeatureState(this.state,o)}coalesceChanges(t,o){const u={};for(const g in this.stateChanges){this.state[g]=this.state[g]||{};const m={};for(const x in this.stateChanges[g])this.state[g][x]||(this.state[g][x]={}),A.e(this.state[g][x],this.stateChanges[g][x]),m[x]=this.state[g][x];u[g]=m}for(const g in this.deletedStates){this.state[g]=this.state[g]||{};const m={};if(this.deletedStates[g]===null)for(const x in this.state[g])m[x]={},this.state[g][x]={};else for(const x in this.deletedStates[g]){if(this.deletedStates[g][x]===null)this.state[g][x]={};else for(const B of Object.keys(this.deletedStates[g][x]))delete this.state[g][x][B];m[x]=this.state[g][x]}u[g]=u[g]||{},A.e(u[g],m)}if(this.stateChanges={},this.deletedStates={},Object.keys(u).length!==0)for(const g in t)t[g].setFeatureState(u,o)}}class Pe extends A.E{constructor(t,o,u){super(),this.id=t,this.dispatcher=u,this.on("data",g=>this._dataHandler(g)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((g,m,x,B)=>{const E=new(Fr(m.type))(g,m,x,B);if(E.id!==g)throw new Error(`Expected Source id to be ${g} instead of ${E.id}`);return E})(t,o,u,this),this._tiles={},this._cache=new ce(0,g=>this._unloadTile(g)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new ir,this._didEmitContent=!1,this._updated=!1}onAdd(t){this.map=t,this._maxTileCacheSize=t?t._maxTileCacheSize:null,this._maxTileCacheZoomLevels=t?t._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(t)}onRemove(t){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(t)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const t in this._tiles){const o=this._tiles[t];if(o.state!=="loaded"&&o.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const t=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,t&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(t,o,u){return A._(this,void 0,void 0,function*(){try{yield this._source.loadTile(t),this._tileLoaded(t,o,u)}catch(g){t.state="errored",g.status!==404?this._source.fire(new A.j(g,{tile:t})):this.update(this.transform,this.terrain)}})}_unloadTile(t){this._source.unloadTile&&this._source.unloadTile(t)}_abortTile(t){this._source.abortTile&&this._source.abortTile(t),this._source.fire(new A.k("dataabort",{tile:t,coord:t.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(t){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const o in this._tiles){const u=this._tiles[o];u.upload(t),u.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(t=>t.tileID).sort(_r).map(t=>t.key)}getRenderableIds(t){const o=[];for(const u in this._tiles)this._isIdRenderable(u,t)&&o.push(this._tiles[u]);return t?o.sort((u,g)=>{const m=u.tileID,x=g.tileID,B=new A.P(m.canonical.x,m.canonical.y)._rotate(this.transform.angle),E=new A.P(x.canonical.x,x.canonical.y)._rotate(this.transform.angle);return m.overscaledZ-x.overscaledZ||E.y-B.y||E.x-B.x}).map(u=>u.tileID.key):o.map(u=>u.tileID).sort(_r).map(u=>u.key)}hasRenderableParent(t){const o=this.findLoadedParent(t,0);return!!o&&this._isIdRenderable(o.tileID.key)}_isIdRenderable(t,o){return this._tiles[t]&&this._tiles[t].hasData()&&!this._coveredTiles[t]&&(o||!this._tiles[t].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const t in this._tiles)this._tiles[t].state!=="errored"&&this._reloadTile(t,"reloading")}}_reloadTile(t,o){return A._(this,void 0,void 0,function*(){const u=this._tiles[t];u&&(u.state!=="loading"&&(u.state=o),yield this._loadTile(u,t,o))})}_tileLoaded(t,o,u){t.timeAdded=T.now(),u==="expired"&&(t.refreshedUponExpiration=!0),this._setTileReloadTimer(o,t),this.getSource().type==="raster-dem"&&t.dem&&this._backfillDEM(t),this._state.initializeTileState(t,this.map?this.map.painter:null),t.aborted||this._source.fire(new A.k("data",{dataType:"source",tile:t,coord:t.tileID}))}_backfillDEM(t){const o=this.getRenderableIds();for(let g=0;g<o.length;g++){const m=o[g];if(t.neighboringTiles&&t.neighboringTiles[m]){const x=this.getTileByID(m);u(t,x),u(x,t)}}function u(g,m){g.needsHillshadePrepare=!0,g.needsTerrainPrepare=!0;let x=m.tileID.canonical.x-g.tileID.canonical.x;const B=m.tileID.canonical.y-g.tileID.canonical.y,E=Math.pow(2,g.tileID.canonical.z),k=m.tileID.key;x===0&&B===0||Math.abs(B)>1||(Math.abs(x)>1&&(Math.abs(x+E)===1?x+=E:Math.abs(x-E)===1&&(x-=E)),m.dem&&g.dem&&(g.dem.backfillBorder(m.dem,x,B),g.neighboringTiles&&g.neighboringTiles[k]&&(g.neighboringTiles[k].backfilled=!0)))}}getTile(t){return this.getTileByID(t.key)}getTileByID(t){return this._tiles[t]}_retainLoadedChildren(t,o,u,g){for(const m in this._tiles){let x=this._tiles[m];if(g[m]||!x.hasData()||x.tileID.overscaledZ<=o||x.tileID.overscaledZ>u)continue;let B=x.tileID;for(;x&&x.tileID.overscaledZ>o+1;){const k=x.tileID.scaledTo(x.tileID.overscaledZ-1);x=this._tiles[k.key],x&&x.hasData()&&(B=k)}let E=B;for(;E.overscaledZ>o;)if(E=E.scaledTo(E.overscaledZ-1),t[E.key]){g[B.key]=B;break}}}findLoadedParent(t,o){if(t.key in this._loadedParentTiles){const u=this._loadedParentTiles[t.key];return u&&u.tileID.overscaledZ>=o?u:null}for(let u=t.overscaledZ-1;u>=o;u--){const g=t.scaledTo(u),m=this._getLoadedTile(g);if(m)return m}}findLoadedSibling(t){return this._getLoadedTile(t)}_getLoadedTile(t){const o=this._tiles[t.key];return o&&o.hasData()?o:this._cache.getByKey(t.wrapped().key)}updateCacheSize(t){const o=Math.ceil(t.width/this._source.tileSize)+1,u=Math.ceil(t.height/this._source.tileSize)+1,g=Math.floor(o*u*(this._maxTileCacheZoomLevels===null?A.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),m=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,g):g;this._cache.setMaxSize(m)}handleWrapJump(t){const o=Math.round((t-(this._prevLng===void 0?t:this._prevLng))/360);if(this._prevLng=t,o){const u={};for(const g in this._tiles){const m=this._tiles[g];m.tileID=m.tileID.unwrapTo(m.tileID.wrap+o),u[m.tileID.key]=m}this._tiles=u;for(const g in this._timers)clearTimeout(this._timers[g]),delete this._timers[g];for(const g in this._tiles)this._setTileReloadTimer(g,this._tiles[g])}}_updateCoveredAndRetainedTiles(t,o,u,g,m,x){const B={},E={},k=Object.keys(t),N=T.now();for(const D of k){const j=t[D],G=this._tiles[D];if(!G||G.fadeEndTime!==0&&G.fadeEndTime<=N)continue;const H=this.findLoadedParent(j,o),W=this.findLoadedSibling(j),nt=H||W||null;nt&&(this._addTile(nt.tileID),B[nt.tileID.key]=nt.tileID),E[D]=j}this._retainLoadedChildren(E,g,u,t);for(const D in B)t[D]||(this._coveredTiles[D]=!0,t[D]=B[D]);if(x){const D={},j={};for(const G of m)this._tiles[G.key].hasData()?D[G.key]=G:j[G.key]=G;for(const G in j){const H=j[G].children(this._source.maxzoom);this._tiles[H[0].key]&&this._tiles[H[1].key]&&this._tiles[H[2].key]&&this._tiles[H[3].key]&&(D[H[0].key]=t[H[0].key]=H[0],D[H[1].key]=t[H[1].key]=H[1],D[H[2].key]=t[H[2].key]=H[2],D[H[3].key]=t[H[3].key]=H[3],delete j[G])}for(const G in j){const H=j[G],W=this.findLoadedParent(H,this._source.minzoom),nt=this.findLoadedSibling(H),ot=W||nt||null;if(ot){D[ot.tileID.key]=t[ot.tileID.key]=ot.tileID;for(const ct in D)D[ct].isChildOf(ot.tileID)&&delete D[ct]}}for(const G in this._tiles)D[G]||(this._coveredTiles[G]=!0)}}update(t,o){if(!this._sourceLoaded||this._paused)return;let u;this.transform=t,this.terrain=o,this.updateCacheSize(t),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?u=t.getVisibleUnwrappedCoordinates(this._source.tileID).map(N=>new A.S(N.canonical.z,N.wrap,N.canonical.z,N.canonical.x,N.canonical.y)):(u=t.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:o}),this._source.hasTile&&(u=u.filter(N=>this._source.hasTile(N)))):u=[];const g=t.coveringZoomLevel(this._source),m=Math.max(g-Pe.maxOverzooming,this._source.minzoom),x=Math.max(g+Pe.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const N={};for(const D of u)if(D.canonical.z>this._source.minzoom){const j=D.scaledTo(D.canonical.z-1);N[j.key]=j;const G=D.scaledTo(Math.max(this._source.minzoom,Math.min(D.canonical.z,5)));N[G.key]=G}u=u.concat(Object.values(N))}const B=u.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,B&&this.fire(new A.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const E=this._updateRetainedTiles(u,g);ni(this._source.type)&&this._updateCoveredAndRetainedTiles(E,m,x,g,u,o);for(const N in E)this._tiles[N].clearFadeHold();const k=A.ab(this._tiles,E);for(const N of k){const D=this._tiles[N];D.hasSymbolBuckets&&!D.holdingForFade()?D.setHoldDuration(this.map._fadeDuration):D.hasSymbolBuckets&&!D.symbolFadeFinished()||this._removeTile(N)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const t in this._tiles)this._tiles[t].holdingForFade()&&this._removeTile(t)}_updateRetainedTiles(t,o){var u;const g={},m={},x=Math.max(o-Pe.maxOverzooming,this._source.minzoom),B=Math.max(o+Pe.maxUnderzooming,this._source.minzoom),E={};for(const k of t){const N=this._addTile(k);g[k.key]=k,N.hasData()||o<this._source.maxzoom&&(E[k.key]=k)}this._retainLoadedChildren(E,o,B,g);for(const k of t){let N=this._tiles[k.key];if(N.hasData())continue;if(o+1>this._source.maxzoom){const j=k.children(this._source.maxzoom)[0],G=this.getTile(j);if(G&&G.hasData()){g[j.key]=j;continue}}else{const j=k.children(this._source.maxzoom);if(g[j[0].key]&&g[j[1].key]&&g[j[2].key]&&g[j[3].key])continue}let D=N.wasRequested();for(let j=k.overscaledZ-1;j>=x;--j){const G=k.scaledTo(j);if(m[G.key])break;if(m[G.key]=!0,N=this.getTile(G),!N&&D&&(N=this._addTile(G)),N){const H=N.hasData();if((H||!(!((u=this.map)===null||u===void 0)&&u.cancelPendingTileRequestsWhileZooming)||D)&&(g[G.key]=G),D=N.wasRequested(),H)break}}}return g}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const t in this._tiles){const o=[];let u,g=this._tiles[t].tileID;for(;g.overscaledZ>0;){if(g.key in this._loadedParentTiles){u=this._loadedParentTiles[g.key];break}o.push(g.key);const m=g.scaledTo(g.overscaledZ-1);if(u=this._getLoadedTile(m),u)break;g=m}for(const m of o)this._loadedParentTiles[m]=u}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const t in this._tiles){const o=this._tiles[t].tileID,u=this._getLoadedTile(o);this._loadedSiblingTiles[o.key]=u}}_addTile(t){let o=this._tiles[t.key];if(o)return o;o=this._cache.getAndRemove(t),o&&(this._setTileReloadTimer(t.key,o),o.tileID=t,this._state.initializeTileState(o,this.map?this.map.painter:null),this._cacheTimers[t.key]&&(clearTimeout(this._cacheTimers[t.key]),delete this._cacheTimers[t.key],this._setTileReloadTimer(t.key,o)));const u=o;return o||(o=new Zr(t,this._source.tileSize*t.overscaleFactor()),this._loadTile(o,t.key,o.state)),o.uses++,this._tiles[t.key]=o,u||this._source.fire(new A.k("dataloading",{tile:o,coord:o.tileID,dataType:"source"})),o}_setTileReloadTimer(t,o){t in this._timers&&(clearTimeout(this._timers[t]),delete this._timers[t]);const u=o.getExpiryTimeout();u&&(this._timers[t]=setTimeout(()=>{this._reloadTile(t,"expired"),delete this._timers[t]},u))}_removeTile(t){const o=this._tiles[t];o&&(o.uses--,delete this._tiles[t],this._timers[t]&&(clearTimeout(this._timers[t]),delete this._timers[t]),o.uses>0||(o.hasData()&&o.state!=="reloading"?this._cache.add(o.tileID,o,o.getExpiryTimeout()):(o.aborted=!0,this._abortTile(o),this._unloadTile(o))))}_dataHandler(t){const o=t.sourceDataType;t.dataType==="source"&&o==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&t.dataType==="source"&&o==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const t in this._tiles)this._removeTile(t);this._cache.reset()}tilesIn(t,o,u){const g=[],m=this.transform;if(!m)return g;const x=u?m.getCameraQueryGeometry(t):t,B=t.map(H=>m.pointCoordinate(H,this.terrain)),E=x.map(H=>m.pointCoordinate(H,this.terrain)),k=this.getIds();let N=1/0,D=1/0,j=-1/0,G=-1/0;for(const H of E)N=Math.min(N,H.x),D=Math.min(D,H.y),j=Math.max(j,H.x),G=Math.max(G,H.y);for(let H=0;H<k.length;H++){const W=this._tiles[k[H]];if(W.holdingForFade())continue;const nt=W.tileID,ot=Math.pow(2,m.zoom-W.tileID.overscaledZ),ct=o*W.queryPadding*A.X/W.tileSize/ot,At=[nt.getTilePoint(new A.Z(N,D)),nt.getTilePoint(new A.Z(j,G))];if(At[0].x-ct<A.X&&At[0].y-ct<A.X&&At[1].x+ct>=0&&At[1].y+ct>=0){const gt=B.map(St=>nt.getTilePoint(St)),Tt=E.map(St=>nt.getTilePoint(St));g.push({tile:W,tileID:nt,queryGeometry:gt,cameraQueryGeometry:Tt,scale:ot})}}return g}getVisibleCoordinates(t){const o=this.getRenderableIds(t).map(u=>this._tiles[u].tileID);for(const u of o)u.posMatrix=this.transform.calculatePosMatrix(u.toUnwrapped());return o}hasTransition(){if(this._source.hasTransition())return!0;if(ni(this._source.type)){const t=T.now();for(const o in this._tiles)if(this._tiles[o].fadeEndTime>=t)return!0}return!1}setFeatureState(t,o,u){this._state.updateState(t=t||"_geojsonTileLayer",o,u)}removeFeatureState(t,o,u){this._state.removeFeatureState(t=t||"_geojsonTileLayer",o,u)}getFeatureState(t,o){return this._state.getState(t=t||"_geojsonTileLayer",o)}setDependencies(t,o,u){const g=this._tiles[t];g&&g.setDependencies(o,u)}reloadTilesForDependencies(t,o){for(const u in this._tiles)this._tiles[u].hasDependency(t,o)&&this._reloadTile(u,"reloading");this._cache.filter(u=>!u.hasDependency(t,o))}}function _r(f,t){const o=Math.abs(2*f.wrap)-+(f.wrap<0),u=Math.abs(2*t.wrap)-+(t.wrap<0);return f.overscaledZ-t.overscaledZ||u-o||t.canonical.y-f.canonical.y||t.canonical.x-f.canonical.x}function ni(f){return f==="raster"||f==="image"||f==="video"}Pe.maxOverzooming=10,Pe.maxUnderzooming=3;class Qe{constructor(t,o){this.reset(t,o)}reset(t,o){this.points=t||[],this._distances=[0];for(let u=1;u<this.points.length;u++)this._distances[u]=this._distances[u-1]+this.points[u].dist(this.points[u-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(o||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(t){if(this.points.length===1)return this.points[0];t=A.ac(t,0,1);let o=1,u=this._distances[o];const g=t*this.paddedLength+this.padding;for(;u<g&&o<this._distances.length;)u=this._distances[++o];const m=o-1,x=this._distances[m],B=u-x,E=B>0?(g-x)/B:0;return this.points[m].mult(1-E).add(this.points[o].mult(E))}}function mi(f,t){let o=!0;return f==="always"||f!=="never"&&t!=="never"||(o=!1),o}class Kr{constructor(t,o,u){const g=this.boxCells=[],m=this.circleCells=[];this.xCellCount=Math.ceil(t/u),this.yCellCount=Math.ceil(o/u);for(let x=0;x<this.xCellCount*this.yCellCount;x++)g.push([]),m.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=t,this.height=o,this.xScale=this.xCellCount/t,this.yScale=this.yCellCount/o,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(t,o,u,g,m){this._forEachCell(o,u,g,m,this._insertBoxCell,this.boxUid++),this.boxKeys.push(t),this.bboxes.push(o),this.bboxes.push(u),this.bboxes.push(g),this.bboxes.push(m)}insertCircle(t,o,u,g){this._forEachCell(o-g,u-g,o+g,u+g,this._insertCircleCell,this.circleUid++),this.circleKeys.push(t),this.circles.push(o),this.circles.push(u),this.circles.push(g)}_insertBoxCell(t,o,u,g,m,x){this.boxCells[m].push(x)}_insertCircleCell(t,o,u,g,m,x){this.circleCells[m].push(x)}_query(t,o,u,g,m,x,B){if(u<0||t>this.width||g<0||o>this.height)return[];const E=[];if(t<=0&&o<=0&&this.width<=u&&this.height<=g){if(m)return[{key:null,x1:t,y1:o,x2:u,y2:g}];for(let k=0;k<this.boxKeys.length;k++)E.push({key:this.boxKeys[k],x1:this.bboxes[4*k],y1:this.bboxes[4*k+1],x2:this.bboxes[4*k+2],y2:this.bboxes[4*k+3]});for(let k=0;k<this.circleKeys.length;k++){const N=this.circles[3*k],D=this.circles[3*k+1],j=this.circles[3*k+2];E.push({key:this.circleKeys[k],x1:N-j,y1:D-j,x2:N+j,y2:D+j})}}else this._forEachCell(t,o,u,g,this._queryCell,E,{hitTest:m,overlapMode:x,seenUids:{box:{},circle:{}}},B);return E}query(t,o,u,g){return this._query(t,o,u,g,!1,null)}hitTest(t,o,u,g,m,x){return this._query(t,o,u,g,!0,m,x).length>0}hitTestCircle(t,o,u,g,m){const x=t-u,B=t+u,E=o-u,k=o+u;if(B<0||x>this.width||k<0||E>this.height)return!1;const N=[];return this._forEachCell(x,E,B,k,this._queryCellCircle,N,{hitTest:!0,overlapMode:g,circle:{x:t,y:o,radius:u},seenUids:{box:{},circle:{}}},m),N.length>0}_queryCell(t,o,u,g,m,x,B,E){const{seenUids:k,hitTest:N,overlapMode:D}=B,j=this.boxCells[m];if(j!==null){const H=this.bboxes;for(const W of j)if(!k.box[W]){k.box[W]=!0;const nt=4*W,ot=this.boxKeys[W];if(t<=H[nt+2]&&o<=H[nt+3]&&u>=H[nt+0]&&g>=H[nt+1]&&(!E||E(ot))&&(!N||!mi(D,ot.overlapMode))&&(x.push({key:ot,x1:H[nt],y1:H[nt+1],x2:H[nt+2],y2:H[nt+3]}),N))return!0}}const G=this.circleCells[m];if(G!==null){const H=this.circles;for(const W of G)if(!k.circle[W]){k.circle[W]=!0;const nt=3*W,ot=this.circleKeys[W];if(this._circleAndRectCollide(H[nt],H[nt+1],H[nt+2],t,o,u,g)&&(!E||E(ot))&&(!N||!mi(D,ot.overlapMode))){const ct=H[nt],At=H[nt+1],gt=H[nt+2];if(x.push({key:ot,x1:ct-gt,y1:At-gt,x2:ct+gt,y2:At+gt}),N)return!0}}}return!1}_queryCellCircle(t,o,u,g,m,x,B,E){const{circle:k,seenUids:N,overlapMode:D}=B,j=this.boxCells[m];if(j!==null){const H=this.bboxes;for(const W of j)if(!N.box[W]){N.box[W]=!0;const nt=4*W,ot=this.boxKeys[W];if(this._circleAndRectCollide(k.x,k.y,k.radius,H[nt+0],H[nt+1],H[nt+2],H[nt+3])&&(!E||E(ot))&&!mi(D,ot.overlapMode))return x.push(!0),!0}}const G=this.circleCells[m];if(G!==null){const H=this.circles;for(const W of G)if(!N.circle[W]){N.circle[W]=!0;const nt=3*W,ot=this.circleKeys[W];if(this._circlesCollide(H[nt],H[nt+1],H[nt+2],k.x,k.y,k.radius)&&(!E||E(ot))&&!mi(D,ot.overlapMode))return x.push(!0),!0}}}_forEachCell(t,o,u,g,m,x,B,E){const k=this._convertToXCellCoord(t),N=this._convertToYCellCoord(o),D=this._convertToXCellCoord(u),j=this._convertToYCellCoord(g);for(let G=k;G<=D;G++)for(let H=N;H<=j;H++)if(m.call(this,t,o,u,g,this.xCellCount*H+G,x,B,E))return}_convertToXCellCoord(t){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(t*this.xScale)))}_convertToYCellCoord(t){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(t*this.yScale)))}_circlesCollide(t,o,u,g,m,x){const B=g-t,E=m-o,k=u+x;return k*k>B*B+E*E}_circleAndRectCollide(t,o,u,g,m,x,B){const E=(x-g)/2,k=Math.abs(t-(g+E));if(k>E+u)return!1;const N=(B-m)/2,D=Math.abs(o-(m+N));if(D>N+u)return!1;if(k<=E||D<=N)return!0;const j=k-E,G=D-N;return j*j+G*G<=u*u}}function si(f,t,o,u,g){const m=A.H();return t?(A.K(m,m,[1/g,1/g,1]),o||A.ad(m,m,u.angle)):A.L(m,u.labelPlaneMatrix,f),m}function Xr(f,t,o,u,g){if(t){const m=A.ae(f);return A.K(m,m,[g,g,1]),o||A.ad(m,m,-u.angle),m}return u.glCoordMatrix}function yt(f,t,o,u){let g;u?(g=[f,t,u(f,t),1],A.af(g,g,o)):(g=[f,t,0,1],Sr(g,g,o));const m=g[3];return{point:new A.P(g[0]/m,g[1]/m),signedDistanceFromCamera:m,isOccluded:!1}}function $(f,t){return .5+f/t*.5}function X(f,t){return f.x>=-t[0]&&f.x<=t[0]&&f.y>=-t[1]&&f.y<=t[1]}function at(f,t,o,u,g,m,x,B,E,k,N,D,j,G,H){const W=u?f.textSizeData:f.iconSizeData,nt=A.ag(W,o.transform.zoom),ot=[256/o.width*2+1,256/o.height*2+1],ct=u?f.text.dynamicLayoutVertexArray:f.icon.dynamicLayoutVertexArray;ct.clear();const At=f.lineVertexArray,gt=u?f.text.placedSymbolArray:f.icon.placedSymbolArray,Tt=o.transform.width/o.transform.height;let St=!1;for(let ee=0;ee<gt.length;ee++){const Ae=gt.get(ee);if(Ae.hidden||Ae.writingMode===A.ah.vertical&&!St){Xe(Ae.numGlyphs,ct);continue}St=!1;const he=yt(Ae.anchorX,Ae.anchorY,t,H);if(!X(he.point,ot)){Xe(Ae.numGlyphs,ct);continue}const ge=$(o.transform.cameraToCenterDistance,he.signedDistanceFromCamera),pe=A.ai(W,nt,Ae),de=x?pe/ge:pe*ge,ye={getElevation:H,labelPlaneMatrix:g,lineVertexArray:At,pitchWithMap:x,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:k,tileAnchorPoint:new A.P(Ae.anchorX,Ae.anchorY),unwrappedTileID:N,width:D,height:j,translation:G},$e=Nt(ye,Ae,de,!1,B,t,m,f.glyphOffsetArray,ct,Tt,E);St=$e.useVertical,($e.notEnoughRoom||St||$e.needsFlipping&&Nt(ye,Ae,de,!0,B,t,m,f.glyphOffsetArray,ct,Tt,E).notEnoughRoom)&&Xe(Ae.numGlyphs,ct)}u?f.text.dynamicLayoutVertexBuffer.updateData(ct):f.icon.dynamicLayoutVertexBuffer.updateData(ct)}function ft(f,t,o,u,g,m,x,B){const E=m.glyphStartIndex+m.numGlyphs,k=m.lineStartIndex,N=m.lineStartIndex+m.lineLength,D=t.getoffsetX(m.glyphStartIndex),j=t.getoffsetX(E-1),G=ue(f*D,o,u,g,m.segment,k,N,B,x);if(!G)return null;const H=ue(f*j,o,u,g,m.segment,k,N,B,x);return H?B.projectionCache.anyProjectionOccluded?null:{first:G,last:H}:null}function Qt(f,t,o,u){return f===A.ah.horizontal&&Math.abs(o.y-t.y)>Math.abs(o.x-t.x)*u?{useVertical:!0}:(f===A.ah.vertical?t.y<o.y:t.x>o.x)?{needsFlipping:!0}:null}function Nt(f,t,o,u,g,m,x,B,E,k,N){const D=o/24,j=t.lineOffsetX*D,G=t.lineOffsetY*D;let H;if(t.numGlyphs>1){const W=t.glyphStartIndex+t.numGlyphs,nt=t.lineStartIndex,ot=t.lineStartIndex+t.lineLength,ct=ft(D,B,j,G,u,t,N,f);if(!ct)return{notEnoughRoom:!0};const At=yt(ct.first.point.x,ct.first.point.y,x,f.getElevation).point,gt=yt(ct.last.point.x,ct.last.point.y,x,f.getElevation).point;if(g&&!u){const Tt=Qt(t.writingMode,At,gt,k);if(Tt)return Tt}H=[ct.first];for(let Tt=t.glyphStartIndex+1;Tt<W-1;Tt++)H.push(ue(D*B.getoffsetX(Tt),j,G,u,t.segment,nt,ot,f,N));H.push(ct.last)}else{if(g&&!u){const nt=yt(f.tileAnchorPoint.x,f.tileAnchorPoint.y,m,f.getElevation).point,ot=t.lineStartIndex+t.segment+1,ct=new A.P(f.lineVertexArray.getx(ot),f.lineVertexArray.gety(ot)),At=yt(ct.x,ct.y,m,f.getElevation),gt=At.signedDistanceFromCamera>0?At.point:function(St,ee,Ae,he,ge,pe){return Pt(St,ee,Ae,1,ge,pe)}(f.tileAnchorPoint,ct,nt,0,m,f),Tt=Qt(t.writingMode,nt,gt,k);if(Tt)return Tt}const W=ue(D*B.getoffsetX(t.glyphStartIndex),j,G,u,t.segment,t.lineStartIndex,t.lineStartIndex+t.lineLength,f,N);if(!W||f.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};H=[W]}for(const W of H)A.aj(E,W.point,W.angle);return{}}function Pt(f,t,o,u,g,m){const x=f.add(f.sub(t)._unit()),B=g!==void 0?yt(x.x,x.y,g,m.getElevation).point:te(x.x,x.y,m).point,E=o.sub(B);return o.add(E._mult(u/E.mag()))}function Et(f,t,o){const u=t.projectionCache;if(u.projections[f])return u.projections[f];const g=new A.P(t.lineVertexArray.getx(f),t.lineVertexArray.gety(f)),m=te(g.x,g.y,t);if(m.signedDistanceFromCamera>0)return u.projections[f]=m.point,u.anyProjectionOccluded=u.anyProjectionOccluded||m.isOccluded,m.point;const x=f-o.direction;return function(B,E,k,N,D){return Pt(B,E,k,N,void 0,D)}(o.distanceFromAnchor===0?t.tileAnchorPoint:new A.P(t.lineVertexArray.getx(x),t.lineVertexArray.gety(x)),g,o.previousVertex,o.absOffsetX-o.distanceFromAnchor+1,t)}function te(f,t,o){const u=f+o.translation[0],g=t+o.translation[1];let m;return!o.pitchWithMap&&o.projection.useSpecialProjectionForSymbols?(m=o.projection.projectTileCoordinates(u,g,o.unwrappedTileID,o.getElevation),m.point.x=(.5*m.point.x+.5)*o.width,m.point.y=(.5*-m.point.y+.5)*o.height):(m=yt(u,g,o.labelPlaneMatrix,o.getElevation),m.isOccluded=!1),m}function ae(f,t,o){return f._unit()._perp()._mult(t*o)}function Gt(f,t,o,u,g,m,x,B,E){if(B.projectionCache.offsets[f])return B.projectionCache.offsets[f];const k=o.add(t);if(f+E.direction<u||f+E.direction>=g)return B.projectionCache.offsets[f]=k,k;const N=Et(f+E.direction,B,E),D=ae(N.sub(o),x,E.direction),j=o.add(D),G=N.add(D);return B.projectionCache.offsets[f]=A.ak(m,k,j,G)||k,B.projectionCache.offsets[f]}function ue(f,t,o,u,g,m,x,B,E){const k=u?f-t:f+t;let N=k>0?1:-1,D=0;u&&(N*=-1,D=Math.PI),N<0&&(D+=Math.PI);let j,G=N>0?m+g:m+g+1;B.projectionCache.cachedAnchorPoint?j=B.projectionCache.cachedAnchorPoint:(j=te(B.tileAnchorPoint.x,B.tileAnchorPoint.y,B).point,B.projectionCache.cachedAnchorPoint=j);let H,W,nt=j,ot=j,ct=0,At=0;const gt=Math.abs(k),Tt=[];let St;for(;ct+At<=gt;){if(G+=N,G<m||G>=x)return null;ct+=At,ot=nt,W=H;const he={absOffsetX:gt,direction:N,distanceFromAnchor:ct,previousVertex:ot};if(nt=Et(G,B,he),o===0)Tt.push(ot),St=nt.sub(ot);else{let ge;const pe=nt.sub(ot);ge=pe.mag()===0?ae(Et(G+N,B,he).sub(nt),o,N):ae(pe,o,N),W||(W=ot.add(ge)),H=Gt(G,ge,nt,m,x,W,o,B,he),Tt.push(W),St=H.sub(W)}At=St.mag()}const ee=St._mult((gt-ct)/At)._add(W||ot),Ae=D+Math.atan2(nt.y-ot.y,nt.x-ot.x);return Tt.push(ee),{point:ee,angle:E?Ae:0,path:Tt}}const Me=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Xe(f,t){for(let o=0;o<f;o++){const u=t.length;t.resize(u+4),t.float32.set(Me,3*u)}}function Sr(f,t,o){const u=t[0],g=t[1];return f[0]=o[0]*u+o[4]*g+o[12],f[1]=o[1]*u+o[5]*g+o[13],f[3]=o[3]*u+o[7]*g+o[15],f}const nr=100;class br{constructor(t,o,u=new Kr(t.width+200,t.height+200,25),g=new Kr(t.width+200,t.height+200,25)){this.transform=t,this.mapProjection=o,this.grid=u,this.ignoredGrid=g,this.pitchFactor=Math.cos(t._pitch)*t.cameraToCenterDistance,this.screenRightBoundary=t.width+nr,this.screenBottomBoundary=t.height+nr,this.gridRightBoundary=t.width+200,this.gridBottomBoundary=t.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(t,o,u,g,m,x,B,E,k,N,D){const j=t.anchorPointX+E[0],G=t.anchorPointY+E[1],H=this.projectAndGetPerspectiveRatio(g,j,G,m,N),W=u*H.perspectiveRatio;let nt;if(x||B)nt=this._projectCollisionBox(t,W,g,m,x,B,E,H,N,D);else{const Tt=H.point.x+(D?D.x*W:0),St=H.point.y+(D?D.y*W:0);nt={allPointsOccluded:!1,box:[Tt+t.x1*W,St+t.y1*W,Tt+t.x2*W,St+t.y2*W]}}const[ot,ct,At,gt]=nt.box;return this.mapProjection.useSpecialProjectionForSymbols&&(x?nt.allPointsOccluded:this.mapProjection.isOccluded(j,G,m))||H.perspectiveRatio<this.perspectiveRatioCutoff||!this.isInsideGrid(ot,ct,At,gt)||o!=="always"&&this.grid.hitTest(ot,ct,At,gt,o,k)?{box:[ot,ct,At,gt],placeable:!1,offscreen:!1}:{box:[ot,ct,At,gt],placeable:!0,offscreen:this.isOffscreen(ot,ct,At,gt)}}placeCollisionCircles(t,o,u,g,m,x,B,E,k,N,D,j,G,H,W,nt){const ot=[],ct=new A.P(o.anchorX,o.anchorY),At=this.getPerspectiveRatio(x,ct.x,ct.y,B,nt),gt=(D?m/At:m*At)/A.ap,Tt={getElevation:nt,labelPlaneMatrix:E,lineVertexArray:u,pitchWithMap:D,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:this.mapProjection,tileAnchorPoint:ct,unwrappedTileID:B,width:this.transform.width,height:this.transform.height,translation:W},St=ft(gt,g,o.lineOffsetX*gt,o.lineOffsetY*gt,!1,o,!1,Tt);let ee=!1,Ae=!1,he=!0;if(St){const ge=.5*G*At+H,pe=new A.P(-100,-100),de=new A.P(this.screenRightBoundary,this.screenBottomBoundary),ye=new Qe,$e=St.first,Be=St.last;let Ce=[];for(let pr=$e.path.length-1;pr>=1;pr--)Ce.push($e.path[pr]);for(let pr=1;pr<Be.path.length;pr++)Ce.push(Be.path[pr]);const Je=2.5*ge;if(k){const pr=this.projectPathToScreenSpace(Ce,Tt,k);Ce=pr.some(xr=>xr.signedDistanceFromCamera<=0)?[]:pr.map(xr=>xr.point)}let yr=[];if(Ce.length>0){const pr=Ce[0].clone(),xr=Ce[0].clone();for(let Lr=1;Lr<Ce.length;Lr++)pr.x=Math.min(pr.x,Ce[Lr].x),pr.y=Math.min(pr.y,Ce[Lr].y),xr.x=Math.max(xr.x,Ce[Lr].x),xr.y=Math.max(xr.y,Ce[Lr].y);yr=pr.x>=pe.x&&xr.x<=de.x&&pr.y>=pe.y&&xr.y<=de.y?[Ce]:xr.x<pe.x||pr.x>de.x||xr.y<pe.y||pr.y>de.y?[]:A.al([Ce],pe.x,pe.y,de.x,de.y)}for(const pr of yr){ye.reset(pr,.25*ge);let xr=0;xr=ye.length<=.5*ge?1:Math.ceil(ye.paddedLength/Je)+1;for(let Lr=0;Lr<xr;Lr++){const ei=Lr/Math.max(xr-1,1),_i=ye.lerp(ei),Gr=_i.x+nr,Ui=_i.y+nr;ot.push(Gr,Ui,ge,0);const ri=Gr-ge,Ii=Ui-ge,zi=Gr+ge,Rn=Ui+ge;if(he=he&&this.isOffscreen(ri,Ii,zi,Rn),Ae=Ae||this.isInsideGrid(ri,Ii,zi,Rn),t!=="always"&&this.grid.hitTestCircle(Gr,Ui,ge,t,j)&&(ee=!0,!N))return{circles:[],offscreen:!1,collisionDetected:ee}}}}return{circles:!N&&ee||!Ae||At<this.perspectiveRatioCutoff?[]:ot,offscreen:he,collisionDetected:ee}}projectPathToScreenSpace(t,o,u){return t.map(g=>yt(g.x,g.y,u,o.getElevation))}queryRenderedSymbols(t){if(t.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const o=[];let u=1/0,g=1/0,m=-1/0,x=-1/0;for(const N of t){const D=new A.P(N.x+nr,N.y+nr);u=Math.min(u,D.x),g=Math.min(g,D.y),m=Math.max(m,D.x),x=Math.max(x,D.y),o.push(D)}const B=this.grid.query(u,g,m,x).concat(this.ignoredGrid.query(u,g,m,x)),E={},k={};for(const N of B){const D=N.key;if(E[D.bucketInstanceId]===void 0&&(E[D.bucketInstanceId]={}),E[D.bucketInstanceId][D.featureIndex])continue;const j=[new A.P(N.x1,N.y1),new A.P(N.x2,N.y1),new A.P(N.x2,N.y2),new A.P(N.x1,N.y2)];A.am(o,j)&&(E[D.bucketInstanceId][D.featureIndex]=!0,k[D.bucketInstanceId]===void 0&&(k[D.bucketInstanceId]=[]),k[D.bucketInstanceId].push(D.featureIndex))}return k}insertCollisionBox(t,o,u,g,m,x){(u?this.ignoredGrid:this.grid).insert({bucketInstanceId:g,featureIndex:m,collisionGroupID:x,overlapMode:o},t[0],t[1],t[2],t[3])}insertCollisionCircles(t,o,u,g,m,x){const B=u?this.ignoredGrid:this.grid,E={bucketInstanceId:g,featureIndex:m,collisionGroupID:x,overlapMode:o};for(let k=0;k<t.length;k+=4)B.insertCircle(E,t[k],t[k+1],t[k+2])}projectAndGetPerspectiveRatio(t,o,u,g,m){let x;m?(x=[o,u,m(o,u),1],A.af(x,x,t)):(x=[o,u,0,1],Sr(x,x,t));const B=x[3];return{point:new A.P((x[0]/B+1)/2*this.transform.width+nr,(-x[1]/B+1)/2*this.transform.height+nr),perspectiveRatio:.5+this.transform.cameraToCenterDistance/B*.5,isOccluded:!1,signedDistanceFromCamera:B}}getPerspectiveRatio(t,o,u,g,m){const x=this.mapProjection.useSpecialProjectionForSymbols?this.mapProjection.projectTileCoordinates(o,u,g,m):yt(o,u,t,m);return .5+this.transform.cameraToCenterDistance/x.signedDistanceFromCamera*.5}isOffscreen(t,o,u,g){return u<nr||t>=this.screenRightBoundary||g<nr||o>this.screenBottomBoundary}isInsideGrid(t,o,u,g){return u>=0&&t<this.gridRightBoundary&&g>=0&&o<this.gridBottomBoundary}getViewportMatrix(){const t=A.an([]);return A.J(t,t,[-100,-100,0]),t}_projectCollisionBox(t,o,u,g,m,x,B,E,k,N){let D=new A.P(1,0),j=new A.P(0,1);const G=new A.P(t.anchorPointX+B[0],t.anchorPointY+B[1]);if(x&&!m){const he=this.projectAndGetPerspectiveRatio(u,G.x+1,G.y,g,k).point.sub(E.point).unit(),ge=Math.atan(he.y/he.x)+(he.x<0?Math.PI:0),pe=Math.sin(ge),de=Math.cos(ge);D=new A.P(de,pe),j=new A.P(-pe,de)}else if(!x&&m){const he=-this.transform.angle,ge=Math.sin(he),pe=Math.cos(he);D=new A.P(pe,ge),j=new A.P(-ge,pe)}let H=E.point,W=o;if(m){H=G;const he=this.transform.zoom-Math.floor(this.transform.zoom);W=Math.pow(2,-he),W*=this.mapProjection.getPitchedTextCorrection(this.transform,G,g),N||(W*=A.ac(.5+E.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))}N&&(H=H.add(D.mult(N.x*W)).add(j.mult(N.y*W)));const nt=t.x1*W,ot=t.x2*W,ct=(nt+ot)/2,At=t.y1*W,gt=t.y2*W,Tt=(At+gt)/2,St=[{offsetX:nt,offsetY:At},{offsetX:ct,offsetY:At},{offsetX:ot,offsetY:At},{offsetX:ot,offsetY:Tt},{offsetX:ot,offsetY:gt},{offsetX:ct,offsetY:gt},{offsetX:nt,offsetY:gt},{offsetX:nt,offsetY:Tt}];let ee=[];for(const{offsetX:he,offsetY:ge}of St)ee.push(new A.P(H.x+D.x*he+j.x*ge,H.y+D.y*he+j.y*ge));let Ae=!1;if(m){const he=ee.map(ge=>this.projectAndGetPerspectiveRatio(u,ge.x,ge.y,g,k));Ae=he.some(ge=>!ge.isOccluded),ee=he.map(ge=>ge.point)}else Ae=!0;return{box:A.ao(ee),allPointsOccluded:!Ae}}}function Ar(f,t,o){return t*(A.X/(f.tileSize*Math.pow(2,o-f.tileID.overscaledZ)))}class Yr{constructor(t,o,u,g){this.opacity=t?Math.max(0,Math.min(1,t.opacity+(t.placed?o:-o))):g&&u?1:0,this.placed=u}isHidden(){return this.opacity===0&&!this.placed}}class $r{constructor(t,o,u,g,m){this.text=new Yr(t?t.text:null,o,u,m),this.icon=new Yr(t?t.icon:null,o,g,m)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class gr{constructor(t,o,u){this.text=t,this.icon=o,this.skipFade=u}}class zr{constructor(){this.invProjMatrix=A.H(),this.viewportMatrix=A.H(),this.circles=[]}}class Jr{constructor(t,o,u,g,m){this.bucketInstanceId=t,this.featureIndex=o,this.sourceLayerIndex=u,this.bucketIndex=g,this.tileID=m}}class Ft{constructor(t){this.crossSourceCollisions=t,this.maxGroupID=0,this.collisionGroups={}}get(t){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[t]){const o=++this.maxGroupID;this.collisionGroups[t]={ID:o,predicate:u=>u.collisionGroupID===o}}return this.collisionGroups[t]}}function Ie(f,t,o,u,g){const{horizontalAlign:m,verticalAlign:x}=A.au(f);return new A.P(-(m-.5)*t+u[0]*g,-(x-.5)*o+u[1]*g)}class ve{constructor(t,o,u,g,m,x){this.transform=t.clone(),this.terrain=u,this.collisionIndex=new br(this.transform,o),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=g,this.retainedQueryData={},this.collisionGroups=new Ft(m),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=x,x&&(x.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(t){const o=this.terrain;return o?(u,g)=>o.getElevation(t,u,g):null}getBucketParts(t,o,u,g){const m=u.getBucket(o),x=u.latestFeatureIndex;if(!m||!x||o.id!==m.layerIds[0])return;const B=u.collisionBoxArray,E=m.layers[0].layout,k=m.layers[0].paint,N=Math.pow(2,this.transform.zoom-u.tileID.overscaledZ),D=u.tileSize/A.X,j=u.tileID.toUnwrapped(),G=this.transform.calculatePosMatrix(j),H=E.get("text-pitch-alignment")==="map",W=E.get("text-rotation-alignment")==="map",nt=Ar(u,1,this.transform.zoom),ot=this.collisionIndex.mapProjection.translatePosition(this.transform,u,k.get("text-translate"),k.get("text-translate-anchor")),ct=this.collisionIndex.mapProjection.translatePosition(this.transform,u,k.get("icon-translate"),k.get("icon-translate-anchor")),At=si(G,H,W,this.transform,nt);let gt=null;if(H){const St=Xr(G,H,W,this.transform,nt);gt=A.L([],this.transform.labelPlaneMatrix,St)}this.retainedQueryData[m.bucketInstanceId]=new Jr(m.bucketInstanceId,x,m.sourceLayerIndex,m.index,u.tileID);const Tt={bucket:m,layout:E,translationText:ot,translationIcon:ct,posMatrix:G,unwrappedTileID:j,textLabelPlaneMatrix:At,labelToScreenMatrix:gt,scale:N,textPixelRatio:D,holdingForFade:u.holdingForFade(),collisionBoxArray:B,partiallyEvaluatedTextSize:A.ag(m.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(m.sourceID)};if(g)for(const St of m.sortKeyRanges){const{sortKey:ee,symbolInstanceStart:Ae,symbolInstanceEnd:he}=St;t.push({sortKey:ee,symbolInstanceStart:Ae,symbolInstanceEnd:he,parameters:Tt})}else t.push({symbolInstanceStart:0,symbolInstanceEnd:m.symbolInstances.length,parameters:Tt})}attemptAnchorPlacement(t,o,u,g,m,x,B,E,k,N,D,j,G,H,W,nt,ot,ct,At){const gt=A.aq[t.textAnchor],Tt=[t.textOffset0,t.textOffset1],St=Ie(gt,u,g,Tt,m),ee=this.collisionIndex.placeCollisionBox(o,j,E,k,N,B,x,nt,D.predicate,At,St);if((!ct||this.collisionIndex.placeCollisionBox(ct,j,E,k,N,B,x,ot,D.predicate,At,St).placeable)&&ee.placeable){let Ae;if(this.prevPlacement&&this.prevPlacement.variableOffsets[G.crossTileID]&&this.prevPlacement.placements[G.crossTileID]&&this.prevPlacement.placements[G.crossTileID].text&&(Ae=this.prevPlacement.variableOffsets[G.crossTileID].anchor),G.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[G.crossTileID]={textOffset:Tt,width:u,height:g,anchor:gt,textBoxScale:m,prevAnchor:Ae},this.markUsedJustification(H,gt,G,W),H.allowVerticalPlacement&&(this.markUsedOrientation(H,W,G),this.placedOrientations[G.crossTileID]=W),{shift:St,placedGlyphBoxes:ee}}}placeLayerBucketPart(t,o,u){const{bucket:g,layout:m,translationText:x,translationIcon:B,posMatrix:E,unwrappedTileID:k,textLabelPlaneMatrix:N,labelToScreenMatrix:D,textPixelRatio:j,holdingForFade:G,collisionBoxArray:H,partiallyEvaluatedTextSize:W,collisionGroup:nt}=t.parameters,ot=m.get("text-optional"),ct=m.get("icon-optional"),At=A.ar(m,"text-overlap","text-allow-overlap"),gt=At==="always",Tt=A.ar(m,"icon-overlap","icon-allow-overlap"),St=Tt==="always",ee=m.get("text-rotation-alignment")==="map",Ae=m.get("text-pitch-alignment")==="map",he=m.get("icon-text-fit")!=="none",ge=m.get("symbol-z-order")==="viewport-y",pe=gt&&(St||!g.hasIconData()||ct),de=St&&(gt||!g.hasTextData()||ot);!g.collisionArrays&&H&&g.deserializeCollisionBoxes(H);const ye=this._getTerrainElevationFunc(this.retainedQueryData[g.bucketInstanceId].tileID),$e=(Be,Ce,Je)=>{var yr,pr;if(o[Be.crossTileID])return;if(G)return void(this.placements[Be.crossTileID]=new gr(!1,!1,!1));let xr=!1,Lr=!1,ei=!0,_i=null,Gr={box:null,placeable:!1,offscreen:null},Ui={box:null,placeable:!1,offscreen:null},ri=null,Ii=null,zi=null,Rn=0,cs=0,bi=0;Ce.textFeatureIndex?Rn=Ce.textFeatureIndex:Be.useRuntimeCollisionCircles&&(Rn=Be.featureIndex),Ce.verticalTextFeatureIndex&&(cs=Ce.verticalTextFeatureIndex);const lo=Ce.textBox;if(lo){const Tn=Di=>{let wn=A.ah.horizontal;if(g.allowVerticalPlacement&&!Di&&this.prevPlacement){const Ln=this.prevPlacement.placedOrientations[Be.crossTileID];Ln&&(this.placedOrientations[Be.crossTileID]=Ln,wn=Ln,this.markUsedOrientation(g,wn,Be))}return wn},zn=(Di,wn)=>{if(g.allowVerticalPlacement&&Be.numVerticalGlyphVertices>0&&Ce.verticalTextBox){for(const Ln of g.writingModes)if(Ln===A.ah.vertical?(Gr=wn(),Ui=Gr):Gr=Di(),Gr&&Gr.placeable)break}else Gr=Di()},sn=Be.textAnchorOffsetStartIndex,Un=Be.textAnchorOffsetEndIndex;if(Un===sn){const Di=(wn,Ln)=>{const Hr=this.collisionIndex.placeCollisionBox(wn,At,j,E,k,Ae,ee,x,nt.predicate,ye);return Hr&&Hr.placeable&&(this.markUsedOrientation(g,Ln,Be),this.placedOrientations[Be.crossTileID]=Ln),Hr};zn(()=>Di(lo,A.ah.horizontal),()=>{const wn=Ce.verticalTextBox;return g.allowVerticalPlacement&&Be.numVerticalGlyphVertices>0&&wn?Di(wn,A.ah.vertical):{box:null,offscreen:null}}),Tn(Gr&&Gr.placeable)}else{let Di=A.aq[(pr=(yr=this.prevPlacement)===null||yr===void 0?void 0:yr.variableOffsets[Be.crossTileID])===null||pr===void 0?void 0:pr.anchor];const wn=(Hr,wa,co)=>{const ka=Hr.x2-Hr.x1,DA=Hr.y2-Hr.y1,md=Be.textBoxScale,Ju=he&&Tt==="never"?wa:null;let _a=null,Ma=At==="never"?1:2,Ac="never";Di&&Ma++;for(let Cl=0;Cl<Ma;Cl++){for(let lc=sn;lc<Un;lc++){const Fl=g.textAnchorOffsets.get(lc);if(Di&&Fl.textAnchor!==Di)continue;const Da=this.attemptAnchorPlacement(Fl,Hr,ka,DA,md,ee,Ae,j,E,k,nt,Ac,Be,g,co,x,B,Ju,ye);if(Da&&(_a=Da.placedGlyphBoxes,_a&&_a.placeable))return xr=!0,_i=Da.shift,_a}Di?Di=null:Ac=At}return u&&!_a&&(_a={box:this.collisionIndex.placeCollisionBox(lo,"always",j,E,k,Ae,ee,x,nt.predicate,ye,new A.P(0,0)).box,offscreen:!1,placeable:!1}),_a};zn(()=>wn(lo,Ce.iconBox,A.ah.horizontal),()=>{const Hr=Ce.verticalTextBox;return g.allowVerticalPlacement&&(!Gr||!Gr.placeable)&&Be.numVerticalGlyphVertices>0&&Hr?wn(Hr,Ce.verticalIconBox,A.ah.vertical):{box:null,occluded:!0,offscreen:null}}),Gr&&(xr=Gr.placeable,ei=Gr.offscreen);const Ln=Tn(Gr&&Gr.placeable);if(!xr&&this.prevPlacement){const Hr=this.prevPlacement.variableOffsets[Be.crossTileID];Hr&&(this.variableOffsets[Be.crossTileID]=Hr,this.markUsedJustification(g,Hr.anchor,Be,Ln))}}}if(ri=Gr,xr=ri&&ri.placeable,ei=ri&&ri.offscreen,Be.useRuntimeCollisionCircles){const Tn=g.text.placedSymbolArray.get(Be.centerJustifiedTextSymbolIndex),zn=A.ai(g.textSizeData,W,Tn),sn=m.get("text-padding");Ii=this.collisionIndex.placeCollisionCircles(At,Tn,g.lineVertexArray,g.glyphOffsetArray,zn,E,k,N,D,u,Ae,nt.predicate,Be.collisionCircleDiameter,sn,x,ye),Ii.circles.length&&Ii.collisionDetected&&!u&&A.w("Collisions detected, but collision boxes are not shown"),xr=gt||Ii.circles.length>0&&!Ii.collisionDetected,ei=ei&&Ii.offscreen}if(Ce.iconFeatureIndex&&(bi=Ce.iconFeatureIndex),Ce.iconBox){const Tn=zn=>this.collisionIndex.placeCollisionBox(zn,Tt,j,E,k,Ae,ee,B,nt.predicate,ye,he&&_i?_i:void 0);Ui&&Ui.placeable&&Ce.verticalIconBox?(zi=Tn(Ce.verticalIconBox),Lr=zi.placeable):(zi=Tn(Ce.iconBox),Lr=zi.placeable),ei=ei&&zi.offscreen}const us=ot||Be.numHorizontalGlyphVertices===0&&Be.numVerticalGlyphVertices===0,Bl=ct||Be.numIconVertices===0;us||Bl?Bl?us||(Lr=Lr&&xr):xr=Lr&&xr:Lr=xr=Lr&&xr;const MA=Lr&&zi.placeable;if(xr&&ri.placeable&&this.collisionIndex.insertCollisionBox(ri.box,At,m.get("text-ignore-placement"),g.bucketInstanceId,Ui&&Ui.placeable&&cs?cs:Rn,nt.ID),MA&&this.collisionIndex.insertCollisionBox(zi.box,Tt,m.get("icon-ignore-placement"),g.bucketInstanceId,bi,nt.ID),Ii&&xr&&this.collisionIndex.insertCollisionCircles(Ii.circles,At,m.get("text-ignore-placement"),g.bucketInstanceId,Rn,nt.ID),u&&this.storeCollisionData(g.bucketInstanceId,Je,Ce,ri,zi,Ii),Be.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(g.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[Be.crossTileID]=new gr(xr||pe,Lr||de,ei||g.justReloaded),o[Be.crossTileID]=!0};if(ge){if(t.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const Be=g.getSortedSymbolIndexes(this.transform.angle);for(let Ce=Be.length-1;Ce>=0;--Ce){const Je=Be[Ce];$e(g.symbolInstances.get(Je),g.collisionArrays[Je],Je)}}else for(let Be=t.symbolInstanceStart;Be<t.symbolInstanceEnd;Be++)$e(g.symbolInstances.get(Be),g.collisionArrays[Be],Be);if(u&&g.bucketInstanceId in this.collisionCircleArrays){const Be=this.collisionCircleArrays[g.bucketInstanceId];A.as(Be.invProjMatrix,E),Be.viewportMatrix=this.collisionIndex.getViewportMatrix()}g.justReloaded=!1}storeCollisionData(t,o,u,g,m,x){if(u.textBox||u.iconBox){let B,E;this.collisionBoxArrays.has(t)?B=this.collisionBoxArrays.get(t):(B=new Map,this.collisionBoxArrays.set(t,B)),B.has(o)?E=B.get(o):(E={text:null,icon:null},B.set(o,E)),u.textBox&&(E.text=g.box),u.iconBox&&(E.icon=m.box)}if(x){let B=this.collisionCircleArrays[t];B===void 0&&(B=this.collisionCircleArrays[t]=new zr);for(let E=0;E<x.circles.length;E+=4)B.circles.push(x.circles[E+0]),B.circles.push(x.circles[E+1]),B.circles.push(x.circles[E+2]),B.circles.push(x.collisionDetected?1:0)}}markUsedJustification(t,o,u,g){let m;m=g===A.ah.vertical?u.verticalPlacedTextSymbolIndex:{left:u.leftJustifiedTextSymbolIndex,center:u.centerJustifiedTextSymbolIndex,right:u.rightJustifiedTextSymbolIndex}[A.at(o)];const x=[u.leftJustifiedTextSymbolIndex,u.centerJustifiedTextSymbolIndex,u.rightJustifiedTextSymbolIndex,u.verticalPlacedTextSymbolIndex];for(const B of x)B>=0&&(t.text.placedSymbolArray.get(B).crossTileID=m>=0&&B!==m?0:u.crossTileID)}markUsedOrientation(t,o,u){const g=o===A.ah.horizontal||o===A.ah.horizontalOnly?o:0,m=o===A.ah.vertical?o:0,x=[u.leftJustifiedTextSymbolIndex,u.centerJustifiedTextSymbolIndex,u.rightJustifiedTextSymbolIndex];for(const B of x)t.text.placedSymbolArray.get(B).placedOrientation=g;u.verticalPlacedTextSymbolIndex&&(t.text.placedSymbolArray.get(u.verticalPlacedTextSymbolIndex).placedOrientation=m)}commit(t){this.commitTime=t,this.zoomAtLastRecencyCheck=this.transform.zoom;const o=this.prevPlacement;let u=!1;this.prevZoomAdjustment=o?o.zoomAdjustment(this.transform.zoom):0;const g=o?o.symbolFadeChange(t):1,m=o?o.opacities:{},x=o?o.variableOffsets:{},B=o?o.placedOrientations:{};for(const E in this.placements){const k=this.placements[E],N=m[E];N?(this.opacities[E]=new $r(N,g,k.text,k.icon),u=u||k.text!==N.text.placed||k.icon!==N.icon.placed):(this.opacities[E]=new $r(null,g,k.text,k.icon,k.skipFade),u=u||k.text||k.icon)}for(const E in m){const k=m[E];if(!this.opacities[E]){const N=new $r(k,g,!1,!1);N.isHidden()||(this.opacities[E]=N,u=u||k.text.placed||k.icon.placed)}}for(const E in x)this.variableOffsets[E]||!this.opacities[E]||this.opacities[E].isHidden()||(this.variableOffsets[E]=x[E]);for(const E in B)this.placedOrientations[E]||!this.opacities[E]||this.opacities[E].isHidden()||(this.placedOrientations[E]=B[E]);if(o&&o.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");u?this.lastPlacementChangeTime=t:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=o?o.lastPlacementChangeTime:t)}updateLayerOpacities(t,o){const u={};for(const g of o){const m=g.getBucket(t);m&&g.latestFeatureIndex&&t.id===m.layerIds[0]&&this.updateBucketOpacities(m,g.tileID,u,g.collisionBoxArray)}}updateBucketOpacities(t,o,u,g){t.hasTextData()&&(t.text.opacityVertexArray.clear(),t.text.hasVisibleVertices=!1),t.hasIconData()&&(t.icon.opacityVertexArray.clear(),t.icon.hasVisibleVertices=!1),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexArray.clear(),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexArray.clear();const m=t.layers[0],x=m.layout,B=new $r(null,0,!1,!1,!0),E=x.get("text-allow-overlap"),k=x.get("icon-allow-overlap"),N=m._unevaluatedLayout.hasValue("text-variable-anchor")||m._unevaluatedLayout.hasValue("text-variable-anchor-offset"),D=x.get("text-rotation-alignment")==="map",j=x.get("text-pitch-alignment")==="map",G=x.get("icon-text-fit")!=="none",H=new $r(null,0,E&&(k||!t.hasIconData()||x.get("icon-optional")),k&&(E||!t.hasTextData()||x.get("text-optional")),!0);!t.collisionArrays&&g&&(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData())&&t.deserializeCollisionBoxes(g);const W=(ot,ct,At)=>{for(let gt=0;gt<ct/4;gt++)ot.opacityVertexArray.emplaceBack(At);ot.hasVisibleVertices=ot.hasVisibleVertices||At!==Xa},nt=this.collisionBoxArrays.get(t.bucketInstanceId);for(let ot=0;ot<t.symbolInstances.length;ot++){const ct=t.symbolInstances.get(ot),{numHorizontalGlyphVertices:At,numVerticalGlyphVertices:gt,crossTileID:Tt}=ct;let St=this.opacities[Tt];u[Tt]?St=B:St||(St=H,this.opacities[Tt]=St),u[Tt]=!0;const ee=ct.numIconVertices>0,Ae=this.placedOrientations[ct.crossTileID],he=Ae===A.ah.vertical,ge=Ae===A.ah.horizontal||Ae===A.ah.horizontalOnly;if(At>0||gt>0){const de=Cn(St.text);W(t.text,At,he?Xa:de),W(t.text,gt,ge?Xa:de);const ye=St.text.isHidden();[ct.rightJustifiedTextSymbolIndex,ct.centerJustifiedTextSymbolIndex,ct.leftJustifiedTextSymbolIndex].forEach(Ce=>{Ce>=0&&(t.text.placedSymbolArray.get(Ce).hidden=ye||he?1:0)}),ct.verticalPlacedTextSymbolIndex>=0&&(t.text.placedSymbolArray.get(ct.verticalPlacedTextSymbolIndex).hidden=ye||ge?1:0);const $e=this.variableOffsets[ct.crossTileID];$e&&this.markUsedJustification(t,$e.anchor,ct,Ae);const Be=this.placedOrientations[ct.crossTileID];Be&&(this.markUsedJustification(t,"left",ct,Be),this.markUsedOrientation(t,Be,ct))}if(ee){const de=Cn(St.icon),ye=!(G&&ct.verticalPlacedIconSymbolIndex&&he);ct.placedIconSymbolIndex>=0&&(W(t.icon,ct.numIconVertices,ye?de:Xa),t.icon.placedSymbolArray.get(ct.placedIconSymbolIndex).hidden=St.icon.isHidden()),ct.verticalPlacedIconSymbolIndex>=0&&(W(t.icon,ct.numVerticalIconVertices,ye?Xa:de),t.icon.placedSymbolArray.get(ct.verticalPlacedIconSymbolIndex).hidden=St.icon.isHidden())}const pe=nt&&nt.has(ot)?nt.get(ot):{text:null,icon:null};if(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData()){const de=t.collisionArrays[ot];if(de){let ye=new A.P(0,0);if(de.textBox||de.verticalTextBox){let $e=!0;if(N){const Be=this.variableOffsets[Tt];Be?(ye=Ie(Be.anchor,Be.width,Be.height,Be.textOffset,Be.textBoxScale),D&&ye._rotate(j?this.transform.angle:-this.transform.angle)):$e=!1}if(de.textBox||de.verticalTextBox){let Be;de.textBox&&(Be=he),de.verticalTextBox&&(Be=ge),Pr(t.textCollisionBox.collisionVertexArray,St.text.placed,!$e||Be,pe.text,ye.x,ye.y)}}if(de.iconBox||de.verticalIconBox){const $e=!!(!ge&&de.verticalIconBox);let Be;de.iconBox&&(Be=$e),de.verticalIconBox&&(Be=!$e),Pr(t.iconCollisionBox.collisionVertexArray,St.icon.placed,Be,pe.icon,G?ye.x:0,G?ye.y:0)}}}}if(t.sortFeatures(this.transform.angle),this.retainedQueryData[t.bucketInstanceId]&&(this.retainedQueryData[t.bucketInstanceId].featureSortOrder=t.featureSortOrder),t.hasTextData()&&t.text.opacityVertexBuffer&&t.text.opacityVertexBuffer.updateData(t.text.opacityVertexArray),t.hasIconData()&&t.icon.opacityVertexBuffer&&t.icon.opacityVertexBuffer.updateData(t.icon.opacityVertexArray),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexBuffer&&t.iconCollisionBox.collisionVertexBuffer.updateData(t.iconCollisionBox.collisionVertexArray),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexBuffer&&t.textCollisionBox.collisionVertexBuffer.updateData(t.textCollisionBox.collisionVertexArray),t.text.opacityVertexArray.length!==t.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${t.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${t.text.layoutVertexArray.length}) / 4`);if(t.icon.opacityVertexArray.length!==t.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${t.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${t.icon.layoutVertexArray.length}) / 4`);if(t.bucketInstanceId in this.collisionCircleArrays){const ot=this.collisionCircleArrays[t.bucketInstanceId];t.placementInvProjMatrix=ot.invProjMatrix,t.placementViewportMatrix=ot.viewportMatrix,t.collisionCircleArray=ot.circles,delete this.collisionCircleArrays[t.bucketInstanceId]}}symbolFadeChange(t){return this.fadeDuration===0?1:(t-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(t){return Math.max(0,(this.transform.zoom-t)/1.5)}hasTransitions(t){return this.stale||t-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(t,o){const u=this.zoomAtLastRecencyCheck===o?1-this.zoomAdjustment(o):1;return this.zoomAtLastRecencyCheck=o,this.commitTime+this.fadeDuration*u>t}setStale(){this.stale=!0}}function Pr(f,t,o,u,g,m){u&&u.length!==0||(u=[0,0,0,0]);const x=u[0]-nr,B=u[1]-nr,E=u[2]-nr,k=u[3]-nr;f.emplaceBack(t?1:0,o?1:0,g||0,m||0,x,B),f.emplaceBack(t?1:0,o?1:0,g||0,m||0,E,B),f.emplaceBack(t?1:0,o?1:0,g||0,m||0,E,k),f.emplaceBack(t?1:0,o?1:0,g||0,m||0,x,k)}const mr=Math.pow(2,25),Xi=Math.pow(2,24),li=Math.pow(2,17),yi=Math.pow(2,16),fi=Math.pow(2,9),ji=Math.pow(2,8),pn=Math.pow(2,1);function Cn(f){if(f.opacity===0&&!f.placed)return 0;if(f.opacity===1&&f.placed)return 4294967295;const t=f.placed?1:0,o=Math.floor(127*f.opacity);return o*mr+t*Xi+o*li+t*yi+o*fi+t*ji+o*pn+t}const Xa=0;function bs(){return{isOccluded:(f,t,o)=>!1,getPitchedTextCorrection:(f,t,o)=>1,get useSpecialProjectionForSymbols(){return!1},projectTileCoordinates(f,t,o,u){throw new Error("Not implemented.")},translatePosition:(f,t,o,u)=>function(g,m,x,B,E=!1){if(!x[0]&&!x[1])return[0,0];const k=E?B==="map"?g.angle:0:B==="viewport"?-g.angle:0;if(k){const N=Math.sin(k),D=Math.cos(k);x=[x[0]*D-x[1]*N,x[0]*N+x[1]*D]}return[E?x[0]:Ar(m,x[0],g.zoom),E?x[1]:Ar(m,x[1],g.zoom)]}(f,t,o,u),getCircleRadiusCorrection:f=>1}}class Qi{constructor(t){this._sortAcrossTiles=t.layout.get("symbol-z-order")!=="viewport-y"&&!t.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(t,o,u,g,m){const x=this._bucketParts;for(;this._currentTileIndex<t.length;)if(o.getBucketParts(x,g,t[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,m())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,x.sort((B,E)=>B.sortKey-E.sortKey));this._currentPartIndex<x.length;)if(o.placeLayerBucketPart(x[this._currentPartIndex],this._seenCrossTileIDs,u),this._currentPartIndex++,m())return!0;return!1}}class vi{constructor(t,o,u,g,m,x,B,E){this.placement=new ve(t,bs(),o,x,B,E),this._currentPlacementIndex=u.length-1,this._forceFullPlacement=g,this._showCollisionBoxes=m,this._done=!1}isDone(){return this._done}continuePlacement(t,o,u){const g=T.now(),m=()=>!this._forceFullPlacement&&T.now()-g>2;for(;this._currentPlacementIndex>=0;){const x=o[t[this._currentPlacementIndex]],B=this.placement.collisionIndex.transform.zoom;if(x.type==="symbol"&&(!x.minzoom||x.minzoom<=B)&&(!x.maxzoom||x.maxzoom>B)){if(this._inProgressLayer||(this._inProgressLayer=new Qi(x)),this._inProgressLayer.continuePlacement(u[x.source],this.placement,this._showCollisionBoxes,x,m))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(t){return this.placement.commit(t),this.placement}}const $n=512/A.X/2;class Fi{constructor(t,o,u){this.tileID=t,this.bucketInstanceId=u,this._symbolsByKey={};const g=new Map;for(let m=0;m<o.length;m++){const x=o.get(m),B=x.key,E=g.get(B);E?E.push(x):g.set(B,[x])}for(const[m,x]of g){const B={positions:x.map(E=>({x:Math.floor(E.anchorX*$n),y:Math.floor(E.anchorY*$n)})),crossTileIDs:x.map(E=>E.crossTileID)};if(B.positions.length>128){const E=new A.av(B.positions.length,16,Uint16Array);for(const{x:k,y:N}of B.positions)E.add(k,N);E.finish(),delete B.positions,B.index=E}this._symbolsByKey[m]=B}}getScaledCoordinates(t,o){const{x:u,y:g,z:m}=this.tileID.canonical,{x,y:B,z:E}=o.canonical,k=$n/Math.pow(2,E-m),N=(B*A.X+t.anchorY)*k,D=g*A.X*$n;return{x:Math.floor((x*A.X+t.anchorX)*k-u*A.X*$n),y:Math.floor(N-D)}}findMatches(t,o,u){const g=this.tileID.canonical.z<o.canonical.z?1:Math.pow(2,this.tileID.canonical.z-o.canonical.z);for(let m=0;m<t.length;m++){const x=t.get(m);if(x.crossTileID)continue;const B=this._symbolsByKey[x.key];if(!B)continue;const E=this.getScaledCoordinates(x,o);if(B.index){const k=B.index.range(E.x-g,E.y-g,E.x+g,E.y+g).sort();for(const N of k){const D=B.crossTileIDs[N];if(!u[D]){u[D]=!0,x.crossTileID=D;break}}}else if(B.positions)for(let k=0;k<B.positions.length;k++){const N=B.positions[k],D=B.crossTileIDs[k];if(Math.abs(N.x-E.x)<=g&&Math.abs(N.y-E.y)<=g&&!u[D]){u[D]=!0,x.crossTileID=D;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:t})=>t)}}class Po{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Dn{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(t){const o=Math.round((t-this.lng)/360);if(o!==0)for(const u in this.indexes){const g=this.indexes[u],m={};for(const x in g){const B=g[x];B.tileID=B.tileID.unwrapTo(B.tileID.wrap+o),m[B.tileID.key]=B}this.indexes[u]=m}this.lng=t}addBucket(t,o,u){if(this.indexes[t.overscaledZ]&&this.indexes[t.overscaledZ][t.key]){if(this.indexes[t.overscaledZ][t.key].bucketInstanceId===o.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(t.overscaledZ,this.indexes[t.overscaledZ][t.key])}for(let m=0;m<o.symbolInstances.length;m++)o.symbolInstances.get(m).crossTileID=0;this.usedCrossTileIDs[t.overscaledZ]||(this.usedCrossTileIDs[t.overscaledZ]={});const g=this.usedCrossTileIDs[t.overscaledZ];for(const m in this.indexes){const x=this.indexes[m];if(Number(m)>t.overscaledZ)for(const B in x){const E=x[B];E.tileID.isChildOf(t)&&E.findMatches(o.symbolInstances,t,g)}else{const B=x[t.scaledTo(Number(m)).key];B&&B.findMatches(o.symbolInstances,t,g)}}for(let m=0;m<o.symbolInstances.length;m++){const x=o.symbolInstances.get(m);x.crossTileID||(x.crossTileID=u.generate(),g[x.crossTileID]=!0)}return this.indexes[t.overscaledZ]===void 0&&(this.indexes[t.overscaledZ]={}),this.indexes[t.overscaledZ][t.key]=new Fi(t,o.symbolInstances,o.bucketInstanceId),!0}removeBucketCrossTileIDs(t,o){for(const u of o.getCrossTileIDsLists())for(const g of u)delete this.usedCrossTileIDs[t][g]}removeStaleBuckets(t){let o=!1;for(const u in this.indexes){const g=this.indexes[u];for(const m in g)t[g[m].bucketInstanceId]||(this.removeBucketCrossTileIDs(u,g[m]),delete g[m],o=!0)}return o}}class al{constructor(){this.layerIndexes={},this.crossTileIDs=new Po,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(t,o,u){let g=this.layerIndexes[t.id];g===void 0&&(g=this.layerIndexes[t.id]=new Dn);let m=!1;const x={};g.handleWrapJump(u);for(const B of o){const E=B.getBucket(t);E&&t.id===E.layerIds[0]&&(E.bucketInstanceId||(E.bucketInstanceId=++this.maxBucketInstanceId),g.addBucket(B.tileID,E,this.crossTileIDs)&&(m=!0),x[E.bucketInstanceId]=!0)}return g.removeStaleBuckets(x)&&(m=!0),m}pruneUnusedLayers(t){const o={};t.forEach(u=>{o[u]=!0});for(const u in this.layerIndexes)o[u]||delete this.layerIndexes[u]}}const Oi=(f,t)=>A.t(f,t&&t.filter(o=>o.identifier!=="source.canvas")),AA=A.aw();class fn extends A.E{constructor(t,o={}){super(),this._rtlPluginLoaded=()=>{for(const u in this.sourceCaches){const g=this.sourceCaches[u].getSource().type;g!=="vector"&&g!=="geojson"||this.sourceCaches[u].reload()}},this.map=t,this.dispatcher=new xe(Jt(),t._getMapId()),this.dispatcher.registerMessageHandler("GG",(u,g)=>this.getGlyphs(u,g)),this.dispatcher.registerMessageHandler("GI",(u,g)=>this.getImages(u,g)),this.imageManager=new mt,this.imageManager.setEventedParent(this),this.glyphManager=new jt(t._requestManager,o.localIdeographFontFamily),this.lineAtlas=new dt(256,512),this.crossTileSymbolIndex=new al,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new A.ax,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",A.ay()),Le().on(oe,this._rtlPluginLoaded),this.on("data",u=>{if(u.dataType!=="source"||u.sourceDataType!=="metadata")return;const g=this.sourceCaches[u.sourceId];if(!g)return;const m=g.getSource();if(m&&m.vectorLayerIds)for(const x in this._layers){const B=this._layers[x];B.source===m.id&&this._validateLayer(B)}})}loadURL(t,o={},u){this.fire(new A.k("dataloading",{dataType:"style"})),o.validate=typeof o.validate!="boolean"||o.validate;const g=this.map._requestManager.transformRequest(t,"Style");this._loadStyleRequest=new AbortController;const m=this._loadStyleRequest;A.h(g,this._loadStyleRequest).then(x=>{this._loadStyleRequest=null,this._load(x.data,o,u)}).catch(x=>{this._loadStyleRequest=null,x&&!m.signal.aborted&&this.fire(new A.j(x))})}loadJSON(t,o={},u){this.fire(new A.k("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,T.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,o.validate=o.validate!==!1,this._load(t,o,u)}).catch(()=>{})}loadEmpty(){this.fire(new A.k("dataloading",{dataType:"style"})),this._load(AA,{validate:!1})}_load(t,o,u){var g;const m=o.transformStyle?o.transformStyle(u,t):t;if(!o.validate||!Oi(this,A.u(m))){this._loaded=!0,this.stylesheet=m;for(const x in m.sources)this.addSource(x,m.sources[x],{validate:!1});m.sprite?this._loadSprite(m.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(m.glyphs),this._createLayers(),this.light=new Yt(this.stylesheet.light),this.sky=new et(this.stylesheet.sky),this.map.setTerrain((g=this.stylesheet.terrain)!==null&&g!==void 0?g:null),this.fire(new A.k("data",{dataType:"style"})),this.fire(new A.k("style.load"))}}_createLayers(){const t=A.az(this.stylesheet.layers);this.dispatcher.broadcast("SL",t),this._order=t.map(o=>o.id),this._layers={},this._serializedLayers=null;for(const o of t){const u=A.aA(o);u.setEventedParent(this,{layer:{id:o.id}}),this._layers[o.id]=u}}_loadSprite(t,o=!1,u=void 0){let g;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(m,x,B,E){return A._(this,void 0,void 0,function*(){const k=kt(m),N=B>1?"@2x":"",D={},j={};for(const{id:G,url:H}of k){const W=x.transformRequest(Xt(H,N,".json"),"SpriteJSON");D[G]=A.h(W,E);const nt=x.transformRequest(Xt(H,N,".png"),"SpriteImage");j[G]=ht.getImage(nt,E)}return yield Promise.all([...Object.values(D),...Object.values(j)]),function(G,H){return A._(this,void 0,void 0,function*(){const W={};for(const nt in G){W[nt]={};const ot=T.getImageCanvasContext((yield H[nt]).data),ct=(yield G[nt]).data;for(const At in ct){const{width:gt,height:Tt,x:St,y:ee,sdf:Ae,pixelRatio:he,stretchX:ge,stretchY:pe,content:de,textFitWidth:ye,textFitHeight:$e}=ct[At];W[nt][At]={data:null,pixelRatio:he,sdf:Ae,stretchX:ge,stretchY:pe,content:de,textFitWidth:ye,textFitHeight:$e,spriteData:{width:gt,height:Tt,x:St,y:ee,context:ot}}}}return W})}(D,j)})}(t,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(m=>{if(this._spriteRequest=null,m)for(const x in m){this._spritesImagesIds[x]=[];const B=this._spritesImagesIds[x]?this._spritesImagesIds[x].filter(E=>!(E in m)):[];for(const E of B)this.imageManager.removeImage(E),this._changedImages[E]=!0;for(const E in m[x]){const k=x==="default"?E:`${x}:${E}`;this._spritesImagesIds[x].push(k),k in this.imageManager.images?this.imageManager.updateImage(k,m[x][E],!1):this.imageManager.addImage(k,m[x][E]),o&&(this._changedImages[k]=!0)}}}).catch(m=>{this._spriteRequest=null,g=m,this.fire(new A.j(g))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),o&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new A.k("data",{dataType:"style"})),u&&u(g)})}_unloadSprite(){for(const t of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(t),this._changedImages[t]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new A.k("data",{dataType:"style"}))}_validateLayer(t){const o=this.sourceCaches[t.source];if(!o)return;const u=t.sourceLayer;if(!u)return;const g=o.getSource();(g.type==="geojson"||g.vectorLayerIds&&g.vectorLayerIds.indexOf(u)===-1)&&this.fire(new A.j(new Error(`Source layer "${u}" does not exist on source "${g.id}" as specified by style layer "${t.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const t in this.sourceCaches)if(!this.sourceCaches[t].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(t,o=!1){const u=this._serializedAllLayers();if(!t||t.length===0)return Object.values(o?A.aB(u):u);const g=[];for(const m of t)if(u[m]){const x=o?A.aB(u[m]):u[m];g.push(x)}return g}_serializedAllLayers(){let t=this._serializedLayers;if(t)return t;t=this._serializedLayers={};const o=Object.keys(this._layers);for(const u of o){const g=this._layers[u];g.type!=="custom"&&(t[u]=g.serialize())}return t}hasTransitions(){if(this.light&&this.light.hasTransition()||this.sky&&this.sky.hasTransition())return!0;for(const t in this.sourceCaches)if(this.sourceCaches[t].hasTransition())return!0;for(const t in this._layers)if(this._layers[t].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(t){if(!this._loaded)return;const o=this._changed;if(o){const g=Object.keys(this._updatedLayers),m=Object.keys(this._removedLayers);(g.length||m.length)&&this._updateWorkerLayers(g,m);for(const x in this._updatedSources){const B=this._updatedSources[x];if(B==="reload")this._reloadSource(x);else{if(B!=="clear")throw new Error(`Invalid action ${B}`);this._clearSource(x)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const x in this._updatedPaintProps)this._layers[x].updateTransitions(t);this.light.updateTransitions(t),this.sky.updateTransitions(t),this._resetUpdates()}const u={};for(const g in this.sourceCaches){const m=this.sourceCaches[g];u[g]=m.used,m.used=!1}for(const g of this._order){const m=this._layers[g];m.recalculate(t,this._availableImages),!m.isHidden(t.zoom)&&m.source&&(this.sourceCaches[m.source].used=!0)}for(const g in u){const m=this.sourceCaches[g];!!u[g]!=!!m.used&&m.fire(new A.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:g}))}this.light.recalculate(t),this.sky.recalculate(t),this.z=t.zoom,o&&this.fire(new A.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const t=Object.keys(this._changedImages);if(t.length){for(const o in this.sourceCaches)this.sourceCaches[o].reloadTilesForDependencies(["icons","patterns"],t);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const t in this.sourceCaches)this.sourceCaches[t].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(t,o){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(t,!1),removedIds:o})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(t,o={}){var u;this._checkLoaded();const g=this.serialize();if(t=o.transformStyle?o.transformStyle(g,t):t,((u=o.validate)===null||u===void 0||u)&&Oi(this,A.u(t)))return!1;(t=A.aB(t)).layers=A.az(t.layers);const m=A.aC(g,t),x=this._getOperationsToPerform(m);if(x.unimplemented.length>0)throw new Error(`Unimplemented: ${x.unimplemented.join(", ")}.`);if(x.operations.length===0)return!1;for(const B of x.operations)B();return this.stylesheet=t,this._serializedLayers=null,!0}_getOperationsToPerform(t){const o=[],u=[];for(const g of t)switch(g.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":continue;case"addLayer":o.push(()=>this.addLayer.apply(this,g.args));break;case"removeLayer":o.push(()=>this.removeLayer.apply(this,g.args));break;case"setPaintProperty":o.push(()=>this.setPaintProperty.apply(this,g.args));break;case"setLayoutProperty":o.push(()=>this.setLayoutProperty.apply(this,g.args));break;case"setFilter":o.push(()=>this.setFilter.apply(this,g.args));break;case"addSource":o.push(()=>this.addSource.apply(this,g.args));break;case"removeSource":o.push(()=>this.removeSource.apply(this,g.args));break;case"setLayerZoomRange":o.push(()=>this.setLayerZoomRange.apply(this,g.args));break;case"setLight":o.push(()=>this.setLight.apply(this,g.args));break;case"setGeoJSONSourceData":o.push(()=>this.setGeoJSONSourceData.apply(this,g.args));break;case"setGlyphs":o.push(()=>this.setGlyphs.apply(this,g.args));break;case"setSprite":o.push(()=>this.setSprite.apply(this,g.args));break;case"setSky":o.push(()=>this.setSky.apply(this,g.args));break;case"setTerrain":o.push(()=>this.map.setTerrain.apply(this,g.args));break;case"setTransition":o.push(()=>{});break;default:u.push(g.command)}return{operations:o,unimplemented:u}}addImage(t,o){if(this.getImage(t))return this.fire(new A.j(new Error(`An image named "${t}" already exists.`)));this.imageManager.addImage(t,o),this._afterImageUpdated(t)}updateImage(t,o){this.imageManager.updateImage(t,o)}getImage(t){return this.imageManager.getImage(t)}removeImage(t){if(!this.getImage(t))return this.fire(new A.j(new Error(`An image named "${t}" does not exist.`)));this.imageManager.removeImage(t),this._afterImageUpdated(t)}_afterImageUpdated(t){this._availableImages=this.imageManager.listImages(),this._changedImages[t]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new A.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(t,o,u={}){if(this._checkLoaded(),this.sourceCaches[t]!==void 0)throw new Error(`Source "${t}" already exists.`);if(!o.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(o).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(o.type)>=0&&this._validate(A.u.source,`sources.${t}`,o,null,u))return;this.map&&this.map._collectResourceTiming&&(o.collectResourceTiming=!0);const g=this.sourceCaches[t]=new Pe(t,o,this.dispatcher);g.style=this,g.setEventedParent(this,()=>({isSourceLoaded:g.loaded(),source:g.serialize(),sourceId:t})),g.onAdd(this.map),this._changed=!0}removeSource(t){if(this._checkLoaded(),this.sourceCaches[t]===void 0)throw new Error("There is no source with this ID");for(const u in this._layers)if(this._layers[u].source===t)return this.fire(new A.j(new Error(`Source "${t}" cannot be removed while layer "${u}" is using it.`)));const o=this.sourceCaches[t];delete this.sourceCaches[t],delete this._updatedSources[t],o.fire(new A.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:t})),o.setEventedParent(null),o.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(t,o){if(this._checkLoaded(),this.sourceCaches[t]===void 0)throw new Error(`There is no source with this ID=${t}`);const u=this.sourceCaches[t].getSource();if(u.type!=="geojson")throw new Error(`geojsonSource.type is ${u.type}, which is !== 'geojson`);u.setData(o),this._changed=!0}getSource(t){return this.sourceCaches[t]&&this.sourceCaches[t].getSource()}addLayer(t,o,u={}){this._checkLoaded();const g=t.id;if(this.getLayer(g))return void this.fire(new A.j(new Error(`Layer "${g}" already exists on this map.`)));let m;if(t.type==="custom"){if(Oi(this,A.aD(t)))return;m=A.aA(t)}else{if("source"in t&&typeof t.source=="object"&&(this.addSource(g,t.source),t=A.aB(t),t=A.e(t,{source:g})),this._validate(A.u.layer,`layers.${g}`,t,{arrayIndex:-1},u))return;m=A.aA(t),this._validateLayer(m),m.setEventedParent(this,{layer:{id:g}})}const x=o?this._order.indexOf(o):this._order.length;if(o&&x===-1)this.fire(new A.j(new Error(`Cannot add layer "${g}" before non-existing layer "${o}".`)));else{if(this._order.splice(x,0,g),this._layerOrderChanged=!0,this._layers[g]=m,this._removedLayers[g]&&m.source&&m.type!=="custom"){const B=this._removedLayers[g];delete this._removedLayers[g],B.type!==m.type?this._updatedSources[m.source]="clear":(this._updatedSources[m.source]="reload",this.sourceCaches[m.source].pause())}this._updateLayer(m),m.onAdd&&m.onAdd(this.map)}}moveLayer(t,o){if(this._checkLoaded(),this._changed=!0,!this._layers[t])return void this.fire(new A.j(new Error(`The layer '${t}' does not exist in the map's style and cannot be moved.`)));if(t===o)return;const u=this._order.indexOf(t);this._order.splice(u,1);const g=o?this._order.indexOf(o):this._order.length;o&&g===-1?this.fire(new A.j(new Error(`Cannot move layer "${t}" before non-existing layer "${o}".`))):(this._order.splice(g,0,t),this._layerOrderChanged=!0)}removeLayer(t){this._checkLoaded();const o=this._layers[t];if(!o)return void this.fire(new A.j(new Error(`Cannot remove non-existing layer "${t}".`)));o.setEventedParent(null);const u=this._order.indexOf(t);this._order.splice(u,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[t]=o,delete this._layers[t],this._serializedLayers&&delete this._serializedLayers[t],delete this._updatedLayers[t],delete this._updatedPaintProps[t],o.onRemove&&o.onRemove(this.map)}getLayer(t){return this._layers[t]}getLayersOrder(){return[...this._order]}hasLayer(t){return t in this._layers}setLayerZoomRange(t,o,u){this._checkLoaded();const g=this.getLayer(t);g?g.minzoom===o&&g.maxzoom===u||(o!=null&&(g.minzoom=o),u!=null&&(g.maxzoom=u),this._updateLayer(g)):this.fire(new A.j(new Error(`Cannot set the zoom range of non-existing layer "${t}".`)))}setFilter(t,o,u={}){this._checkLoaded();const g=this.getLayer(t);if(g){if(!A.aE(g.filter,o))return o==null?(g.filter=void 0,void this._updateLayer(g)):void(this._validate(A.u.filter,`layers.${g.id}.filter`,o,null,u)||(g.filter=A.aB(o),this._updateLayer(g)))}else this.fire(new A.j(new Error(`Cannot filter non-existing layer "${t}".`)))}getFilter(t){return A.aB(this.getLayer(t).filter)}setLayoutProperty(t,o,u,g={}){this._checkLoaded();const m=this.getLayer(t);m?A.aE(m.getLayoutProperty(o),u)||(m.setLayoutProperty(o,u,g),this._updateLayer(m)):this.fire(new A.j(new Error(`Cannot style non-existing layer "${t}".`)))}getLayoutProperty(t,o){const u=this.getLayer(t);if(u)return u.getLayoutProperty(o);this.fire(new A.j(new Error(`Cannot get style of non-existing layer "${t}".`)))}setPaintProperty(t,o,u,g={}){this._checkLoaded();const m=this.getLayer(t);m?A.aE(m.getPaintProperty(o),u)||(m.setPaintProperty(o,u,g)&&this._updateLayer(m),this._changed=!0,this._updatedPaintProps[t]=!0,this._serializedLayers=null):this.fire(new A.j(new Error(`Cannot style non-existing layer "${t}".`)))}getPaintProperty(t,o){return this.getLayer(t).getPaintProperty(o)}setFeatureState(t,o){this._checkLoaded();const u=t.source,g=t.sourceLayer,m=this.sourceCaches[u];if(m===void 0)return void this.fire(new A.j(new Error(`The source '${u}' does not exist in the map's style.`)));const x=m.getSource().type;x==="geojson"&&g?this.fire(new A.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):x!=="vector"||g?(t.id===void 0&&this.fire(new A.j(new Error("The feature id parameter must be provided."))),m.setFeatureState(g,t.id,o)):this.fire(new A.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(t,o){this._checkLoaded();const u=t.source,g=this.sourceCaches[u];if(g===void 0)return void this.fire(new A.j(new Error(`The source '${u}' does not exist in the map's style.`)));const m=g.getSource().type,x=m==="vector"?t.sourceLayer:void 0;m!=="vector"||x?o&&typeof t.id!="string"&&typeof t.id!="number"?this.fire(new A.j(new Error("A feature id is required to remove its specific state property."))):g.removeFeatureState(x,t.id,o):this.fire(new A.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(t){this._checkLoaded();const o=t.source,u=t.sourceLayer,g=this.sourceCaches[o];if(g!==void 0)return g.getSource().type!=="vector"||u?(t.id===void 0&&this.fire(new A.j(new Error("The feature id parameter must be provided."))),g.getFeatureState(u,t.id)):void this.fire(new A.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new A.j(new Error(`The source '${o}' does not exist in the map's style.`)))}getTransition(){return A.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const t=A.aF(this.sourceCaches,m=>m.serialize()),o=this._serializeByIds(this._order,!0),u=this.map.getTerrain()||void 0,g=this.stylesheet;return A.aG({version:g.version,name:g.name,metadata:g.metadata,light:g.light,sky:g.sky,center:g.center,zoom:g.zoom,bearing:g.bearing,pitch:g.pitch,sprite:g.sprite,glyphs:g.glyphs,transition:g.transition,sources:t,layers:o,terrain:u},m=>m!==void 0)}_updateLayer(t){this._updatedLayers[t.id]=!0,t.source&&!this._updatedSources[t.source]&&this.sourceCaches[t.source].getSource().type!=="raster"&&(this._updatedSources[t.source]="reload",this.sourceCaches[t.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(t){const o=x=>this._layers[x].type==="fill-extrusion",u={},g=[];for(let x=this._order.length-1;x>=0;x--){const B=this._order[x];if(o(B)){u[B]=x;for(const E of t){const k=E[B];if(k)for(const N of k)g.push(N)}}}g.sort((x,B)=>B.intersectionZ-x.intersectionZ);const m=[];for(let x=this._order.length-1;x>=0;x--){const B=this._order[x];if(o(B))for(let E=g.length-1;E>=0;E--){const k=g[E].feature;if(u[k.layer.id]<x)break;m.push(k),g.pop()}else for(const E of t){const k=E[B];if(k)for(const N of k)m.push(N.feature)}}return m}queryRenderedFeatures(t,o,u){o&&o.filter&&this._validate(A.u.filter,"queryRenderedFeatures.filter",o.filter,null,o);const g={};if(o&&o.layers){if(!Array.isArray(o.layers))return this.fire(new A.j(new Error("parameters.layers must be an Array."))),[];for(const B of o.layers){const E=this._layers[B];if(!E)return this.fire(new A.j(new Error(`The layer '${B}' does not exist in the map's style and cannot be queried for features.`))),[];g[E.source]=!0}}const m=[];o.availableImages=this._availableImages;const x=this._serializedAllLayers();for(const B in this.sourceCaches)o.layers&&!g[B]||m.push(Ee(this.sourceCaches[B],this._layers,x,t,o,u));return this.placement&&m.push(function(B,E,k,N,D,j,G){const H={},W=j.queryRenderedSymbols(N),nt=[];for(const ot of Object.keys(W).map(Number))nt.push(G[ot]);nt.sort(Ve);for(const ot of nt){const ct=ot.featureIndex.lookupSymbolFeatures(W[ot.bucketInstanceId],E,ot.bucketIndex,ot.sourceLayerIndex,D.filter,D.layers,D.availableImages,B);for(const At in ct){const gt=H[At]=H[At]||[],Tt=ct[At];Tt.sort((St,ee)=>{const Ae=ot.featureSortOrder;if(Ae){const he=Ae.indexOf(St.featureIndex);return Ae.indexOf(ee.featureIndex)-he}return ee.featureIndex-St.featureIndex});for(const St of Tt)gt.push(St)}}for(const ot in H)H[ot].forEach(ct=>{const At=ct.feature,gt=k[B[ot].source].getFeatureState(At.layer["source-layer"],At.id);At.source=At.layer.source,At.layer["source-layer"]&&(At.sourceLayer=At.layer["source-layer"]),At.state=gt});return H}(this._layers,x,this.sourceCaches,t,o,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(m)}querySourceFeatures(t,o){o&&o.filter&&this._validate(A.u.filter,"querySourceFeatures.filter",o.filter,null,o);const u=this.sourceCaches[t];return u?function(g,m){const x=g.getRenderableIds().map(k=>g.getTileByID(k)),B=[],E={};for(let k=0;k<x.length;k++){const N=x[k],D=N.tileID.canonical.key;E[D]||(E[D]=!0,N.querySourceFeatures(B,m))}return B}(u,o):[]}getLight(){return this.light.getLight()}setLight(t,o={}){this._checkLoaded();const u=this.light.getLight();let g=!1;for(const x in t)if(!A.aE(t[x],u[x])){g=!0;break}if(!g)return;const m={now:T.now(),transition:A.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(t,o),this.light.updateTransitions(m)}getSky(){var t;return(t=this.stylesheet)===null||t===void 0?void 0:t.sky}setSky(t,o={}){const u=this.getSky();let g=!1;if(!t&&!u)return;if(t&&!u)g=!0;else if(!t&&u)g=!0;else for(const x in t)if(!A.aE(t[x],u[x])){g=!0;break}if(!g)return;const m={now:T.now(),transition:A.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=t,this.sky.setSky(t,o),this.sky.updateTransitions(m)}_validate(t,o,u,g,m={}){return(!m||m.validate!==!1)&&Oi(this,t.call(A.u,A.e({key:o,style:this.serialize(),value:u,styleSpec:A.v},g)))}_remove(t=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),Le().off(oe,this._rtlPluginLoaded);for(const o in this._layers)this._layers[o].setEventedParent(null);for(const o in this.sourceCaches){const u=this.sourceCaches[o];u.setEventedParent(null),u.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),t&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(t)}_clearSource(t){this.sourceCaches[t].clearTiles()}_reloadSource(t){this.sourceCaches[t].resume(),this.sourceCaches[t].reload()}_updateSources(t){for(const o in this.sourceCaches)this.sourceCaches[o].update(t,this.map.terrain)}_generateCollisionBoxes(){for(const t in this.sourceCaches)this._reloadSource(t)}_updatePlacement(t,o,u,g,m=!1){let x=!1,B=!1;const E={};for(const k of this._order){const N=this._layers[k];if(N.type!=="symbol")continue;if(!E[N.source]){const j=this.sourceCaches[N.source];E[N.source]=j.getRenderableIds(!0).map(G=>j.getTileByID(G)).sort((G,H)=>H.tileID.overscaledZ-G.tileID.overscaledZ||(G.tileID.isLessThan(H.tileID)?-1:1))}const D=this.crossTileSymbolIndex.addLayer(N,E[N.source],t.center.lng);x=x||D}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((m=m||this._layerOrderChanged||u===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(T.now(),t.zoom))&&(this.pauseablePlacement=new vi(t,this.map.terrain,this._order,m,o,u,g,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,E),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(T.now()),B=!0),x&&this.pauseablePlacement.placement.setStale()),B||x)for(const k of this._order){const N=this._layers[k];N.type==="symbol"&&this.placement.updateLayerOpacities(N,E[N.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(T.now())}_releaseSymbolFadeTiles(){for(const t in this.sourceCaches)this.sourceCaches[t].releaseSymbolFadeTiles()}getImages(t,o){return A._(this,void 0,void 0,function*(){const u=yield this.imageManager.getImages(o.icons);this._updateTilesForChangedImages();const g=this.sourceCaches[o.source];return g&&g.setDependencies(o.tileID.key,o.type,o.icons),u})}getGlyphs(t,o){return A._(this,void 0,void 0,function*(){const u=yield this.glyphManager.getGlyphs(o.stacks),g=this.sourceCaches[o.source];return g&&g.setDependencies(o.tileID.key,o.type,[""]),u})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(t,o={}){this._checkLoaded(),t&&this._validate(A.u.glyphs,"glyphs",t,null,o)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=t,this.glyphManager.entries={},this.glyphManager.setURL(t))}addSprite(t,o,u={},g){this._checkLoaded();const m=[{id:t,url:o}],x=[...kt(this.stylesheet.sprite),...m];this._validate(A.u.sprite,"sprite",x,null,u)||(this.stylesheet.sprite=x,this._loadSprite(m,!0,g))}removeSprite(t){this._checkLoaded();const o=kt(this.stylesheet.sprite);if(o.find(u=>u.id===t)){if(this._spritesImagesIds[t])for(const u of this._spritesImagesIds[t])this.imageManager.removeImage(u),this._changedImages[u]=!0;o.splice(o.findIndex(u=>u.id===t),1),this.stylesheet.sprite=o.length>0?o:void 0,delete this._spritesImagesIds[t],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new A.k("data",{dataType:"style"}))}else this.fire(new A.j(new Error(`Sprite "${t}" doesn't exists on this map.`)))}getSprite(){return kt(this.stylesheet.sprite)}setSprite(t,o={},u){this._checkLoaded(),t&&this._validate(A.u.sprite,"sprite",t,null,o)||(this.stylesheet.sprite=t,t?this._loadSprite(t,!0,u):(this._unloadSprite(),u&&u(null)))}}var Rs=A.Y([{name:"a_pos",type:"Int16",components:2}]);const zs={prelude:Wr(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:Wr(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:Wr(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Wr(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Wr("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Wr(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,get_elevation(floor(a_pos*0.5)),1);gl_Position=u_matrix*pos;}`),heatmapTexture:Wr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Wr("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_anchor_pos;attribute vec2 a_placed;attribute vec2 a_box_real;uniform mat4 u_matrix;uniform vec2 u_pixel_extrude_scale;varying float v_placed;varying float v_notUsed;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Wr("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Wr("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:Wr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:Wr(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:Wr(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:Wr(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Wr(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Wr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Wr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Wr(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:Wr(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Wr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Wr(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Wr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Wr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:Wr(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_tex;varying float v_fade_opacity;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Wr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_data0;varying vec3 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Wr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec4 v_data0;varying vec4 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Wr("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;varying vec2 v_texture_pos;varying float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture2D(u_texture,v_texture_pos);if (v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);gl_FragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {gl_FragColor=surface_color;}}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform mat4 u_fog_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:Wr("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:Wr("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);}"),sky:Wr("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform float u_horizon;uniform float u_sky_horizon_blend;void main() {float y=gl_FragCoord.y;if (y > u_horizon) {float blend=y-u_horizon;if (blend < u_sky_horizon_blend) {gl_FragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {gl_FragColor=u_sky_color;}}}","attribute vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function Wr(f,t){const o=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,u=t.match(/attribute ([\w]+) ([\w]+)/g),g=f.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),m=t.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),x=m?m.concat(g):g,B={};return{fragmentSource:f=f.replace(o,(E,k,N,D,j)=>(B[j]=!0,k==="define"?`
#ifndef HAS_UNIFORM_u_${j}
varying ${N} ${D} ${j};
#else
uniform ${N} ${D} u_${j};
#endif
`:`
#ifdef HAS_UNIFORM_u_${j}
    ${N} ${D} ${j} = u_${j};
#endif
`)),vertexSource:t=t.replace(o,(E,k,N,D,j)=>{const G=D==="float"?"vec2":"vec4",H=j.match(/color/)?"color":G;return B[j]?k==="define"?`
#ifndef HAS_UNIFORM_u_${j}
uniform lowp float u_${j}_t;
attribute ${N} ${G} a_${j};
varying ${N} ${D} ${j};
#else
uniform ${N} ${D} u_${j};
#endif
`:H==="vec4"?`
#ifndef HAS_UNIFORM_u_${j}
    ${j} = a_${j};
#else
    ${N} ${D} ${j} = u_${j};
#endif
`:`
#ifndef HAS_UNIFORM_u_${j}
    ${j} = unpack_mix_${H}(a_${j}, u_${j}_t);
#else
    ${N} ${D} ${j} = u_${j};
#endif
`:k==="define"?`
#ifndef HAS_UNIFORM_u_${j}
uniform lowp float u_${j}_t;
attribute ${N} ${G} a_${j};
#else
uniform ${N} ${D} u_${j};
#endif
`:H==="vec4"?`
#ifndef HAS_UNIFORM_u_${j}
    ${N} ${D} ${j} = a_${j};
#else
    ${N} ${D} ${j} = u_${j};
#endif
`:`
#ifndef HAS_UNIFORM_u_${j}
    ${N} ${D} ${j} = unpack_mix_${H}(a_${j}, u_${j}_t);
#else
    ${N} ${D} ${j} = u_${j};
#endif
`}),staticAttributes:u,staticUniforms:x}}class lA{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(t,o,u,g,m,x,B,E,k){this.context=t;let N=this.boundPaintVertexBuffers.length!==g.length;for(let D=0;!N&&D<g.length;D++)this.boundPaintVertexBuffers[D]!==g[D]&&(N=!0);!this.vao||this.boundProgram!==o||this.boundLayoutVertexBuffer!==u||N||this.boundIndexBuffer!==m||this.boundVertexOffset!==x||this.boundDynamicVertexBuffer!==B||this.boundDynamicVertexBuffer2!==E||this.boundDynamicVertexBuffer3!==k?this.freshBind(o,u,g,m,x,B,E,k):(t.bindVertexArray.set(this.vao),B&&B.bind(),m&&m.dynamicDraw&&m.bind(),E&&E.bind(),k&&k.bind())}freshBind(t,o,u,g,m,x,B,E){const k=t.numAttributes,N=this.context,D=N.gl;this.vao&&this.destroy(),this.vao=N.createVertexArray(),N.bindVertexArray.set(this.vao),this.boundProgram=t,this.boundLayoutVertexBuffer=o,this.boundPaintVertexBuffers=u,this.boundIndexBuffer=g,this.boundVertexOffset=m,this.boundDynamicVertexBuffer=x,this.boundDynamicVertexBuffer2=B,this.boundDynamicVertexBuffer3=E,o.enableAttributes(D,t);for(const j of u)j.enableAttributes(D,t);x&&x.enableAttributes(D,t),B&&B.enableAttributes(D,t),E&&E.enableAttributes(D,t),o.bind(),o.setVertexAttribPointers(D,t,m);for(const j of u)j.bind(),j.setVertexAttribPointers(D,t,m);x&&(x.bind(),x.setVertexAttribPointers(D,t,m)),g&&g.bind(),B&&(B.bind(),B.setVertexAttribPointers(D,t,m)),E&&(E.bind(),E.setVertexAttribPointers(D,t,m)),N.currentNumAttributes=k}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const ol=(f,t,o,u,g)=>({u_matrix:f,u_texture:0,u_ele_delta:t,u_fog_matrix:o,u_fog_color:u?u.properties.get("fog-color"):A.aM.white,u_fog_ground_blend:u?u.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:u?u.calculateFogBlendOpacity(g):0,u_horizon_color:u?u.properties.get("horizon-color"):A.aM.white,u_horizon_fog_blend:u?u.properties.get("horizon-fog-blend"):1});function Fa(f){const t=[];for(let o=0;o<f.length;o++){if(f[o]===null)continue;const u=f[o].split(" ");t.push(u.pop())}return t}class Al{constructor(t,o,u,g,m,x){const B=t.gl;this.program=B.createProgram();const E=Fa(o.staticAttributes),k=u?u.getBinderAttributes():[],N=E.concat(k),D=zs.prelude.staticUniforms?Fa(zs.prelude.staticUniforms):[],j=o.staticUniforms?Fa(o.staticUniforms):[],G=u?u.getBinderUniforms():[],H=D.concat(j).concat(G),W=[];for(const St of H)W.indexOf(St)<0&&W.push(St);const nt=u?u.defines():[];m&&nt.push("#define OVERDRAW_INSPECTOR;"),x&&nt.push("#define TERRAIN3D;");const ot=nt.concat(zs.prelude.fragmentSource,o.fragmentSource).join(`
`),ct=nt.concat(zs.prelude.vertexSource,o.vertexSource).join(`
`),At=B.createShader(B.FRAGMENT_SHADER);if(B.isContextLost())return void(this.failedToCreate=!0);if(B.shaderSource(At,ot),B.compileShader(At),!B.getShaderParameter(At,B.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${B.getShaderInfoLog(At)}`);B.attachShader(this.program,At);const gt=B.createShader(B.VERTEX_SHADER);if(B.isContextLost())return void(this.failedToCreate=!0);if(B.shaderSource(gt,ct),B.compileShader(gt),!B.getShaderParameter(gt,B.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${B.getShaderInfoLog(gt)}`);B.attachShader(this.program,gt),this.attributes={};const Tt={};this.numAttributes=N.length;for(let St=0;St<this.numAttributes;St++)N[St]&&(B.bindAttribLocation(this.program,St,N[St]),this.attributes[N[St]]=St);if(B.linkProgram(this.program),!B.getProgramParameter(this.program,B.LINK_STATUS))throw new Error(`Program failed to link: ${B.getProgramInfoLog(this.program)}`);B.deleteShader(gt),B.deleteShader(At);for(let St=0;St<W.length;St++){const ee=W[St];if(ee&&!Tt[ee]){const Ae=B.getUniformLocation(this.program,ee);Ae&&(Tt[ee]=Ae)}}this.fixedUniforms=g(t,Tt),this.terrainUniforms=((St,ee)=>({u_depth:new A.aH(St,ee.u_depth),u_terrain:new A.aH(St,ee.u_terrain),u_terrain_dim:new A.aI(St,ee.u_terrain_dim),u_terrain_matrix:new A.aJ(St,ee.u_terrain_matrix),u_terrain_unpack:new A.aK(St,ee.u_terrain_unpack),u_terrain_exaggeration:new A.aI(St,ee.u_terrain_exaggeration)}))(t,Tt),this.binderUniforms=u?u.getUniforms(t,Tt):[]}draw(t,o,u,g,m,x,B,E,k,N,D,j,G,H,W,nt,ot,ct){const At=t.gl;if(this.failedToCreate)return;if(t.program.set(this.program),t.setDepthMode(u),t.setStencilMode(g),t.setColorMode(m),t.setCullFace(x),E){t.activeTexture.set(At.TEXTURE2),At.bindTexture(At.TEXTURE_2D,E.depthTexture),t.activeTexture.set(At.TEXTURE3),At.bindTexture(At.TEXTURE_2D,E.texture);for(const Tt in this.terrainUniforms)this.terrainUniforms[Tt].set(E[Tt])}for(const Tt in this.fixedUniforms)this.fixedUniforms[Tt].set(B[Tt]);W&&W.setUniforms(t,this.binderUniforms,G,{zoom:H});let gt=0;switch(o){case At.LINES:gt=2;break;case At.TRIANGLES:gt=3;break;case At.LINE_STRIP:gt=1}for(const Tt of j.get()){const St=Tt.vaos||(Tt.vaos={});(St[k]||(St[k]=new lA)).bind(t,this,N,W?W.getPaintVertexBuffers():[],D,Tt.vertexOffset,nt,ot,ct),At.drawElements(o,Tt.primitiveLength*gt,At.UNSIGNED_SHORT,Tt.primitiveOffset*gt*2)}}}function Wa(f,t,o){const u=1/Ar(o,1,t.transform.tileZoom),g=Math.pow(2,o.tileID.overscaledZ),m=o.tileSize*Math.pow(2,t.transform.tileZoom)/g,x=m*(o.tileID.canonical.x+o.tileID.wrap*g),B=m*o.tileID.canonical.y;return{u_image:0,u_texsize:o.imageAtlasTexture.size,u_scale:[u,f.fromScale,f.toScale],u_fade:f.t,u_pixel_coord_upper:[x>>16,B>>16],u_pixel_coord_lower:[65535&x,65535&B]}}const Qo=(f,t,o,u)=>{const g=t.style.light,m=g.properties.get("position"),x=[m.x,m.y,m.z],B=function(){var k=new A.A(9);return A.A!=Float32Array&&(k[1]=0,k[2]=0,k[3]=0,k[5]=0,k[6]=0,k[7]=0),k[0]=1,k[4]=1,k[8]=1,k}();g.properties.get("anchor")==="viewport"&&function(k,N){var D=Math.sin(N),j=Math.cos(N);k[0]=j,k[1]=D,k[2]=0,k[3]=-D,k[4]=j,k[5]=0,k[6]=0,k[7]=0,k[8]=1}(B,-t.transform.angle),function(k,N,D){var j=N[0],G=N[1],H=N[2];k[0]=j*D[0]+G*D[3]+H*D[6],k[1]=j*D[1]+G*D[4]+H*D[7],k[2]=j*D[2]+G*D[5]+H*D[8]}(x,x,B);const E=g.properties.get("color");return{u_matrix:f,u_lightpos:x,u_lightintensity:g.properties.get("intensity"),u_lightcolor:[E.r,E.g,E.b],u_vertical_gradient:+o,u_opacity:u}},cA=(f,t,o,u,g,m,x)=>A.e(Qo(f,t,o,u),Wa(m,t,x),{u_height_factor:-Math.pow(2,g.overscaledZ)/x.tileSize/8}),Za=f=>({u_matrix:f}),aa=(f,t,o,u)=>A.e(Za(f),Wa(o,t,u)),uA=(f,t)=>({u_matrix:f,u_world:t}),ko=(f,t,o,u,g)=>A.e(aa(f,t,o,u),{u_world:g}),Yl=(f,t,o,u)=>{const g=f.transform;let m,x;if(u.paint.get("circle-pitch-alignment")==="map"){const B=Ar(o,1,g.zoom);m=!0,x=[B,B]}else m=!1,x=g.pixelsToGLUnits;return{u_camera_to_center_distance:g.cameraToCenterDistance,u_scale_with_map:+(u.paint.get("circle-pitch-scale")==="map"),u_matrix:f.translatePosMatrix(t.posMatrix,o,u.paint.get("circle-translate"),u.paint.get("circle-translate-anchor")),u_pitch_with_map:+m,u_device_pixel_ratio:f.pixelRatio,u_extrude_scale:x}},ki=(f,t,o)=>({u_matrix:f,u_inv_matrix:t,u_camera_to_center_distance:o.cameraToCenterDistance,u_viewport_size:[o.width,o.height]}),Mo=(f,t,o=1)=>({u_matrix:f,u_color:t,u_overlay:0,u_overlay_scale:o}),gn=f=>({u_matrix:f}),lr=(f,t,o,u)=>({u_matrix:f,u_extrude_scale:Ar(t,1,o),u_intensity:u}),hA=(f,t,o,u)=>{const g=A.H();A.aP(g,0,f.width,f.height,0,0,1);const m=f.context.gl;return{u_matrix:g,u_world:[m.drawingBufferWidth,m.drawingBufferHeight],u_image:o,u_color_ramp:u,u_opacity:t.paint.get("heatmap-opacity")}};function dA(f,t){const o=Math.pow(2,t.canonical.z),u=t.canonical.y;return[new A.Z(0,u/o).toLngLat().lat,new A.Z(0,(u+1)/o).toLngLat().lat]}const ns=(f,t,o,u)=>{const g=f.transform;return{u_matrix:Jl(f,t,o,u),u_ratio:1/Ar(t,1,g.zoom),u_device_pixel_ratio:f.pixelRatio,u_units_to_pixels:[1/g.pixelsToGLUnits[0],1/g.pixelsToGLUnits[1]]}},ll=(f,t,o,u,g)=>A.e(ns(f,t,o,g),{u_image:0,u_image_height:u}),Sa=(f,t,o,u,g)=>{const m=f.transform,x=fA(t,m);return{u_matrix:Jl(f,t,o,g),u_texsize:t.imageAtlasTexture.size,u_ratio:1/Ar(t,1,m.zoom),u_device_pixel_ratio:f.pixelRatio,u_image:0,u_scale:[x,u.fromScale,u.toScale],u_fade:u.t,u_units_to_pixels:[1/m.pixelsToGLUnits[0],1/m.pixelsToGLUnits[1]]}},pA=(f,t,o,u,g,m)=>{const x=f.lineAtlas,B=fA(t,f.transform),E=o.layout.get("line-cap")==="round",k=x.getDash(u.from,E),N=x.getDash(u.to,E),D=k.width*g.fromScale,j=N.width*g.toScale;return A.e(ns(f,t,o,m),{u_patternscale_a:[B/D,-k.height/2],u_patternscale_b:[B/j,-N.height/2],u_sdfgamma:x.width/(256*Math.min(D,j)*f.pixelRatio)/2,u_image:0,u_tex_y_a:k.y,u_tex_y_b:N.y,u_mix:g.t})};function fA(f,t){return 1/Ar(f,1,t.tileZoom)}function Jl(f,t,o,u){return f.translatePosMatrix(u?u.posMatrix:t.tileID.posMatrix,t,o.paint.get("line-translate"),o.paint.get("line-translate-anchor"))}const Rc=(f,t,o,u,g)=>{return{u_matrix:f,u_tl_parent:t,u_scale_parent:o,u_buffer_scale:1,u_fade_t:u.mix,u_opacity:u.opacity*g.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:g.paint.get("raster-brightness-min"),u_brightness_high:g.paint.get("raster-brightness-max"),u_saturation_factor:(x=g.paint.get("raster-saturation"),x>0?1-1/(1.001-x):-x),u_contrast_factor:(m=g.paint.get("raster-contrast"),m>0?1/(1-m):1+m),u_spin_weights:zc(g.paint.get("raster-hue-rotate"))};var m,x};function zc(f){f*=Math.PI/180;const t=Math.sin(f),o=Math.cos(f);return[(2*o+1)/3,(-Math.sqrt(3)*t-o+1)/3,(Math.sqrt(3)*t-o+1)/3]}const gA=(f,t,o,u,g,m,x,B,E,k,N,D,j,G)=>{const H=x.transform;return{u_is_size_zoom_constant:+(f==="constant"||f==="source"),u_is_size_feature_constant:+(f==="constant"||f==="camera"),u_size_t:t?t.uSizeT:0,u_size:t?t.uSize:0,u_camera_to_center_distance:H.cameraToCenterDistance,u_pitch:H.pitch/360*2*Math.PI,u_rotate_symbol:+o,u_aspect_ratio:H.width/H.height,u_fade_change:x.options.fadeDuration?x.symbolFadeChange:1,u_matrix:B,u_label_plane_matrix:E,u_coord_matrix:k,u_is_text:+D,u_pitch_with_map:+u,u_is_along_line:g,u_is_variable_anchor:m,u_texsize:j,u_texture:0,u_translation:N,u_pitched_scale:G}},Hs=(f,t,o,u,g,m,x,B,E,k,N,D,j,G,H)=>{const W=x.transform;return A.e(gA(f,t,o,u,g,m,x,B,E,k,N,D,j,H),{u_gamma_scale:u?Math.cos(W._pitch)*W.cameraToCenterDistance:1,u_device_pixel_ratio:x.pixelRatio,u_is_halo:+G})},oa=(f,t,o,u,g,m,x,B,E,k,N,D,j,G)=>A.e(Hs(f,t,o,u,g,m,x,B,E,k,N,!0,D,!0,G),{u_texsize_icon:j,u_texture_icon:1}),mA=(f,t,o)=>({u_matrix:f,u_opacity:t,u_color:o}),Ia=(f,t,o,u,g,m)=>A.e(function(x,B,E,k){const N=E.imageManager.getPattern(x.from.toString()),D=E.imageManager.getPattern(x.to.toString()),{width:j,height:G}=E.imageManager.getPixelSize(),H=Math.pow(2,k.tileID.overscaledZ),W=k.tileSize*Math.pow(2,E.transform.tileZoom)/H,nt=W*(k.tileID.canonical.x+k.tileID.wrap*H),ot=W*k.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:N.tl,u_pattern_br_a:N.br,u_pattern_tl_b:D.tl,u_pattern_br_b:D.br,u_texsize:[j,G],u_mix:B.t,u_pattern_size_a:N.displaySize,u_pattern_size_b:D.displaySize,u_scale_a:B.fromScale,u_scale_b:B.toScale,u_tile_units_to_pixels:1/Ar(k,1,E.transform.tileZoom),u_pixel_coord_upper:[nt>>16,ot>>16],u_pixel_coord_lower:[65535&nt,65535&ot]}}(u,m,o,g),{u_matrix:f,u_opacity:t}),Do={fillExtrusion:(f,t)=>({u_matrix:new A.aJ(f,t.u_matrix),u_lightpos:new A.aN(f,t.u_lightpos),u_lightintensity:new A.aI(f,t.u_lightintensity),u_lightcolor:new A.aN(f,t.u_lightcolor),u_vertical_gradient:new A.aI(f,t.u_vertical_gradient),u_opacity:new A.aI(f,t.u_opacity)}),fillExtrusionPattern:(f,t)=>({u_matrix:new A.aJ(f,t.u_matrix),u_lightpos:new A.aN(f,t.u_lightpos),u_lightintensity:new A.aI(f,t.u_lightintensity),u_lightcolor:new A.aN(f,t.u_lightcolor),u_vertical_gradient:new A.aI(f,t.u_vertical_gradient),u_height_factor:new A.aI(f,t.u_height_factor),u_image:new A.aH(f,t.u_image),u_texsize:new A.aO(f,t.u_texsize),u_pixel_coord_upper:new A.aO(f,t.u_pixel_coord_upper),u_pixel_coord_lower:new A.aO(f,t.u_pixel_coord_lower),u_scale:new A.aN(f,t.u_scale),u_fade:new A.aI(f,t.u_fade),u_opacity:new A.aI(f,t.u_opacity)}),fill:(f,t)=>({u_matrix:new A.aJ(f,t.u_matrix)}),fillPattern:(f,t)=>({u_matrix:new A.aJ(f,t.u_matrix),u_image:new A.aH(f,t.u_image),u_texsize:new A.aO(f,t.u_texsize),u_pixel_coord_upper:new A.aO(f,t.u_pixel_coord_upper),u_pixel_coord_lower:new A.aO(f,t.u_pixel_coord_lower),u_scale:new A.aN(f,t.u_scale),u_fade:new A.aI(f,t.u_fade)}),fillOutline:(f,t)=>({u_matrix:new A.aJ(f,t.u_matrix),u_world:new A.aO(f,t.u_world)}),fillOutlinePattern:(f,t)=>({u_matrix:new A.aJ(f,t.u_matrix),u_world:new A.aO(f,t.u_world),u_image:new A.aH(f,t.u_image),u_texsize:new A.aO(f,t.u_texsize),u_pixel_coord_upper:new A.aO(f,t.u_pixel_coord_upper),u_pixel_coord_lower:new A.aO(f,t.u_pixel_coord_lower),u_scale:new A.aN(f,t.u_scale),u_fade:new A.aI(f,t.u_fade)}),circle:(f,t)=>({u_camera_to_center_distance:new A.aI(f,t.u_camera_to_center_distance),u_scale_with_map:new A.aH(f,t.u_scale_with_map),u_pitch_with_map:new A.aH(f,t.u_pitch_with_map),u_extrude_scale:new A.aO(f,t.u_extrude_scale),u_device_pixel_ratio:new A.aI(f,t.u_device_pixel_ratio),u_matrix:new A.aJ(f,t.u_matrix)}),collisionBox:(f,t)=>({u_matrix:new A.aJ(f,t.u_matrix),u_pixel_extrude_scale:new A.aO(f,t.u_pixel_extrude_scale)}),collisionCircle:(f,t)=>({u_matrix:new A.aJ(f,t.u_matrix),u_inv_matrix:new A.aJ(f,t.u_inv_matrix),u_camera_to_center_distance:new A.aI(f,t.u_camera_to_center_distance),u_viewport_size:new A.aO(f,t.u_viewport_size)}),debug:(f,t)=>({u_color:new A.aL(f,t.u_color),u_matrix:new A.aJ(f,t.u_matrix),u_overlay:new A.aH(f,t.u_overlay),u_overlay_scale:new A.aI(f,t.u_overlay_scale)}),clippingMask:(f,t)=>({u_matrix:new A.aJ(f,t.u_matrix)}),heatmap:(f,t)=>({u_extrude_scale:new A.aI(f,t.u_extrude_scale),u_intensity:new A.aI(f,t.u_intensity),u_matrix:new A.aJ(f,t.u_matrix)}),heatmapTexture:(f,t)=>({u_matrix:new A.aJ(f,t.u_matrix),u_world:new A.aO(f,t.u_world),u_image:new A.aH(f,t.u_image),u_color_ramp:new A.aH(f,t.u_color_ramp),u_opacity:new A.aI(f,t.u_opacity)}),hillshade:(f,t)=>({u_matrix:new A.aJ(f,t.u_matrix),u_image:new A.aH(f,t.u_image),u_latrange:new A.aO(f,t.u_latrange),u_light:new A.aO(f,t.u_light),u_shadow:new A.aL(f,t.u_shadow),u_highlight:new A.aL(f,t.u_highlight),u_accent:new A.aL(f,t.u_accent)}),hillshadePrepare:(f,t)=>({u_matrix:new A.aJ(f,t.u_matrix),u_image:new A.aH(f,t.u_image),u_dimension:new A.aO(f,t.u_dimension),u_zoom:new A.aI(f,t.u_zoom),u_unpack:new A.aK(f,t.u_unpack)}),line:(f,t)=>({u_matrix:new A.aJ(f,t.u_matrix),u_ratio:new A.aI(f,t.u_ratio),u_device_pixel_ratio:new A.aI(f,t.u_device_pixel_ratio),u_units_to_pixels:new A.aO(f,t.u_units_to_pixels)}),lineGradient:(f,t)=>({u_matrix:new A.aJ(f,t.u_matrix),u_ratio:new A.aI(f,t.u_ratio),u_device_pixel_ratio:new A.aI(f,t.u_device_pixel_ratio),u_units_to_pixels:new A.aO(f,t.u_units_to_pixels),u_image:new A.aH(f,t.u_image),u_image_height:new A.aI(f,t.u_image_height)}),linePattern:(f,t)=>({u_matrix:new A.aJ(f,t.u_matrix),u_texsize:new A.aO(f,t.u_texsize),u_ratio:new A.aI(f,t.u_ratio),u_device_pixel_ratio:new A.aI(f,t.u_device_pixel_ratio),u_image:new A.aH(f,t.u_image),u_units_to_pixels:new A.aO(f,t.u_units_to_pixels),u_scale:new A.aN(f,t.u_scale),u_fade:new A.aI(f,t.u_fade)}),lineSDF:(f,t)=>({u_matrix:new A.aJ(f,t.u_matrix),u_ratio:new A.aI(f,t.u_ratio),u_device_pixel_ratio:new A.aI(f,t.u_device_pixel_ratio),u_units_to_pixels:new A.aO(f,t.u_units_to_pixels),u_patternscale_a:new A.aO(f,t.u_patternscale_a),u_patternscale_b:new A.aO(f,t.u_patternscale_b),u_sdfgamma:new A.aI(f,t.u_sdfgamma),u_image:new A.aH(f,t.u_image),u_tex_y_a:new A.aI(f,t.u_tex_y_a),u_tex_y_b:new A.aI(f,t.u_tex_y_b),u_mix:new A.aI(f,t.u_mix)}),raster:(f,t)=>({u_matrix:new A.aJ(f,t.u_matrix),u_tl_parent:new A.aO(f,t.u_tl_parent),u_scale_parent:new A.aI(f,t.u_scale_parent),u_buffer_scale:new A.aI(f,t.u_buffer_scale),u_fade_t:new A.aI(f,t.u_fade_t),u_opacity:new A.aI(f,t.u_opacity),u_image0:new A.aH(f,t.u_image0),u_image1:new A.aH(f,t.u_image1),u_brightness_low:new A.aI(f,t.u_brightness_low),u_brightness_high:new A.aI(f,t.u_brightness_high),u_saturation_factor:new A.aI(f,t.u_saturation_factor),u_contrast_factor:new A.aI(f,t.u_contrast_factor),u_spin_weights:new A.aN(f,t.u_spin_weights)}),symbolIcon:(f,t)=>({u_is_size_zoom_constant:new A.aH(f,t.u_is_size_zoom_constant),u_is_size_feature_constant:new A.aH(f,t.u_is_size_feature_constant),u_size_t:new A.aI(f,t.u_size_t),u_size:new A.aI(f,t.u_size),u_camera_to_center_distance:new A.aI(f,t.u_camera_to_center_distance),u_pitch:new A.aI(f,t.u_pitch),u_rotate_symbol:new A.aH(f,t.u_rotate_symbol),u_aspect_ratio:new A.aI(f,t.u_aspect_ratio),u_fade_change:new A.aI(f,t.u_fade_change),u_matrix:new A.aJ(f,t.u_matrix),u_label_plane_matrix:new A.aJ(f,t.u_label_plane_matrix),u_coord_matrix:new A.aJ(f,t.u_coord_matrix),u_is_text:new A.aH(f,t.u_is_text),u_pitch_with_map:new A.aH(f,t.u_pitch_with_map),u_is_along_line:new A.aH(f,t.u_is_along_line),u_is_variable_anchor:new A.aH(f,t.u_is_variable_anchor),u_texsize:new A.aO(f,t.u_texsize),u_texture:new A.aH(f,t.u_texture),u_translation:new A.aO(f,t.u_translation),u_pitched_scale:new A.aI(f,t.u_pitched_scale)}),symbolSDF:(f,t)=>({u_is_size_zoom_constant:new A.aH(f,t.u_is_size_zoom_constant),u_is_size_feature_constant:new A.aH(f,t.u_is_size_feature_constant),u_size_t:new A.aI(f,t.u_size_t),u_size:new A.aI(f,t.u_size),u_camera_to_center_distance:new A.aI(f,t.u_camera_to_center_distance),u_pitch:new A.aI(f,t.u_pitch),u_rotate_symbol:new A.aH(f,t.u_rotate_symbol),u_aspect_ratio:new A.aI(f,t.u_aspect_ratio),u_fade_change:new A.aI(f,t.u_fade_change),u_matrix:new A.aJ(f,t.u_matrix),u_label_plane_matrix:new A.aJ(f,t.u_label_plane_matrix),u_coord_matrix:new A.aJ(f,t.u_coord_matrix),u_is_text:new A.aH(f,t.u_is_text),u_pitch_with_map:new A.aH(f,t.u_pitch_with_map),u_is_along_line:new A.aH(f,t.u_is_along_line),u_is_variable_anchor:new A.aH(f,t.u_is_variable_anchor),u_texsize:new A.aO(f,t.u_texsize),u_texture:new A.aH(f,t.u_texture),u_gamma_scale:new A.aI(f,t.u_gamma_scale),u_device_pixel_ratio:new A.aI(f,t.u_device_pixel_ratio),u_is_halo:new A.aH(f,t.u_is_halo),u_translation:new A.aO(f,t.u_translation),u_pitched_scale:new A.aI(f,t.u_pitched_scale)}),symbolTextAndIcon:(f,t)=>({u_is_size_zoom_constant:new A.aH(f,t.u_is_size_zoom_constant),u_is_size_feature_constant:new A.aH(f,t.u_is_size_feature_constant),u_size_t:new A.aI(f,t.u_size_t),u_size:new A.aI(f,t.u_size),u_camera_to_center_distance:new A.aI(f,t.u_camera_to_center_distance),u_pitch:new A.aI(f,t.u_pitch),u_rotate_symbol:new A.aH(f,t.u_rotate_symbol),u_aspect_ratio:new A.aI(f,t.u_aspect_ratio),u_fade_change:new A.aI(f,t.u_fade_change),u_matrix:new A.aJ(f,t.u_matrix),u_label_plane_matrix:new A.aJ(f,t.u_label_plane_matrix),u_coord_matrix:new A.aJ(f,t.u_coord_matrix),u_is_text:new A.aH(f,t.u_is_text),u_pitch_with_map:new A.aH(f,t.u_pitch_with_map),u_is_along_line:new A.aH(f,t.u_is_along_line),u_is_variable_anchor:new A.aH(f,t.u_is_variable_anchor),u_texsize:new A.aO(f,t.u_texsize),u_texsize_icon:new A.aO(f,t.u_texsize_icon),u_texture:new A.aH(f,t.u_texture),u_texture_icon:new A.aH(f,t.u_texture_icon),u_gamma_scale:new A.aI(f,t.u_gamma_scale),u_device_pixel_ratio:new A.aI(f,t.u_device_pixel_ratio),u_is_halo:new A.aH(f,t.u_is_halo),u_translation:new A.aO(f,t.u_translation),u_pitched_scale:new A.aI(f,t.u_pitched_scale)}),background:(f,t)=>({u_matrix:new A.aJ(f,t.u_matrix),u_opacity:new A.aI(f,t.u_opacity),u_color:new A.aL(f,t.u_color)}),backgroundPattern:(f,t)=>({u_matrix:new A.aJ(f,t.u_matrix),u_opacity:new A.aI(f,t.u_opacity),u_image:new A.aH(f,t.u_image),u_pattern_tl_a:new A.aO(f,t.u_pattern_tl_a),u_pattern_br_a:new A.aO(f,t.u_pattern_br_a),u_pattern_tl_b:new A.aO(f,t.u_pattern_tl_b),u_pattern_br_b:new A.aO(f,t.u_pattern_br_b),u_texsize:new A.aO(f,t.u_texsize),u_mix:new A.aI(f,t.u_mix),u_pattern_size_a:new A.aO(f,t.u_pattern_size_a),u_pattern_size_b:new A.aO(f,t.u_pattern_size_b),u_scale_a:new A.aI(f,t.u_scale_a),u_scale_b:new A.aI(f,t.u_scale_b),u_pixel_coord_upper:new A.aO(f,t.u_pixel_coord_upper),u_pixel_coord_lower:new A.aO(f,t.u_pixel_coord_lower),u_tile_units_to_pixels:new A.aI(f,t.u_tile_units_to_pixels)}),terrain:(f,t)=>({u_matrix:new A.aJ(f,t.u_matrix),u_texture:new A.aH(f,t.u_texture),u_ele_delta:new A.aI(f,t.u_ele_delta),u_fog_matrix:new A.aJ(f,t.u_fog_matrix),u_fog_color:new A.aL(f,t.u_fog_color),u_fog_ground_blend:new A.aI(f,t.u_fog_ground_blend),u_fog_ground_blend_opacity:new A.aI(f,t.u_fog_ground_blend_opacity),u_horizon_color:new A.aL(f,t.u_horizon_color),u_horizon_fog_blend:new A.aI(f,t.u_horizon_fog_blend)}),terrainDepth:(f,t)=>({u_matrix:new A.aJ(f,t.u_matrix),u_ele_delta:new A.aI(f,t.u_ele_delta)}),terrainCoords:(f,t)=>({u_matrix:new A.aJ(f,t.u_matrix),u_texture:new A.aH(f,t.u_texture),u_terrain_coords_id:new A.aI(f,t.u_terrain_coords_id),u_ele_delta:new A.aI(f,t.u_ele_delta)}),sky:(f,t)=>({u_sky_color:new A.aL(f,t.u_sky_color),u_horizon_color:new A.aL(f,t.u_horizon_color),u_horizon:new A.aI(f,t.u_horizon),u_sky_horizon_blend:new A.aI(f,t.u_sky_horizon_blend)})};class Nn{constructor(t,o,u){this.context=t;const g=t.gl;this.buffer=g.createBuffer(),this.dynamicDraw=!!u,this.context.unbindVAO(),t.bindElementBuffer.set(this.buffer),g.bufferData(g.ELEMENT_ARRAY_BUFFER,o.arrayBuffer,this.dynamicDraw?g.DYNAMIC_DRAW:g.STATIC_DRAW),this.dynamicDraw||delete o.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(t){const o=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),o.bufferSubData(o.ELEMENT_ARRAY_BUFFER,0,t.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const tc={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class yA{constructor(t,o,u,g){this.length=o.length,this.attributes=u,this.itemSize=o.bytesPerElement,this.dynamicDraw=g,this.context=t;const m=t.gl;this.buffer=m.createBuffer(),t.bindVertexBuffer.set(this.buffer),m.bufferData(m.ARRAY_BUFFER,o.arrayBuffer,this.dynamicDraw?m.DYNAMIC_DRAW:m.STATIC_DRAW),this.dynamicDraw||delete o.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(t){if(t.length!==this.length)throw new Error(`Length of new data is ${t.length}, which doesn't match current length of ${this.length}`);const o=this.context.gl;this.bind(),o.bufferSubData(o.ARRAY_BUFFER,0,t.arrayBuffer)}enableAttributes(t,o){for(let u=0;u<this.attributes.length;u++){const g=o.attributes[this.attributes[u].name];g!==void 0&&t.enableVertexAttribArray(g)}}setVertexAttribPointers(t,o,u){for(let g=0;g<this.attributes.length;g++){const m=this.attributes[g],x=o.attributes[m.name];x!==void 0&&t.vertexAttribPointer(x,m.components,t[tc[m.type]],!1,this.itemSize,m.offset+this.itemSize*(u||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Aa=new WeakMap;function Vs(f){var t;if(Aa.has(f))return Aa.get(f);{const o=(t=f.getParameter(f.VERSION))===null||t===void 0?void 0:t.startsWith("WebGL 2.0");return Aa.set(f,o),o}}class Qr{constructor(t){this.gl=t.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(t){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class xs extends Qr{getDefault(){return A.aM.transparent}set(t){const o=this.current;(t.r!==o.r||t.g!==o.g||t.b!==o.b||t.a!==o.a||this.dirty)&&(this.gl.clearColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)}}class Hc extends Qr{getDefault(){return 1}set(t){(t!==this.current||this.dirty)&&(this.gl.clearDepth(t),this.current=t,this.dirty=!1)}}class ss extends Qr{getDefault(){return 0}set(t){(t!==this.current||this.dirty)&&(this.gl.clearStencil(t),this.current=t,this.dirty=!1)}}class js extends Qr{getDefault(){return[!0,!0,!0,!0]}set(t){const o=this.current;(t[0]!==o[0]||t[1]!==o[1]||t[2]!==o[2]||t[3]!==o[3]||this.dirty)&&(this.gl.colorMask(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)}}class vA extends Qr{getDefault(){return!0}set(t){(t!==this.current||this.dirty)&&(this.gl.depthMask(t),this.current=t,this.dirty=!1)}}class No extends Qr{getDefault(){return 255}set(t){(t!==this.current||this.dirty)&&(this.gl.stencilMask(t),this.current=t,this.dirty=!1)}}class ec extends Qr{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(t){const o=this.current;(t.func!==o.func||t.ref!==o.ref||t.mask!==o.mask||this.dirty)&&(this.gl.stencilFunc(t.func,t.ref,t.mask),this.current=t,this.dirty=!1)}}class Ya extends Qr{getDefault(){const t=this.gl;return[t.KEEP,t.KEEP,t.KEEP]}set(t){const o=this.current;(t[0]!==o[0]||t[1]!==o[1]||t[2]!==o[2]||this.dirty)&&(this.gl.stencilOp(t[0],t[1],t[2]),this.current=t,this.dirty=!1)}}class rc extends Qr{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const o=this.gl;t?o.enable(o.STENCIL_TEST):o.disable(o.STENCIL_TEST),this.current=t,this.dirty=!1}}class wA extends Qr{getDefault(){return[0,1]}set(t){const o=this.current;(t[0]!==o[0]||t[1]!==o[1]||this.dirty)&&(this.gl.depthRange(t[0],t[1]),this.current=t,this.dirty=!1)}}class _A extends Qr{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const o=this.gl;t?o.enable(o.DEPTH_TEST):o.disable(o.DEPTH_TEST),this.current=t,this.dirty=!1}}class cl extends Qr{getDefault(){return this.gl.LESS}set(t){(t!==this.current||this.dirty)&&(this.gl.depthFunc(t),this.current=t,this.dirty=!1)}}class Bs extends Qr{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const o=this.gl;t?o.enable(o.BLEND):o.disable(o.BLEND),this.current=t,this.dirty=!1}}class bA extends Qr{getDefault(){const t=this.gl;return[t.ONE,t.ZERO]}set(t){const o=this.current;(t[0]!==o[0]||t[1]!==o[1]||this.dirty)&&(this.gl.blendFunc(t[0],t[1]),this.current=t,this.dirty=!1)}}class ul extends Qr{getDefault(){return A.aM.transparent}set(t){const o=this.current;(t.r!==o.r||t.g!==o.g||t.b!==o.b||t.a!==o.a||this.dirty)&&(this.gl.blendColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)}}class hl extends Qr{getDefault(){return this.gl.FUNC_ADD}set(t){(t!==this.current||this.dirty)&&(this.gl.blendEquation(t),this.current=t,this.dirty=!1)}}class Oo extends Qr{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const o=this.gl;t?o.enable(o.CULL_FACE):o.disable(o.CULL_FACE),this.current=t,this.dirty=!1}}class xA extends Qr{getDefault(){return this.gl.BACK}set(t){(t!==this.current||this.dirty)&&(this.gl.cullFace(t),this.current=t,this.dirty=!1)}}class la extends Qr{getDefault(){return this.gl.CCW}set(t){(t!==this.current||this.dirty)&&(this.gl.frontFace(t),this.current=t,this.dirty=!1)}}class dl extends Qr{getDefault(){return null}set(t){(t!==this.current||this.dirty)&&(this.gl.useProgram(t),this.current=t,this.dirty=!1)}}class Ja extends Qr{getDefault(){return this.gl.TEXTURE0}set(t){(t!==this.current||this.dirty)&&(this.gl.activeTexture(t),this.current=t,this.dirty=!1)}}class BA extends Qr{getDefault(){const t=this.gl;return[0,0,t.drawingBufferWidth,t.drawingBufferHeight]}set(t){const o=this.current;(t[0]!==o[0]||t[1]!==o[1]||t[2]!==o[2]||t[3]!==o[3]||this.dirty)&&(this.gl.viewport(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)}}class Q extends Qr{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const o=this.gl;o.bindFramebuffer(o.FRAMEBUFFER,t),this.current=t,this.dirty=!1}}class J extends Qr{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const o=this.gl;o.bindRenderbuffer(o.RENDERBUFFER,t),this.current=t,this.dirty=!1}}class bt extends Qr{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const o=this.gl;o.bindTexture(o.TEXTURE_2D,t),this.current=t,this.dirty=!1}}class Dt extends Qr{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const o=this.gl;o.bindBuffer(o.ARRAY_BUFFER,t),this.current=t,this.dirty=!1}}class qt extends Qr{getDefault(){return null}set(t){const o=this.gl;o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,t),this.current=t,this.dirty=!1}}class ne extends Qr{getDefault(){return null}set(t){var o;if(t===this.current&&!this.dirty)return;const u=this.gl;Vs(u)?u.bindVertexArray(t):(o=u.getExtension("OES_vertex_array_object"))===null||o===void 0||o.bindVertexArrayOES(t),this.current=t,this.dirty=!1}}class be extends Qr{getDefault(){return 4}set(t){if(t===this.current&&!this.dirty)return;const o=this.gl;o.pixelStorei(o.UNPACK_ALIGNMENT,t),this.current=t,this.dirty=!1}}class He extends Qr{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const o=this.gl;o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t),this.current=t,this.dirty=!1}}class ur extends Qr{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const o=this.gl;o.pixelStorei(o.UNPACK_FLIP_Y_WEBGL,t),this.current=t,this.dirty=!1}}class Ir extends Qr{constructor(t,o){super(t),this.context=t,this.parent=o}getDefault(){return null}}class Er extends Ir{setDirty(){this.dirty=!0}set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const o=this.gl;o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,t,0),this.current=t,this.dirty=!1}}class Or extends Ir{set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const o=this.gl;o.framebufferRenderbuffer(o.FRAMEBUFFER,o.DEPTH_ATTACHMENT,o.RENDERBUFFER,t),this.current=t,this.dirty=!1}}class wi extends Ir{set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const o=this.gl;o.framebufferRenderbuffer(o.FRAMEBUFFER,o.DEPTH_STENCIL_ATTACHMENT,o.RENDERBUFFER,t),this.current=t,this.dirty=!1}}class Ri{constructor(t,o,u,g,m){this.context=t,this.width=o,this.height=u;const x=t.gl,B=this.framebuffer=x.createFramebuffer();if(this.colorAttachment=new Er(t,B),g)this.depthAttachment=m?new wi(t,B):new Or(t,B);else if(m)throw new Error("Stencil cannot be set without depth");if(x.checkFramebufferStatus(x.FRAMEBUFFER)!==x.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const t=this.context.gl,o=this.colorAttachment.get();if(o&&t.deleteTexture(o),this.depthAttachment){const u=this.depthAttachment.get();u&&t.deleteRenderbuffer(u)}t.deleteFramebuffer(this.framebuffer)}}class kr{constructor(t,o,u){this.blendFunction=t,this.blendColor=o,this.mask=u}}kr.Replace=[1,0],kr.disabled=new kr(kr.Replace,A.aM.transparent,[!1,!1,!1,!1]),kr.unblended=new kr(kr.Replace,A.aM.transparent,[!0,!0,!0,!0]),kr.alphaBlended=new kr([1,771],A.aM.transparent,[!0,!0,!0,!0]);class Fn{constructor(t){var o,u;if(this.gl=t,this.clearColor=new xs(this),this.clearDepth=new Hc(this),this.clearStencil=new ss(this),this.colorMask=new js(this),this.depthMask=new vA(this),this.stencilMask=new No(this),this.stencilFunc=new ec(this),this.stencilOp=new Ya(this),this.stencilTest=new rc(this),this.depthRange=new wA(this),this.depthTest=new _A(this),this.depthFunc=new cl(this),this.blend=new Bs(this),this.blendFunc=new bA(this),this.blendColor=new ul(this),this.blendEquation=new hl(this),this.cullFace=new Oo(this),this.cullFaceSide=new xA(this),this.frontFace=new la(this),this.program=new dl(this),this.activeTexture=new Ja(this),this.viewport=new BA(this),this.bindFramebuffer=new Q(this),this.bindRenderbuffer=new J(this),this.bindTexture=new bt(this),this.bindVertexBuffer=new Dt(this),this.bindElementBuffer=new qt(this),this.bindVertexArray=new ne(this),this.pixelStoreUnpack=new be(this),this.pixelStoreUnpackPremultiplyAlpha=new He(this),this.pixelStoreUnpackFlipY=new ur(this),this.extTextureFilterAnisotropic=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=t.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE),Vs(t)){this.HALF_FLOAT=t.HALF_FLOAT;const g=t.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(o=t.RGBA16F)!==null&&o!==void 0?o:g==null?void 0:g.RGBA16F_EXT,this.RGB16F=(u=t.RGB16F)!==null&&u!==void 0?u:g==null?void 0:g.RGB16F_EXT,t.getExtension("EXT_color_buffer_float")}else{t.getExtension("EXT_color_buffer_half_float"),t.getExtension("OES_texture_half_float_linear");const g=t.getExtension("OES_texture_half_float");this.HALF_FLOAT=g==null?void 0:g.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(t,o){return new Nn(this,t,o)}createVertexBuffer(t,o,u){return new yA(this,t,o,u)}createRenderbuffer(t,o,u){const g=this.gl,m=g.createRenderbuffer();return this.bindRenderbuffer.set(m),g.renderbufferStorage(g.RENDERBUFFER,t,o,u),this.bindRenderbuffer.set(null),m}createFramebuffer(t,o,u,g){return new Ri(this,t,o,u,g)}clear({color:t,depth:o,stencil:u}){const g=this.gl;let m=0;t&&(m|=g.COLOR_BUFFER_BIT,this.clearColor.set(t),this.colorMask.set([!0,!0,!0,!0])),o!==void 0&&(m|=g.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(o),this.depthMask.set(!0)),u!==void 0&&(m|=g.STENCIL_BUFFER_BIT,this.clearStencil.set(u),this.stencilMask.set(255)),g.clear(m)}setCullFace(t){t.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(t.mode),this.frontFace.set(t.frontFace))}setDepthMode(t){t.func!==this.gl.ALWAYS||t.mask?(this.depthTest.set(!0),this.depthFunc.set(t.func),this.depthMask.set(t.mask),this.depthRange.set(t.range)):this.depthTest.set(!1)}setStencilMode(t){t.test.func!==this.gl.ALWAYS||t.mask?(this.stencilTest.set(!0),this.stencilMask.set(t.mask),this.stencilOp.set([t.fail,t.depthFail,t.pass]),this.stencilFunc.set({func:t.test.func,ref:t.ref,mask:t.test.mask})):this.stencilTest.set(!1)}setColorMode(t){A.aE(t.blendFunction,kr.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(t.blendFunction),this.blendColor.set(t.blendColor)),this.colorMask.set(t.mask)}createVertexArray(){var t;return Vs(this.gl)?this.gl.createVertexArray():(t=this.gl.getExtension("OES_vertex_array_object"))===null||t===void 0?void 0:t.createVertexArrayOES()}deleteVertexArray(t){var o;return Vs(this.gl)?this.gl.deleteVertexArray(t):(o=this.gl.getExtension("OES_vertex_array_object"))===null||o===void 0?void 0:o.deleteVertexArrayOES(t)}unbindVAO(){this.bindVertexArray.set(null)}}class cr{constructor(t,o,u){this.func=t,this.mask=o,this.range=u}}cr.ReadOnly=!1,cr.ReadWrite=!0,cr.disabled=new cr(519,cr.ReadOnly,[0,1]);const Gn=7680;class Vr{constructor(t,o,u,g,m,x){this.test=t,this.ref=o,this.mask=u,this.fail=g,this.depthFail=m,this.pass=x}}Vr.disabled=new Vr({func:519,mask:0},0,0,Gn,Gn,Gn);class jr{constructor(t,o,u){this.enable=t,this.mode=o,this.frontFace=u}}let ca;function Ea(f,t,o,u,g){const m=f.context,x=m.gl,B=f.useProgram("collisionBox"),E=[];let k=0,N=0;for(let ot=0;ot<u.length;ot++){const ct=u[ot],At=t.getTile(ct).getBucket(o);if(!At)continue;const gt=g?At.textCollisionBox:At.iconCollisionBox,Tt=At.collisionCircleArray;if(Tt.length>0){const St=A.H();A.aQ(St,At.placementInvProjMatrix,f.transform.glCoordMatrix),A.aQ(St,St,At.placementViewportMatrix),E.push({circleArray:Tt,circleOffset:N,transform:ct.posMatrix,invTransform:St,coord:ct}),k+=Tt.length/4,N=k}gt&&B.draw(m,x.LINES,cr.disabled,Vr.disabled,f.colorModeForRenderPass(),jr.disabled,{u_matrix:ct.posMatrix,u_pixel_extrude_scale:[1/(D=f.transform).width,1/D.height]},f.style.map.terrain&&f.style.map.terrain.getTerrainData(ct),o.id,gt.layoutVertexBuffer,gt.indexBuffer,gt.segments,null,f.transform.zoom,null,null,gt.collisionVertexBuffer)}var D;if(!g||!E.length)return;const j=f.useProgram("collisionCircle"),G=new A.aR;G.resize(4*k),G._trim();let H=0;for(const ot of E)for(let ct=0;ct<ot.circleArray.length/4;ct++){const At=4*ct,gt=ot.circleArray[At+0],Tt=ot.circleArray[At+1],St=ot.circleArray[At+2],ee=ot.circleArray[At+3];G.emplace(H++,gt,Tt,St,ee,0),G.emplace(H++,gt,Tt,St,ee,1),G.emplace(H++,gt,Tt,St,ee,2),G.emplace(H++,gt,Tt,St,ee,3)}(!ca||ca.length<2*k)&&(ca=function(ot){const ct=2*ot,At=new A.aT;At.resize(ct),At._trim();for(let gt=0;gt<ct;gt++){const Tt=6*gt;At.uint16[Tt+0]=4*gt+0,At.uint16[Tt+1]=4*gt+1,At.uint16[Tt+2]=4*gt+2,At.uint16[Tt+3]=4*gt+2,At.uint16[Tt+4]=4*gt+3,At.uint16[Tt+5]=4*gt+0}return At}(k));const W=m.createIndexBuffer(ca,!0),nt=m.createVertexBuffer(G,A.aS.members,!0);for(const ot of E){const ct=ki(ot.transform,ot.invTransform,f.transform);j.draw(m,x.TRIANGLES,cr.disabled,Vr.disabled,f.colorModeForRenderPass(),jr.disabled,ct,f.style.map.terrain&&f.style.map.terrain.getTerrainData(ot.coord),o.id,nt,W,A.a0.simpleSegment(0,2*ot.circleOffset,ot.circleArray.length,ot.circleArray.length/2),null,f.transform.zoom,null,null,null)}nt.destroy(),W.destroy()}jr.disabled=new jr(!1,1029,2305),jr.backCCW=new jr(!0,1029,2305);const Ta=A.an(new Float32Array(16));function to(f,t,o,u,g,m){const{horizontalAlign:x,verticalAlign:B}=A.au(f);return new A.P((-(x-.5)*t/g+u[0])*m,(-(B-.5)*o/g+u[1])*m)}function Ks(f,t,o,u,g,m){const x=t.tileAnchorPoint.add(new A.P(t.translation[0],t.translation[1]));if(t.pitchWithMap){let B=u.mult(m);o||(B=B.rotate(-g));const E=x.add(B);return yt(E.x,E.y,t.labelPlaneMatrix,t.getElevation).point}if(o){const B=te(t.tileAnchorPoint.x+1,t.tileAnchorPoint.y,t).point.sub(f),E=Math.atan(B.y/B.x)+(B.x<0?Math.PI:0);return f.add(u.rotate(E))}return f.add(u)}function ua(f,t,o,u,g,m,x,B,E,k,N,D,j,G){const H=f.text.placedSymbolArray,W=f.text.dynamicLayoutVertexArray,nt=f.icon.dynamicLayoutVertexArray,ot={};W.clear();for(let ct=0;ct<H.length;ct++){const At=H.get(ct),gt=At.hidden||!At.crossTileID||f.allowVerticalPlacement&&!At.placedOrientation?null:u[At.crossTileID];if(gt){const Tt=new A.P(At.anchorX,At.anchorY),St={getElevation:G,width:g.width,height:g.height,labelPlaneMatrix:m,lineVertexArray:null,pitchWithMap:o,projection:N,projectionCache:null,tileAnchorPoint:Tt,translation:D,unwrappedTileID:j},ee=o?yt(Tt.x,Tt.y,x,G):te(Tt.x,Tt.y,St),Ae=$(g.cameraToCenterDistance,ee.signedDistanceFromCamera);let he=A.ai(f.textSizeData,E,At)*Ae/A.ap;o&&(he*=f.tilePixelRatio/B);const{width:ge,height:pe,anchor:de,textOffset:ye,textBoxScale:$e}=gt,Be=to(de,ge,pe,ye,$e,he),Ce=N.getPitchedTextCorrection(g,Tt.add(new A.P(D[0],D[1])),j),Je=Ks(ee.point,St,t,Be,g.angle,Ce),yr=f.allowVerticalPlacement&&At.placedOrientation===A.ah.vertical?Math.PI/2:0;for(let pr=0;pr<At.numGlyphs;pr++)A.aj(W,Je,yr);k&&At.associatedIconIndex>=0&&(ot[At.associatedIconIndex]={shiftedAnchor:Je,angle:yr})}else Xe(At.numGlyphs,W)}if(k){nt.clear();const ct=f.icon.placedSymbolArray;for(let At=0;At<ct.length;At++){const gt=ct.get(At);if(gt.hidden)Xe(gt.numGlyphs,nt);else{const Tt=ot[At];if(Tt)for(let St=0;St<gt.numGlyphs;St++)A.aj(nt,Tt.shiftedAnchor,Tt.angle);else Xe(gt.numGlyphs,nt)}}f.icon.dynamicLayoutVertexBuffer.updateData(nt)}f.text.dynamicLayoutVertexBuffer.updateData(W)}function mn(f,t,o){return o.iconsInText&&t?"symbolTextAndIcon":f?"symbolSDF":"symbolIcon"}function Wi(f,t,o,u,g,m,x,B,E,k,N,D){const j=f.context,G=j.gl,H=f.transform,W=bs(),nt=B==="map",ot=E==="map",ct=B!=="viewport"&&o.layout.get("symbol-placement")!=="point",At=nt&&!ot&&!ct,gt=!ot&&ct,Tt=!o.layout.get("symbol-sort-key").isConstant();let St=!1;const ee=f.depthModeForSublayer(0,cr.ReadOnly),Ae=o._unevaluatedLayout.hasValue("text-variable-anchor")||o._unevaluatedLayout.hasValue("text-variable-anchor-offset"),he=[],ge=W.getCircleRadiusCorrection(H);for(const pe of u){const de=t.getTile(pe),ye=de.getBucket(o);if(!ye)continue;const $e=g?ye.text:ye.icon;if(!$e||!$e.segments.get().length||!$e.hasVisibleVertices)continue;const Be=$e.programConfigurations.get(o.id),Ce=g||ye.sdfIcons,Je=g?ye.textSizeData:ye.iconSizeData,yr=ot||H.pitch!==0,pr=f.useProgram(mn(Ce,g,ye),Be),xr=A.ag(Je,H.zoom),Lr=f.style.map.terrain&&f.style.map.terrain.getTerrainData(pe);let ei,_i,Gr,Ui,ri=[0,0],Ii=null;if(g)_i=de.glyphAtlasTexture,Gr=G.LINEAR,ei=de.glyphAtlasTexture.size,ye.iconsInText&&(ri=de.imageAtlasTexture.size,Ii=de.imageAtlasTexture,Ui=yr||f.options.rotating||f.options.zooming||Je.kind==="composite"||Je.kind==="camera"?G.LINEAR:G.NEAREST);else{const Hr=o.layout.get("icon-size").constantOr(0)!==1||ye.iconsNeedLinear;_i=de.imageAtlasTexture,Gr=Ce||f.options.rotating||f.options.zooming||Hr||yr?G.LINEAR:G.NEAREST,ei=de.imageAtlasTexture.size}const zi=Ar(de,1,f.transform.zoom),Rn=gt?pe.posMatrix:Ta,cs=si(Rn,ot,nt,f.transform,zi),bi=Xr(Rn,ot,nt,f.transform,zi),lo=Xr(pe.posMatrix,ot,nt,f.transform,zi),us=W.translatePosition(f.transform,de,m,x),Bl=Ae&&ye.hasTextData(),MA=o.layout.get("icon-text-fit")!=="none"&&Bl&&ye.hasIconData();if(ct){const Hr=f.style.map.terrain?(co,ka)=>f.style.map.terrain.getElevation(pe,co,ka):null,wa=o.layout.get("text-rotation-alignment")==="map";at(ye,pe.posMatrix,f,g,cs,lo,ot,k,wa,W,pe.toUnwrapped(),H.width,H.height,us,Hr)}const Tn=pe.posMatrix,zn=g&&Ae||MA,sn=ct||zn?Ta:cs,Un=bi,Di=Ce&&o.paint.get(g?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let wn;wn=Ce?ye.iconsInText?oa(Je.kind,xr,At,ot,ct,zn,f,Tn,sn,Un,us,ei,ri,ge):Hs(Je.kind,xr,At,ot,ct,zn,f,Tn,sn,Un,us,g,ei,!0,ge):gA(Je.kind,xr,At,ot,ct,zn,f,Tn,sn,Un,us,g,ei,ge);const Ln={program:pr,buffers:$e,uniformValues:wn,atlasTexture:_i,atlasTextureIcon:Ii,atlasInterpolation:Gr,atlasInterpolationIcon:Ui,isSDF:Ce,hasHalo:Di};if(Tt&&ye.canOverlap){St=!0;const Hr=$e.segments.get();for(const wa of Hr)he.push({segments:new A.a0([wa]),sortKey:wa.sortKey,state:Ln,terrainData:Lr})}else he.push({segments:$e.segments,sortKey:0,state:Ln,terrainData:Lr})}St&&he.sort((pe,de)=>pe.sortKey-de.sortKey);for(const pe of he){const de=pe.state;if(j.activeTexture.set(G.TEXTURE0),de.atlasTexture.bind(de.atlasInterpolation,G.CLAMP_TO_EDGE),de.atlasTextureIcon&&(j.activeTexture.set(G.TEXTURE1),de.atlasTextureIcon&&de.atlasTextureIcon.bind(de.atlasInterpolationIcon,G.CLAMP_TO_EDGE)),de.isSDF){const ye=de.uniformValues;de.hasHalo&&(ye.u_is_halo=1,eo(de.buffers,pe.segments,o,f,de.program,ee,N,D,ye,pe.terrainData)),ye.u_is_halo=0}eo(de.buffers,pe.segments,o,f,de.program,ee,N,D,de.uniformValues,pe.terrainData)}}function eo(f,t,o,u,g,m,x,B,E,k){const N=u.context;g.draw(N,N.gl.TRIANGLES,m,x,B,jr.disabled,E,k,o.id,f.layoutVertexBuffer,f.indexBuffer,t,o.paint,u.transform.zoom,f.programConfigurations.get(o.id),f.dynamicLayoutVertexBuffer,f.opacityVertexBuffer)}function ro(f,t,o,u){const g=f.context,m=g.gl,x=Vr.disabled,B=new kr([m.ONE,m.ONE],A.aM.transparent,[!0,!0,!0,!0]),E=t.getBucket(o);if(!E)return;const k=u.key;let N=o.heatmapFbos.get(k);N||(N=Ua(g,t.tileSize,t.tileSize),o.heatmapFbos.set(k,N)),g.bindFramebuffer.set(N.framebuffer),g.viewport.set([0,0,t.tileSize,t.tileSize]),g.clear({color:A.aM.transparent});const D=E.programConfigurations.get(o.id),j=f.useProgram("heatmap",D),G=f.style.map.terrain.getTerrainData(u);j.draw(g,m.TRIANGLES,cr.disabled,x,B,jr.disabled,lr(u.posMatrix,t,f.transform.zoom,o.paint.get("heatmap-intensity")),G,o.id,E.layoutVertexBuffer,E.indexBuffer,E.segments,o.paint,f.transform.zoom,D)}function Cs(f,t,o){const u=f.context,g=u.gl;u.setColorMode(f.colorModeForRenderPass());const m=en(u,t),x=o.key,B=t.heatmapFbos.get(x);B&&(u.activeTexture.set(g.TEXTURE0),g.bindTexture(g.TEXTURE_2D,B.colorAttachment.get()),u.activeTexture.set(g.TEXTURE1),m.bind(g.LINEAR,g.CLAMP_TO_EDGE),f.useProgram("heatmapTexture").draw(u,g.TRIANGLES,cr.disabled,Vr.disabled,f.colorModeForRenderPass(),jr.disabled,hA(f,t,0,1),null,t.id,f.rasterBoundsBuffer,f.quadTriangleIndexBuffer,f.rasterBoundsSegments,t.paint,f.transform.zoom),B.destroy(),t.heatmapFbos.delete(x))}function Ua(f,t,o){var u,g;const m=f.gl,x=m.createTexture();m.bindTexture(m.TEXTURE_2D,x),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_S,m.CLAMP_TO_EDGE),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_T,m.CLAMP_TO_EDGE),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MIN_FILTER,m.LINEAR),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MAG_FILTER,m.LINEAR);const B=(u=f.HALF_FLOAT)!==null&&u!==void 0?u:m.UNSIGNED_BYTE,E=(g=f.RGBA16F)!==null&&g!==void 0?g:m.RGBA;m.texImage2D(m.TEXTURE_2D,0,E,t,o,0,m.RGBA,B,null);const k=f.createFramebuffer(t,o,!1,!1);return k.colorAttachment.set(x),k}function en(f,t){return t.colorRampTexture||(t.colorRampTexture=new st(f,t.colorRamp,f.gl.RGBA)),t.colorRampTexture}function io(f,t,o,u,g){if(!o||!u||!u.imageAtlas)return;const m=u.imageAtlas.patternPositions;let x=m[o.to.toString()],B=m[o.from.toString()];if(!x&&B&&(x=B),!B&&x&&(B=x),!x||!B){const E=g.getPaintProperty(t);x=m[E],B=m[E]}x&&B&&f.setConstantPatternPositions(x,B)}function La(f,t,o,u,g,m,x){const B=f.context.gl,E="fill-pattern",k=o.paint.get(E),N=k&&k.constantOr(1),D=o.getCrossfadeParameters();let j,G,H,W,nt;x?(G=N&&!o.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",j=B.LINES):(G=N?"fillPattern":"fill",j=B.TRIANGLES);const ot=k.constantOr(null);for(const ct of u){const At=t.getTile(ct);if(N&&!At.patternsLoaded())continue;const gt=At.getBucket(o);if(!gt)continue;const Tt=gt.programConfigurations.get(o.id),St=f.useProgram(G,Tt),ee=f.style.map.terrain&&f.style.map.terrain.getTerrainData(ct);N&&(f.context.activeTexture.set(B.TEXTURE0),At.imageAtlasTexture.bind(B.LINEAR,B.CLAMP_TO_EDGE),Tt.updatePaintBuffers(D)),io(Tt,E,ot,At,o);const Ae=ee?ct:null,he=f.translatePosMatrix(Ae?Ae.posMatrix:ct.posMatrix,At,o.paint.get("fill-translate"),o.paint.get("fill-translate-anchor"));if(x){W=gt.indexBuffer2,nt=gt.segments2;const ge=[B.drawingBufferWidth,B.drawingBufferHeight];H=G==="fillOutlinePattern"&&N?ko(he,f,D,At,ge):uA(he,ge)}else W=gt.indexBuffer,nt=gt.segments,H=N?aa(he,f,D,At):Za(he);St.draw(f.context,j,g,f.stencilModeForClipping(ct),m,jr.disabled,H,ee,o.id,gt.layoutVertexBuffer,W,nt,o.paint,f.transform.zoom,Tt)}}function Ro(f,t,o,u,g,m,x){const B=f.context,E=B.gl,k="fill-extrusion-pattern",N=o.paint.get(k),D=N.constantOr(1),j=o.getCrossfadeParameters(),G=o.paint.get("fill-extrusion-opacity"),H=N.constantOr(null);for(const W of u){const nt=t.getTile(W),ot=nt.getBucket(o);if(!ot)continue;const ct=f.style.map.terrain&&f.style.map.terrain.getTerrainData(W),At=ot.programConfigurations.get(o.id),gt=f.useProgram(D?"fillExtrusionPattern":"fillExtrusion",At);D&&(f.context.activeTexture.set(E.TEXTURE0),nt.imageAtlasTexture.bind(E.LINEAR,E.CLAMP_TO_EDGE),At.updatePaintBuffers(j)),io(At,k,H,nt,o);const Tt=f.translatePosMatrix(W.posMatrix,nt,o.paint.get("fill-extrusion-translate"),o.paint.get("fill-extrusion-translate-anchor")),St=o.paint.get("fill-extrusion-vertical-gradient"),ee=D?cA(Tt,f,St,G,W,j,nt):Qo(Tt,f,St,G);gt.draw(B,B.gl.TRIANGLES,g,m,x,jr.backCCW,ee,ct,o.id,ot.layoutVertexBuffer,ot.indexBuffer,ot.segments,o.paint,f.transform.zoom,At,f.style.map.terrain&&ot.centroidVertexBuffer)}}function yn(f,t,o,u,g,m,x){const B=f.context,E=B.gl,k=o.fbo;if(!k)return;const N=f.useProgram("hillshade"),D=f.style.map.terrain&&f.style.map.terrain.getTerrainData(t);B.activeTexture.set(E.TEXTURE0),E.bindTexture(E.TEXTURE_2D,k.colorAttachment.get()),N.draw(B,E.TRIANGLES,g,m,x,jr.disabled,((j,G,H,W)=>{const nt=H.paint.get("hillshade-shadow-color"),ot=H.paint.get("hillshade-highlight-color"),ct=H.paint.get("hillshade-accent-color");let At=H.paint.get("hillshade-illumination-direction")*(Math.PI/180);H.paint.get("hillshade-illumination-anchor")==="viewport"&&(At-=j.transform.angle);const gt=!j.options.moving;return{u_matrix:W?W.posMatrix:j.transform.calculatePosMatrix(G.tileID.toUnwrapped(),gt),u_image:0,u_latrange:dA(0,G.tileID),u_light:[H.paint.get("hillshade-exaggeration"),At],u_shadow:nt,u_highlight:ot,u_accent:ct}})(f,o,u,D?t:null),D,u.id,f.rasterBoundsBuffer,f.quadTriangleIndexBuffer,f.rasterBoundsSegments)}function $s(f,t,o,u,g,m){const x=f.context,B=x.gl,E=t.dem;if(E&&E.data){const k=E.dim,N=E.stride,D=E.getPixels();if(x.activeTexture.set(B.TEXTURE1),x.pixelStoreUnpackPremultiplyAlpha.set(!1),t.demTexture=t.demTexture||f.getTileTexture(N),t.demTexture){const G=t.demTexture;G.update(D,{premultiply:!1}),G.bind(B.NEAREST,B.CLAMP_TO_EDGE)}else t.demTexture=new st(x,D,B.RGBA,{premultiply:!1}),t.demTexture.bind(B.NEAREST,B.CLAMP_TO_EDGE);x.activeTexture.set(B.TEXTURE0);let j=t.fbo;if(!j){const G=new st(x,{width:k,height:k,data:null},B.RGBA);G.bind(B.LINEAR,B.CLAMP_TO_EDGE),j=t.fbo=x.createFramebuffer(k,k,!0,!1),j.colorAttachment.set(G.texture)}x.bindFramebuffer.set(j.framebuffer),x.viewport.set([0,0,k,k]),f.useProgram("hillshadePrepare").draw(x,B.TRIANGLES,u,g,m,jr.disabled,((G,H)=>{const W=H.stride,nt=A.H();return A.aP(nt,0,A.X,-A.X,0,0,1),A.J(nt,nt,[0,-A.X,0]),{u_matrix:nt,u_image:1,u_dimension:[W,W],u_zoom:G.overscaledZ,u_unpack:H.getUnpackVector()}})(t.tileID,E),null,o.id,f.rasterBoundsBuffer,f.quadTriangleIndexBuffer,f.rasterBoundsSegments),t.needsHillshadePrepare=!1}}function pl(f,t,o,u,g,m){const x=u.paint.get("raster-fade-duration");if(!m&&x>0){const B=T.now(),E=(B-f.timeAdded)/x,k=t?(B-t.timeAdded)/x:-1,N=o.getSource(),D=g.coveringZoomLevel({tileSize:N.tileSize,roundZoom:N.roundZoom}),j=!t||Math.abs(t.tileID.overscaledZ-D)>Math.abs(f.tileID.overscaledZ-D),G=j&&f.refreshedUponExpiration?1:A.ac(j?E:1-k,0,1);return f.refreshedUponExpiration&&E>=1&&(f.refreshedUponExpiration=!1),t?{opacity:1,mix:1-G}:{opacity:G,mix:0}}return{opacity:1,mix:0}}const CA=new A.aM(1,0,0,1),Mr=new A.aM(0,1,0,1),ha=new A.aM(0,0,1,1),qn=new A.aM(1,0,1,1),Sn=new A.aM(0,1,1,1);function as(f,t,o,u){Fs(f,0,t+o/2,f.transform.width,o,u)}function da(f,t,o,u){Fs(f,t-o/2,0,o,f.transform.height,u)}function Fs(f,t,o,u,g,m){const x=f.context,B=x.gl;B.enable(B.SCISSOR_TEST),B.scissor(t*f.pixelRatio,o*f.pixelRatio,u*f.pixelRatio,g*f.pixelRatio),x.clear({color:m}),B.disable(B.SCISSOR_TEST)}function zo(f,t,o){const u=f.context,g=u.gl,m=o.posMatrix,x=f.useProgram("debug"),B=cr.disabled,E=Vr.disabled,k=f.colorModeForRenderPass(),N="$debug",D=f.style.map.terrain&&f.style.map.terrain.getTerrainData(o);u.activeTexture.set(g.TEXTURE0);const j=t.getTileByID(o.key).latestRawTileData,G=Math.floor((j&&j.byteLength||0)/1024),H=t.getTile(o).tileSize,W=512/Math.min(H,512)*(o.overscaledZ/f.transform.zoom)*.5;let nt=o.canonical.toString();o.overscaledZ!==o.canonical.z&&(nt+=` => ${o.overscaledZ}`),function(ot,ct){ot.initDebugOverlayCanvas();const At=ot.debugOverlayCanvas,gt=ot.context.gl,Tt=ot.debugOverlayCanvas.getContext("2d");Tt.clearRect(0,0,At.width,At.height),Tt.shadowColor="white",Tt.shadowBlur=2,Tt.lineWidth=1.5,Tt.strokeStyle="white",Tt.textBaseline="top",Tt.font="bold 36px Open Sans, sans-serif",Tt.fillText(ct,5,5),Tt.strokeText(ct,5,5),ot.debugOverlayTexture.update(At),ot.debugOverlayTexture.bind(gt.LINEAR,gt.CLAMP_TO_EDGE)}(f,`${nt} ${G}kB`),x.draw(u,g.TRIANGLES,B,E,kr.alphaBlended,jr.disabled,Mo(m,A.aM.transparent,W),null,N,f.debugBuffer,f.quadTriangleIndexBuffer,f.debugSegments),x.draw(u,g.LINE_STRIP,B,E,k,jr.disabled,Mo(m,A.aM.red),D,N,f.debugBuffer,f.tileBorderIndexBuffer,f.debugSegments)}function pa(f,t,o){const u=f.context,g=u.gl,m=f.colorModeForRenderPass(),x=new cr(g.LEQUAL,cr.ReadWrite,f.depthRangeFor3D),B=f.useProgram("terrain"),E=t.getTerrainMesh();u.bindFramebuffer.set(null),u.viewport.set([0,0,f.width,f.height]);for(const k of o){const N=f.renderToTexture.getTexture(k),D=t.getTerrainData(k.tileID);u.activeTexture.set(g.TEXTURE0),g.bindTexture(g.TEXTURE_2D,N.texture);const j=f.transform.calculatePosMatrix(k.tileID.toUnwrapped()),G=t.getMeshFrameDelta(f.transform.zoom),H=f.transform.calculateFogMatrix(k.tileID.toUnwrapped()),W=ol(j,G,H,f.style.sky,f.transform.pitch);B.draw(u,g.TRIANGLES,x,Vr.disabled,m,jr.backCCW,W,D,"terrain",E.vertexBuffer,E.indexBuffer,E.segments)}}class Si{constructor(t,o,u){this.vertexBuffer=t,this.indexBuffer=o,this.segments=u}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}class no{constructor(t,o){this.context=new Fn(t),this.transform=o,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:A.an(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=Pe.maxUnderzooming+Pe.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new al}resize(t,o,u){if(this.width=Math.floor(t*u),this.height=Math.floor(o*u),this.pixelRatio=u,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const g of this.style._order)this.style._layers[g].resize()}setup(){const t=this.context,o=new A.aX;o.emplaceBack(0,0),o.emplaceBack(A.X,0),o.emplaceBack(0,A.X),o.emplaceBack(A.X,A.X),this.tileExtentBuffer=t.createVertexBuffer(o,Rs.members),this.tileExtentSegments=A.a0.simpleSegment(0,0,4,2);const u=new A.aX;u.emplaceBack(0,0),u.emplaceBack(A.X,0),u.emplaceBack(0,A.X),u.emplaceBack(A.X,A.X),this.debugBuffer=t.createVertexBuffer(u,Rs.members),this.debugSegments=A.a0.simpleSegment(0,0,4,5);const g=new A.$;g.emplaceBack(0,0,0,0),g.emplaceBack(A.X,0,A.X,0),g.emplaceBack(0,A.X,0,A.X),g.emplaceBack(A.X,A.X,A.X,A.X),this.rasterBoundsBuffer=t.createVertexBuffer(g,Se.members),this.rasterBoundsSegments=A.a0.simpleSegment(0,0,4,2);const m=new A.aX;m.emplaceBack(0,0),m.emplaceBack(1,0),m.emplaceBack(0,1),m.emplaceBack(1,1),this.viewportBuffer=t.createVertexBuffer(m,Rs.members),this.viewportSegments=A.a0.simpleSegment(0,0,4,2);const x=new A.aZ;x.emplaceBack(0),x.emplaceBack(1),x.emplaceBack(3),x.emplaceBack(2),x.emplaceBack(0),this.tileBorderIndexBuffer=t.createIndexBuffer(x);const B=new A.aY;B.emplaceBack(0,1,2),B.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=t.createIndexBuffer(B);const E=this.context.gl;this.stencilClearMode=new Vr({func:E.ALWAYS,mask:0},0,255,E.ZERO,E.ZERO,E.ZERO)}clearStencil(){const t=this.context,o=t.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const u=A.H();A.aP(u,0,this.width,this.height,0,0,1),A.K(u,u,[o.drawingBufferWidth,o.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(t,o.TRIANGLES,cr.disabled,this.stencilClearMode,kr.disabled,jr.disabled,gn(u),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(t,o){if(this.currentStencilSource===t.source||!t.isTileClipped()||!o||!o.length)return;this.currentStencilSource=t.source;const u=this.context,g=u.gl;this.nextStencilID+o.length>256&&this.clearStencil(),u.setColorMode(kr.disabled),u.setDepthMode(cr.disabled);const m=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const x of o){const B=this._tileClippingMaskIDs[x.key]=this.nextStencilID++,E=this.style.map.terrain&&this.style.map.terrain.getTerrainData(x);m.draw(u,g.TRIANGLES,cr.disabled,new Vr({func:g.ALWAYS,mask:0},B,255,g.KEEP,g.KEEP,g.REPLACE),kr.disabled,jr.disabled,gn(x.posMatrix),E,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const t=this.nextStencilID++,o=this.context.gl;return new Vr({func:o.NOTEQUAL,mask:255},t,255,o.KEEP,o.KEEP,o.REPLACE)}stencilModeForClipping(t){const o=this.context.gl;return new Vr({func:o.EQUAL,mask:255},this._tileClippingMaskIDs[t.key],0,o.KEEP,o.KEEP,o.REPLACE)}stencilConfigForOverlap(t){const o=this.context.gl,u=t.sort((x,B)=>B.overscaledZ-x.overscaledZ),g=u[u.length-1].overscaledZ,m=u[0].overscaledZ-g+1;if(m>1){this.currentStencilSource=void 0,this.nextStencilID+m>256&&this.clearStencil();const x={};for(let B=0;B<m;B++)x[B+g]=new Vr({func:o.GEQUAL,mask:255},B+this.nextStencilID,255,o.KEEP,o.KEEP,o.REPLACE);return this.nextStencilID+=m,[x,u]}return[{[g]:Vr.disabled},u]}colorModeForRenderPass(){const t=this.context.gl;return this._showOverdrawInspector?new kr([t.CONSTANT_COLOR,t.ONE],new A.aM(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?kr.unblended:kr.alphaBlended}depthModeForSublayer(t,o,u){if(!this.opaquePassEnabledForLayer())return cr.disabled;const g=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon;return new cr(u||this.context.gl.LEQUAL,o,[g,g])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(t,o){this.style=t,this.options=o,this.lineAtlas=t.lineAtlas,this.imageManager=t.imageManager,this.glyphManager=t.glyphManager,this.symbolFadeChange=t.placement.symbolFadeChange(T.now()),this.imageManager.beginFrame();const u=this.style._order,g=this.style.sourceCaches,m={},x={},B={};for(const E in g){const k=g[E];k.used&&k.prepare(this.context),m[E]=k.getVisibleCoordinates(),x[E]=m[E].slice().reverse(),B[E]=k.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let E=0;E<u.length;E++)if(this.style._layers[u[E]].is3D()){this.opaquePassCutoff=E;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const E of u){const k=this.style._layers[E];if(!k.hasOffscreenPass()||k.isHidden(this.transform.zoom))continue;const N=x[k.source];(k.type==="custom"||N.length)&&this.renderLayer(this,g[k.source],k,N)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:o.showOverdrawInspector?A.aM.black:A.aM.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(E,k){const N=E.context,D=N.gl,j=((ot,ct,At)=>({u_sky_color:ot.properties.get("sky-color"),u_horizon_color:ot.properties.get("horizon-color"),u_horizon:(ct.height/2+ct.getHorizon())*At,u_sky_horizon_blend:ot.properties.get("sky-horizon-blend")*ct.height/2*At}))(k,E.style.map.transform,E.pixelRatio),G=new cr(D.LEQUAL,cr.ReadWrite,[0,1]),H=Vr.disabled,W=E.colorModeForRenderPass(),nt=E.useProgram("sky");if(!k.mesh){const ot=new A.aX;ot.emplaceBack(-1,-1),ot.emplaceBack(1,-1),ot.emplaceBack(1,1),ot.emplaceBack(-1,1);const ct=new A.aY;ct.emplaceBack(0,1,2),ct.emplaceBack(0,2,3),k.mesh=new Si(N.createVertexBuffer(ot,Rs.members),N.createIndexBuffer(ct),A.a0.simpleSegment(0,0,ot.length,ct.length))}nt.draw(N,D.TRIANGLES,G,H,W,jr.disabled,j,void 0,"sky",k.mesh.vertexBuffer,k.mesh.indexBuffer,k.mesh.segments)}(this,this.style.sky),this._showOverdrawInspector=o.showOverdrawInspector,this.depthRangeFor3D=[0,1-(t._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=u.length-1;this.currentLayer>=0;this.currentLayer--){const E=this.style._layers[u[this.currentLayer]],k=g[E.source],N=m[E.source];this._renderTileClippingMasks(E,N),this.renderLayer(this,k,E,N)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<u.length;this.currentLayer++){const E=this.style._layers[u[this.currentLayer]],k=g[E.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(E))continue;const N=(E.type==="symbol"?B:x)[E.source];this._renderTileClippingMasks(E,m[E.source]),this.renderLayer(this,k,E,N)}if(this.options.showTileBoundaries){const E=function(k,N){let D=null;const j=Object.values(k._layers).flatMap(nt=>nt.source&&!nt.isHidden(N)?[k.sourceCaches[nt.source]]:[]),G=j.filter(nt=>nt.getSource().type==="vector"),H=j.filter(nt=>nt.getSource().type!=="vector"),W=nt=>{(!D||D.getSource().maxzoom<nt.getSource().maxzoom)&&(D=nt)};return G.forEach(nt=>W(nt)),D||H.forEach(nt=>W(nt)),D}(this.style,this.transform.zoom);E&&function(k,N,D){for(let j=0;j<D.length;j++)zo(k,N,D[j])}(this,E,E.getVisibleCoordinates())}this.options.showPadding&&function(E){const k=E.transform.padding;as(E,E.transform.height-(k.top||0),3,CA),as(E,k.bottom||0,3,Mr),da(E,k.left||0,3,ha),da(E,E.transform.width-(k.right||0),3,qn);const N=E.transform.centerPoint;(function(D,j,G,H){Fs(D,j-1,G-10,2,20,H),Fs(D,j-10,G-1,20,2,H)})(E,N.x,E.transform.height-N.y,Sn)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(t){if(!this.style||!this.style.map||!this.style.map.terrain)return;const o=this.terrainFacilitator.matrix,u=this.transform.modelViewProjectionMatrix;let g=this.terrainFacilitator.dirty;g||(g=t?!A.a_(o,u):!A.a$(o,u)),g||(g=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime).length>0),g&&(A.b0(o,u),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(m,x){const B=m.context,E=B.gl,k=kr.unblended,N=new cr(E.LEQUAL,cr.ReadWrite,[0,1]),D=x.getTerrainMesh(),j=x.sourceCache.getRenderableTiles(),G=m.useProgram("terrainDepth");B.bindFramebuffer.set(x.getFramebuffer("depth").framebuffer),B.viewport.set([0,0,m.width/devicePixelRatio,m.height/devicePixelRatio]),B.clear({color:A.aM.transparent,depth:1});for(const H of j){const W=x.getTerrainData(H.tileID),nt={u_matrix:m.transform.calculatePosMatrix(H.tileID.toUnwrapped()),u_ele_delta:x.getMeshFrameDelta(m.transform.zoom)};G.draw(B,E.TRIANGLES,N,Vr.disabled,k,jr.backCCW,nt,W,"terrain",D.vertexBuffer,D.indexBuffer,D.segments)}B.bindFramebuffer.set(null),B.viewport.set([0,0,m.width,m.height])}(this,this.style.map.terrain),function(m,x){const B=m.context,E=B.gl,k=kr.unblended,N=new cr(E.LEQUAL,cr.ReadWrite,[0,1]),D=x.getTerrainMesh(),j=x.getCoordsTexture(),G=x.sourceCache.getRenderableTiles(),H=m.useProgram("terrainCoords");B.bindFramebuffer.set(x.getFramebuffer("coords").framebuffer),B.viewport.set([0,0,m.width/devicePixelRatio,m.height/devicePixelRatio]),B.clear({color:A.aM.transparent,depth:1}),x.coordsIndex=[];for(const W of G){const nt=x.getTerrainData(W.tileID);B.activeTexture.set(E.TEXTURE0),E.bindTexture(E.TEXTURE_2D,j.texture);const ot={u_matrix:m.transform.calculatePosMatrix(W.tileID.toUnwrapped()),u_terrain_coords_id:(255-x.coordsIndex.length)/255,u_texture:0,u_ele_delta:x.getMeshFrameDelta(m.transform.zoom)};H.draw(B,E.TRIANGLES,N,Vr.disabled,k,jr.backCCW,ot,nt,"terrain",D.vertexBuffer,D.indexBuffer,D.segments),x.coordsIndex.push(W.tileID.key)}B.bindFramebuffer.set(null),B.viewport.set([0,0,m.width,m.height])}(this,this.style.map.terrain))}renderLayer(t,o,u,g){if(!u.isHidden(this.transform.zoom)&&(u.type==="background"||u.type==="custom"||(g||[]).length))switch(this.id=u.id,u.type){case"symbol":(function(m,x,B,E,k){if(m.renderPass!=="translucent")return;const N=Vr.disabled,D=m.colorModeForRenderPass();(B._unevaluatedLayout.hasValue("text-variable-anchor")||B._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(j,G,H,W,nt,ot,ct,At,gt){const Tt=G.transform,St=bs(),ee=nt==="map",Ae=ot==="map";for(const he of j){const ge=W.getTile(he),pe=ge.getBucket(H);if(!pe||!pe.text||!pe.text.segments.get().length)continue;const de=A.ag(pe.textSizeData,Tt.zoom),ye=Ar(ge,1,G.transform.zoom),$e=si(he.posMatrix,Ae,ee,G.transform,ye),Be=H.layout.get("icon-text-fit")!=="none"&&pe.hasIconData();if(de){const Ce=Math.pow(2,Tt.zoom-ge.tileID.overscaledZ),Je=G.style.map.terrain?(pr,xr)=>G.style.map.terrain.getElevation(he,pr,xr):null,yr=St.translatePosition(Tt,ge,ct,At);ua(pe,ee,Ae,gt,Tt,$e,he.posMatrix,Ce,de,Be,St,yr,he.toUnwrapped(),Je)}}}(E,m,B,x,B.layout.get("text-rotation-alignment"),B.layout.get("text-pitch-alignment"),B.paint.get("text-translate"),B.paint.get("text-translate-anchor"),k),B.paint.get("icon-opacity").constantOr(1)!==0&&Wi(m,x,B,E,!1,B.paint.get("icon-translate"),B.paint.get("icon-translate-anchor"),B.layout.get("icon-rotation-alignment"),B.layout.get("icon-pitch-alignment"),B.layout.get("icon-keep-upright"),N,D),B.paint.get("text-opacity").constantOr(1)!==0&&Wi(m,x,B,E,!0,B.paint.get("text-translate"),B.paint.get("text-translate-anchor"),B.layout.get("text-rotation-alignment"),B.layout.get("text-pitch-alignment"),B.layout.get("text-keep-upright"),N,D),x.map.showCollisionBoxes&&(Ea(m,x,B,E,!0),Ea(m,x,B,E,!1))})(t,o,u,g,this.style.placement.variableOffsets);break;case"circle":(function(m,x,B,E){if(m.renderPass!=="translucent")return;const k=B.paint.get("circle-opacity"),N=B.paint.get("circle-stroke-width"),D=B.paint.get("circle-stroke-opacity"),j=!B.layout.get("circle-sort-key").isConstant();if(k.constantOr(1)===0&&(N.constantOr(1)===0||D.constantOr(1)===0))return;const G=m.context,H=G.gl,W=m.depthModeForSublayer(0,cr.ReadOnly),nt=Vr.disabled,ot=m.colorModeForRenderPass(),ct=[];for(let At=0;At<E.length;At++){const gt=E[At],Tt=x.getTile(gt),St=Tt.getBucket(B);if(!St)continue;const ee=St.programConfigurations.get(B.id),Ae=m.useProgram("circle",ee),he=St.layoutVertexBuffer,ge=St.indexBuffer,pe=m.style.map.terrain&&m.style.map.terrain.getTerrainData(gt),de={programConfiguration:ee,program:Ae,layoutVertexBuffer:he,indexBuffer:ge,uniformValues:Yl(m,gt,Tt,B),terrainData:pe};if(j){const ye=St.segments.get();for(const $e of ye)ct.push({segments:new A.a0([$e]),sortKey:$e.sortKey,state:de})}else ct.push({segments:St.segments,sortKey:0,state:de})}j&&ct.sort((At,gt)=>At.sortKey-gt.sortKey);for(const At of ct){const{programConfiguration:gt,program:Tt,layoutVertexBuffer:St,indexBuffer:ee,uniformValues:Ae,terrainData:he}=At.state;Tt.draw(G,H.TRIANGLES,W,nt,ot,jr.disabled,Ae,he,B.id,St,ee,At.segments,B.paint,m.transform.zoom,gt)}})(t,o,u,g);break;case"heatmap":(function(m,x,B,E){if(B.paint.get("heatmap-opacity")===0)return;const k=m.context;if(m.style.map.terrain){for(const N of E){const D=x.getTile(N);x.hasRenderableParent(N)||(m.renderPass==="offscreen"?ro(m,D,B,N):m.renderPass==="translucent"&&Cs(m,B,N))}k.viewport.set([0,0,m.width,m.height])}else m.renderPass==="offscreen"?function(N,D,j,G){const H=N.context,W=H.gl,nt=Vr.disabled,ot=new kr([W.ONE,W.ONE],A.aM.transparent,[!0,!0,!0,!0]);(function(ct,At,gt){const Tt=ct.gl;ct.activeTexture.set(Tt.TEXTURE1),ct.viewport.set([0,0,At.width/4,At.height/4]);let St=gt.heatmapFbos.get(A.aU);St?(Tt.bindTexture(Tt.TEXTURE_2D,St.colorAttachment.get()),ct.bindFramebuffer.set(St.framebuffer)):(St=Ua(ct,At.width/4,At.height/4),gt.heatmapFbos.set(A.aU,St))})(H,N,j),H.clear({color:A.aM.transparent});for(let ct=0;ct<G.length;ct++){const At=G[ct];if(D.hasRenderableParent(At))continue;const gt=D.getTile(At),Tt=gt.getBucket(j);if(!Tt)continue;const St=Tt.programConfigurations.get(j.id),ee=N.useProgram("heatmap",St),{zoom:Ae}=N.transform;ee.draw(H,W.TRIANGLES,cr.disabled,nt,ot,jr.disabled,lr(At.posMatrix,gt,Ae,j.paint.get("heatmap-intensity")),null,j.id,Tt.layoutVertexBuffer,Tt.indexBuffer,Tt.segments,j.paint,N.transform.zoom,St)}H.viewport.set([0,0,N.width,N.height])}(m,x,B,E):m.renderPass==="translucent"&&function(N,D){const j=N.context,G=j.gl;j.setColorMode(N.colorModeForRenderPass());const H=D.heatmapFbos.get(A.aU);H&&(j.activeTexture.set(G.TEXTURE0),G.bindTexture(G.TEXTURE_2D,H.colorAttachment.get()),j.activeTexture.set(G.TEXTURE1),en(j,D).bind(G.LINEAR,G.CLAMP_TO_EDGE),N.useProgram("heatmapTexture").draw(j,G.TRIANGLES,cr.disabled,Vr.disabled,N.colorModeForRenderPass(),jr.disabled,hA(N,D,0,1),null,D.id,N.viewportBuffer,N.quadTriangleIndexBuffer,N.viewportSegments,D.paint,N.transform.zoom))}(m,B)})(t,o,u,g);break;case"line":(function(m,x,B,E){if(m.renderPass!=="translucent")return;const k=B.paint.get("line-opacity"),N=B.paint.get("line-width");if(k.constantOr(1)===0||N.constantOr(1)===0)return;const D=m.depthModeForSublayer(0,cr.ReadOnly),j=m.colorModeForRenderPass(),G=B.paint.get("line-dasharray"),H=B.paint.get("line-pattern"),W=H.constantOr(1),nt=B.paint.get("line-gradient"),ot=B.getCrossfadeParameters(),ct=W?"linePattern":G?"lineSDF":nt?"lineGradient":"line",At=m.context,gt=At.gl;let Tt=!0;for(const St of E){const ee=x.getTile(St);if(W&&!ee.patternsLoaded())continue;const Ae=ee.getBucket(B);if(!Ae)continue;const he=Ae.programConfigurations.get(B.id),ge=m.context.program.get(),pe=m.useProgram(ct,he),de=Tt||pe.program!==ge,ye=m.style.map.terrain&&m.style.map.terrain.getTerrainData(St),$e=H.constantOr(null);if($e&&ee.imageAtlas){const Je=ee.imageAtlas,yr=Je.patternPositions[$e.to.toString()],pr=Je.patternPositions[$e.from.toString()];yr&&pr&&he.setConstantPatternPositions(yr,pr)}const Be=ye?St:null,Ce=W?Sa(m,ee,B,ot,Be):G?pA(m,ee,B,G,ot,Be):nt?ll(m,ee,B,Ae.lineClipsArray.length,Be):ns(m,ee,B,Be);if(W)At.activeTexture.set(gt.TEXTURE0),ee.imageAtlasTexture.bind(gt.LINEAR,gt.CLAMP_TO_EDGE),he.updatePaintBuffers(ot);else if(G&&(de||m.lineAtlas.dirty))At.activeTexture.set(gt.TEXTURE0),m.lineAtlas.bind(At);else if(nt){const Je=Ae.gradients[B.id];let yr=Je.texture;if(B.gradientVersion!==Je.version){let pr=256;if(B.stepInterpolant){const xr=x.getSource().maxzoom,Lr=St.canonical.z===xr?Math.ceil(1<<m.transform.maxZoom-St.canonical.z):1;pr=A.ac(A.aV(Ae.maxLineLength/A.X*1024*Lr),256,At.maxTextureSize)}Je.gradient=A.aW({expression:B.gradientExpression(),evaluationKey:"lineProgress",resolution:pr,image:Je.gradient||void 0,clips:Ae.lineClipsArray}),Je.texture?Je.texture.update(Je.gradient):Je.texture=new st(At,Je.gradient,gt.RGBA),Je.version=B.gradientVersion,yr=Je.texture}At.activeTexture.set(gt.TEXTURE0),yr.bind(B.stepInterpolant?gt.NEAREST:gt.LINEAR,gt.CLAMP_TO_EDGE)}pe.draw(At,gt.TRIANGLES,D,m.stencilModeForClipping(St),j,jr.disabled,Ce,ye,B.id,Ae.layoutVertexBuffer,Ae.indexBuffer,Ae.segments,B.paint,m.transform.zoom,he,Ae.layoutVertexBuffer2),Tt=!1}})(t,o,u,g);break;case"fill":(function(m,x,B,E){const k=B.paint.get("fill-color"),N=B.paint.get("fill-opacity");if(N.constantOr(1)===0)return;const D=m.colorModeForRenderPass(),j=B.paint.get("fill-pattern"),G=m.opaquePassEnabledForLayer()&&!j.constantOr(1)&&k.constantOr(A.aM.transparent).a===1&&N.constantOr(0)===1?"opaque":"translucent";if(m.renderPass===G){const H=m.depthModeForSublayer(1,m.renderPass==="opaque"?cr.ReadWrite:cr.ReadOnly);La(m,x,B,E,H,D,!1)}if(m.renderPass==="translucent"&&B.paint.get("fill-antialias")){const H=m.depthModeForSublayer(B.getPaintProperty("fill-outline-color")?2:0,cr.ReadOnly);La(m,x,B,E,H,D,!0)}})(t,o,u,g);break;case"fill-extrusion":(function(m,x,B,E){const k=B.paint.get("fill-extrusion-opacity");if(k!==0&&m.renderPass==="translucent"){const N=new cr(m.context.gl.LEQUAL,cr.ReadWrite,m.depthRangeFor3D);if(k!==1||B.paint.get("fill-extrusion-pattern").constantOr(1))Ro(m,x,B,E,N,Vr.disabled,kr.disabled),Ro(m,x,B,E,N,m.stencilModeFor3D(),m.colorModeForRenderPass());else{const D=m.colorModeForRenderPass();Ro(m,x,B,E,N,Vr.disabled,D)}}})(t,o,u,g);break;case"hillshade":(function(m,x,B,E){if(m.renderPass!=="offscreen"&&m.renderPass!=="translucent")return;const k=m.context,N=m.depthModeForSublayer(0,cr.ReadOnly),D=m.colorModeForRenderPass(),[j,G]=m.renderPass==="translucent"?m.stencilConfigForOverlap(E):[{},E];for(const H of G){const W=x.getTile(H);W.needsHillshadePrepare!==void 0&&W.needsHillshadePrepare&&m.renderPass==="offscreen"?$s(m,W,B,N,Vr.disabled,D):m.renderPass==="translucent"&&yn(m,H,W,B,N,j[H.overscaledZ],D)}k.viewport.set([0,0,m.width,m.height])})(t,o,u,g);break;case"raster":(function(m,x,B,E){if(m.renderPass!=="translucent"||B.paint.get("raster-opacity")===0||!E.length)return;const k=m.context,N=k.gl,D=x.getSource(),j=m.useProgram("raster"),G=m.colorModeForRenderPass(),[H,W]=D instanceof Re?[{},E]:m.stencilConfigForOverlap(E),nt=W[W.length-1].overscaledZ,ot=!m.options.moving;for(const ct of W){const At=m.depthModeForSublayer(ct.overscaledZ-nt,B.paint.get("raster-opacity")===1?cr.ReadWrite:cr.ReadOnly,N.LESS),gt=x.getTile(ct);gt.registerFadeDuration(B.paint.get("raster-fade-duration"));const Tt=x.findLoadedParent(ct,0),St=x.findLoadedSibling(ct),ee=pl(gt,Tt||St||null,x,B,m.transform,m.style.map.terrain);let Ae,he;const ge=B.paint.get("raster-resampling")==="nearest"?N.NEAREST:N.LINEAR;k.activeTexture.set(N.TEXTURE0),gt.texture.bind(ge,N.CLAMP_TO_EDGE,N.LINEAR_MIPMAP_NEAREST),k.activeTexture.set(N.TEXTURE1),Tt?(Tt.texture.bind(ge,N.CLAMP_TO_EDGE,N.LINEAR_MIPMAP_NEAREST),Ae=Math.pow(2,Tt.tileID.overscaledZ-gt.tileID.overscaledZ),he=[gt.tileID.canonical.x*Ae%1,gt.tileID.canonical.y*Ae%1]):gt.texture.bind(ge,N.CLAMP_TO_EDGE,N.LINEAR_MIPMAP_NEAREST),gt.texture.useMipmap&&k.extTextureFilterAnisotropic&&m.transform.pitch>20&&N.texParameterf(N.TEXTURE_2D,k.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,k.extTextureFilterAnisotropicMax);const pe=m.style.map.terrain&&m.style.map.terrain.getTerrainData(ct),de=pe?ct:null,ye=de?de.posMatrix:m.transform.calculatePosMatrix(ct.toUnwrapped(),ot),$e=Rc(ye,he||[0,0],Ae||1,ee,B);D instanceof Re?j.draw(k,N.TRIANGLES,At,Vr.disabled,G,jr.disabled,$e,pe,B.id,D.boundsBuffer,m.quadTriangleIndexBuffer,D.boundsSegments):j.draw(k,N.TRIANGLES,At,H[ct.overscaledZ],G,jr.disabled,$e,pe,B.id,m.rasterBoundsBuffer,m.quadTriangleIndexBuffer,m.rasterBoundsSegments)}})(t,o,u,g);break;case"background":(function(m,x,B,E){const k=B.paint.get("background-color"),N=B.paint.get("background-opacity");if(N===0)return;const D=m.context,j=D.gl,G=m.transform,H=G.tileSize,W=B.paint.get("background-pattern");if(m.isPatternMissing(W))return;const nt=!W&&k.a===1&&N===1&&m.opaquePassEnabledForLayer()?"opaque":"translucent";if(m.renderPass!==nt)return;const ot=Vr.disabled,ct=m.depthModeForSublayer(0,nt==="opaque"?cr.ReadWrite:cr.ReadOnly),At=m.colorModeForRenderPass(),gt=m.useProgram(W?"backgroundPattern":"background"),Tt=E||G.coveringTiles({tileSize:H,terrain:m.style.map.terrain});W&&(D.activeTexture.set(j.TEXTURE0),m.imageManager.bind(m.context));const St=B.getCrossfadeParameters();for(const ee of Tt){const Ae=E?ee.posMatrix:m.transform.calculatePosMatrix(ee.toUnwrapped()),he=W?Ia(Ae,N,m,W,{tileID:ee,tileSize:H},St):mA(Ae,N,k),ge=m.style.map.terrain&&m.style.map.terrain.getTerrainData(ee);gt.draw(D,j.TRIANGLES,ct,ot,At,jr.disabled,he,ge,B.id,m.tileExtentBuffer,m.quadTriangleIndexBuffer,m.tileExtentSegments)}})(t,0,u,g);break;case"custom":(function(m,x,B){const E=m.context,k=B.implementation;if(m.renderPass==="offscreen"){const N=k.prerender;N&&(m.setCustomLayerDefaults(),E.setColorMode(m.colorModeForRenderPass()),N.call(k,E.gl,m.transform.customLayerMatrix()),E.setDirty(),m.setBaseState())}else if(m.renderPass==="translucent"){m.setCustomLayerDefaults(),E.setColorMode(m.colorModeForRenderPass()),E.setStencilMode(Vr.disabled);const N=k.renderingMode==="3d"?new cr(m.context.gl.LEQUAL,cr.ReadWrite,m.depthRangeFor3D):m.depthModeForSublayer(0,cr.ReadOnly);E.setDepthMode(N),k.render(E.gl,m.transform.customLayerMatrix(),{farZ:m.transform.farZ,nearZ:m.transform.nearZ,fov:m.transform._fov,modelViewProjectionMatrix:m.transform.modelViewProjectionMatrix,projectionMatrix:m.transform.projectionMatrix}),E.setDirty(),m.setBaseState(),E.bindFramebuffer.set(null)}})(t,0,u)}}translatePosMatrix(t,o,u,g,m){if(!u[0]&&!u[1])return t;const x=m?g==="map"?this.transform.angle:0:g==="viewport"?-this.transform.angle:0;if(x){const k=Math.sin(x),N=Math.cos(x);u=[u[0]*N-u[1]*k,u[0]*k+u[1]*N]}const B=[m?u[0]:Ar(o,u[0],this.transform.zoom),m?u[1]:Ar(o,u[1],this.transform.zoom),0],E=new Float32Array(16);return A.J(E,t,B),E}saveTileTexture(t){const o=this._tileTextures[t.size[0]];o?o.push(t):this._tileTextures[t.size[0]]=[t]}getTileTexture(t){const o=this._tileTextures[t];return o&&o.length>0?o.pop():null}isPatternMissing(t){if(!t)return!1;if(!t.from||!t.to)return!0;const o=this.imageManager.getPattern(t.from.toString()),u=this.imageManager.getPattern(t.to.toString());return!o||!u}useProgram(t,o){this.cache=this.cache||{};const u=t+(o?o.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[u]||(this.cache[u]=new Al(this.context,zs[t],o,Do[t],this._showOverdrawInspector,this.style.map.terrain)),this.cache[u]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const t=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(t.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new st(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:t,drawingBufferHeight:o}=this.context.gl;return this.width!==t||this.height!==o}}class Ki{constructor(t,o){this.points=t,this.planes=o}static fromInvProjectionMatrix(t,o,u){const g=Math.pow(2,u),m=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(B=>{const E=1/(B=A.af([],B,t))[3]/o*g;return A.b1(B,B,[E,E,1/B[3],E])}),x=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(B=>{const E=function(j,G){var H=G[0],W=G[1],nt=G[2],ot=H*H+W*W+nt*nt;return ot>0&&(ot=1/Math.sqrt(ot)),j[0]=G[0]*ot,j[1]=G[1]*ot,j[2]=G[2]*ot,j}([],function(j,G,H){var W=G[0],nt=G[1],ot=G[2],ct=H[0],At=H[1],gt=H[2];return j[0]=nt*gt-ot*At,j[1]=ot*ct-W*gt,j[2]=W*At-nt*ct,j}([],xt([],m[B[0]],m[B[1]]),xt([],m[B[2]],m[B[1]]))),k=-((N=E)[0]*(D=m[B[1]])[0]+N[1]*D[1]+N[2]*D[2]);var N,D;return E.concat(k)});return new Ki(m,x)}}class vn{constructor(t,o){this.min=t,this.max=o,this.center=function(u,g,m){return u[0]=.5*g[0],u[1]=.5*g[1],u[2]=.5*g[2],u}([],function(u,g,m){return u[0]=g[0]+m[0],u[1]=g[1]+m[1],u[2]=g[2]+m[2],u}([],this.min,this.max))}quadrant(t){const o=[t%2==0,t<2],u=Lt(this.min),g=Lt(this.max);for(let m=0;m<o.length;m++)u[m]=o[m]?this.min[m]:this.center[m],g[m]=o[m]?this.center[m]:this.max[m];return g[2]=this.max[2],new vn(u,g)}distanceX(t){return Math.max(Math.min(this.max[0],t[0]),this.min[0])-t[0]}distanceY(t){return Math.max(Math.min(this.max[1],t[1]),this.min[1])-t[1]}intersects(t){const o=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let u=!0;for(let g=0;g<t.planes.length;g++){const m=t.planes[g];let x=0;for(let B=0;B<o.length;B++)A.b2(m,o[B])>=0&&x++;if(x===0)return 0;x!==o.length&&(u=!1)}if(u)return 2;for(let g=0;g<3;g++){let m=Number.MAX_VALUE,x=-Number.MAX_VALUE;for(let B=0;B<t.points.length;B++){const E=t.points[B][g]-this.min[g];m=Math.min(m,E),x=Math.max(x,E)}if(x<0||m>this.max[g]-this.min[g])return 0}return 1}}class Gs{constructor(t=0,o=0,u=0,g=0){if(isNaN(t)||t<0||isNaN(o)||o<0||isNaN(u)||u<0||isNaN(g)||g<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=t,this.bottom=o,this.left=u,this.right=g}interpolate(t,o,u){return o.top!=null&&t.top!=null&&(this.top=A.y.number(t.top,o.top,u)),o.bottom!=null&&t.bottom!=null&&(this.bottom=A.y.number(t.bottom,o.bottom,u)),o.left!=null&&t.left!=null&&(this.left=A.y.number(t.left,o.left,u)),o.right!=null&&t.right!=null&&(this.right=A.y.number(t.right,o.right,u)),this}getCenter(t,o){const u=A.ac((this.left+t-this.right)/2,0,t),g=A.ac((this.top+o-this.bottom)/2,0,o);return new A.P(u,g)}equals(t){return this.top===t.top&&this.bottom===t.bottom&&this.left===t.left&&this.right===t.right}clone(){return new Gs(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}const FA=85.051129;class fa{constructor(t,o,u,g,m){this.tileSize=512,this._renderWorldCopies=m===void 0||!!m,this._minZoom=t||0,this._maxZoom=o||22,this._minPitch=u??0,this._maxPitch=g??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new A.N(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Gs,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={},this.minElevationForCurrentTile=0}clone(){const t=new fa(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return t.apply(this),t}apply(t){this.tileSize=t.tileSize,this.latRange=t.latRange,this.lngRange=t.lngRange,this.width=t.width,this.height=t.height,this._center=t._center,this._elevation=t._elevation,this.minElevationForCurrentTile=t.minElevationForCurrentTile,this.zoom=t.zoom,this.angle=t.angle,this._fov=t._fov,this._pitch=t._pitch,this._unmodified=t._unmodified,this._edgeInsets=t._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(t){this._minZoom!==t&&(this._minZoom=t,this.zoom=Math.max(this.zoom,t))}get maxZoom(){return this._maxZoom}set maxZoom(t){this._maxZoom!==t&&(this._maxZoom=t,this.zoom=Math.min(this.zoom,t))}get minPitch(){return this._minPitch}set minPitch(t){this._minPitch!==t&&(this._minPitch=t,this.pitch=Math.max(this.pitch,t))}get maxPitch(){return this._maxPitch}set maxPitch(t){this._maxPitch!==t&&(this._maxPitch=t,this.pitch=Math.min(this.pitch,t))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(t){t===void 0?t=!0:t===null&&(t=!1),this._renderWorldCopies=t}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new A.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(t){const o=-A.b3(t,-180,180)*Math.PI/180;this.angle!==o&&(this._unmodified=!1,this.angle=o,this._calcMatrices(),this.rotationMatrix=function(){var u=new A.A(4);return A.A!=Float32Array&&(u[1]=0,u[2]=0),u[0]=1,u[3]=1,u}(),function(u,g,m){var x=g[0],B=g[1],E=g[2],k=g[3],N=Math.sin(m),D=Math.cos(m);u[0]=x*D+E*N,u[1]=B*D+k*N,u[2]=x*-N+E*D,u[3]=B*-N+k*D}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(t){const o=A.ac(t,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==o&&(this._unmodified=!1,this._pitch=o,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(t){t=Math.max(.01,Math.min(60,t)),this._fov!==t&&(this._unmodified=!1,this._fov=t/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(t){const o=Math.min(Math.max(t,this.minZoom),this.maxZoom);this._zoom!==o&&(this._unmodified=!1,this._zoom=o,this.tileZoom=Math.max(0,Math.floor(o)),this.scale=this.zoomScale(o),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(t){t.lat===this._center.lat&&t.lng===this._center.lng||(this._unmodified=!1,this._center=t,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(t){t!==this._elevation&&(this._elevation=t,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(t){this._edgeInsets.equals(t)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,t,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(t){return this._edgeInsets.equals(t)}interpolatePadding(t,o,u){this._unmodified=!1,this._edgeInsets.interpolate(t,o,u),this._constrain(),this._calcMatrices()}coveringZoomLevel(t){const o=(t.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/t.tileSize));return Math.max(0,o)}getVisibleUnwrappedCoordinates(t){const o=[new A.b4(0,t)];if(this._renderWorldCopies){const u=this.pointCoordinate(new A.P(0,0)),g=this.pointCoordinate(new A.P(this.width,0)),m=this.pointCoordinate(new A.P(this.width,this.height)),x=this.pointCoordinate(new A.P(0,this.height)),B=Math.floor(Math.min(u.x,g.x,m.x,x.x)),E=Math.floor(Math.max(u.x,g.x,m.x,x.x)),k=1;for(let N=B-k;N<=E+k;N++)N!==0&&o.push(new A.b4(N,t))}return o}coveringTiles(t){var o,u;let g=this.coveringZoomLevel(t);const m=g;if(t.minzoom!==void 0&&g<t.minzoom)return[];t.maxzoom!==void 0&&g>t.maxzoom&&(g=t.maxzoom);const x=this.pointCoordinate(this.getCameraPoint()),B=A.Z.fromLngLat(this.center),E=Math.pow(2,g),k=[E*x.x,E*x.y,0],N=[E*B.x,E*B.y,0],D=Ki.fromInvProjectionMatrix(this.invModelViewProjectionMatrix,this.worldSize,g);let j=t.minzoom||0;!t.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(j=g);const G=t.terrain?2/Math.min(this.tileSize,t.tileSize)*this.tileSize:3,H=At=>({aabb:new vn([At*E,0,0],[(At+1)*E,E,0]),zoom:0,x:0,y:0,wrap:At,fullyVisible:!1}),W=[],nt=[],ot=g,ct=t.reparseOverscaled?m:g;if(this._renderWorldCopies)for(let At=1;At<=3;At++)W.push(H(-At)),W.push(H(At));for(W.push(H(0));W.length>0;){const At=W.pop(),gt=At.x,Tt=At.y;let St=At.fullyVisible;if(!St){const pe=At.aabb.intersects(D);if(pe===0)continue;St=pe===2}const ee=t.terrain?k:N,Ae=At.aabb.distanceX(ee),he=At.aabb.distanceY(ee),ge=Math.max(Math.abs(Ae),Math.abs(he));if(At.zoom===ot||ge>G+(1<<ot-At.zoom)-2&&At.zoom>=j){const pe=ot-At.zoom,de=k[0]-.5-(gt<<pe),ye=k[1]-.5-(Tt<<pe);nt.push({tileID:new A.S(At.zoom===ot?ct:At.zoom,At.wrap,At.zoom,gt,Tt),distanceSq:pt([N[0]-.5-gt,N[1]-.5-Tt]),tileDistanceToCamera:Math.sqrt(de*de+ye*ye)})}else for(let pe=0;pe<4;pe++){const de=(gt<<1)+pe%2,ye=(Tt<<1)+(pe>>1),$e=At.zoom+1;let Be=At.aabb.quadrant(pe);if(t.terrain){const Ce=new A.S($e,At.wrap,$e,de,ye),Je=t.terrain.getMinMaxElevation(Ce),yr=(o=Je.minElevation)!==null&&o!==void 0?o:this.elevation,pr=(u=Je.maxElevation)!==null&&u!==void 0?u:this.elevation;Be=new vn([Be.min[0],Be.min[1],yr],[Be.max[0],Be.max[1],pr])}W.push({aabb:Be,zoom:$e,x:de,y:ye,wrap:At.wrap,fullyVisible:St})}}return nt.sort((At,gt)=>At.distanceSq-gt.distanceSq).map(At=>At.tileID)}resize(t,o){this.width=t,this.height=o,this.pixelsToGLUnits=[2/t,-2/o],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(t){return Math.pow(2,t)}scaleZoom(t){return Math.log(t)/Math.LN2}project(t){const o=A.ac(t.lat,-85.051129,FA);return new A.P(A.O(t.lng)*this.worldSize,A.Q(o)*this.worldSize)}unproject(t){return new A.Z(t.x/this.worldSize,t.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(t){const o=this.elevation,u=Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter,g=this.pointLocation(this.centerPoint,t),m=t.getElevationForLngLatZoom(g,this.tileZoom);if(!(this.elevation-m))return;const x=u+o-m,B=Math.cos(this._pitch)*this.cameraToCenterDistance/x/A.b5(1,g.lat),E=this.scaleZoom(B/this.tileSize);this._elevation=m,this._center=g,this.zoom=E}setLocationAtPoint(t,o){const u=this.pointCoordinate(o),g=this.pointCoordinate(this.centerPoint),m=this.locationCoordinate(t),x=new A.Z(m.x-(u.x-g.x),m.y-(u.y-g.y));this.center=this.coordinateLocation(x),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(t,o){return o?this.coordinatePoint(this.locationCoordinate(t),o.getElevationForLngLatZoom(t,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(t))}pointLocation(t,o){return this.coordinateLocation(this.pointCoordinate(t,o))}locationCoordinate(t){return A.Z.fromLngLat(t)}coordinateLocation(t){return t&&t.toLngLat()}pointCoordinate(t,o){if(o){const j=o.pointCoordinate(t);if(j!=null)return j}const u=[t.x,t.y,0,1],g=[t.x,t.y,1,1];A.af(u,u,this.pixelMatrixInverse),A.af(g,g,this.pixelMatrixInverse);const m=u[3],x=g[3],B=u[1]/m,E=g[1]/x,k=u[2]/m,N=g[2]/x,D=k===N?0:(0-k)/(N-k);return new A.Z(A.y.number(u[0]/m,g[0]/x,D)/this.worldSize,A.y.number(B,E,D)/this.worldSize)}coordinatePoint(t,o=0,u=this.pixelMatrix){const g=[t.x*this.worldSize,t.y*this.worldSize,o,1];return A.af(g,g,u),new A.P(g[0]/g[3],g[1]/g[3])}getBounds(){const t=Math.max(0,this.height/2-this.getHorizon());return new rt().extend(this.pointLocation(new A.P(0,t))).extend(this.pointLocation(new A.P(this.width,t))).extend(this.pointLocation(new A.P(this.width,this.height))).extend(this.pointLocation(new A.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new rt([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(t){t?(this.lngRange=[t.getWest(),t.getEast()],this.latRange=[t.getSouth(),t.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-85.051129,FA])}calculateTileMatrix(t){const o=t.canonical,u=this.worldSize/this.zoomScale(o.z),g=o.x+Math.pow(2,o.z)*t.wrap,m=A.an(new Float64Array(16));return A.J(m,m,[g*u,o.y*u,0]),A.K(m,m,[u/A.X,u/A.X,1]),m}calculatePosMatrix(t,o=!1){const u=t.key,g=o?this._alignedPosMatrixCache:this._posMatrixCache;if(g[u])return g[u];const m=this.calculateTileMatrix(t);return A.L(m,o?this.alignedModelViewProjectionMatrix:this.modelViewProjectionMatrix,m),g[u]=new Float32Array(m),g[u]}calculateFogMatrix(t){const o=t.key,u=this._fogMatrixCache;if(u[o])return u[o];const g=this.calculateTileMatrix(t);return A.L(g,this.fogMatrix,g),u[o]=new Float32Array(g),u[o]}customLayerMatrix(){return this.mercatorMatrix.slice()}getConstrained(t,o){o=A.ac(+o,this.minZoom,this.maxZoom);const u={center:new A.N(t.lng,t.lat),zoom:o};let g=this.lngRange;if(!this._renderWorldCopies&&g===null){const At=179.9999999999;g=[-At,At]}const m=this.tileSize*this.zoomScale(u.zoom);let x=0,B=m,E=0,k=m,N=0,D=0;const{x:j,y:G}=this.size;if(this.latRange){const At=this.latRange;x=A.Q(At[1])*m,B=A.Q(At[0])*m,B-x<G&&(N=G/(B-x))}g&&(E=A.b3(A.O(g[0])*m,0,m),k=A.b3(A.O(g[1])*m,0,m),k<E&&(k+=m),k-E<j&&(D=j/(k-E)));const{x:H,y:W}=this.project.call({worldSize:m},t);let nt,ot;const ct=Math.max(D||0,N||0);if(ct){const At=new A.P(D?(k+E)/2:H,N?(B+x)/2:W);return u.center=this.unproject.call({worldSize:m},At).wrap(),u.zoom+=this.scaleZoom(ct),u}if(this.latRange){const At=G/2;W-At<x&&(ot=x+At),W+At>B&&(ot=B-At)}if(g){const At=(E+k)/2;let gt=H;this._renderWorldCopies&&(gt=A.b3(H,At-m/2,At+m/2));const Tt=j/2;gt-Tt<E&&(nt=E+Tt),gt+Tt>k&&(nt=k-Tt)}if(nt!==void 0||ot!==void 0){const At=new A.P(nt??H,ot??W);u.center=this.unproject.call({worldSize:m},At).wrap()}return u}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const t=this._unmodified,{center:o,zoom:u}=this.getConstrained(this.center,this.zoom);this.center=o,this.zoom=u,this._unmodified=t,this._constraining=!1}_calcMatrices(){if(!this.height)return;const t=this.centerOffset,o=this.point.x,u=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=A.b5(1,this.center.lat)*this.worldSize;let g=A.an(new Float64Array(16));A.K(g,g,[this.width/2,-this.height/2,1]),A.J(g,g,[1,-1,0]),this.labelPlaneMatrix=g,g=A.an(new Float64Array(16)),A.K(g,g,[1,-1,1]),A.J(g,g,[-1,-1,0]),A.K(g,g,[2/this.width,2/this.height,1]),this.glCoordMatrix=g;const m=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),x=Math.min(this.elevation,this.minElevationForCurrentTile),B=m-x*this._pixelPerMeter/Math.cos(this._pitch),E=x<0?B:m,k=Math.PI/2+this._pitch,N=this._fov*(.5+t.y/this.height),D=Math.sin(N)*E/Math.sin(A.ac(Math.PI-k-N,.01,Math.PI-.01)),j=this.getHorizon(),G=2*Math.atan(j/this.cameraToCenterDistance)*(.5+t.y/(2*j)),H=Math.sin(G)*E/Math.sin(A.ac(Math.PI-k-G,.01,Math.PI-.01)),W=Math.min(D,H);this.farZ=1.01*(Math.cos(Math.PI/2-this._pitch)*W+E),this.nearZ=this.height/50,g=new Float64Array(16),A.b6(g,this._fov,this.width/this.height,this.nearZ,this.farZ),g[8]=2*-t.x/this.width,g[9]=2*t.y/this.height,this.projectionMatrix=A.ae(g),A.K(g,g,[1,-1,1]),A.J(g,g,[0,0,-this.cameraToCenterDistance]),A.b7(g,g,this._pitch),A.ad(g,g,this.angle),A.J(g,g,[-o,-u,0]),this.mercatorMatrix=A.K([],g,[this.worldSize,this.worldSize,this.worldSize]),A.K(g,g,[1,1,this._pixelPerMeter]),this.pixelMatrix=A.L(new Float64Array(16),this.labelPlaneMatrix,g),A.J(g,g,[0,0,-this.elevation]),this.modelViewProjectionMatrix=g,this.invModelViewProjectionMatrix=A.as([],g),this.fogMatrix=new Float64Array(16),A.b6(this.fogMatrix,this._fov,this.width/this.height,m,this.farZ),this.fogMatrix[8]=2*-t.x/this.width,this.fogMatrix[9]=2*t.y/this.height,A.K(this.fogMatrix,this.fogMatrix,[1,-1,1]),A.J(this.fogMatrix,this.fogMatrix,[0,0,-this.cameraToCenterDistance]),A.b7(this.fogMatrix,this.fogMatrix,this._pitch),A.ad(this.fogMatrix,this.fogMatrix,this.angle),A.J(this.fogMatrix,this.fogMatrix,[-o,-u,0]),A.K(this.fogMatrix,this.fogMatrix,[1,1,this._pixelPerMeter]),A.J(this.fogMatrix,this.fogMatrix,[0,0,-this.elevation]),this.pixelMatrix3D=A.L(new Float64Array(16),this.labelPlaneMatrix,g);const nt=this.width%2/2,ot=this.height%2/2,ct=Math.cos(this.angle),At=Math.sin(this.angle),gt=o-Math.round(o)+ct*nt+At*ot,Tt=u-Math.round(u)+ct*ot+At*nt,St=new Float64Array(g);if(A.J(St,St,[gt>.5?gt-1:gt,Tt>.5?Tt-1:Tt,0]),this.alignedModelViewProjectionMatrix=St,g=A.as(new Float64Array(16),this.pixelMatrix),!g)throw new Error("failed to invert matrix");this.pixelMatrixInverse=g,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const t=this.pointCoordinate(new A.P(0,0)),o=[t.x*this.worldSize,t.y*this.worldSize,0,1];return A.af(o,o,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const t=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new A.P(0,t))}getCameraQueryGeometry(t){const o=this.getCameraPoint();if(t.length===1)return[t[0],o];{let u=o.x,g=o.y,m=o.x,x=o.y;for(const B of t)u=Math.min(u,B.x),g=Math.min(g,B.y),m=Math.max(m,B.x),x=Math.max(x,B.y);return[new A.P(u,g),new A.P(m,g),new A.P(m,x),new A.P(u,x),new A.P(u,g)]}}lngLatToCameraDepth(t,o){const u=this.locationCoordinate(t),g=[u.x*this.worldSize,u.y*this.worldSize,o,1];return A.af(g,g,this.modelViewProjectionMatrix),g[2]/g[3]}}function qs(f,t){let o,u=!1,g=null,m=null;const x=()=>{g=null,u&&(f.apply(m,o),g=setTimeout(x,t),u=!1)};return(...B)=>(u=!0,m=this,o=B,g||x(),g)}class ga{constructor(t){this._getCurrentHash=()=>{const o=window.location.hash.replace("#","");if(this._hashName){let u;return o.split("&").map(g=>g.split("=")).forEach(g=>{g[0]===this._hashName&&(u=g)}),(u&&u[1]||"").split("/")}return o.split("/")},this._onHashChange=()=>{const o=this._getCurrentHash();if(o.length>=3&&!o.some(u=>isNaN(u))){const u=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(o[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+o[2],+o[1]],zoom:+o[0],bearing:u,pitch:+(o[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const o=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,o)},this._removeHash=()=>{const o=this._getCurrentHash();if(o.length===0)return;const u=o.join("/");let g=u;g.split("&").length>0&&(g=g.split("&")[0]),this._hashName&&(g=`${this._hashName}=${u}`);let m=window.location.hash.replace(g,"");m.startsWith("#&")?m=m.slice(0,1)+m.slice(2):m==="#"&&(m="");let x=window.location.href.replace(/(#.+)?$/,m);x=x.replace("&&","&"),window.history.replaceState(window.history.state,null,x)},this._updateHash=qs(this._updateHashUnthrottled,300),this._hashName=t&&encodeURIComponent(t)}addTo(t){return this._map=t,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(t){const o=this._map.getCenter(),u=Math.round(100*this._map.getZoom())/100,g=Math.ceil((u*Math.LN2+Math.log(512/360/.5))/Math.LN10),m=Math.pow(10,g),x=Math.round(o.lng*m)/m,B=Math.round(o.lat*m)/m,E=this._map.getBearing(),k=this._map.getPitch();let N="";if(N+=t?`/${x}/${B}/${u}`:`${u}/${B}/${x}`,(E||k)&&(N+="/"+Math.round(10*E)/10),k&&(N+=`/${Math.round(k)}`),this._hashName){const D=this._hashName;let j=!1;const G=window.location.hash.slice(1).split("&").map(H=>{const W=H.split("=")[0];return W===D?(j=!0,`${W}=${N}`):H}).filter(H=>H);return j||G.push(`${D}=${N}`),`#${G.join("&")}`}return`#${N}`}}const Xs={linearity:.3,easing:A.b8(0,0,.3,1)},Pa=A.e({deceleration:2500,maxSpeed:1400},Xs),SA=A.e({deceleration:20,maxSpeed:1400},Xs),so=A.e({deceleration:1e3,maxSpeed:360},Xs),Ws=A.e({deceleration:1e3,maxSpeed:90},Xs);class Ho{constructor(t){this._map=t,this.clear()}clear(){this._inertiaBuffer=[]}record(t){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:T.now(),settings:t})}_drainInertiaBuffer(){const t=this._inertiaBuffer,o=T.now();for(;t.length>0&&o-t[0].time>160;)t.shift()}_onMoveEnd(t){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const o={zoom:0,bearing:0,pitch:0,pan:new A.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:m}of this._inertiaBuffer)o.zoom+=m.zoomDelta||0,o.bearing+=m.bearingDelta||0,o.pitch+=m.pitchDelta||0,m.panDelta&&o.pan._add(m.panDelta),m.around&&(o.around=m.around),m.pinchAround&&(o.pinchAround=m.pinchAround);const u=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,g={};if(o.pan.mag()){const m=En(o.pan.mag(),u,A.e({},Pa,t||{}));g.offset=o.pan.mult(m.amount/o.pan.mag()),g.center=this._map.transform.center,In(g,m)}if(o.zoom){const m=En(o.zoom,u,SA);g.zoom=this._map.transform.zoom+m.amount,In(g,m)}if(o.bearing){const m=En(o.bearing,u,so);g.bearing=this._map.transform.bearing+A.ac(m.amount,-179,179),In(g,m)}if(o.pitch){const m=En(o.pitch,u,Ws);g.pitch=this._map.transform.pitch+m.amount,In(g,m)}if(g.zoom||g.bearing){const m=o.pinchAround===void 0?o.around:o.pinchAround;g.around=m?this._map.unproject(m):this._map.getCenter()}return this.clear(),A.e(g,{noMoveStart:!0})}}function In(f,t){(!f.duration||f.duration<t.duration)&&(f.duration=t.duration,f.easing=t.easing)}function En(f,t,o){const{maxSpeed:u,linearity:g,deceleration:m}=o,x=A.ac(f*g/(t/1e3),-u,u),B=Math.abs(x)/(m*g);return{easing:o.easing,duration:1e3*B,amount:x*(B/2)}}class Dr extends A.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,o,u,g={}){const m=P.mousePos(o.getCanvas(),u),x=o.unproject(m);super(t,A.e({point:m,lngLat:x,originalEvent:u},g)),this._defaultPrevented=!1,this.target=o}}class ti extends A.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,o,u){const g=t==="touchend"?u.changedTouches:u.touches,m=P.touchPos(o.getCanvasContainer(),g),x=m.map(E=>o.unproject(E)),B=m.reduce((E,k,N,D)=>E.add(k.div(D.length)),new A.P(0,0));super(t,{points:m,point:B,lngLats:x,lngLat:o.unproject(B),originalEvent:u}),this._defaultPrevented=!1}}class Mi extends A.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,o,u){super(t,{originalEvent:u}),this._defaultPrevented=!1}}class $i{constructor(t,o){this._map=t,this._clickTolerance=o.clickTolerance}reset(){delete this._mousedownPos}wheel(t){return this._firePreventable(new Mi(t.type,this._map,t))}mousedown(t,o){return this._mousedownPos=o,this._firePreventable(new Dr(t.type,this._map,t))}mouseup(t){this._map.fire(new Dr(t.type,this._map,t))}click(t,o){this._mousedownPos&&this._mousedownPos.dist(o)>=this._clickTolerance||this._map.fire(new Dr(t.type,this._map,t))}dblclick(t){return this._firePreventable(new Dr(t.type,this._map,t))}mouseover(t){this._map.fire(new Dr(t.type,this._map,t))}mouseout(t){this._map.fire(new Dr(t.type,this._map,t))}touchstart(t){return this._firePreventable(new ti(t.type,this._map,t))}touchmove(t){this._map.fire(new ti(t.type,this._map,t))}touchend(t){this._map.fire(new ti(t.type,this._map,t))}touchcancel(t){this._map.fire(new ti(t.type,this._map,t))}_firePreventable(t){if(this._map.fire(t),t.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class ai{constructor(t){this._map=t}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(t){this._map.fire(new Dr(t.type,this._map,t))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Dr("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(t){this._delayContextMenu?this._contextMenuEvent=t:this._ignoreContextMenu||this._map.fire(new Dr(t.type,this._map,t)),this._map.listens("contextmenu")&&t.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class On{constructor(t){this._map=t}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(t){return this.transform.pointLocation(A.P.convert(t),this._map.terrain)}}class rn{constructor(t,o){this._map=t,this._tr=new On(t),this._el=t.getCanvasContainer(),this._container=t.getContainer(),this._clickTolerance=o.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(t,o){this.isEnabled()&&t.shiftKey&&t.button===0&&(P.disableDrag(),this._startPos=this._lastPos=o,this._active=!0)}mousemoveWindow(t,o){if(!this._active)return;const u=o;if(this._lastPos.equals(u)||!this._box&&u.dist(this._startPos)<this._clickTolerance)return;const g=this._startPos;this._lastPos=u,this._box||(this._box=P.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",t));const m=Math.min(g.x,u.x),x=Math.max(g.x,u.x),B=Math.min(g.y,u.y),E=Math.max(g.y,u.y);P.setTransform(this._box,`translate(${m}px,${B}px)`),this._box.style.width=x-m+"px",this._box.style.height=E-B+"px"}mouseupWindow(t,o){if(!this._active||t.button!==0)return;const u=this._startPos,g=o;if(this.reset(),P.suppressClick(),u.x!==g.x||u.y!==g.y)return this._map.fire(new A.k("boxzoomend",{originalEvent:t})),{cameraAnimation:m=>m.fitScreenCoordinates(u,g,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",t)}keydown(t){this._active&&t.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",t))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(P.remove(this._box),this._box=null),P.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(t,o){return this._map.fire(new A.k(t,{originalEvent:o}))}}function ao(f,t){if(f.length!==t.length)throw new Error(`The number of touches and points are not equal - touches ${f.length}, points ${t.length}`);const o={};for(let u=0;u<f.length;u++)o[f[u].identifier]=t[u];return o}class fl{constructor(t){this.reset(),this.numTouches=t.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(t,o,u){(this.centroid||u.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=t.timeStamp),u.length===this.numTouches&&(this.centroid=function(g){const m=new A.P(0,0);for(const x of g)m._add(x);return m.div(g.length)}(o),this.touches=ao(u,o)))}touchmove(t,o,u){if(this.aborted||!this.centroid)return;const g=ao(u,o);for(const m in this.touches){const x=g[m];(!x||x.dist(this.touches[m])>30)&&(this.aborted=!0)}}touchend(t,o,u){if((!this.centroid||t.timeStamp-this.startTime>500)&&(this.aborted=!0),u.length===0){const g=!this.aborted&&this.centroid;if(this.reset(),g)return g}}}class Vo{constructor(t){this.singleTap=new fl(t),this.numTaps=t.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(t,o,u){this.singleTap.touchstart(t,o,u)}touchmove(t,o,u){this.singleTap.touchmove(t,o,u)}touchend(t,o,u){const g=this.singleTap.touchend(t,o,u);if(g){const m=t.timeStamp-this.lastTime<500,x=!this.lastTap||this.lastTap.dist(g)<30;if(m&&x||this.reset(),this.count++,this.lastTime=t.timeStamp,this.lastTap=g,this.count===this.numTaps)return this.reset(),g}}}class nn{constructor(t){this._tr=new On(t),this._zoomIn=new Vo({numTouches:1,numTaps:2}),this._zoomOut=new Vo({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(t,o,u){this._zoomIn.touchstart(t,o,u),this._zoomOut.touchstart(t,o,u)}touchmove(t,o,u){this._zoomIn.touchmove(t,o,u),this._zoomOut.touchmove(t,o,u)}touchend(t,o,u){const g=this._zoomIn.touchend(t,o,u),m=this._zoomOut.touchend(t,o,u),x=this._tr;return g?(this._active=!0,t.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:B=>B.easeTo({duration:300,zoom:x.zoom+1,around:x.unproject(g)},{originalEvent:t})}):m?(this._active=!0,t.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:B=>B.easeTo({duration:300,zoom:x.zoom-1,around:x.unproject(m)},{originalEvent:t})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Gi{constructor(t){this._enabled=!!t.enable,this._moveStateManager=t.moveStateManager,this._clickTolerance=t.clickTolerance||1,this._moveFunction=t.move,this._activateOnStart=!!t.activateOnStart,t.assignEvents(this),this.reset()}reset(t){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(t)}_move(...t){const o=this._moveFunction(...t);if(o.bearingDelta||o.pitchDelta||o.around||o.panDelta)return this._active=!0,o}dragStart(t,o){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(t)&&(this._moveStateManager.startMove(t),this._lastPoint=o.length?o[0]:o,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(t,o){if(!this.isEnabled())return;const u=this._lastPoint;if(!u)return;if(t.preventDefault(),!this._moveStateManager.isValidMoveEvent(t))return void this.reset(t);const g=o.length?o[0]:o;return!this._moved&&g.dist(u)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=g,this._move(u,g))}dragEnd(t){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(t)&&(this._moved&&P.suppressClick(),this.reset(t))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const IA={0:1,2:2};class jo{constructor(t){this._correctEvent=t.checkCorrectEvent}startMove(t){const o=P.mouseButton(t);this._eventButton=o}endMove(t){delete this._eventButton}isValidStartEvent(t){return this._correctEvent(t)}isValidMoveEvent(t){return!function(o,u){const g=IA[u];return o.buttons===void 0||(o.buttons&g)!==g}(t,this._eventButton)}isValidEndEvent(t){return P.mouseButton(t)===this._eventButton}}class ic{constructor(){this._firstTouch=void 0}_isOneFingerTouch(t){return t.targetTouches.length===1}_isSameTouchEvent(t){return t.targetTouches[0].identifier===this._firstTouch}startMove(t){this._firstTouch=t.targetTouches[0].identifier}endMove(t){delete this._firstTouch}isValidStartEvent(t){return this._isOneFingerTouch(t)}isValidMoveEvent(t){return this._isOneFingerTouch(t)&&this._isSameTouchEvent(t)}isValidEndEvent(t){return this._isOneFingerTouch(t)&&this._isSameTouchEvent(t)}}const Ko=f=>{f.mousedown=f.dragStart,f.mousemoveWindow=f.dragMove,f.mouseup=f.dragEnd,f.contextmenu=t=>{t.preventDefault()}},EA=({enable:f,clickTolerance:t,bearingDegreesPerPixelMoved:o=.8})=>{const u=new jo({checkCorrectEvent:g=>P.mouseButton(g)===0&&g.ctrlKey||P.mouseButton(g)===2});return new Gi({clickTolerance:t,move:(g,m)=>({bearingDelta:(m.x-g.x)*o}),moveStateManager:u,enable:f,assignEvents:Ko})},gl=({enable:f,clickTolerance:t,pitchDegreesPerPixelMoved:o=-.5})=>{const u=new jo({checkCorrectEvent:g=>P.mouseButton(g)===0&&g.ctrlKey||P.mouseButton(g)===2});return new Gi({clickTolerance:t,move:(g,m)=>({pitchDelta:(m.y-g.y)*o}),moveStateManager:u,enable:f,assignEvents:Ko})};class oo{constructor(t,o){this._clickTolerance=t.clickTolerance||1,this._map=o,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new A.P(0,0)}_shouldBePrevented(t){return t<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(t,o,u){return this._calculateTransform(t,o,u)}touchmove(t,o,u){if(this._active){if(!this._shouldBePrevented(u.length))return t.preventDefault(),this._calculateTransform(t,o,u);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",t)}}touchend(t,o,u){this._calculateTransform(t,o,u),this._active&&this._shouldBePrevented(u.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(t,o,u){u.length>0&&(this._active=!0);const g=ao(u,o),m=new A.P(0,0),x=new A.P(0,0);let B=0;for(const k in g){const N=g[k],D=this._touches[k];D&&(m._add(N),x._add(N.sub(D)),B++,g[k]=N)}if(this._touches=g,this._shouldBePrevented(B)||!x.mag())return;const E=x.div(B);return this._sum._add(E),this._sum.mag()<this._clickTolerance?void 0:{around:m.div(B),panDelta:E}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class TA{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(t,o,u){this._firstTwoTouches||u.length<2||(this._firstTwoTouches=[u[0].identifier,u[1].identifier],this._start([o[0],o[1]]))}touchmove(t,o,u){if(!this._firstTwoTouches)return;t.preventDefault();const[g,m]=this._firstTwoTouches,x=$o(u,o,g),B=$o(u,o,m);if(!x||!B)return;const E=this._aroundCenter?null:x.add(B).div(2);return this._move([x,B],E,t)}touchend(t,o,u){if(!this._firstTwoTouches)return;const[g,m]=this._firstTwoTouches,x=$o(u,o,g),B=$o(u,o,m);x&&B||(this._active&&P.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(t){this._enabled=!0,this._aroundCenter=!!t&&t.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function $o(f,t,o){for(let u=0;u<f.length;u++)if(f[u].identifier===o)return t[u]}function UA(f,t){return Math.log(f/t)/Math.LN2}class ml extends TA{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(t){this._startDistance=this._distance=t[0].dist(t[1])}_move(t,o){const u=this._distance;if(this._distance=t[0].dist(t[1]),this._active||!(Math.abs(UA(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:UA(this._distance,u),pinchAround:o}}}function Vc(f,t){return 180*f.angleWith(t)/Math.PI}class jc extends TA{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(t){this._startVector=this._vector=t[0].sub(t[1]),this._minDiameter=t[0].dist(t[1])}_move(t,o,u){const g=this._vector;if(this._vector=t[0].sub(t[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Vc(this._vector,g),pinchAround:o}}_isBelowThreshold(t){this._minDiameter=Math.min(this._minDiameter,t.mag());const o=25/(Math.PI*this._minDiameter)*360,u=Vc(t,this._startVector);return Math.abs(u)<o}}function yl(f){return Math.abs(f.y)>Math.abs(f.x)}class LA extends TA{constructor(t){super(),this._currentTouchCount=0,this._map=t}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(t,o,u){super.touchstart(t,o,u),this._currentTouchCount=u.length}_start(t){this._lastPoints=t,yl(t[0].sub(t[1]))&&(this._valid=!1)}_move(t,o,u){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const g=t[0].sub(this._lastPoints[0]),m=t[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(g,m,u.timeStamp),this._valid?(this._lastPoints=t,this._active=!0,{pitchDelta:(g.y+m.y)/2*-.5}):void 0}gestureBeginsVertically(t,o,u){if(this._valid!==void 0)return this._valid;const g=t.mag()>=2,m=o.mag()>=2;if(!g&&!m)return;if(!g||!m)return this._firstMove===void 0&&(this._firstMove=u),u-this._firstMove<100&&void 0;const x=t.y>0==o.y>0;return yl(t)&&yl(o)&&x}}const qu={panStep:100,bearingStep:15,pitchStep:10};class Ss{constructor(t){this._tr=new On(t);const o=qu;this._panStep=o.panStep,this._bearingStep=o.bearingStep,this._pitchStep=o.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(t){if(t.altKey||t.ctrlKey||t.metaKey)return;let o=0,u=0,g=0,m=0,x=0;switch(t.keyCode){case 61:case 107:case 171:case 187:o=1;break;case 189:case 109:case 173:o=-1;break;case 37:t.shiftKey?u=-1:(t.preventDefault(),m=-1);break;case 39:t.shiftKey?u=1:(t.preventDefault(),m=1);break;case 38:t.shiftKey?g=1:(t.preventDefault(),x=-1);break;case 40:t.shiftKey?g=-1:(t.preventDefault(),x=1);break;default:return}return this._rotationDisabled&&(u=0,g=0),{cameraAnimation:B=>{const E=this._tr;B.easeTo({duration:300,easeId:"keyboardHandler",easing:ma,zoom:o?Math.round(E.zoom)+o*(t.shiftKey?2:1):E.zoom,bearing:E.bearing+u*this._bearingStep,pitch:E.pitch+g*this._pitchStep,offset:[-m*this._panStep,-x*this._panStep],center:E.center},{originalEvent:t})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function ma(f){return f*(2-f)}const Kc=4.000244140625;class os{constructor(t,o){this._onTimeout=u=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(u)},this._map=t,this._tr=new On(t),this._triggerRenderFrame=o,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(t){this._defaultZoomRate=t}setWheelZoomRate(t){this._wheelZoomRate=t}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(t){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!t&&t.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(t){return!!this._map.cooperativeGestures.isEnabled()&&!(t.ctrlKey||this._map.cooperativeGestures.isBypassed(t))}wheel(t){if(!this.isEnabled())return;if(this._shouldBePrevented(t))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",t);let o=t.deltaMode===WheelEvent.DOM_DELTA_LINE?40*t.deltaY:t.deltaY;const u=T.now(),g=u-(this._lastWheelEventTime||0);this._lastWheelEventTime=u,o!==0&&o%Kc==0?this._type="wheel":o!==0&&Math.abs(o)<4?this._type="trackpad":g>400?(this._type=null,this._lastValue=o,this._timeout=setTimeout(this._onTimeout,40,t)):this._type||(this._type=Math.abs(g*o)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,o+=this._lastValue)),t.shiftKey&&o&&(o/=4),this._type&&(this._lastWheelEvent=t,this._delta-=o,this._active||this._start(t)),t.preventDefault()}_start(t){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const o=P.mousePos(this._map.getCanvas(),t),u=this._tr;this._around=o.y>u.transform.height/2-u.transform.getHorizon()?A.N.convert(this._aroundCenter?u.center:u.unproject(o)):A.N.convert(u.center),this._aroundPoint=u.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const t=this._tr.transform;if(this._delta!==0){const E=this._type==="wheel"&&Math.abs(this._delta)>Kc?this._wheelZoomRate:this._defaultZoomRate;let k=2/(1+Math.exp(-Math.abs(this._delta*E)));this._delta<0&&k!==0&&(k=1/k);const N=typeof this._targetZoom=="number"?t.zoomScale(this._targetZoom):t.scale;this._targetZoom=Math.min(t.maxZoom,Math.max(t.minZoom,t.scaleZoom(N*k))),this._type==="wheel"&&(this._startZoom=t.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const o=typeof this._targetZoom=="number"?this._targetZoom:t.zoom,u=this._startZoom,g=this._easing;let m,x=!1;const B=T.now()-this._lastWheelEventTime;if(this._type==="wheel"&&u&&g&&B){const E=Math.min(B/200,1),k=g(E);m=A.y.number(u,o,k),E<1?this._frameId||(this._frameId=!0):x=!0}else m=o,x=!0;return this._active=!0,x&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!x,zoomDelta:m-t.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(t){let o=A.b9;if(this._prevEase){const u=this._prevEase,g=(T.now()-u.start)/u.duration,m=u.easing(g+.01)-u.easing(g),x=.27/Math.sqrt(m*m+1e-4)*.01,B=Math.sqrt(.0729-x*x);o=A.b8(x,B,.25,1)}return this._prevEase={start:T.now(),duration:t,easing:o},o}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Qa{constructor(t,o){this._clickZoom=t,this._tapZoom=o}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class vl{constructor(t){this._tr=new On(t),this.reset()}reset(){this._active=!1}dblclick(t,o){return t.preventDefault(),{cameraAnimation:u=>{u.easeTo({duration:300,zoom:this._tr.zoom+(t.shiftKey?-1:1),around:this._tr.unproject(o)},{originalEvent:t})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class fd{constructor(){this._tap=new Vo({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(t,o,u){if(!this._swipePoint)if(this._tapTime){const g=o[0],m=t.timeStamp-this._tapTime<500,x=this._tapPoint.dist(g)<30;m&&x?u.length>0&&(this._swipePoint=g,this._swipeTouch=u[0].identifier):this.reset()}else this._tap.touchstart(t,o,u)}touchmove(t,o,u){if(this._tapTime){if(this._swipePoint){if(u[0].identifier!==this._swipeTouch)return;const g=o[0],m=g.y-this._swipePoint.y;return this._swipePoint=g,t.preventDefault(),this._active=!0,{zoomDelta:m/128}}}else this._tap.touchmove(t,o,u)}touchend(t,o,u){if(this._tapTime)this._swipePoint&&u.length===0&&this.reset();else{const g=this._tap.touchend(t,o,u);g&&(this._tapTime=t.timeStamp,this._tapPoint=g)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Xu{constructor(t,o,u){this._el=t,this._mousePan=o,this._touchPan=u}enable(t){this._inertiaOptions=t||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class $c{constructor(t,o,u){this._pitchWithRotate=t.pitchWithRotate,this._mouseRotate=o,this._mousePitch=u}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Gc{constructor(t,o,u,g){this._el=t,this._touchZoom=o,this._touchRotate=u,this._tapDragZoom=g,this._rotationDisabled=!1,this._enabled=!0}enable(t){this._touchZoom.enable(t),this._rotationDisabled||this._touchRotate.enable(t),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class PA{constructor(t,o){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=t,this._options=o,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const t=this._map.getCanvasContainer();t.classList.add("maplibregl-cooperative-gestures"),this._container=P.create("div","maplibregl-cooperative-gesture-screen",t);let o=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(o=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const u=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),g=document.createElement("div");g.className="maplibregl-desktop-message",g.textContent=o,this._container.appendChild(g);const m=document.createElement("div");m.className="maplibregl-mobile-message",m.textContent=u,this._container.appendChild(m),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(P.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(t){return t[this._bypassKey]}notifyGestureBlocked(t,o){this._enabled&&(this._map.fire(new A.k("cooperativegestureprevented",{gestureType:t,originalEvent:o})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const Is=f=>f.zoom||f.drag||f.pitch||f.rotate;class Oe extends A.k{}function Zs(f){return f.panDelta&&f.panDelta.mag()||f.zoomDelta||f.bearingDelta||f.pitchDelta}class As{constructor(t,o){this.handleWindowEvent=g=>{this.handleEvent(g,`${g.type}Window`)},this.handleEvent=(g,m)=>{if(g.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const x=g.type==="renderFrame"?void 0:g,B={needsRenderFrame:!1},E={},k={},N=g.touches,D=N?this._getMapTouches(N):void 0,j=D?P.touchPos(this._map.getCanvas(),D):P.mousePos(this._map.getCanvas(),g);for(const{handlerName:W,handler:nt,allowed:ot}of this._handlers){if(!nt.isEnabled())continue;let ct;this._blockedByActive(k,ot,W)?nt.reset():nt[m||g.type]&&(ct=nt[m||g.type](g,j,D),this.mergeHandlerResult(B,E,ct,W,x),ct&&ct.needsRenderFrame&&this._triggerRenderFrame()),(ct||nt.isActive())&&(k[W]=nt)}const G={};for(const W in this._previousActiveHandlers)k[W]||(G[W]=x);this._previousActiveHandlers=k,(Object.keys(G).length||Zs(B))&&(this._changes.push([B,E,G]),this._triggerRenderFrame()),(Object.keys(k).length||Zs(B))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:H}=B;H&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],H(this._map))},this._map=t,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Ho(t),this._bearingSnap=o.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(o);const u=this._el;this._listeners=[[u,"touchstart",{passive:!0}],[u,"touchmove",{passive:!1}],[u,"touchend",void 0],[u,"touchcancel",void 0],[u,"mousedown",void 0],[u,"mousemove",void 0],[u,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[u,"mouseover",void 0],[u,"mouseout",void 0],[u,"dblclick",void 0],[u,"click",void 0],[u,"keydown",{capture:!1}],[u,"keyup",void 0],[u,"wheel",{passive:!1}],[u,"contextmenu",void 0],[window,"blur",void 0]];for(const[g,m,x]of this._listeners)P.addEventListener(g,m,g===document?this.handleWindowEvent:this.handleEvent,x)}destroy(){for(const[t,o,u]of this._listeners)P.removeEventListener(t,o,t===document?this.handleWindowEvent:this.handleEvent,u)}_addDefaultHandlers(t){const o=this._map,u=o.getCanvasContainer();this._add("mapEvent",new $i(o,t));const g=o.boxZoom=new rn(o,t);this._add("boxZoom",g),t.interactive&&t.boxZoom&&g.enable();const m=o.cooperativeGestures=new PA(o,t.cooperativeGestures);this._add("cooperativeGestures",m),t.cooperativeGestures&&m.enable();const x=new nn(o),B=new vl(o);o.doubleClickZoom=new Qa(B,x),this._add("tapZoom",x),this._add("clickZoom",B),t.interactive&&t.doubleClickZoom&&o.doubleClickZoom.enable();const E=new fd;this._add("tapDragZoom",E);const k=o.touchPitch=new LA(o);this._add("touchPitch",k),t.interactive&&t.touchPitch&&o.touchPitch.enable(t.touchPitch);const N=EA(t),D=gl(t);o.dragRotate=new $c(t,N,D),this._add("mouseRotate",N,["mousePitch"]),this._add("mousePitch",D,["mouseRotate"]),t.interactive&&t.dragRotate&&o.dragRotate.enable();const j=(({enable:ct,clickTolerance:At})=>{const gt=new jo({checkCorrectEvent:Tt=>P.mouseButton(Tt)===0&&!Tt.ctrlKey});return new Gi({clickTolerance:At,move:(Tt,St)=>({around:St,panDelta:St.sub(Tt)}),activateOnStart:!0,moveStateManager:gt,enable:ct,assignEvents:Ko})})(t),G=new oo(t,o);o.dragPan=new Xu(u,j,G),this._add("mousePan",j),this._add("touchPan",G,["touchZoom","touchRotate"]),t.interactive&&t.dragPan&&o.dragPan.enable(t.dragPan);const H=new jc,W=new ml;o.touchZoomRotate=new Gc(u,W,H,E),this._add("touchRotate",H,["touchPan","touchZoom"]),this._add("touchZoom",W,["touchPan","touchRotate"]),t.interactive&&t.touchZoomRotate&&o.touchZoomRotate.enable(t.touchZoomRotate);const nt=o.scrollZoom=new os(o,()=>this._triggerRenderFrame());this._add("scrollZoom",nt,["mousePan"]),t.interactive&&t.scrollZoom&&o.scrollZoom.enable(t.scrollZoom);const ot=o.keyboard=new Ss(o);this._add("keyboard",ot),t.interactive&&t.keyboard&&o.keyboard.enable(),this._add("blockableMapEvent",new ai(o))}_add(t,o,u){this._handlers.push({handlerName:t,handler:o,allowed:u}),this._handlersById[t]=o}stop(t){if(!this._updatingCamera){for(const{handler:o}of this._handlers)o.reset();this._inertia.clear(),this._fireEvents({},{},t),this._changes=[]}}isActive(){for(const{handler:t}of this._handlers)if(t.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Is(this._eventsInProgress)||this.isZooming()}_blockedByActive(t,o,u){for(const g in t)if(g!==u&&(!o||o.indexOf(g)<0))return!0;return!1}_getMapTouches(t){const o=[];for(const u of t)this._el.contains(u.target)&&o.push(u);return o}mergeHandlerResult(t,o,u,g,m){if(!u)return;A.e(t,u);const x={handlerName:g,originalEvent:u.originalEvent||m};u.zoomDelta!==void 0&&(o.zoom=x),u.panDelta!==void 0&&(o.drag=x),u.pitchDelta!==void 0&&(o.pitch=x),u.bearingDelta!==void 0&&(o.rotate=x)}_applyChanges(){const t={},o={},u={};for(const[g,m,x]of this._changes)g.panDelta&&(t.panDelta=(t.panDelta||new A.P(0,0))._add(g.panDelta)),g.zoomDelta&&(t.zoomDelta=(t.zoomDelta||0)+g.zoomDelta),g.bearingDelta&&(t.bearingDelta=(t.bearingDelta||0)+g.bearingDelta),g.pitchDelta&&(t.pitchDelta=(t.pitchDelta||0)+g.pitchDelta),g.around!==void 0&&(t.around=g.around),g.pinchAround!==void 0&&(t.pinchAround=g.pinchAround),g.noInertia&&(t.noInertia=g.noInertia),A.e(o,m),A.e(u,x);this._updateMapTransform(t,o,u),this._changes=[]}_updateMapTransform(t,o,u){const g=this._map,m=g._getTransformForUpdate(),x=g.terrain;if(!(Zs(t)||x&&this._terrainMovement))return this._fireEvents(o,u,!0);let{panDelta:B,zoomDelta:E,bearingDelta:k,pitchDelta:N,around:D,pinchAround:j}=t;j!==void 0&&(D=j),g._stop(!0),D=D||g.transform.centerPoint;const G=m.pointLocation(B?D.sub(B):D);k&&(m.bearing+=k),N&&(m.pitch+=N),E&&(m.zoom+=E),x?this._terrainMovement||!o.drag&&!o.zoom?o.drag&&this._terrainMovement?m.center=m.pointLocation(m.centerPoint.sub(B)):m.setLocationAtPoint(G,D):(this._terrainMovement=!0,this._map._elevationFreeze=!0,m.setLocationAtPoint(G,D)):m.setLocationAtPoint(G,D),g._applyUpdatedTransform(m),this._map._update(),t.noInertia||this._inertia.record(t),this._fireEvents(o,u,!0)}_fireEvents(t,o,u){const g=Is(this._eventsInProgress),m=Is(t),x={};for(const D in t){const{originalEvent:j}=t[D];this._eventsInProgress[D]||(x[`${D}start`]=j),this._eventsInProgress[D]=t[D]}!g&&m&&this._fireEvent("movestart",m.originalEvent);for(const D in x)this._fireEvent(D,x[D]);m&&this._fireEvent("move",m.originalEvent);for(const D in t){const{originalEvent:j}=t[D];this._fireEvent(D,j)}const B={};let E;for(const D in this._eventsInProgress){const{handlerName:j,originalEvent:G}=this._eventsInProgress[D];this._handlersById[j].isActive()||(delete this._eventsInProgress[D],E=o[j]||G,B[`${D}end`]=E)}for(const D in B)this._fireEvent(D,B[D]);const k=Is(this._eventsInProgress),N=(g||m)&&!k;if(N&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const D=this._map._getTransformForUpdate();D.recalculateZoom(this._map.terrain),this._map._applyUpdatedTransform(D)}if(u&&N){this._updatingCamera=!0;const D=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),j=G=>G!==0&&-this._bearingSnap<G&&G<this._bearingSnap;!D||!D.essential&&T.prefersReducedMotion?(this._map.fire(new A.k("moveend",{originalEvent:E})),j(this._map.getBearing())&&this._map.resetNorth()):(j(D.bearing||this._map.getBearing())&&(D.bearing=0),D.freezeElevation=!0,this._map.easeTo(D,{originalEvent:E})),this._updatingCamera=!1}}_fireEvent(t,o){this._map.fire(new A.k(t,o?{originalEvent:o}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(t=>{delete this._frameId,this.handleEvent(new Oe("renderFrame",{timeStamp:t})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class ya extends A.E{constructor(t,o){super(),this._renderFrameCallback=()=>{const u=Math.min((T.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(u)),u<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=t,this._bearingSnap=o.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new A.N(this.transform.center.lng,this.transform.center.lat)}setCenter(t,o){return this.jumpTo({center:t},o)}panBy(t,o,u){return t=A.P.convert(t).mult(-1),this.panTo(this.transform.center,A.e({offset:t},o),u)}panTo(t,o,u){return this.easeTo(A.e({center:t},o),u)}getZoom(){return this.transform.zoom}setZoom(t,o){return this.jumpTo({zoom:t},o),this}zoomTo(t,o,u){return this.easeTo(A.e({zoom:t},o),u)}zoomIn(t,o){return this.zoomTo(this.getZoom()+1,t,o),this}zoomOut(t,o){return this.zoomTo(this.getZoom()-1,t,o),this}getBearing(){return this.transform.bearing}setBearing(t,o){return this.jumpTo({bearing:t},o),this}getPadding(){return this.transform.padding}setPadding(t,o){return this.jumpTo({padding:t},o),this}rotateTo(t,o,u){return this.easeTo(A.e({bearing:t},o),u)}resetNorth(t,o){return this.rotateTo(0,A.e({duration:1e3},t),o),this}resetNorthPitch(t,o){return this.easeTo(A.e({bearing:0,pitch:0,duration:1e3},t),o),this}snapToNorth(t,o){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(t,o):this}getPitch(){return this.transform.pitch}setPitch(t,o){return this.jumpTo({pitch:t},o),this}cameraForBounds(t,o){t=rt.convert(t).adjustAntiMeridian();const u=o&&o.bearing||0;return this._cameraForBoxAndBearing(t.getNorthWest(),t.getSouthEast(),u,o)}_cameraForBoxAndBearing(t,o,u,g){const m={top:0,bottom:0,right:0,left:0};if(typeof(g=A.e({padding:m,offset:[0,0],maxZoom:this.transform.maxZoom},g)).padding=="number"){const pe=g.padding;g.padding={top:pe,bottom:pe,right:pe,left:pe}}g.padding=A.e(m,g.padding);const x=this.transform,B=x.padding,E=new rt(t,o),k=x.project(E.getNorthWest()),N=x.project(E.getNorthEast()),D=x.project(E.getSouthEast()),j=x.project(E.getSouthWest()),G=A.ba(-u),H=k.rotate(G),W=N.rotate(G),nt=D.rotate(G),ot=j.rotate(G),ct=new A.P(Math.max(H.x,W.x,ot.x,nt.x),Math.max(H.y,W.y,ot.y,nt.y)),At=new A.P(Math.min(H.x,W.x,ot.x,nt.x),Math.min(H.y,W.y,ot.y,nt.y)),gt=ct.sub(At),Tt=(x.width-(B.left+B.right+g.padding.left+g.padding.right))/gt.x,St=(x.height-(B.top+B.bottom+g.padding.top+g.padding.bottom))/gt.y;if(St<0||Tt<0)return void A.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const ee=Math.min(x.scaleZoom(x.scale*Math.min(Tt,St)),g.maxZoom),Ae=A.P.convert(g.offset),he=new A.P((g.padding.left-g.padding.right)/2,(g.padding.top-g.padding.bottom)/2).rotate(A.ba(u)),ge=Ae.add(he).mult(x.scale/x.zoomScale(ee));return{center:x.unproject(k.add(D).div(2).sub(ge)),zoom:ee,bearing:u}}fitBounds(t,o,u){return this._fitInternal(this.cameraForBounds(t,o),o,u)}fitScreenCoordinates(t,o,u,g,m){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(A.P.convert(t)),this.transform.pointLocation(A.P.convert(o)),u,g),g,m)}_fitInternal(t,o,u){return t?(delete(o=A.e(t,o)).padding,o.linear?this.easeTo(o,u):this.flyTo(o,u)):this}jumpTo(t,o){this.stop();const u=this._getTransformForUpdate();let g=!1,m=!1,x=!1;return"zoom"in t&&u.zoom!==+t.zoom&&(g=!0,u.zoom=+t.zoom),t.center!==void 0&&(u.center=A.N.convert(t.center)),"bearing"in t&&u.bearing!==+t.bearing&&(m=!0,u.bearing=+t.bearing),"pitch"in t&&u.pitch!==+t.pitch&&(x=!0,u.pitch=+t.pitch),t.padding==null||u.isPaddingEqual(t.padding)||(u.padding=t.padding),this._applyUpdatedTransform(u),this.fire(new A.k("movestart",o)).fire(new A.k("move",o)),g&&this.fire(new A.k("zoomstart",o)).fire(new A.k("zoom",o)).fire(new A.k("zoomend",o)),m&&this.fire(new A.k("rotatestart",o)).fire(new A.k("rotate",o)).fire(new A.k("rotateend",o)),x&&this.fire(new A.k("pitchstart",o)).fire(new A.k("pitch",o)).fire(new A.k("pitchend",o)),this.fire(new A.k("moveend",o))}calculateCameraOptionsFromTo(t,o,u,g=0){const m=A.Z.fromLngLat(t,o),x=A.Z.fromLngLat(u,g),B=x.x-m.x,E=x.y-m.y,k=x.z-m.z,N=Math.hypot(B,E,k);if(N===0)throw new Error("Can't calculate camera options with same From and To");const D=Math.hypot(B,E),j=this.transform.scaleZoom(this.transform.cameraToCenterDistance/N/this.transform.tileSize),G=180*Math.atan2(B,-E)/Math.PI;let H=180*Math.acos(D/N)/Math.PI;return H=k<0?90-H:90+H,{center:x.toLngLat(),zoom:j,pitch:H,bearing:G}}easeTo(t,o){var u;this._stop(!1,t.easeId),((t=A.e({offset:[0,0],duration:500,easing:A.b9},t)).animate===!1||!t.essential&&T.prefersReducedMotion)&&(t.duration=0);const g=this._getTransformForUpdate(),m=g.zoom,x=g.bearing,B=g.pitch,E=g.padding,k="bearing"in t?this._normalizeBearing(t.bearing,x):x,N="pitch"in t?+t.pitch:B,D="padding"in t?t.padding:g.padding,j=A.P.convert(t.offset);let G=g.centerPoint.add(j);const H=g.pointLocation(G),{center:W,zoom:nt}=g.getConstrained(A.N.convert(t.center||H),(u=t.zoom)!==null&&u!==void 0?u:m);this._normalizeCenter(W,g);const ot=g.project(H),ct=g.project(W).sub(ot),At=g.zoomScale(nt-m);let gt,Tt;t.around&&(gt=A.N.convert(t.around),Tt=g.locationPoint(gt));const St={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||nt!==m,this._rotating=this._rotating||x!==k,this._pitching=this._pitching||N!==B,this._padding=!g.isPaddingEqual(D),this._easeId=t.easeId,this._prepareEase(o,t.noMoveStart,St),this.terrain&&this._prepareElevation(W),this._ease(ee=>{if(this._zooming&&(g.zoom=A.y.number(m,nt,ee)),this._rotating&&(g.bearing=A.y.number(x,k,ee)),this._pitching&&(g.pitch=A.y.number(B,N,ee)),this._padding&&(g.interpolatePadding(E,D,ee),G=g.centerPoint.add(j)),this.terrain&&!t.freezeElevation&&this._updateElevation(ee),gt)g.setLocationAtPoint(gt,Tt);else{const Ae=g.zoomScale(g.zoom-m),he=nt>m?Math.min(2,At):Math.max(.5,At),ge=Math.pow(he,1-ee),pe=g.unproject(ot.add(ct.mult(ee*ge)).mult(Ae));g.setLocationAtPoint(g.renderWorldCopies?pe.wrap():pe,G)}this._applyUpdatedTransform(g),this._fireMoveEvents(o)},ee=>{this.terrain&&t.freezeElevation&&this._finalizeElevation(),this._afterEase(o,ee)},t),this}_prepareEase(t,o,u={}){this._moving=!0,o||u.moving||this.fire(new A.k("movestart",t)),this._zooming&&!u.zooming&&this.fire(new A.k("zoomstart",t)),this._rotating&&!u.rotating&&this.fire(new A.k("rotatestart",t)),this._pitching&&!u.pitching&&this.fire(new A.k("pitchstart",t))}_prepareElevation(t){this._elevationCenter=t,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(t,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(t){this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const o=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(t<1&&o!==this._elevationTarget){const u=this._elevationTarget-this._elevationStart;this._elevationStart+=t*(u-(o-(u*t+this._elevationStart))/(1-t)),this._elevationTarget=o}this.transform.elevation=A.y.number(this._elevationStart,this._elevationTarget,t)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(t){const o=t.getCameraPosition(),u=this.terrain.getElevationForLngLatZoom(o.lngLat,t.zoom);if(o.altitude<u){const g=this.calculateCameraOptionsFromTo(o.lngLat,u,t.center,t.elevation);return{pitch:g.pitch,zoom:g.zoom}}return{}}_applyUpdatedTransform(t){const o=[];if(this.terrain&&o.push(g=>this._elevateCameraIfInsideTerrain(g)),this.transformCameraUpdate&&o.push(g=>this.transformCameraUpdate(g)),!o.length)return;const u=t.clone();for(const g of o){const m=u.clone(),{center:x,zoom:B,pitch:E,bearing:k,elevation:N}=g(m);x&&(m.center=x),B!==void 0&&(m.zoom=B),E!==void 0&&(m.pitch=E),k!==void 0&&(m.bearing=k),N!==void 0&&(m.elevation=N),u.apply(m)}this.transform.apply(u)}_fireMoveEvents(t){this.fire(new A.k("move",t)),this._zooming&&this.fire(new A.k("zoom",t)),this._rotating&&this.fire(new A.k("rotate",t)),this._pitching&&this.fire(new A.k("pitch",t))}_afterEase(t,o){if(this._easeId&&o&&this._easeId===o)return;delete this._easeId;const u=this._zooming,g=this._rotating,m=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,u&&this.fire(new A.k("zoomend",t)),g&&this.fire(new A.k("rotateend",t)),m&&this.fire(new A.k("pitchend",t)),this.fire(new A.k("moveend",t))}flyTo(t,o){var u;if(!t.essential&&T.prefersReducedMotion){const Ce=A.M(t,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Ce,o)}this.stop(),t=A.e({offset:[0,0],speed:1.2,curve:1.42,easing:A.b9},t);const g=this._getTransformForUpdate(),m=g.zoom,x=g.bearing,B=g.pitch,E=g.padding,k="bearing"in t?this._normalizeBearing(t.bearing,x):x,N="pitch"in t?+t.pitch:B,D="padding"in t?t.padding:g.padding,j=A.P.convert(t.offset);let G=g.centerPoint.add(j);const H=g.pointLocation(G),{center:W,zoom:nt}=g.getConstrained(A.N.convert(t.center||H),(u=t.zoom)!==null&&u!==void 0?u:m);this._normalizeCenter(W,g);const ot=g.zoomScale(nt-m),ct=g.project(H),At=g.project(W).sub(ct);let gt=t.curve;const Tt=Math.max(g.width,g.height),St=Tt/ot,ee=At.mag();if("minZoom"in t){const Ce=A.ac(Math.min(t.minZoom,m,nt),g.minZoom,g.maxZoom),Je=Tt/g.zoomScale(Ce-m);gt=Math.sqrt(Je/ee*2)}const Ae=gt*gt;function he(Ce){const Je=(St*St-Tt*Tt+(Ce?-1:1)*Ae*Ae*ee*ee)/(2*(Ce?St:Tt)*Ae*ee);return Math.log(Math.sqrt(Je*Je+1)-Je)}function ge(Ce){return(Math.exp(Ce)-Math.exp(-Ce))/2}function pe(Ce){return(Math.exp(Ce)+Math.exp(-Ce))/2}const de=he(!1);let ye=function(Ce){return pe(de)/pe(de+gt*Ce)},$e=function(Ce){return Tt*((pe(de)*(ge(Je=de+gt*Ce)/pe(Je))-ge(de))/Ae)/ee;var Je},Be=(he(!0)-de)/gt;if(Math.abs(ee)<1e-6||!isFinite(Be)){if(Math.abs(Tt-St)<1e-6)return this.easeTo(t,o);const Ce=St<Tt?-1:1;Be=Math.abs(Math.log(St/Tt))/gt,$e=()=>0,ye=Je=>Math.exp(Ce*gt*Je)}return t.duration="duration"in t?+t.duration:1e3*Be/("screenSpeed"in t?+t.screenSpeed/gt:+t.speed),t.maxDuration&&t.duration>t.maxDuration&&(t.duration=0),this._zooming=!0,this._rotating=x!==k,this._pitching=N!==B,this._padding=!g.isPaddingEqual(D),this._prepareEase(o,!1),this.terrain&&this._prepareElevation(W),this._ease(Ce=>{const Je=Ce*Be,yr=1/ye(Je);g.zoom=Ce===1?nt:m+g.scaleZoom(yr),this._rotating&&(g.bearing=A.y.number(x,k,Ce)),this._pitching&&(g.pitch=A.y.number(B,N,Ce)),this._padding&&(g.interpolatePadding(E,D,Ce),G=g.centerPoint.add(j)),this.terrain&&!t.freezeElevation&&this._updateElevation(Ce);const pr=Ce===1?W:g.unproject(ct.add(At.mult($e(Je))).mult(yr));g.setLocationAtPoint(g.renderWorldCopies?pr.wrap():pr,G),this._applyUpdatedTransform(g),this._fireMoveEvents(o)},()=>{this.terrain&&t.freezeElevation&&this._finalizeElevation(),this._afterEase(o)},t),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(t,o){var u;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const g=this._onEaseEnd;delete this._onEaseEnd,g.call(this,o)}return t||(u=this.handlers)===null||u===void 0||u.stop(!1),this}_ease(t,o,u){u.animate===!1||u.duration===0?(t(1),o()):(this._easeStart=T.now(),this._easeOptions=u,this._onEaseFrame=t,this._onEaseEnd=o,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(t,o){t=A.b3(t,-180,180);const u=Math.abs(t-o);return Math.abs(t-360-o)<u&&(t-=360),Math.abs(t+360-o)<u&&(t+=360),t}_normalizeCenter(t,o){if(!o.renderWorldCopies||o.lngRange)return;const u=t.lng-o.center.lng;t.lng+=u>180?-360:u<-180?360:0}queryTerrainElevation(t){return this.terrain?this.terrain.getElevationForLngLatZoom(A.N.convert(t),this.transform.tileZoom)-this.transform.elevation:null}}const QA={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class Go{constructor(t=QA){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=o=>{!o||o.sourceDataType!=="metadata"&&o.sourceDataType!=="visibility"&&o.dataType!=="style"&&o.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=t}getDefaultPosition(){return"bottom-right"}onAdd(t){return this._map=t,this._compact=this.options.compact,this._container=P.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=P.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=P.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){P.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(t,o){const u=this._map._getUIString(`AttributionControl.${o}`);t.title=u,t.setAttribute("aria-label",u)}_updateAttributions(){if(!this._map.style)return;let t=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?t=t.concat(this.options.customAttribution.map(g=>typeof g!="string"?"":g)):typeof this.options.customAttribution=="string"&&t.push(this.options.customAttribution)),this._map.style.stylesheet){const g=this._map.style.stylesheet;this.styleOwner=g.owner,this.styleId=g.id}const o=this._map.style.sourceCaches;for(const g in o){const m=o[g];if(m.used||m.usedForTerrain){const x=m.getSource();x.attribution&&t.indexOf(x.attribution)<0&&t.push(x.attribution)}}t=t.filter(g=>String(g).trim()),t.sort((g,m)=>g.length-m.length),t=t.filter((g,m)=>{for(let x=m+1;x<t.length;x++)if(t[x].indexOf(g)>=0)return!1;return!0});const u=t.join(" | ");u!==this._attribHTML&&(this._attribHTML=u,t.length?(this._innerContainer.innerHTML=u,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class va{constructor(t={}){this._updateCompact=()=>{const o=this._container.children;if(o.length){const u=o[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&u.classList.add("maplibregl-compact"):u.classList.remove("maplibregl-compact")}},this.options=t}getDefaultPosition(){return"bottom-left"}onAdd(t){this._map=t,this._compact=this.options&&this.options.compact,this._container=P.create("div","maplibregl-ctrl");const o=P.create("a","maplibregl-ctrl-logo");return o.target="_blank",o.rel="noopener nofollow",o.href="https://maplibre.org/",o.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),o.setAttribute("rel","noopener nofollow"),this._container.appendChild(o),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){P.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Cr{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(t){const o=++this._id;return this._queue.push({callback:t,id:o,cancelled:!1}),o}remove(t){const o=this._currentlyRunning,u=o?this._queue.concat(o):this._queue;for(const g of u)if(g.id===t)return void(g.cancelled=!0)}run(t=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const o=this._currentlyRunning=this._queue;this._queue=[];for(const u of o)if(!u.cancelled&&(u.callback(t),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var qc=A.Y([{name:"a_pos3d",type:"Int16",components:3}]);class gd extends A.E{constructor(t){super(),this.sourceCache=t,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,t.usedForTerrain=!0,t.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(t,o){this.sourceCache.update(t,o),this._renderableTilesKeys=[];const u={};for(const g of t.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:o}))u[g.key]=!0,this._renderableTilesKeys.push(g.key),this._tiles[g.key]||(g.posMatrix=new Float64Array(16),A.aP(g.posMatrix,0,A.X,0,A.X,0,1),this._tiles[g.key]=new Zr(g,this.tileSize));for(const g in this._tiles)u[g]||delete this._tiles[g]}freeRtt(t){for(const o in this._tiles){const u=this._tiles[o];(!t||u.tileID.equals(t)||u.tileID.isChildOf(t)||t.isChildOf(u.tileID))&&(u.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(t=>this.getTileByID(t))}getTileByID(t){return this._tiles[t]}getTerrainCoords(t){const o={};for(const u of this._renderableTilesKeys){const g=this._tiles[u].tileID;if(g.canonical.equals(t.canonical)){const m=t.clone();m.posMatrix=new Float64Array(16),A.aP(m.posMatrix,0,A.X,0,A.X,0,1),o[u]=m}else if(g.canonical.isChildOf(t.canonical)){const m=t.clone();m.posMatrix=new Float64Array(16);const x=g.canonical.z-t.canonical.z,B=g.canonical.x-(g.canonical.x>>x<<x),E=g.canonical.y-(g.canonical.y>>x<<x),k=A.X>>x;A.aP(m.posMatrix,0,k,0,k,0,1),A.J(m.posMatrix,m.posMatrix,[-B*k,-E*k,0]),o[u]=m}else if(t.canonical.isChildOf(g.canonical)){const m=t.clone();m.posMatrix=new Float64Array(16);const x=t.canonical.z-g.canonical.z,B=t.canonical.x-(t.canonical.x>>x<<x),E=t.canonical.y-(t.canonical.y>>x<<x),k=A.X>>x;A.aP(m.posMatrix,0,A.X,0,A.X,0,1),A.J(m.posMatrix,m.posMatrix,[B*k,E*k,0]),A.K(m.posMatrix,m.posMatrix,[1/2**x,1/2**x,0]),o[u]=m}}return o}getSourceTile(t,o){const u=this.sourceCache._source;let g=t.overscaledZ-this.deltaZoom;if(g>u.maxzoom&&(g=u.maxzoom),g<u.minzoom)return null;this._sourceTileCache[t.key]||(this._sourceTileCache[t.key]=t.scaledTo(g).key);let m=this.sourceCache.getTileByID(this._sourceTileCache[t.key]);if((!m||!m.dem)&&o)for(;g>=u.minzoom&&(!m||!m.dem);)m=this.sourceCache.getTileByID(t.scaledTo(g--).key);return m}tilesAfterTime(t=Date.now()){return Object.values(this._tiles).filter(o=>o.timeAdded>=t)}}class nc{constructor(t,o,u){this.painter=t,this.sourceCache=new gd(o),this.options=u,this.exaggeration=typeof u.exaggeration=="number"?u.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(t,o,u,g=A.X){var m;if(!(o>=0&&o<g&&u>=0&&u<g))return 0;const x=this.getTerrainData(t),B=(m=x.tile)===null||m===void 0?void 0:m.dem;if(!B)return 0;const E=function(H,W,nt){var ot=W[0],ct=W[1];return H[0]=nt[0]*ot+nt[4]*ct+nt[12],H[1]=nt[1]*ot+nt[5]*ct+nt[13],H}([],[o/g*A.X,u/g*A.X],x.u_terrain_matrix),k=[E[0]*B.dim,E[1]*B.dim],N=Math.floor(k[0]),D=Math.floor(k[1]),j=k[0]-N,G=k[1]-D;return B.get(N,D)*(1-j)*(1-G)+B.get(N+1,D)*j*(1-G)+B.get(N,D+1)*(1-j)*G+B.get(N+1,D+1)*j*G}getElevationForLngLatZoom(t,o){if(!A.bb(o,t.wrap()))return 0;const{tileID:u,mercatorX:g,mercatorY:m}=this._getOverscaledTileIDFromLngLatZoom(t,o);return this.getElevation(u,g%A.X,m%A.X,A.X)}getElevation(t,o,u,g=A.X){return this.getDEMElevation(t,o,u,g)*this.exaggeration}getTerrainData(t){if(!this._emptyDemTexture){const g=this.painter.context,m=new A.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new st(g,m,g.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new st(g,new A.R({width:1,height:1}),g.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(g.gl.NEAREST,g.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=A.an([])}const o=this.sourceCache.getSourceTile(t,!0);if(o&&o.dem&&(!o.demTexture||o.needsTerrainPrepare)){const g=this.painter.context;o.demTexture=this.painter.getTileTexture(o.dem.stride),o.demTexture?o.demTexture.update(o.dem.getPixels(),{premultiply:!1}):o.demTexture=new st(g,o.dem.getPixels(),g.gl.RGBA,{premultiply:!1}),o.demTexture.bind(g.gl.NEAREST,g.gl.CLAMP_TO_EDGE),o.needsTerrainPrepare=!1}const u=o&&o+o.tileID.key+t.key;if(u&&!this._demMatrixCache[u]){const g=this.sourceCache.sourceCache._source.maxzoom;let m=t.canonical.z-o.tileID.canonical.z;t.overscaledZ>t.canonical.z&&(t.canonical.z>=g?m=t.canonical.z-g:A.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const x=t.canonical.x-(t.canonical.x>>m<<m),B=t.canonical.y-(t.canonical.y>>m<<m),E=A.bc(new Float64Array(16),[1/(A.X<<m),1/(A.X<<m),0]);A.J(E,E,[x*A.X,B*A.X,0]),this._demMatrixCache[t.key]={matrix:E,coord:t}}return{u_depth:2,u_terrain:3,u_terrain_dim:o&&o.dem&&o.dem.dim||1,u_terrain_matrix:u?this._demMatrixCache[t.key].matrix:this._emptyDemMatrix,u_terrain_unpack:o&&o.dem&&o.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(o&&o.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:o}}getFramebuffer(t){const o=this.painter,u=o.width/devicePixelRatio,g=o.height/devicePixelRatio;return!this._fbo||this._fbo.width===u&&this._fbo.height===g||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new st(o.context,{width:u,height:g,data:null},o.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(o.context.gl.NEAREST,o.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new st(o.context,{width:u,height:g,data:null},o.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(o.context.gl.NEAREST,o.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=o.context.createFramebuffer(u,g,!0,!1),this._fbo.depthAttachment.set(o.context.createRenderbuffer(o.context.gl.DEPTH_COMPONENT16,u,g))),this._fbo.colorAttachment.set(t==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const t=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const o=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let m=0,x=0;m<this._coordsTextureSize;m++)for(let B=0;B<this._coordsTextureSize;B++,x+=4)o[x+0]=255&B,o[x+1]=255&m,o[x+2]=B>>8<<4|m>>8,o[x+3]=0;const u=new A.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(o.buffer)),g=new st(t,u,t.gl.RGBA,{premultiply:!1});return g.bind(t.gl.NEAREST,t.gl.CLAMP_TO_EDGE),this._coordsTexture=g,g}pointCoordinate(t){this.painter.maybeDrawDepthAndCoords(!0);const o=new Uint8Array(4),u=this.painter.context,g=u.gl,m=Math.round(t.x*this.painter.pixelRatio/devicePixelRatio),x=Math.round(t.y*this.painter.pixelRatio/devicePixelRatio),B=Math.round(this.painter.height/devicePixelRatio);u.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),g.readPixels(m,B-x-1,1,1,g.RGBA,g.UNSIGNED_BYTE,o),u.bindFramebuffer.set(null);const E=o[0]+(o[2]>>4<<8),k=o[1]+((15&o[2])<<8),N=this.coordsIndex[255-o[3]],D=N&&this.sourceCache.getTileByID(N);if(!D)return null;const j=this._coordsTextureSize,G=(1<<D.tileID.canonical.z)*j;return new A.Z((D.tileID.canonical.x*j+E)/G+D.tileID.wrap,(D.tileID.canonical.y*j+k)/G,this.getElevation(D.tileID,E,k,j))}depthAtPoint(t){const o=new Uint8Array(4),u=this.painter.context,g=u.gl;return u.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),g.readPixels(t.x,this.painter.height/devicePixelRatio-t.y-1,1,1,g.RGBA,g.UNSIGNED_BYTE,o),u.bindFramebuffer.set(null),(o[0]/16777216+o[1]/65536+o[2]/256+o[3])/256}getTerrainMesh(){if(this._mesh)return this._mesh;const t=this.painter.context,o=new A.bd,u=new A.aY,g=this.meshSize,m=A.X/g,x=g*g;for(let D=0;D<=g;D++)for(let j=0;j<=g;j++)o.emplaceBack(j*m,D*m,0);for(let D=0;D<x;D+=g+1)for(let j=0;j<g;j++)u.emplaceBack(j+D,g+j+D+1,g+j+D+2),u.emplaceBack(j+D,g+j+D+2,j+D+1);const B=o.length,E=B+2*(g+1);for(const D of[0,1])for(let j=0;j<=g;j++)for(const G of[0,1])o.emplaceBack(j*m,D*A.X,G);for(let D=0;D<2*g;D+=2)u.emplaceBack(E+D,E+D+1,E+D+3),u.emplaceBack(E+D,E+D+3,E+D+2),u.emplaceBack(B+D,B+D+3,B+D+1),u.emplaceBack(B+D,B+D+2,B+D+3);const k=o.length,N=k+2*(g+1);for(const D of[0,1])for(let j=0;j<=g;j++)for(const G of[0,1])o.emplaceBack(D*A.X,j*m,G);for(let D=0;D<2*g;D+=2)u.emplaceBack(k+D,k+D+1,k+D+3),u.emplaceBack(k+D,k+D+3,k+D+2),u.emplaceBack(N+D,N+D+3,N+D+1),u.emplaceBack(N+D,N+D+2,N+D+3);return this._mesh=new Si(t.createVertexBuffer(o,qc.members),t.createIndexBuffer(u),A.a0.simpleSegment(0,0,o.length,u.length)),this._mesh}getMeshFrameDelta(t){return 2*Math.PI*A.be/Math.pow(2,t)/5}getMinTileElevationForLngLatZoom(t,o){var u;const{tileID:g}=this._getOverscaledTileIDFromLngLatZoom(t,o);return(u=this.getMinMaxElevation(g).minElevation)!==null&&u!==void 0?u:0}getMinMaxElevation(t){const o=this.getTerrainData(t).tile,u={minElevation:null,maxElevation:null};return o&&o.dem&&(u.minElevation=o.dem.min*this.exaggeration,u.maxElevation=o.dem.max*this.exaggeration),u}_getOverscaledTileIDFromLngLatZoom(t,o){const u=A.Z.fromLngLat(t.wrap()),g=(1<<o)*A.X,m=u.x*g,x=u.y*g,B=Math.floor(m/A.X),E=Math.floor(x/A.X);return{tileID:new A.S(o,0,o,B,E),mercatorX:m,mercatorY:x}}}class Wu{constructor(t,o,u){this._context=t,this._size=o,this._tileSize=u,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const t of this._objects)t.texture.destroy(),t.fbo.destroy()}_createObject(t){const o=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),u=new st(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return u.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),o.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),o.colorAttachment.set(u.texture),{id:t,fbo:o,texture:u,stamp:-1,inUse:!1}}getObjectForId(t){return this._objects[t]}useObject(t){t.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(o=>t.id!==o),this._recentlyUsed.push(t.id)}stampObject(t){t.stamp=++this._stamp}getOrCreateFreeObject(){for(const o of this._recentlyUsed)if(!this._objects[o].inUse)return this._objects[o];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const t=this._createObject(this._objects.length);return this._objects.push(t),t}freeObject(t){t.inUse=!1}freeAllObjects(){for(const t of this._objects)this.freeObject(t)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(t=>!t.inUse)===!1}}const qo={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class Xc{constructor(t,o){this.painter=t,this.terrain=o,this.pool=new Wu(t.context,30,o.sourceCache.tileSize*o.qualityFactor)}destruct(){this.pool.destruct()}getTexture(t){return this.pool.getObjectForId(t.rtt[this._stacks.length-1].id).texture}prepareForRender(t,o){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=t._order.filter(u=>!t._layers[u].isHidden(o)),this._coordsDescendingInv={};for(const u in t.sourceCaches){this._coordsDescendingInv[u]={};const g=t.sourceCaches[u].getVisibleCoordinates();for(const m of g){const x=this.terrain.sourceCache.getTerrainCoords(m);for(const B in x)this._coordsDescendingInv[u][B]||(this._coordsDescendingInv[u][B]=[]),this._coordsDescendingInv[u][B].push(x[B])}}this._coordsDescendingInvStr={};for(const u of t._order){const g=t._layers[u],m=g.source;if(qo[g.type]&&!this._coordsDescendingInvStr[m]){this._coordsDescendingInvStr[m]={};for(const x in this._coordsDescendingInv[m])this._coordsDescendingInvStr[m][x]=this._coordsDescendingInv[m][x].map(B=>B.key).sort().join()}}for(const u of this._renderableTiles)for(const g in this._coordsDescendingInvStr){const m=this._coordsDescendingInvStr[g][u.tileID.key];m&&m!==u.rttCoords[g]&&(u.rtt=[])}}renderLayer(t){if(t.isHidden(this.painter.transform.zoom))return!1;const o=t.type,u=this.painter,g=this._renderableLayerIds[this._renderableLayerIds.length-1]===t.id;if(qo[o]&&(this._prevType&&qo[this._prevType]||this._stacks.push([]),this._prevType=o,this._stacks[this._stacks.length-1].push(t.id),!g))return!0;if(qo[this._prevType]||qo[o]&&g){this._prevType=o;const m=this._stacks.length-1,x=this._stacks[m]||[];for(const B of this._renderableTiles){if(this.pool.isFull()&&(pa(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(B),B.rtt[m]){const k=this.pool.getObjectForId(B.rtt[m].id);if(k.stamp===B.rtt[m].stamp){this.pool.useObject(k);continue}}const E=this.pool.getOrCreateFreeObject();this.pool.useObject(E),this.pool.stampObject(E),B.rtt[m]={id:E.id,stamp:E.stamp},u.context.bindFramebuffer.set(E.fbo.framebuffer),u.context.clear({color:A.aM.transparent,stencil:0}),u.currentStencilSource=void 0;for(let k=0;k<x.length;k++){const N=u.style._layers[x[k]],D=N.source?this._coordsDescendingInv[N.source][B.tileID.key]:[B.tileID];u.context.viewport.set([0,0,E.fbo.width,E.fbo.height]),u._renderTileClippingMasks(N,D),u.renderLayer(u,u.style.sourceCaches[N.source],N,D),N.source&&(B.rttCoords[N.source]=this._coordsDescendingInvStr[N.source][B.tileID.key])}}return pa(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),qo[o]}return!1}}const Wc={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use ⌘ + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},wl=v,sc={hash:!1,interactive:!0,bearingSnap:7,attributionControl:QA,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,refreshExpiredTiles:!0,scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],zoom:0,bearing:0,pitch:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:A.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0},Xo=f=>{f.touchstart=f.dragStart,f.touchmoveWindow=f.dragMove,f.touchend=f.dragEnd},Zc={showCompass:!0,showZoom:!0,visualizePitch:!1};class Zu{constructor(t,o,u=!1){this.mousedown=x=>{this.startMouse(A.e({},x,{ctrlKey:!0,preventDefault:()=>x.preventDefault()}),P.mousePos(this.element,x)),P.addEventListener(window,"mousemove",this.mousemove),P.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=x=>{this.moveMouse(x,P.mousePos(this.element,x))},this.mouseup=x=>{this.mouseRotate.dragEnd(x),this.mousePitch&&this.mousePitch.dragEnd(x),this.offTemp()},this.touchstart=x=>{x.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=P.touchPos(this.element,x.targetTouches)[0],this.startTouch(x,this._startPos),P.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),P.addEventListener(window,"touchend",this.touchend))},this.touchmove=x=>{x.targetTouches.length!==1?this.reset():(this._lastPos=P.touchPos(this.element,x.targetTouches)[0],this.moveTouch(x,this._lastPos))},this.touchend=x=>{x.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const g=t.dragRotate._mouseRotate.getClickTolerance(),m=t.dragRotate._mousePitch.getClickTolerance();this.element=o,this.mouseRotate=EA({clickTolerance:g,enable:!0}),this.touchRotate=(({enable:x,clickTolerance:B,bearingDegreesPerPixelMoved:E=.8})=>{const k=new ic;return new Gi({clickTolerance:B,move:(N,D)=>({bearingDelta:(D.x-N.x)*E}),moveStateManager:k,enable:x,assignEvents:Xo})})({clickTolerance:g,enable:!0}),this.map=t,u&&(this.mousePitch=gl({clickTolerance:m,enable:!0}),this.touchPitch=(({enable:x,clickTolerance:B,pitchDegreesPerPixelMoved:E=-.5})=>{const k=new ic;return new Gi({clickTolerance:B,move:(N,D)=>({pitchDelta:(D.y-N.y)*E}),moveStateManager:k,enable:x,assignEvents:Xo})})({clickTolerance:m,enable:!0})),P.addEventListener(o,"mousedown",this.mousedown),P.addEventListener(o,"touchstart",this.touchstart,{passive:!1}),P.addEventListener(o,"touchcancel",this.reset)}startMouse(t,o){this.mouseRotate.dragStart(t,o),this.mousePitch&&this.mousePitch.dragStart(t,o),P.disableDrag()}startTouch(t,o){this.touchRotate.dragStart(t,o),this.touchPitch&&this.touchPitch.dragStart(t,o),P.disableDrag()}moveMouse(t,o){const u=this.map,{bearingDelta:g}=this.mouseRotate.dragMove(t,o)||{};if(g&&u.setBearing(u.getBearing()+g),this.mousePitch){const{pitchDelta:m}=this.mousePitch.dragMove(t,o)||{};m&&u.setPitch(u.getPitch()+m)}}moveTouch(t,o){const u=this.map,{bearingDelta:g}=this.touchRotate.dragMove(t,o)||{};if(g&&u.setBearing(u.getBearing()+g),this.touchPitch){const{pitchDelta:m}=this.touchPitch.dragMove(t,o)||{};m&&u.setPitch(u.getPitch()+m)}}off(){const t=this.element;P.removeEventListener(t,"mousedown",this.mousedown),P.removeEventListener(t,"touchstart",this.touchstart,{passive:!1}),P.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),P.removeEventListener(window,"touchend",this.touchend),P.removeEventListener(t,"touchcancel",this.reset),this.offTemp()}offTemp(){P.enableDrag(),P.removeEventListener(window,"mousemove",this.mousemove),P.removeEventListener(window,"mouseup",this.mouseup),P.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),P.removeEventListener(window,"touchend",this.touchend)}}let ls;function ci(f,t,o){const u=new A.N(f.lng,f.lat);if(f=new A.N(f.lng,f.lat),t){const g=new A.N(f.lng-360,f.lat),m=new A.N(f.lng+360,f.lat),x=o.locationPoint(f).distSqr(t);o.locationPoint(g).distSqr(t)<x?f=g:o.locationPoint(m).distSqr(t)<x&&(f=m)}for(;Math.abs(f.lng-o.center.lng)>180;){const g=o.locationPoint(f);if(g.x>=0&&g.y>=0&&g.x<=o.width&&g.y<=o.height)break;f.lng>o.center.lng?f.lng-=360:f.lng+=360}return f.lng!==u.lng&&o.locationPoint(f).y>o.height/2-o.getHorizon()?f:u}const kA={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function ac(f,t,o){const u=f.classList;for(const g in kA)u.remove(`maplibregl-${o}-anchor-${g}`);u.add(`maplibregl-${o}-anchor-${t}`)}class oc extends A.E{constructor(t){if(super(),this._onKeyPress=o=>{const u=o.code,g=o.charCode||o.keyCode;u!=="Space"&&u!=="Enter"&&g!==32&&g!==13||this.togglePopup()},this._onMapClick=o=>{const u=o.originalEvent.target,g=this._element;this._popup&&(u===g||g.contains(u))&&this.togglePopup()},this._update=o=>{var u;if(!this._map)return;const g=this._map.loaded()&&!this._map.isMoving();((o==null?void 0:o.type)==="terrain"||(o==null?void 0:o.type)==="render"&&!g)&&this._map.once("render",this._update),this._lngLat=this._map.transform.renderWorldCopies?ci(this._lngLat,this._flatPos,this._map.transform):(u=this._lngLat)===null||u===void 0?void 0:u.wrap(),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationPoint(this._lngLat)._add(this._offset));let m="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?m=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(m=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let x="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?x="rotateX(0deg)":this._pitchAlignment==="map"&&(x=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||o&&o.type!=="moveend"||(this._pos=this._pos.round()),P.setTransform(this._element,`${kA[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${x} ${m}`),T.frameAsync(new AbortController).then(()=>{this._updateOpacity(o&&o.type==="moveend")}).catch(()=>{})},this._onMove=o=>{if(!this._isDragging){const u=this._clickTolerance||this._map._clickTolerance;this._isDragging=o.point.dist(this._pointerdownPos)>=u}this._isDragging&&(this._pos=o.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new A.k("dragstart"))),this.fire(new A.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new A.k("dragend")),this._state="inactive"},this._addDragHandler=o=>{this._element.contains(o.originalEvent.target)&&(o.preventDefault(),this._positionDelta=o.point.sub(this._pos).add(this._offset),this._pointerdownPos=o.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=t&&t.anchor||"center",this._color=t&&t.color||"#3FB1CE",this._scale=t&&t.scale||1,this._draggable=t&&t.draggable||!1,this._clickTolerance=t&&t.clickTolerance||0,this._subpixelPositioning=t&&t.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=t&&t.rotation||0,this._rotationAlignment=t&&t.rotationAlignment||"auto",this._pitchAlignment=t&&t.pitchAlignment&&t.pitchAlignment!=="auto"?t.pitchAlignment:this._rotationAlignment,this.setOpacity(),this.setOpacity(t==null?void 0:t.opacity,t==null?void 0:t.opacityWhenCovered),t&&t.element)this._element=t.element,this._offset=A.P.convert(t&&t.offset||[0,0]);else{this._defaultMarker=!0,this._element=P.create("div");const o=P.createNS("http://www.w3.org/2000/svg","svg"),u=41,g=27;o.setAttributeNS(null,"display","block"),o.setAttributeNS(null,"height",`${u}px`),o.setAttributeNS(null,"width",`${g}px`),o.setAttributeNS(null,"viewBox",`0 0 ${g} ${u}`);const m=P.createNS("http://www.w3.org/2000/svg","g");m.setAttributeNS(null,"stroke","none"),m.setAttributeNS(null,"stroke-width","1"),m.setAttributeNS(null,"fill","none"),m.setAttributeNS(null,"fill-rule","evenodd");const x=P.createNS("http://www.w3.org/2000/svg","g");x.setAttributeNS(null,"fill-rule","nonzero");const B=P.createNS("http://www.w3.org/2000/svg","g");B.setAttributeNS(null,"transform","translate(3.0, 29.0)"),B.setAttributeNS(null,"fill","#000000");const E=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const ot of E){const ct=P.createNS("http://www.w3.org/2000/svg","ellipse");ct.setAttributeNS(null,"opacity","0.04"),ct.setAttributeNS(null,"cx","10.5"),ct.setAttributeNS(null,"cy","5.80029008"),ct.setAttributeNS(null,"rx",ot.rx),ct.setAttributeNS(null,"ry",ot.ry),B.appendChild(ct)}const k=P.createNS("http://www.w3.org/2000/svg","g");k.setAttributeNS(null,"fill",this._color);const N=P.createNS("http://www.w3.org/2000/svg","path");N.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),k.appendChild(N);const D=P.createNS("http://www.w3.org/2000/svg","g");D.setAttributeNS(null,"opacity","0.25"),D.setAttributeNS(null,"fill","#000000");const j=P.createNS("http://www.w3.org/2000/svg","path");j.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),D.appendChild(j);const G=P.createNS("http://www.w3.org/2000/svg","g");G.setAttributeNS(null,"transform","translate(6.0, 7.0)"),G.setAttributeNS(null,"fill","#FFFFFF");const H=P.createNS("http://www.w3.org/2000/svg","g");H.setAttributeNS(null,"transform","translate(8.0, 8.0)");const W=P.createNS("http://www.w3.org/2000/svg","circle");W.setAttributeNS(null,"fill","#000000"),W.setAttributeNS(null,"opacity","0.25"),W.setAttributeNS(null,"cx","5.5"),W.setAttributeNS(null,"cy","5.5"),W.setAttributeNS(null,"r","5.4999962");const nt=P.createNS("http://www.w3.org/2000/svg","circle");nt.setAttributeNS(null,"fill","#FFFFFF"),nt.setAttributeNS(null,"cx","5.5"),nt.setAttributeNS(null,"cy","5.5"),nt.setAttributeNS(null,"r","5.4999962"),H.appendChild(W),H.appendChild(nt),x.appendChild(B),x.appendChild(k),x.appendChild(D),x.appendChild(G),x.appendChild(H),o.appendChild(x),o.setAttributeNS(null,"height",u*this._scale+"px"),o.setAttributeNS(null,"width",g*this._scale+"px"),this._element.appendChild(o),this._offset=A.P.convert(t&&t.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",o=>{o.preventDefault()}),this._element.addEventListener("mousedown",o=>{o.preventDefault()}),ac(this._element,this._anchor,"marker"),t&&t.className)for(const o of t.className.split(" "))this._element.classList.add(o);this._popup=null}addTo(t){return this.remove(),this._map=t,this._element.setAttribute("aria-label",t._getUIString("Marker.Title")),t.getCanvasContainer().appendChild(this._element),t.on("move",this._update),t.on("moveend",this._update),t.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),P.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(t){return this._lngLat=A.N.convert(t),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(t){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),t){if(!("offset"in t.options)){const g=Math.abs(13.5)/Math.SQRT2;t.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[g,-1*(38.1-13.5+g)],"bottom-right":[-g,-1*(38.1-13.5+g)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=t,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(t){return this._subpixelPositioning=t,this}getPopup(){return this._popup}togglePopup(){const t=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:t?(t.isOpen()?t.remove():(t.setLngLat(this._lngLat),t.addTo(this._map)),this):this}_updateOpacity(t=!1){var o,u;if(!(!((o=this._map)===null||o===void 0)&&o.terrain))return void(this._element.style.opacity!==this._opacity&&(this._element.style.opacity=this._opacity));if(t)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const g=this._map,m=g.terrain.depthAtPoint(this._pos),x=g.terrain.getElevationForLngLatZoom(this._lngLat,g.transform.tileZoom);if(g.transform.lngLatToCameraDepth(this._lngLat,x)-m<.006)return void(this._element.style.opacity=this._opacity);const B=-this._offset.y/g.transform._pixelPerMeter,E=Math.sin(g.getPitch()*Math.PI/180)*B,k=g.terrain.depthAtPoint(new A.P(this._pos.x,this._pos.y-this._offset.y)),N=g.transform.lngLatToCameraDepth(this._lngLat,x+E)-k>.006;!((u=this._popup)===null||u===void 0)&&u.isOpen()&&N&&this._popup.remove(),this._element.style.opacity=N?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(t){return this._offset=A.P.convert(t),this._update(),this}addClassName(t){this._element.classList.add(t)}removeClassName(t){this._element.classList.remove(t)}toggleClassName(t){return this._element.classList.toggle(t)}setDraggable(t){return this._draggable=!!t,this._map&&(t?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(t){return this._rotation=t||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(t){return this._rotationAlignment=t||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(t){return this._pitchAlignment=t&&t!=="auto"?t:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(t,o){return t===void 0&&o===void 0&&(this._opacity="1",this._opacityWhenCovered="0.2"),t!==void 0&&(this._opacity=t),o!==void 0&&(this._opacityWhenCovered=o),this._map&&this._updateOpacity(!0),this}}const Yu={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let _l=0,bl=!1;const Ys={maxWidth:100,unit:"metric"};function Ao(f,t,o){const u=o&&o.maxWidth||100,g=f._container.clientHeight/2,m=f.unproject([0,g]),x=f.unproject([u,g]),B=m.distanceTo(x);if(o&&o.unit==="imperial"){const E=3.2808*B;E>5280?Ge(t,u,E/5280,f._getUIString("ScaleControl.Miles")):Ge(t,u,E,f._getUIString("ScaleControl.Feet"))}else o&&o.unit==="nautical"?Ge(t,u,B/1852,f._getUIString("ScaleControl.NauticalMiles")):B>=1e3?Ge(t,u,B/1e3,f._getUIString("ScaleControl.Kilometers")):Ge(t,u,B,f._getUIString("ScaleControl.Meters"))}function Ge(f,t,o,u){const g=function(m){const x=Math.pow(10,`${Math.floor(m)}`.length-1);let B=m/x;return B=B>=10?10:B>=5?5:B>=3?3:B>=2?2:B>=1?1:function(E){const k=Math.pow(10,Math.ceil(-Math.log(E)/Math.LN10));return Math.round(E*k)/k}(B),x*B}(o);f.style.width=t*(g/o)+"px",f.innerHTML=`${g}&nbsp;${u}`}const hr={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1},xl=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function _(f){if(f){if(typeof f=="number"){const t=Math.round(Math.abs(f)/Math.SQRT2);return{center:new A.P(0,0),top:new A.P(0,f),"top-left":new A.P(t,t),"top-right":new A.P(-t,t),bottom:new A.P(0,-f),"bottom-left":new A.P(t,-t),"bottom-right":new A.P(-t,-t),left:new A.P(f,0),right:new A.P(-f,0)}}if(f instanceof A.P||Array.isArray(f)){const t=A.P.convert(f);return{center:t,top:t,"top-left":t,"top-right":t,bottom:t,"bottom-left":t,"bottom-right":t,left:t,right:t}}return{center:A.P.convert(f.center||[0,0]),top:A.P.convert(f.top||[0,0]),"top-left":A.P.convert(f["top-left"]||[0,0]),"top-right":A.P.convert(f["top-right"]||[0,0]),bottom:A.P.convert(f.bottom||[0,0]),"bottom-left":A.P.convert(f["bottom-left"]||[0,0]),"bottom-right":A.P.convert(f["bottom-right"]||[0,0]),left:A.P.convert(f.left||[0,0]),right:A.P.convert(f.right||[0,0])}}return _(new A.P(0,0))}const F=v;d.AJAXError=A.bh,d.Evented=A.E,d.LngLat=A.N,d.MercatorCoordinate=A.Z,d.Point=A.P,d.addProtocol=A.bi,d.config=A.a,d.removeProtocol=A.bj,d.AttributionControl=Go,d.BoxZoomHandler=rn,d.CanvasSource=ar,d.CooperativeGesturesHandler=PA,d.DoubleClickZoomHandler=Qa,d.DragPanHandler=Xu,d.DragRotateHandler=$c,d.EdgeInsets=Gs,d.FullscreenControl=class extends A.E{constructor(f={}){super(),this._onFullscreenChange=()=>{var t;let o=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((t=o==null?void 0:o.shadowRoot)===null||t===void 0)&&t.fullscreenElement;)o=o.shadowRoot.fullscreenElement;o===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,f&&f.container&&(f.container instanceof HTMLElement?this._container=f.container:A.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(f){return this._map=f,this._container||(this._container=this._map.getContainer()),this._controlContainer=P.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){P.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const f=this._fullscreenButton=P.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);P.create("span","maplibregl-ctrl-icon",f).setAttribute("aria-hidden","true"),f.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const f=this._getTitle();this._fullscreenButton.setAttribute("aria-label",f),this._fullscreenButton.title=f}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new A.k("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new A.k("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},d.GeoJSONSource=Ue,d.GeolocateControl=class extends A.E{constructor(f){super(),this._onSuccess=t=>{if(this._map){if(this._isOutOfMapMaxBounds(t))return this._setErrorState(),this.fire(new A.k("outofmaxbounds",t)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=t,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(t),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(t),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new A.k("geolocate",t)),this._finish()}},this._updateCamera=t=>{const o=new A.N(t.coords.longitude,t.coords.latitude),u=t.coords.accuracy,g=this._map.getBearing(),m=A.e({bearing:g},this.options.fitBoundsOptions),x=rt.fromLngLat(o,u);this._map.fitBounds(x,m,{geolocateSource:!0})},this._updateMarker=t=>{if(t){const o=new A.N(t.coords.longitude,t.coords.latitude);this._accuracyCircleMarker.setLngLat(o).addTo(this._map),this._userLocationDotMarker.setLngLat(o).addTo(this._map),this._accuracy=t.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=t=>{if(this._map){if(this.options.trackUserLocation)if(t.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const o=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=o,this._geolocateButton.setAttribute("aria-label",o),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(t.code===3&&bl)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new A.k("error",t)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",t=>t.preventDefault()),this._geolocateButton=P.create("button","maplibregl-ctrl-geolocate",this._container),P.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=t=>{if(this._map){if(t===!1){A.w("Geolocation support is not available so the GeolocateControl will be disabled.");const o=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=o,this._geolocateButton.setAttribute("aria-label",o)}else{const o=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=o,this._geolocateButton.setAttribute("aria-label",o)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=P.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new oc({element:this._dotElement}),this._circleElement=P.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new oc({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",o=>{o.geolocateSource||this._watchState!=="ACTIVE_LOCK"||o.originalEvent&&o.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new A.k("trackuserlocationend")),this.fire(new A.k("userlocationlostfocus")))})}},this.options=A.e({},Yu,f)}onAdd(f){return this._map=f,this._container=P.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return A._(this,arguments,void 0,function*(t=!1){if(ls!==void 0&&!t)return ls;if(window.navigator.permissions===void 0)return ls=!!window.navigator.geolocation,ls;try{ls=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{ls=!!window.navigator.geolocation}return ls})}().then(t=>this._finishSetupUI(t)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),P.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,_l=0,bl=!1}_isOutOfMapMaxBounds(f){const t=this._map.getMaxBounds(),o=f.coords;return t&&(o.longitude<t.getWest()||o.longitude>t.getEast()||o.latitude<t.getSouth()||o.latitude>t.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const f=this._map.getBounds(),t=f.getSouthEast(),o=f.getNorthEast(),u=t.distanceTo(o),g=Math.ceil(this._accuracy/(u/this._map._container.clientHeight)*2);this._circleElement.style.width=`${g}px`,this._circleElement.style.height=`${g}px`}trigger(){if(!this._setup)return A.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new A.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":_l--,bl=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new A.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new A.k("trackuserlocationstart")),this.fire(new A.k("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let f;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),_l++,_l>1?(f={maximumAge:6e5,timeout:0},bl=!0):(f=this.options.positionOptions,bl=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,f)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},d.Hash=ga,d.ImageSource=Re,d.KeyboardHandler=Ss,d.LngLatBounds=rt,d.LogoControl=va,d.Map=class extends ya{constructor(f){A.bf.mark(A.bg.create);const t=Object.assign(Object.assign({},sc),f);if(t.minZoom!=null&&t.maxZoom!=null&&t.minZoom>t.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(t.minPitch!=null&&t.maxPitch!=null&&t.minPitch>t.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(t.minPitch!=null&&t.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(t.maxPitch!=null&&t.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new fa(t.minZoom,t.maxZoom,t.minPitch,t.maxPitch,t.renderWorldCopies),{bearingSnap:t.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new Cr,this._controls=[],this._mapId=A.a4(),this._contextLost=o=>{o.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new A.k("webglcontextlost",{originalEvent:o}))},this._contextRestored=o=>{this._setupPainter(),this.resize(),this._update(),this.fire(new A.k("webglcontextrestored",{originalEvent:o}))},this._onMapScroll=o=>{if(o.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=t.interactive,this._maxTileCacheSize=t.maxTileCacheSize,this._maxTileCacheZoomLevels=t.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=t.failIfMajorPerformanceCaveat===!0,this._preserveDrawingBuffer=t.preserveDrawingBuffer===!0,this._antialias=t.antialias===!0,this._trackResize=t.trackResize===!0,this._bearingSnap=t.bearingSnap,this._refreshExpiredTiles=t.refreshExpiredTiles===!0,this._fadeDuration=t.fadeDuration,this._crossSourceCollisions=t.crossSourceCollisions===!0,this._collectResourceTiming=t.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},Wc),t.locale),this._clickTolerance=t.clickTolerance,this._overridePixelRatio=t.pixelRatio,this._maxCanvasSize=t.maxCanvasSize,this.transformCameraUpdate=t.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=t.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=ht.addThrottleControl(()=>this.isMoving()),this._requestManager=new Bt(t.transformRequest),typeof t.container=="string"){if(this._container=document.getElementById(t.container),!this._container)throw new Error(`Container '${t.container}' not found.`)}else{if(!(t.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=t.container}if(t.maxBounds&&this.setMaxBounds(t.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)).on("moveend",()=>this._update(!1)).on("zoom",()=>this._update(!0)).on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}).once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let o=!1;const u=qs(g=>{this._trackResize&&!this._removed&&(this.resize(g),this.redraw())},50);this._resizeObserver=new ResizeObserver(g=>{o?u(g):o=!0}),this._resizeObserver.observe(this._container)}this.handlers=new As(this,t),this._hash=t.hash&&new ga(typeof t.hash=="string"&&t.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:t.center,zoom:t.zoom,bearing:t.bearing,pitch:t.pitch}),t.bounds&&(this.resize(),this.fitBounds(t.bounds,A.e({},t.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=t.localIdeographFontFamily,this._validateStyle=t.validateStyle,t.style&&this.setStyle(t.style,{localIdeographFontFamily:t.localIdeographFontFamily}),t.attributionControl&&this.addControl(new Go(typeof t.attributionControl=="boolean"?void 0:t.attributionControl)),t.maplibreLogo&&this.addControl(new va,t.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",o=>{this._update(o.dataType==="style"),this.fire(new A.k(`${o.dataType}data`,o))}),this.on("dataloading",o=>{this.fire(new A.k(`${o.dataType}dataloading`,o))}),this.on("dataabort",o=>{this.fire(new A.k("sourcedataabort",o))})}_getMapId(){return this._mapId}addControl(f,t){if(t===void 0&&(t=f.getDefaultPosition?f.getDefaultPosition():"top-right"),!f||!f.onAdd)return this.fire(new A.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const o=f.onAdd(this);this._controls.push(f);const u=this._controlPositions[t];return t.indexOf("bottom")!==-1?u.insertBefore(o,u.firstChild):u.appendChild(o),this}removeControl(f){if(!f||!f.onRemove)return this.fire(new A.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const t=this._controls.indexOf(f);return t>-1&&this._controls.splice(t,1),f.onRemove(this),this}hasControl(f){return this._controls.indexOf(f)>-1}calculateCameraOptionsFromTo(f,t,o,u){return u==null&&this.terrain&&(u=this.terrain.getElevationForLngLatZoom(o,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(f,t,o,u)}resize(f){var t;const o=this._containerDimensions(),u=o[0],g=o[1],m=this._getClampedPixelRatio(u,g);if(this._resizeCanvas(u,g,m),this.painter.resize(u,g,m),this.painter.overLimit()){const B=this.painter.context.gl;this._maxCanvasSize=[B.drawingBufferWidth,B.drawingBufferHeight];const E=this._getClampedPixelRatio(u,g);this._resizeCanvas(u,g,E),this.painter.resize(u,g,E)}this.transform.resize(u,g),(t=this._requestedCameraState)===null||t===void 0||t.resize(u,g);const x=!this._moving;return x&&(this.stop(),this.fire(new A.k("movestart",f)).fire(new A.k("move",f))),this.fire(new A.k("resize",f)),x&&this.fire(new A.k("moveend",f)),this}_getClampedPixelRatio(f,t){const{0:o,1:u}=this._maxCanvasSize,g=this.getPixelRatio(),m=f*g,x=t*g;return Math.min(m>o?o/m:1,x>u?u/x:1)*g}getPixelRatio(){var f;return(f=this._overridePixelRatio)!==null&&f!==void 0?f:devicePixelRatio}setPixelRatio(f){this._overridePixelRatio=f,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(f){return this.transform.setMaxBounds(rt.convert(f)),this._update()}setMinZoom(f){if((f=f??-2)>=-2&&f<=this.transform.maxZoom)return this.transform.minZoom=f,this._update(),this.getZoom()<f&&this.setZoom(f),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(f){if((f=f??22)>=this.transform.minZoom)return this.transform.maxZoom=f,this._update(),this.getZoom()>f&&this.setZoom(f),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(f){if((f=f??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(f>=0&&f<=this.transform.maxPitch)return this.transform.minPitch=f,this._update(),this.getPitch()<f&&this.setPitch(f),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(f){if((f=f??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(f>=this.transform.minPitch)return this.transform.maxPitch=f,this._update(),this.getPitch()>f&&this.setPitch(f),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(f){return this.transform.renderWorldCopies=f,this._update()}project(f){return this.transform.locationPoint(A.N.convert(f),this.style&&this.terrain)}unproject(f){return this.transform.pointLocation(A.P.convert(f),this.terrain)}isMoving(){var f;return this._moving||((f=this.handlers)===null||f===void 0?void 0:f.isMoving())}isZooming(){var f;return this._zooming||((f=this.handlers)===null||f===void 0?void 0:f.isZooming())}isRotating(){var f;return this._rotating||((f=this.handlers)===null||f===void 0?void 0:f.isRotating())}_createDelegatedListener(f,t,o){if(f==="mouseenter"||f==="mouseover"){let u=!1;return{layers:t,listener:o,delegates:{mousemove:m=>{const x=t.filter(E=>this.getLayer(E)),B=x.length!==0?this.queryRenderedFeatures(m.point,{layers:x}):[];B.length?u||(u=!0,o.call(this,new Dr(f,this,m.originalEvent,{features:B}))):u=!1},mouseout:()=>{u=!1}}}}if(f==="mouseleave"||f==="mouseout"){let u=!1;return{layers:t,listener:o,delegates:{mousemove:x=>{const B=t.filter(E=>this.getLayer(E));(B.length!==0?this.queryRenderedFeatures(x.point,{layers:B}):[]).length?u=!0:u&&(u=!1,o.call(this,new Dr(f,this,x.originalEvent)))},mouseout:x=>{u&&(u=!1,o.call(this,new Dr(f,this,x.originalEvent)))}}}}{const u=g=>{const m=t.filter(B=>this.getLayer(B)),x=m.length!==0?this.queryRenderedFeatures(g.point,{layers:m}):[];x.length&&(g.features=x,o.call(this,g),delete g.features)};return{layers:t,listener:o,delegates:{[f]:u}}}}_saveDelegatedListener(f,t){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[f]=this._delegatedListeners[f]||[],this._delegatedListeners[f].push(t)}_removeDelegatedListener(f,t,o){if(!this._delegatedListeners||!this._delegatedListeners[f])return;const u=this._delegatedListeners[f];for(let g=0;g<u.length;g++){const m=u[g];if(m.listener===o&&m.layers.length===t.length&&m.layers.every(x=>t.includes(x))){for(const x in m.delegates)this.off(x,m.delegates[x]);return void u.splice(g,1)}}}on(f,t,o){if(o===void 0)return super.on(f,t);const u=this._createDelegatedListener(f,typeof t=="string"?[t]:t,o);this._saveDelegatedListener(f,u);for(const g in u.delegates)this.on(g,u.delegates[g]);return this}once(f,t,o){if(o===void 0)return super.once(f,t);const u=typeof t=="string"?[t]:t,g=this._createDelegatedListener(f,u,o);for(const m in g.delegates){const x=g.delegates[m];g.delegates[m]=(...B)=>{this._removeDelegatedListener(f,u,o),x(...B)}}this._saveDelegatedListener(f,g);for(const m in g.delegates)this.once(m,g.delegates[m]);return this}off(f,t,o){return o===void 0?super.off(f,t):(this._removeDelegatedListener(f,typeof t=="string"?[t]:t,o),this)}queryRenderedFeatures(f,t){if(!this.style)return[];let o;const u=f instanceof A.P||Array.isArray(f),g=u?f:[[0,0],[this.transform.width,this.transform.height]];if(t=t||(u?{}:f)||{},g instanceof A.P||typeof g[0]=="number")o=[A.P.convert(g)];else{const m=A.P.convert(g[0]),x=A.P.convert(g[1]);o=[m,new A.P(x.x,m.y),x,new A.P(m.x,x.y),m]}return this.style.queryRenderedFeatures(o,t,this.transform)}querySourceFeatures(f,t){return this.style.querySourceFeatures(f,t)}setStyle(f,t){return(t=A.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},t)).diff!==!1&&t.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&f?(this._diffStyle(f,t),this):(this._localIdeographFontFamily=t.localIdeographFontFamily,this._updateStyle(f,t))}setTransformRequest(f){return this._requestManager.setTransformRequest(f),this}_getUIString(f){const t=this._locale[f];if(t==null)throw new Error(`Missing UI string '${f}'`);return t}_updateStyle(f,t){if(t.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(f,t));const o=this.style&&t.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!f)),f?(this.style=new fn(this,t||{}),this.style.setEventedParent(this,{style:this.style}),typeof f=="string"?this.style.loadURL(f,t,o):this.style.loadJSON(f,t,o),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new fn(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(f,t){if(typeof f=="string"){const o=this._requestManager.transformRequest(f,"Style");A.h(o,new AbortController).then(u=>{this._updateDiff(u.data,t)}).catch(u=>{u&&this.fire(new A.j(u))})}else typeof f=="object"&&this._updateDiff(f,t)}_updateDiff(f,t){try{this.style.setState(f,t)&&this._update(!0)}catch(o){A.w(`Unable to perform style diff: ${o.message||o.error||o}.  Rebuilding the style from scratch.`),this._updateStyle(f,t)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():A.w("There is no style added to the map.")}addSource(f,t){return this._lazyInitEmptyStyle(),this.style.addSource(f,t),this._update(!0)}isSourceLoaded(f){const t=this.style&&this.style.sourceCaches[f];if(t!==void 0)return t.loaded();this.fire(new A.j(new Error(`There is no source with ID '${f}'`)))}setTerrain(f){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),f){const t=this.style.sourceCaches[f.source];if(!t)throw new Error(`cannot load terrain, because there exists no source with ID: ${f.source}`);this.terrain===null&&t.reload();for(const o in this.style._layers){const u=this.style._layers[o];u.type==="hillshade"&&u.source===f.source&&A.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new nc(this.painter,t,f),this.painter.renderToTexture=new Xc(this.painter,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=o=>{o.dataType==="style"?this.terrain.sourceCache.freeRtt():o.dataType==="source"&&o.tile&&(o.sourceId!==f.source||this._elevationFreeze||(this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(o.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.minElevationForCurrentTile=0,this.transform.elevation=0;return this.fire(new A.k("terrain",{terrain:f})),this}getTerrain(){var f,t;return(t=(f=this.terrain)===null||f===void 0?void 0:f.options)!==null&&t!==void 0?t:null}areTilesLoaded(){const f=this.style&&this.style.sourceCaches;for(const t in f){const o=f[t]._tiles;for(const u in o){const g=o[u];if(g.state!=="loaded"&&g.state!=="errored")return!1}}return!0}removeSource(f){return this.style.removeSource(f),this._update(!0)}getSource(f){return this.style.getSource(f)}addImage(f,t,o={}){const{pixelRatio:u=1,sdf:g=!1,stretchX:m,stretchY:x,content:B,textFitWidth:E,textFitHeight:k}=o;if(this._lazyInitEmptyStyle(),!(t instanceof HTMLImageElement||A.b(t))){if(t.width===void 0||t.height===void 0)return this.fire(new A.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:N,height:D,data:j}=t,G=t;return this.style.addImage(f,{data:new A.R({width:N,height:D},new Uint8Array(j)),pixelRatio:u,stretchX:m,stretchY:x,content:B,textFitWidth:E,textFitHeight:k,sdf:g,version:0,userImage:G}),G.onAdd&&G.onAdd(this,f),this}}{const{width:N,height:D,data:j}=T.getImageData(t);this.style.addImage(f,{data:new A.R({width:N,height:D},j),pixelRatio:u,stretchX:m,stretchY:x,content:B,textFitWidth:E,textFitHeight:k,sdf:g,version:0})}}updateImage(f,t){const o=this.style.getImage(f);if(!o)return this.fire(new A.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const u=t instanceof HTMLImageElement||A.b(t)?T.getImageData(t):t,{width:g,height:m,data:x}=u;if(g===void 0||m===void 0)return this.fire(new A.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(g!==o.data.width||m!==o.data.height)return this.fire(new A.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const B=!(t instanceof HTMLImageElement||A.b(t));return o.data.replace(x,B),this.style.updateImage(f,o),this}getImage(f){return this.style.getImage(f)}hasImage(f){return f?!!this.style.getImage(f):(this.fire(new A.j(new Error("Missing required image id"))),!1)}removeImage(f){this.style.removeImage(f)}loadImage(f){return ht.getImage(this._requestManager.transformRequest(f,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(f,t){return this._lazyInitEmptyStyle(),this.style.addLayer(f,t),this._update(!0)}moveLayer(f,t){return this.style.moveLayer(f,t),this._update(!0)}removeLayer(f){return this.style.removeLayer(f),this._update(!0)}getLayer(f){return this.style.getLayer(f)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(f,t,o){return this.style.setLayerZoomRange(f,t,o),this._update(!0)}setFilter(f,t,o={}){return this.style.setFilter(f,t,o),this._update(!0)}getFilter(f){return this.style.getFilter(f)}setPaintProperty(f,t,o,u={}){return this.style.setPaintProperty(f,t,o,u),this._update(!0)}getPaintProperty(f,t){return this.style.getPaintProperty(f,t)}setLayoutProperty(f,t,o,u={}){return this.style.setLayoutProperty(f,t,o,u),this._update(!0)}getLayoutProperty(f,t){return this.style.getLayoutProperty(f,t)}setGlyphs(f,t={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(f,t),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(f,t,o={}){return this._lazyInitEmptyStyle(),this.style.addSprite(f,t,o,u=>{u||this._update(!0)}),this}removeSprite(f){return this._lazyInitEmptyStyle(),this.style.removeSprite(f),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(f,t={}){return this._lazyInitEmptyStyle(),this.style.setSprite(f,t,o=>{o||this._update(!0)}),this}setLight(f,t={}){return this._lazyInitEmptyStyle(),this.style.setLight(f,t),this._update(!0)}getLight(){return this.style.getLight()}setSky(f){return this._lazyInitEmptyStyle(),this.style.setSky(f),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(f,t){return this.style.setFeatureState(f,t),this._update()}removeFeatureState(f,t){return this.style.removeFeatureState(f,t),this._update()}getFeatureState(f){return this.style.getFeatureState(f)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let f=0,t=0;return this._container&&(f=this._container.clientWidth||400,t=this._container.clientHeight||300),[f,t]}_setupContainer(){const f=this._container;f.classList.add("maplibregl-map");const t=this._canvasContainer=P.create("div","maplibregl-canvas-container",f);this._interactive&&t.classList.add("maplibregl-interactive"),this._canvas=P.create("canvas","maplibregl-canvas",t),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const o=this._containerDimensions(),u=this._getClampedPixelRatio(o[0],o[1]);this._resizeCanvas(o[0],o[1],u);const g=this._controlContainer=P.create("div","maplibregl-control-container",f),m=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(x=>{m[x]=P.create("div",`maplibregl-ctrl-${x} `,g)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(f,t,o){this._canvas.width=Math.floor(o*f),this._canvas.height=Math.floor(o*t),this._canvas.style.width=`${f}px`,this._canvas.style.height=`${t}px`}_setupPainter(){const f={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let t=null;this._canvas.addEventListener("webglcontextcreationerror",u=>{t={requestedAttributes:f},u&&(t.statusMessage=u.statusMessage,t.type=u.type)},{once:!0});const o=this._canvas.getContext("webgl2",f)||this._canvas.getContext("webgl",f);if(!o){const u="Failed to initialize WebGL";throw t?(t.message=u,new Error(JSON.stringify(t))):new Error(u)}this.painter=new no(o,this.transform),U.testSupport(o)}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(f){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||f,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(f){return this._update(),this._renderTaskQueue.add(f)}_cancelRenderFrame(f){this._renderTaskQueue.remove(f)}_render(f){const t=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(f),this._removed)return;let o=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const g=this.transform.zoom,m=T.now();this.style.zoomHistory.update(g,m);const x=new A.z(g,{now:m,fadeDuration:t,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),B=x.crossFadingFactor();B===1&&B===this._crossFadingFactor||(o=!0,this._crossFadingFactor=B),this.style.update(x)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.minElevationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,t,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:t,showPadding:this.showPadding}),this.fire(new A.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,A.bf.mark(A.bg.load),this.fire(new A.k("load"))),this.style&&(this.style.hasTransitions()||o)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const u=this._sourcesDirty||this._styleDirty||this._placementDirty;return u||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new A.k("idle")),!this._loaded||this._fullyLoaded||u||(this._fullyLoaded=!0,A.bf.mark(A.bg.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var f;this._hash&&this._hash.remove();for(const o of this._controls)o.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),ht.removeThrottleControl(this._imageQueueHandle),(f=this._resizeObserver)===null||f===void 0||f.disconnect();const t=this.painter.context.gl.getExtension("WEBGL_lose_context");t!=null&&t.loseContext&&t.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),P.remove(this._canvasContainer),P.remove(this._controlContainer),this._container.classList.remove("maplibregl-map"),A.bf.clearMetrics(),this._removed=!0,this.fire(new A.k("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,T.frameAsync(this._frameRequest).then(f=>{A.bf.frame(f),this._frameRequest=null,this._render(f)}).catch(()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(f){this._showTileBoundaries!==f&&(this._showTileBoundaries=f,this._update())}get showPadding(){return!!this._showPadding}set showPadding(f){this._showPadding!==f&&(this._showPadding=f,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(f){this._showCollisionBoxes!==f&&(this._showCollisionBoxes=f,f?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(f){this._showOverdrawInspector!==f&&(this._showOverdrawInspector=f,this._update())}get repaint(){return!!this._repaint}set repaint(f){this._repaint!==f&&(this._repaint=f,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(f){this._vertices=f,this._update()}get version(){return wl}getCameraTargetElevation(){return this.transform.elevation}},d.MapMouseEvent=Dr,d.MapTouchEvent=ti,d.MapWheelEvent=Mi,d.Marker=oc,d.NavigationControl=class{constructor(f){this._updateZoomButtons=()=>{const t=this._map.getZoom(),o=t===this._map.getMaxZoom(),u=t===this._map.getMinZoom();this._zoomInButton.disabled=o,this._zoomOutButton.disabled=u,this._zoomInButton.setAttribute("aria-disabled",o.toString()),this._zoomOutButton.setAttribute("aria-disabled",u.toString())},this._rotateCompassArrow=()=>{const t=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=t},this._setButtonTitle=(t,o)=>{const u=this._map._getUIString(`NavigationControl.${o}`);t.title=u,t.setAttribute("aria-label",u)},this.options=A.e({},Zc,f),this._container=P.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",t=>t.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",t=>this._map.zoomIn({},{originalEvent:t})),P.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",t=>this._map.zoomOut({},{originalEvent:t})),P.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",t=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:t}):this._map.resetNorth({},{originalEvent:t})}),this._compassIcon=P.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(f){return this._map=f,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Zu(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){P.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(f,t){const o=P.create("button",f,this._container);return o.type="button",o.addEventListener("click",t),o}},d.Popup=class extends A.E{constructor(f){super(),this.remove=()=>(this._content&&P.remove(this._content),this._container&&(P.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new A.k("close"))),this),this._onMouseUp=t=>{this._update(t.point)},this._onMouseMove=t=>{this._update(t.point)},this._onDrag=t=>{this._update(t.point)},this._update=t=>{var o;if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=P.create("div","maplibregl-popup",this._map.getContainer()),this._tip=P.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const B of this.options.className.split(" "))this._container.classList.add(B);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=this._map.transform.renderWorldCopies&&!this._trackPointer?ci(this._lngLat,this._flatPos,this._map.transform):(o=this._lngLat)===null||o===void 0?void 0:o.wrap(),this._trackPointer&&!t)return;const u=this._flatPos=this._pos=this._trackPointer&&t?t:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&t?t:this._map.transform.locationPoint(this._lngLat));let g=this.options.anchor;const m=_(this.options.offset);if(!g){const B=this._container.offsetWidth,E=this._container.offsetHeight;let k;k=u.y+m.bottom.y<E?["top"]:u.y>this._map.transform.height-E?["bottom"]:[],u.x<B/2?k.push("left"):u.x>this._map.transform.width-B/2&&k.push("right"),g=k.length===0?"bottom":k.join("-")}let x=u.add(m[g]);this.options.subpixelPositioning||(x=x.round()),P.setTransform(this._container,`${kA[g]} translate(${x.x}px,${x.y}px)`),ac(this._container,g,"popup")},this._onClose=()=>{this.remove()},this.options=A.e(Object.create(hr),f)}addTo(f){return this._map&&this.remove(),this._map=f,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new A.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(f){return this._lngLat=A.N.convert(f),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(f){return this.setDOMContent(document.createTextNode(f))}setHTML(f){const t=document.createDocumentFragment(),o=document.createElement("body");let u;for(o.innerHTML=f;u=o.firstChild,u;)t.appendChild(u);return this.setDOMContent(t)}getMaxWidth(){var f;return(f=this._container)===null||f===void 0?void 0:f.style.maxWidth}setMaxWidth(f){return this.options.maxWidth=f,this._update(),this}setDOMContent(f){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=P.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(f),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(f){return this._container&&this._container.classList.add(f),this}removeClassName(f){return this._container&&this._container.classList.remove(f),this}setOffset(f){return this.options.offset=f,this._update(),this}toggleClassName(f){if(this._container)return this._container.classList.toggle(f)}setSubpixelPositioning(f){this.options.subpixelPositioning=f}_createCloseButton(){this.options.closeButton&&(this._closeButton=P.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const f=this._container.querySelector(xl);f&&f.focus()}},d.RasterDEMTileSource=fe,d.RasterTileSource=se,d.ScaleControl=class{constructor(f){this._onMove=()=>{Ao(this._map,this._container,this.options)},this.setUnit=t=>{this.options.unit=t,Ao(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},Ys),f)}getDefaultPosition(){return"bottom-left"}onAdd(f){return this._map=f,this._container=P.create("div","maplibregl-ctrl maplibregl-ctrl-scale",f.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){P.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},d.ScrollZoomHandler=os,d.Style=fn,d.TerrainControl=class{constructor(f){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=f}onAdd(f){return this._map=f,this._container=P.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=P.create("button","maplibregl-ctrl-terrain",this._container),P.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){P.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},d.TwoFingersTouchPitchHandler=LA,d.TwoFingersTouchRotateHandler=jc,d.TwoFingersTouchZoomHandler=ml,d.TwoFingersTouchZoomRotateHandler=Gc,d.VectorTileSource=je,d.VideoSource=We,d.addSourceType=(f,t)=>A._(void 0,void 0,void 0,function*(){if(Fr(f))throw new Error(`A source type called "${f}" already exists.`);((o,u)=>{wr[o]=u})(f,t)}),d.clearPrewarmedResources=function(){const f=Rt;f&&(f.isPreloaded()&&f.numActive()===1?(f.release(_t),Rt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},d.getMaxParallelImageRequests=function(){return A.a.MAX_PARALLEL_IMAGE_REQUESTS},d.getRTLTextPluginStatus=function(){return Le().getRTLTextPluginStatus()},d.getVersion=function(){return F},d.getWorkerCount=function(){return Ct.workerCount},d.getWorkerUrl=function(){return A.a.WORKER_URL},d.importScriptInWorkers=function(f){return we().broadcast("IS",f)},d.prewarm=function(){Jt().acquire(_t)},d.setMaxParallelImageRequests=function(f){A.a.MAX_PARALLEL_IMAGE_REQUESTS=f},d.setRTLTextPlugin=function(f,t){return Le().setRTLTextPlugin(f,t)},d.setWorkerCount=function(f){Ct.workerCount=f},d.setWorkerUrl=function(f){A.a.WORKER_URL=f}});var h=i;return h})})(Wy);var o4=Wy.exports,A4=Object.defineProperty,l4=(n,e,i)=>e in n?A4(n,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):n[e]=i,oi=(n,e,i)=>l4(n,typeof e!="symbol"?e+"":e,i);let c4=class{constructor(e){oi(this,"map"),oi(this,"width"),oi(this,"height"),oi(this,"svgCanvas"),oi(this,"xLine"),oi(this,"yLine"),oi(this,"color","#535353"),this.map=e,this.mapResize=this.mapResize.bind(this)}create(){this.updateValues(),this.map!==void 0?(this.map.on("resize",this.mapResize),this.createCanvas(this.map.getCanvasContainer())):console.error("map object is null")}updateValues(){var e,i;this.width=(e=this.map)==null?void 0:e.getCanvas().clientWidth,this.height=(i=this.map)==null?void 0:i.getCanvas().clientHeight}mapResize(){this.updateValues(),this.updateCanvas()}updateCanvas(){if(this.svgCanvas!==void 0&&this.yLine!==void 0&&this.xLine!==void 0&&this.width!==void 0&&this.height!==void 0){this.svgCanvas.setAttribute("width",`${this.width}px`),this.svgCanvas.setAttribute("height",`${this.height}px`);const e=this.width/2,i=this.height/2;this.yLine.setAttribute("x1",`${e}px`),this.yLine.setAttribute("y1","0px"),this.yLine.setAttribute("x2",`${e}px`),this.yLine.setAttribute("y2",`${this.height}px`),this.xLine.setAttribute("x1","0px"),this.xLine.setAttribute("y1",`${i}px`),this.xLine.setAttribute("x2",`${this.width}px`),this.xLine.setAttribute("y2",`${i}px`)}else console.error("element value is null")}createCanvas(e){if(this.width!==void 0&&this.height!==void 0){const i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.style.position="relative",i.setAttribute("width",`${this.width}px`),i.setAttribute("height",`${this.height}px`);const s=this.width/2,c=this.height/2;this.yLine=i.appendChild(this.createLine(s,0,s,this.height,this.color,"2px")),this.xLine=i.appendChild(this.createLine(0,c,this.width,c,this.color,"2px")),e==null||e.appendChild(i),this.svgCanvas=i}}createLine(e,i,s,c,h,d){const A=document.createElementNS("http://www.w3.org/2000/svg","line");return A.setAttribute("x1",e),A.setAttribute("y1",i),A.setAttribute("x2",s),A.setAttribute("y2",c),A.setAttribute("stroke-dasharray","5,5"),A.setAttribute("stroke",h),A.setAttribute("stroke-width",d),A}destroy(){this.xLine!==void 0&&(this.xLine.remove(),this.xLine=void 0),this.yLine!==void 0&&(this.yLine.remove(),this.yLine=void 0),this.svgCanvas!==void 0&&(this.svgCanvas.remove(),this.svgCanvas=void 0),this.map!==void 0&&(this.map.off("resize",this.mapResize),this.map=void 0)}};const fg={72:72,96:96,200:200,300:300,400:400},ou={JPEG:"jpg",PNG:"png",PDF:"pdf",SVG:"svg"},gh={Landscape:"landscape",Portrait:"portrait"},Ll={LETTER:[279,216],A2:[594,420],A3:[420,297],A4:[297,210],A5:[210,148],A6:[148,105],B2:[707,500],B3:[500,353],B4:[353,250],B5:[250,176],B6:[176,125]},gc={in:"in",mm:"mm"};let u4=class{constructor(e){oi(this,"map"),oi(this,"width"),oi(this,"height"),oi(this,"unit"),oi(this,"svgCanvas"),oi(this,"svgPath");var i,s,c;if(this.map=e,this.map===void 0)return;this.mapResize=this.mapResize.bind(this),this.map.on("resize",this.mapResize);const h=(i=this.map)==null?void 0:i.getCanvas().clientWidth,d=(s=this.map)==null?void 0:s.getCanvas().clientHeight,A=document.createElementNS("http://www.w3.org/2000/svg","svg");A.style.position="absolute",A.style.top="0px",A.style.left="0px",A.setAttribute("width",`${h}px`),A.setAttribute("height",`${d}px`);const v=document.createElementNS("http://www.w3.org/2000/svg","path");v.setAttribute("style","fill:#888888;stroke-width:0"),v.setAttribute("fill-opacity","0.5"),A.append(v),(c=this.map)==null||c.getCanvasContainer().appendChild(A),this.svgCanvas=A,this.svgPath=v}mapResize(){this.generateCutOut()}updateArea(e,i){this.width=e,this.height=i,this.unit=gc.mm,this.generateCutOut()}generateCutOut(){var e,i;if(this.map===void 0||this.svgCanvas===void 0||this.svgPath===void 0)return;const s=this.toPixels(this.width),c=this.toPixels(this.height),h=(e=this.map)==null?void 0:e.getCanvas().clientWidth,d=(i=this.map)==null?void 0:i.getCanvas().clientHeight,A=h/2-s/2,v=A+s,C=d/2-c/2,I=C+c;this.svgCanvas.setAttribute("width",`${h}px`),this.svgCanvas.setAttribute("height",`${d}px`),this.svgPath.setAttribute("d",`M 0 0 L ${h} 0 L ${h} ${d} L 0 ${d} M ${A} ${C} L ${A} ${I} L ${v} ${I} L ${v} ${C}`)}destroy(){this.svgCanvas!==void 0&&(this.svgCanvas.remove(),this.svgCanvas=void 0),this.map!==void 0&&(this.map=void 0)}toPixels(e,i=96){return this.unit===gc.mm&&(i/=25.4),i*e}};const Zy={PageSize:"Page Size",PageOrientation:"Page Orientation",Format:"Format",DPI:"DPI",Generate:"Generate",LanguageName:"English",LanguageCode:"en"},h4={PageSize:"Taille de page",PageOrientation:"Orientation de la page",Format:"Format",DPI:"DPI",Generate:"Générer",LanguageName:"Français",LanguageCode:"fr"},d4={PageSize:"Sivukoko",PageOrientation:"Sivun suunta",Format:"Muoto",DPI:"DPI",Generate:"Generoi",LanguageName:"Suomalainen",LanguageCode:"fi"},p4={PageSize:"Papierformat",PageOrientation:"Papierausrichtung",Format:"Dateiformat",DPI:"Druckauflösung",Generate:"Erstellen",LanguageName:"Deutsch",LanguageCode:"de"},f4={PageSize:"Sidstorlek",PageOrientation:"Sidorientering",Format:"Format",DPI:"DPI",Generate:"Generera",LanguageName:"Svenska",LanguageCode:"sv"},g4={PageSize:"Tamaño de página",PageOrientation:"Orientación de página",Format:"Formato",DPI:"DPI",Generate:"Generar",LanguageName:"Española",LanguageCode:"es"},m4={PageSize:"Mida",PageOrientation:"Orientació",Format:"Format",DPI:"DPI",Generate:"Genera",LanguageName:"Catalan",LanguageCode:"ca"},y4={PageSize:"Kích thước trang",PageOrientation:"Loại trang",Format:"Định dạng",DPI:"Mật độ điểm ảnh (DPI)",Generate:"Tạo",LanguageName:"Tiếng Việt",LanguageCode:"vi"},v4={PageSize:"Розмір сторінки",PageOrientation:"Орієнтація сторінки",Format:"Формат",DPI:"DPI",Generate:"Згенерувати",LanguageName:"українська",LanguageCode:"uk"},w4={PageSize:"页面大小",PageOrientation:"页面方向",Format:"格式",DPI:"像素",Generate:"导出",LanguageName:"简体字",LanguageCode:"zhHans"},_4={PageSize:"頁面大小",PageOrientation:"頁面方向",Format:"格式",DPI:"像素",Generate:"導出",LanguageName:"繁体字",LanguageCode:"zhHant"},b4={PageSize:"ページサイズ",PageOrientation:"ページ方向",Format:"フォーマット",DPI:"DPI（解像度）",Generate:"出力",LanguageName:"日本語",LanguageCode:"ja"},x4={PageSize:"Tamanho da página",PageOrientation:"Orientação da página",Format:"Formato",DPI:"DPI",Generate:"Gerar",LanguageName:"Português",LanguageCode:"pt"},B4=[Zy,h4,d4,p4,f4,g4,m4,y4,v4,w4,_4,b4,x4],C4=n=>B4.find(e=>e.LanguageCode===n)??Zy;function Ai(n){"@babel/helpers - typeof";return Ai=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ai(n)}var fs=Uint8Array,xa=Uint16Array,gg=Int32Array,zd=new fs([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Hd=new fs([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),mg=new fs([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Yy=function(n,e){for(var i=new xa(31),s=0;s<31;++s)i[s]=e+=1<<n[s-1];for(var c=new gg(i[30]),s=1;s<30;++s)for(var h=i[s];h<i[s+1];++h)c[h]=h-i[s]<<5|s;return{b:i,r:c}},Jy=Yy(zd,2),tv=Jy.b,yg=Jy.r;tv[28]=258,yg[258]=28;for(var ev=Yy(Hd,0),F4=ev.b,rv=ev.r,vg=new xa(32768),Ni=0;Ni<32768;++Ni){var Pl=(Ni&43690)>>1|(Ni&21845)<<1;Pl=(Pl&52428)>>2|(Pl&13107)<<2,Pl=(Pl&61680)>>4|(Pl&3855)<<4,vg[Ni]=((Pl&65280)>>8|(Pl&255)<<8)>>1}for(var Jo=function(n,e,i){for(var s=n.length,c=0,h=new xa(e);c<s;++c)n[c]&&++h[n[c]-1];var d=new xa(e);for(c=1;c<e;++c)d[c]=d[c-1]+h[c-1]<<1;var A;if(i){A=new xa(1<<e);var v=15-e;for(c=0;c<s;++c)if(n[c])for(var C=c<<4|n[c],I=e-n[c],T=d[n[c]-1]++<<I,P=T|(1<<I)-1;T<=P;++T)A[vg[T]>>v]=C}else for(A=new xa(s),c=0;c<s;++c)n[c]&&(A[c]=vg[d[n[c]-1]++]>>15-n[c]);return A},Ql=new fs(288),Ni=0;Ni<144;++Ni)Ql[Ni]=8;for(var Ni=144;Ni<256;++Ni)Ql[Ni]=9;for(var Ni=256;Ni<280;++Ni)Ql[Ni]=7;for(var Ni=280;Ni<288;++Ni)Ql[Ni]=8;for(var mh=new fs(32),Ni=0;Ni<32;++Ni)mh[Ni]=5;var S4=Jo(Ql,9,0),I4=Jo(Ql,9,1),E4=Jo(mh,5,0),T4=Jo(mh,5,1),wg=function(n){for(var e=n[0],i=1;i<n.length;++i)n[i]>e&&(e=n[i]);return e},mo=function(n,e,i){var s=e/8|0;return(n[s]|n[s+1]<<8)>>(e&7)&i},_g=function(n,e){var i=e/8|0;return(n[i]|n[i+1]<<8|n[i+2]<<16)>>(e&7)},bg=function(n){return(n+7)/8|0},iv=function(n,e,i){return(i==null||i>n.length)&&(i=n.length),new fs(n.subarray(e,i))},U4=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],yo=function(n,e,i){var s=new Error(e||U4[n]);if(s.code=n,Error.captureStackTrace&&Error.captureStackTrace(s,yo),!i)throw s;return s},L4=function(n,e,i,s){var c=n.length,h=0;if(!c||e.f&&!e.l)return i||new fs(0);var d=!i,A=d||e.i!=2,v=e.i;d&&(i=new fs(c*3));var C=function(we){var Te=i.length;if(we>Te){var Ee=new fs(Math.max(Te*2,we));Ee.set(i),i=Ee}},I=e.f||0,T=e.p||0,P=e.b||0,U=e.l,V=e.d,R=e.m,Z=e.n,K=c*8;do{if(!U){I=mo(n,T,1);var tt=mo(n,T+1,3);if(T+=3,tt)if(tt==1)U=I4,V=T4,R=9,Z=5;else if(tt==2){var ht=mo(n,T,31)+257,Bt=mo(n,T+10,15)+4,Lt=ht+mo(n,T+5,31)+1;T+=14;for(var Ut=new fs(Lt),xt=new fs(19),pt=0;pt<Bt;++pt)xt[mg[pt]]=mo(n,T+pt*3,7);T+=Bt*3;for(var kt=wg(xt),Xt=(1<<kt)-1,st=Jo(xt,kt,1),pt=0;pt<Lt;){var ut=st[mo(n,T,Xt)];T+=ut&15;var mt=ut>>4;if(mt<16)Ut[pt++]=mt;else{var vt=0,$t=0;for(mt==16?($t=3+mo(n,T,3),T+=2,vt=Ut[pt-1]):mt==17?($t=3+mo(n,T,7),T+=3):mt==18&&($t=11+mo(n,T,127),T+=7);$t--;)Ut[pt++]=vt}}var Vt=Ut.subarray(0,ht),jt=Ut.subarray(ht);R=wg(Vt),Z=wg(jt),U=Jo(Vt,R,1),V=Jo(jt,Z,1)}else yo(1);else{var mt=bg(T)+4,zt=n[mt-4]|n[mt-3]<<8,Wt=mt+zt;if(Wt>c){v&&yo(0);break}A&&C(P+zt),i.set(n.subarray(mt,Wt),P),e.b=P+=zt,e.p=T=Wt*8,e.f=I;continue}if(T>K){v&&yo(0);break}}A&&C(P+131072);for(var Yt=(1<<R)-1,me=(1<<Z)-1,et=T;;et=T){var vt=U[_g(n,T)&Yt],dt=vt>>4;if(T+=vt&15,T>K){v&&yo(0);break}if(vt||yo(2),dt<256)i[P++]=dt;else if(dt==256){et=T,U=null;break}else{var _t=dt-254;if(dt>264){var pt=dt-257,Ct=zd[pt];_t=mo(n,T,(1<<Ct)-1)+tv[pt],T+=Ct}var Ot=V[_g(n,T)&me],Rt=Ot>>4;Ot||yo(3),T+=Ot&15;var jt=F4[Rt];if(Rt>3){var Ct=Hd[Rt];jt+=_g(n,T)&(1<<Ct)-1,T+=Ct}if(T>K){v&&yo(0);break}A&&C(P+131072);var Zt=P+_t;if(P<jt){var Jt=h-jt,xe=Math.min(jt,Zt);for(Jt+P<0&&yo(3);P<xe;++P)i[P]=s[Jt+P]}for(;P<Zt;++P)i[P]=i[P-jt]}}e.l=U,e.p=et,e.b=P,e.f=I,U&&(I=1,e.m=R,e.d=V,e.n=Z)}while(!I);return P!=i.length&&d?iv(i,0,P):i.subarray(0,P)},GA=function(n,e,i){i<<=e&7;var s=e/8|0;n[s]|=i,n[s+1]|=i>>8},yh=function(n,e,i){i<<=e&7;var s=e/8|0;n[s]|=i,n[s+1]|=i>>8,n[s+2]|=i>>16},xg=function(n,e){for(var i=[],s=0;s<n.length;++s)n[s]&&i.push({s,f:n[s]});var c=i.length,h=i.slice();if(!c)return{t:ov,l:0};if(c==1){var d=new fs(i[0].s+1);return d[i[0].s]=1,{t:d,l:1}}i.sort(function(Lt,Ut){return Lt.f-Ut.f}),i.push({s:-1,f:25001});var A=i[0],v=i[1],C=0,I=1,T=2;for(i[0]={s:-1,f:A.f+v.f,l:A,r:v};I!=c-1;)A=i[i[C].f<i[T].f?C++:T++],v=i[C!=I&&i[C].f<i[T].f?C++:T++],i[I++]={s:-1,f:A.f+v.f,l:A,r:v};for(var P=h[0].s,s=1;s<c;++s)h[s].s>P&&(P=h[s].s);var U=new xa(P+1),V=Bg(i[I-1],U,0);if(V>e){var s=0,R=0,Z=V-e,K=1<<Z;for(h.sort(function(Ut,xt){return U[xt.s]-U[Ut.s]||Ut.f-xt.f});s<c;++s){var tt=h[s].s;if(U[tt]>e)R+=K-(1<<V-U[tt]),U[tt]=e;else break}for(R>>=Z;R>0;){var ht=h[s].s;U[ht]<e?R-=1<<e-U[ht]++-1:++s}for(;s>=0&&R;--s){var Bt=h[s].s;U[Bt]==e&&(--U[Bt],++R)}V=e}return{t:new fs(U),l:V}},Bg=function(n,e,i){return n.s==-1?Math.max(Bg(n.l,e,i+1),Bg(n.r,e,i+1)):e[n.s]=i},nv=function(n){for(var e=n.length;e&&!n[--e];);for(var i=new xa(++e),s=0,c=n[0],h=1,d=function(v){i[s++]=v},A=1;A<=e;++A)if(n[A]==c&&A!=e)++h;else{if(!c&&h>2){for(;h>138;h-=138)d(32754);h>2&&(d(h>10?h-11<<5|28690:h-3<<5|12305),h=0)}else if(h>3){for(d(c),--h;h>6;h-=6)d(8304);h>2&&(d(h-3<<5|8208),h=0)}for(;h--;)d(c);h=1,c=n[A]}return{c:i.subarray(0,s),n:e}},vh=function(n,e){for(var i=0,s=0;s<e.length;++s)i+=n[s]*e[s];return i},sv=function(n,e,i){var s=i.length,c=bg(e+2);n[c]=s&255,n[c+1]=s>>8,n[c+2]=n[c]^255,n[c+3]=n[c+1]^255;for(var h=0;h<s;++h)n[c+h+4]=i[h];return(c+4+s)*8},av=function(n,e,i,s,c,h,d,A,v,C,I){GA(e,I++,i),++c[256];for(var T=xg(c,15),P=T.t,U=T.l,V=xg(h,15),R=V.t,Z=V.l,K=nv(P),tt=K.c,ht=K.n,Bt=nv(R),Lt=Bt.c,Ut=Bt.n,xt=new xa(19),pt=0;pt<tt.length;++pt)++xt[tt[pt]&31];for(var pt=0;pt<Lt.length;++pt)++xt[Lt[pt]&31];for(var kt=xg(xt,7),Xt=kt.t,st=kt.l,ut=19;ut>4&&!Xt[mg[ut-1]];--ut);var mt=C+5<<3,vt=vh(c,Ql)+vh(h,mh)+d,$t=vh(c,P)+vh(h,R)+d+14+3*ut+vh(xt,Xt)+2*xt[16]+3*xt[17]+7*xt[18];if(v>=0&&mt<=vt&&mt<=$t)return sv(e,I,n.subarray(v,v+C));var Vt,jt,zt,Wt;if(GA(e,I,1+($t<vt)),I+=2,$t<vt){Vt=Jo(P,U,0),jt=P,zt=Jo(R,Z,0),Wt=R;var Yt=Jo(Xt,st,0);GA(e,I,ht-257),GA(e,I+5,Ut-1),GA(e,I+10,ut-4),I+=14;for(var pt=0;pt<ut;++pt)GA(e,I+3*pt,Xt[mg[pt]]);I+=3*ut;for(var me=[tt,Lt],et=0;et<2;++et)for(var dt=me[et],pt=0;pt<dt.length;++pt){var _t=dt[pt]&31;GA(e,I,Yt[_t]),I+=Xt[_t],_t>15&&(GA(e,I,dt[pt]>>5&127),I+=dt[pt]>>12)}}else Vt=S4,jt=Ql,zt=E4,Wt=mh;for(var pt=0;pt<A;++pt){var Ct=s[pt];if(Ct>255){var _t=Ct>>18&31;yh(e,I,Vt[_t+257]),I+=jt[_t+257],_t>7&&(GA(e,I,Ct>>23&31),I+=zd[_t]);var Ot=Ct&31;yh(e,I,zt[Ot]),I+=Wt[Ot],Ot>3&&(yh(e,I,Ct>>5&8191),I+=Hd[Ot])}else yh(e,I,Vt[Ct]),I+=jt[Ct]}return yh(e,I,Vt[256]),I+jt[256]},P4=new gg([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),ov=new fs(0),Q4=function(n,e,i,s,c,h){var d=h.z||n.length,A=new fs(s+d+5*(1+Math.ceil(d/7e3))+c),v=A.subarray(s,A.length-c),C=h.l,I=(h.r||0)&7;if(e){I&&(v[0]=h.r>>3);for(var T=P4[e-1],P=T>>13,U=T&8191,V=(1<<i)-1,R=h.p||new xa(32768),Z=h.h||new xa(V+1),K=Math.ceil(i/3),tt=2*K,ht=function(Ve){return(n[Ve]^n[Ve+1]<<K^n[Ve+2]<<tt)&V},Bt=new gg(25e3),Lt=new xa(288),Ut=new xa(32),xt=0,pt=0,kt=h.i||0,Xt=0,st=h.w||0,ut=0;kt+2<d;++kt){var mt=ht(kt),vt=kt&32767,$t=Z[mt];if(R[vt]=$t,Z[mt]=vt,st<=kt){var Vt=d-kt;if((xt>7e3||Xt>24576)&&(Vt>423||!C)){I=av(n,v,0,Bt,Lt,Ut,pt,Xt,ut,kt-ut,I),Xt=xt=pt=0,ut=kt;for(var jt=0;jt<286;++jt)Lt[jt]=0;for(var jt=0;jt<30;++jt)Ut[jt]=0}var zt=2,Wt=0,Yt=U,me=vt-$t&32767;if(Vt>2&&mt==ht(kt-me))for(var et=Math.min(P,Vt)-1,dt=Math.min(32767,kt),_t=Math.min(258,Vt);me<=dt&&--Yt&&vt!=$t;){if(n[kt+zt]==n[kt+zt-me]){for(var Ct=0;Ct<_t&&n[kt+Ct]==n[kt+Ct-me];++Ct);if(Ct>zt){if(zt=Ct,Wt=me,Ct>et)break;for(var Ot=Math.min(me,Ct-2),Rt=0,jt=0;jt<Ot;++jt){var Zt=kt-me+jt&32767,Jt=R[Zt],xe=Zt-Jt&32767;xe>Rt&&(Rt=xe,$t=Zt)}}}vt=$t,$t=R[vt],me+=vt-$t&32767}if(Wt){Bt[Xt++]=268435456|yg[zt]<<18|rv[Wt];var we=yg[zt]&31,Te=rv[Wt]&31;pt+=zd[we]+Hd[Te],++Lt[257+we],++Ut[Te],st=kt+zt,++xt}else Bt[Xt++]=n[kt],++Lt[n[kt]]}}for(kt=Math.max(kt,st);kt<d;++kt)Bt[Xt++]=n[kt],++Lt[n[kt]];I=av(n,v,C,Bt,Lt,Ut,pt,Xt,ut,kt-ut,I),C||(h.r=I&7|v[I/8|0]<<3,I-=7,h.h=Z,h.p=R,h.i=kt,h.w=st)}else{for(var kt=h.w||0;kt<d+C;kt+=65535){var Ee=kt+65535;Ee>=d&&(v[I/8|0]=C,Ee=d),I=sv(v,I+1,n.subarray(kt,Ee))}h.i=d}return iv(A,0,s+bg(I)+c)},Av=function(){var n=1,e=0;return{p:function(i){for(var s=n,c=e,h=i.length|0,d=0;d!=h;){for(var A=Math.min(d+2655,h);d<A;++d)c+=s+=i[d];s=(s&65535)+15*(s>>16),c=(c&65535)+15*(c>>16)}n=s,e=c},d:function(){return n%=65521,e%=65521,(n&255)<<24|(n&65280)<<8|(e&255)<<8|e>>8}}},k4=function(n,e,i,s,c){if(!c&&(c={l:1},e.dictionary)){var h=e.dictionary.subarray(-32768),d=new fs(h.length+n.length);d.set(h),d.set(n,h.length),n=d,c.w=h.length}return Q4(n,e.level==null?6:e.level,e.mem==null?c.l?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):20:12+e.mem,i,s,c)},lv=function(n,e,i){for(;i;++e)n[e]=i,i>>>=8},M4=function(n,e){var i=e.level,s=i==0?0:i<6?1:i==9?3:2;if(n[0]=120,n[1]=s<<6|(e.dictionary&&32),n[1]|=31-(n[0]<<8|n[1])%31,e.dictionary){var c=Av();c.p(e.dictionary),lv(n,2,c.d())}},D4=function(n,e){return((n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31)&&yo(6,"invalid zlib data"),(n[1]>>5&1)==+!e&&yo(6,"invalid zlib data: "+(n[1]&32?"need":"unexpected")+" dictionary"),(n[1]>>3&4)+2};function Cg(n,e){e||(e={});var i=Av();i.p(n);var s=k4(n,e,e.dictionary?6:2,4);return M4(s,e),lv(s,s.length-4,i.d()),s}function N4(n,e){return L4(n.subarray(D4(n,e),-4),{i:2},e,e)}var O4=typeof TextDecoder<"u"&&new TextDecoder,R4=0;try{O4.decode(ov,{stream:!0}),R4=1}catch{}/** @license
 *
 * jsPDF - PDF Document creation from JavaScript
 * Version 2.5.2 Built on 2024-09-17T13:29:57.859Z
 *                      CommitID 00000000
 *
 * Copyright (c) 2010-2021 James Hall <james@parall.ax>, https://github.com/MrRio/jsPDF
 *               2015-2021 yWorks GmbH, http://www.yworks.com
 *               2015-2021 Lukas Holländer <lukas.hollaender@yworks.com>, https://github.com/HackbrettXXX
 *               2016-2018 Aras Abbasi <aras.abbasi@gmail.com>
 *               2010 Aaron Spike, https://github.com/acspike
 *               2012 Willow Systems Corporation, https://github.com/willowsystems
 *               2012 Pablo Hess, https://github.com/pablohess
 *               2012 Florian Jenett, https://github.com/fjenett
 *               2013 Warren Weckesser, https://github.com/warrenweckesser
 *               2013 Youssef Beddad, https://github.com/lifof
 *               2013 Lee Driscoll, https://github.com/lsdriscoll
 *               2013 Stefan Slonevskiy, https://github.com/stefslon
 *               2013 Jeremy Morel, https://github.com/jmorel
 *               2013 Christoph Hartmann, https://github.com/chris-rock
 *               2014 Juan Pablo Gaviria, https://github.com/juanpgaviria
 *               2014 James Makes, https://github.com/dollaruw
 *               2014 Diego Casorran, https://github.com/diegocr
 *               2014 Steven Spungin, https://github.com/Flamenco
 *               2014 Kenneth Glassey, https://github.com/Gavvers
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 *
 * Contributor(s):
 *    siefkenj, ahwolf, rickygu, Midnith, saintclair, eaparango,
 *    kim3er, mfo, alnorth, Flamenco
 */var Tr=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function Fg(){Tr.console&&typeof Tr.console.log=="function"&&Tr.console.log.apply(Tr.console,arguments)}var Ti={log:Fg,warn:function(n){Tr.console&&(typeof Tr.console.warn=="function"?Tr.console.warn.apply(Tr.console,arguments):Fg.call(null,arguments))},error:function(n){Tr.console&&(typeof Tr.console.error=="function"?Tr.console.error.apply(Tr.console,arguments):Fg(n))}};function Sg(n,e,i){var s=new XMLHttpRequest;s.open("GET",n),s.responseType="blob",s.onload=function(){mc(s.response,e,i)},s.onerror=function(){Ti.error("could not download file")},s.send()}function cv(n){var e=new XMLHttpRequest;e.open("HEAD",n,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function Vd(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(e)}}var wh,Ig,mc=Tr.saveAs||((typeof window>"u"?"undefined":Ai(window))!=="object"||window!==Tr?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(n,e,i){var s=Tr.URL||Tr.webkitURL,c=document.createElement("a");e=e||n.name||"download",c.download=e,c.rel="noopener",typeof n=="string"?(c.href=n,c.origin!==location.origin?cv(c.href)?Sg(n,e,i):Vd(c,c.target="_blank"):Vd(c)):(c.href=s.createObjectURL(n),setTimeout(function(){s.revokeObjectURL(c.href)},4e4),setTimeout(function(){Vd(c)},0))}:"msSaveOrOpenBlob"in navigator?function(n,e,i){if(e=e||n.name||"download",typeof n=="string")if(cv(n))Sg(n,e,i);else{var s=document.createElement("a");s.href=n,s.target="_blank",setTimeout(function(){Vd(s)})}else navigator.msSaveOrOpenBlob(function(c,h){return h===void 0?h={autoBom:!1}:Ai(h)!=="object"&&(Ti.warn("Deprecated: Expected third argument to be a object"),h={autoBom:!h}),h.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(c.type)?new Blob(["\uFEFF",c],{type:c.type}):c}(n,i),e)}:function(n,e,i,s){if((s=s||open("","_blank"))&&(s.document.title=s.document.body.innerText="downloading..."),typeof n=="string")return Sg(n,e,i);var c=n.type==="application/octet-stream",h=/constructor/i.test(Tr.HTMLElement)||Tr.safari,d=/CriOS\/[\d]+/.test(navigator.userAgent);if((d||c&&h)&&(typeof FileReader>"u"?"undefined":Ai(FileReader))==="object"){var A=new FileReader;A.onloadend=function(){var I=A.result;I=d?I:I.replace(/^data:[^;]*;/,"data:attachment/file;"),s?s.location.href=I:location=I,s=null},A.readAsDataURL(n)}else{var v=Tr.URL||Tr.webkitURL,C=v.createObjectURL(n);s?s.location=C:location.href=C,s=null,setTimeout(function(){v.revokeObjectURL(C)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function uv(n){var e;n=n||"",this.ok=!1,n.charAt(0)=="#"&&(n=n.substr(1,6)),n={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[n=(n=n.replace(/ /g,"")).toLowerCase()]||n;for(var i=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(A){return[parseInt(A[1]),parseInt(A[2]),parseInt(A[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(A){return[parseInt(A[1],16),parseInt(A[2],16),parseInt(A[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(A){return[parseInt(A[1]+A[1],16),parseInt(A[2]+A[2],16),parseInt(A[3]+A[3],16)]}}],s=0;s<i.length;s++){var c=i[s].re,h=i[s].process,d=c.exec(n);d&&(e=h(d),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var A=this.r.toString(16),v=this.g.toString(16),C=this.b.toString(16);return A.length==1&&(A="0"+A),v.length==1&&(v="0"+v),C.length==1&&(C="0"+C),"#"+A+v+C}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Eg(n,e){var i=n[0],s=n[1],c=n[2],h=n[3];i=gs(i,s,c,h,e[0],7,-680876936),h=gs(h,i,s,c,e[1],12,-389564586),c=gs(c,h,i,s,e[2],17,606105819),s=gs(s,c,h,i,e[3],22,-1044525330),i=gs(i,s,c,h,e[4],7,-176418897),h=gs(h,i,s,c,e[5],12,1200080426),c=gs(c,h,i,s,e[6],17,-1473231341),s=gs(s,c,h,i,e[7],22,-45705983),i=gs(i,s,c,h,e[8],7,1770035416),h=gs(h,i,s,c,e[9],12,-1958414417),c=gs(c,h,i,s,e[10],17,-42063),s=gs(s,c,h,i,e[11],22,-1990404162),i=gs(i,s,c,h,e[12],7,1804603682),h=gs(h,i,s,c,e[13],12,-40341101),c=gs(c,h,i,s,e[14],17,-1502002290),i=ms(i,s=gs(s,c,h,i,e[15],22,1236535329),c,h,e[1],5,-165796510),h=ms(h,i,s,c,e[6],9,-1069501632),c=ms(c,h,i,s,e[11],14,643717713),s=ms(s,c,h,i,e[0],20,-373897302),i=ms(i,s,c,h,e[5],5,-701558691),h=ms(h,i,s,c,e[10],9,38016083),c=ms(c,h,i,s,e[15],14,-660478335),s=ms(s,c,h,i,e[4],20,-405537848),i=ms(i,s,c,h,e[9],5,568446438),h=ms(h,i,s,c,e[14],9,-1019803690),c=ms(c,h,i,s,e[3],14,-187363961),s=ms(s,c,h,i,e[8],20,1163531501),i=ms(i,s,c,h,e[13],5,-1444681467),h=ms(h,i,s,c,e[2],9,-51403784),c=ms(c,h,i,s,e[7],14,1735328473),i=ys(i,s=ms(s,c,h,i,e[12],20,-1926607734),c,h,e[5],4,-378558),h=ys(h,i,s,c,e[8],11,-2022574463),c=ys(c,h,i,s,e[11],16,1839030562),s=ys(s,c,h,i,e[14],23,-35309556),i=ys(i,s,c,h,e[1],4,-1530992060),h=ys(h,i,s,c,e[4],11,1272893353),c=ys(c,h,i,s,e[7],16,-155497632),s=ys(s,c,h,i,e[10],23,-1094730640),i=ys(i,s,c,h,e[13],4,681279174),h=ys(h,i,s,c,e[0],11,-358537222),c=ys(c,h,i,s,e[3],16,-722521979),s=ys(s,c,h,i,e[6],23,76029189),i=ys(i,s,c,h,e[9],4,-640364487),h=ys(h,i,s,c,e[12],11,-421815835),c=ys(c,h,i,s,e[15],16,530742520),i=vs(i,s=ys(s,c,h,i,e[2],23,-995338651),c,h,e[0],6,-198630844),h=vs(h,i,s,c,e[7],10,1126891415),c=vs(c,h,i,s,e[14],15,-1416354905),s=vs(s,c,h,i,e[5],21,-57434055),i=vs(i,s,c,h,e[12],6,1700485571),h=vs(h,i,s,c,e[3],10,-1894986606),c=vs(c,h,i,s,e[10],15,-1051523),s=vs(s,c,h,i,e[1],21,-2054922799),i=vs(i,s,c,h,e[8],6,1873313359),h=vs(h,i,s,c,e[15],10,-30611744),c=vs(c,h,i,s,e[6],15,-1560198380),s=vs(s,c,h,i,e[13],21,1309151649),i=vs(i,s,c,h,e[4],6,-145523070),h=vs(h,i,s,c,e[11],10,-1120210379),c=vs(c,h,i,s,e[2],15,718787259),s=vs(s,c,h,i,e[9],21,-343485551),n[0]=kl(i,n[0]),n[1]=kl(s,n[1]),n[2]=kl(c,n[2]),n[3]=kl(h,n[3])}function jd(n,e,i,s,c,h){return e=kl(kl(e,n),kl(s,h)),kl(e<<c|e>>>32-c,i)}function gs(n,e,i,s,c,h,d){return jd(e&i|~e&s,n,e,c,h,d)}function ms(n,e,i,s,c,h,d){return jd(e&s|i&~s,n,e,c,h,d)}function ys(n,e,i,s,c,h,d){return jd(e^i^s,n,e,c,h,d)}function vs(n,e,i,s,c,h,d){return jd(i^(e|~s),n,e,c,h,d)}function hv(n){var e,i=n.length,s=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=n.length;e+=64)Eg(s,z4(n.substring(e-64,e)));n=n.substring(e-64);var c=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<n.length;e++)c[e>>2]|=n.charCodeAt(e)<<(e%4<<3);if(c[e>>2]|=128<<(e%4<<3),e>55)for(Eg(s,c),e=0;e<16;e++)c[e]=0;return c[14]=8*i,Eg(s,c),s}function z4(n){var e,i=[];for(e=0;e<64;e+=4)i[e>>2]=n.charCodeAt(e)+(n.charCodeAt(e+1)<<8)+(n.charCodeAt(e+2)<<16)+(n.charCodeAt(e+3)<<24);return i}wh=Tr.atob.bind(Tr),Ig=Tr.btoa.bind(Tr);var dv="0123456789abcdef".split("");function H4(n){for(var e="",i=0;i<4;i++)e+=dv[n>>8*i+4&15]+dv[n>>8*i&15];return e}function V4(n){return String.fromCharCode((255&n)>>0,(65280&n)>>8,(16711680&n)>>16,(4278190080&n)>>24)}function Tg(n){return hv(n).map(V4).join("")}var j4=function(n){for(var e=0;e<n.length;e++)n[e]=H4(n[e]);return n.join("")}(hv("hello"))!="5d41402abc4b2a76b9719d911017c592";function kl(n,e){if(j4){var i=(65535&n)+(65535&e);return(n>>16)+(e>>16)+(i>>16)<<16|65535&i}return n+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function Ug(n,e){var i,s,c,h;if(n!==i){for(var d=(c=n,h=1+(256/n.length>>0),new Array(h+1).join(c)),A=[],v=0;v<256;v++)A[v]=v;var C=0;for(v=0;v<256;v++){var I=A[v];C=(C+I+d.charCodeAt(v))%256,A[v]=A[C],A[C]=I}i=n,s=A}else A=s;var T=e.length,P=0,U=0,V="";for(v=0;v<T;v++)U=(U+(I=A[P=(P+1)%256]))%256,A[P]=A[U],A[U]=I,d=A[(A[P]+A[U])%256],V+=String.fromCharCode(e.charCodeAt(v)^d);return V}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var pv={print:4,modify:8,copy:16,"annot-forms":32};function Au(n,e,i,s){this.v=1,this.r=2;var c=192;n.forEach(function(A){if(pv.perm!==void 0)throw new Error("Invalid permission: "+A);c+=pv[A]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var h=(e+this.padding).substr(0,32),d=(i+this.padding).substr(0,32);this.O=this.processOwnerPassword(h,d),this.P=-(1+(255^c)),this.encryptionKey=Tg(h+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(s)).substr(0,5),this.U=Ug(this.encryptionKey,this.padding)}function lu(n){if(/[^\u0000-\u00ff]/.test(n))throw new Error("Invalid PDF Name Object: "+n+", Only accept ASCII characters.");for(var e="",i=n.length,s=0;s<i;s++){var c=n.charCodeAt(s);c<33||c===35||c===37||c===40||c===41||c===47||c===60||c===62||c===91||c===93||c===123||c===125||c>126?e+="#"+("0"+c.toString(16)).slice(-2):e+=n[s]}return e}function fv(n){if(Ai(n)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(i,s,c){if(c=c||!1,typeof i!="string"||typeof s!="function"||typeof c!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(i)||(e[i]={});var h=Math.random().toString(35);return e[i][h]=[s,!!c],h},this.unsubscribe=function(i){for(var s in e)if(e[s][i])return delete e[s][i],Object.keys(e[s]).length===0&&delete e[s],!0;return!1},this.publish=function(i){if(e.hasOwnProperty(i)){var s=Array.prototype.slice.call(arguments,1),c=[];for(var h in e[i]){var d=e[i][h];try{d[0].apply(n,s)}catch(A){Tr.console&&Ti.error("jsPDF PubSub Error",A.message,A)}d[1]&&c.push(h)}c.length&&c.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Kd(n){if(!(this instanceof Kd))return new Kd(n);var e="opacity,stroke-opacity".split(",");for(var i in n)n.hasOwnProperty(i)&&e.indexOf(i)>=0&&(this[i]=n[i]);this.id="",this.objectNumber=-1}function gv(n,e){this.gState=n,this.matrix=e,this.id="",this.objectNumber=-1}function yc(n,e,i,s,c){if(!(this instanceof yc))return new yc(n,e,i,s,c);this.type=n==="axial"?2:3,this.coords=e,this.colors=i,gv.call(this,s,c)}function cu(n,e,i,s,c){if(!(this instanceof cu))return new cu(n,e,i,s,c);this.boundingBox=n,this.xStep=e,this.yStep=i,this.stream="",this.cloneIndex=0,gv.call(this,s,c)}function Ur(n){var e,i=typeof arguments[0]=="string"?arguments[0]:"p",s=arguments[1],c=arguments[2],h=arguments[3],d=[],A=1,v=16,C="S",I=null;Ai(n=n||{})==="object"&&(i=n.orientation,s=n.unit||s,c=n.format||c,h=n.compress||n.compressPdf||h,(I=n.encryption||null)!==null&&(I.userPassword=I.userPassword||"",I.ownerPassword=I.ownerPassword||"",I.userPermissions=I.userPermissions||[]),A=typeof n.userUnit=="number"?Math.abs(n.userUnit):1,n.precision!==void 0&&(e=n.precision),n.floatPrecision!==void 0&&(v=n.floatPrecision),C=n.defaultPathOperation||"S"),d=n.filters||(h===!0?["FlateEncode"]:d),s=s||"mm",i=(""+(i||"P")).toLowerCase();var T=n.putOnlyUsedFonts||!1,P={},U={internal:{},__private__:{}};U.__private__.PubSub=fv;var V="1.3",R=U.__private__.getPdfVersion=function(){return V};U.__private__.setPdfVersion=function(Q){V=Q};var Z={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};U.__private__.getPageFormats=function(){return Z};var K=U.__private__.getPageFormat=function(Q){return Z[Q]};c=c||"a4";var tt={COMPAT:"compat",ADVANCED:"advanced"},ht=tt.COMPAT;function Bt(){this.saveGraphicsState(),rt(new Pt(Le,0,0,-Le,0,Ja()*Le).toString()+" cm"),this.setFontSize(this.getFontSize()/Le),C="n",ht=tt.ADVANCED}function Lt(){this.restoreGraphicsState(),C="S",ht=tt.COMPAT}var Ut=U.__private__.combineFontStyleAndFontWeight=function(Q,J){if(Q=="bold"&&J=="normal"||Q=="bold"&&J==400||Q=="normal"&&J=="italic"||Q=="bold"&&J=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return J&&(Q=J==400||J==="normal"?Q==="italic"?"italic":"normal":J!=700&&J!=="bold"||Q!=="normal"?(J==700?"bold":J)+""+Q:"bold"),Q};U.advancedAPI=function(Q){var J=ht===tt.COMPAT;return J&&Bt.call(this),typeof Q!="function"||(Q(this),J&&Lt.call(this)),this},U.compatAPI=function(Q){var J=ht===tt.ADVANCED;return J&&Lt.call(this),typeof Q!="function"||(Q(this),J&&Bt.call(this)),this},U.isAdvancedAPI=function(){return ht===tt.ADVANCED};var xt,pt=function(Q){if(ht!==tt.ADVANCED)throw new Error(Q+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},kt=U.roundToPrecision=U.__private__.roundToPrecision=function(Q,J){var bt=e||J;if(isNaN(Q)||isNaN(bt))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return Q.toFixed(bt).replace(/0+$/,"")};xt=U.hpf=U.__private__.hpf=typeof v=="number"?function(Q){if(isNaN(Q))throw new Error("Invalid argument passed to jsPDF.hpf");return kt(Q,v)}:v==="smart"?function(Q){if(isNaN(Q))throw new Error("Invalid argument passed to jsPDF.hpf");return kt(Q,Q>-1&&Q<1?16:5)}:function(Q){if(isNaN(Q))throw new Error("Invalid argument passed to jsPDF.hpf");return kt(Q,16)};var Xt=U.f2=U.__private__.f2=function(Q){if(isNaN(Q))throw new Error("Invalid argument passed to jsPDF.f2");return kt(Q,2)},st=U.__private__.f3=function(Q){if(isNaN(Q))throw new Error("Invalid argument passed to jsPDF.f3");return kt(Q,3)},ut=U.scale=U.__private__.scale=function(Q){if(isNaN(Q))throw new Error("Invalid argument passed to jsPDF.scale");return ht===tt.COMPAT?Q*Le:ht===tt.ADVANCED?Q:void 0},mt=function(Q){return ht===tt.COMPAT?Ja()-Q:ht===tt.ADVANCED?Q:void 0},vt=function(Q){return ut(mt(Q))};U.__private__.setPrecision=U.setPrecision=function(Q){typeof parseInt(Q,10)=="number"&&(e=parseInt(Q,10))};var $t,Vt="00000000000000000000000000000000",jt=U.__private__.getFileId=function(){return Vt},zt=U.__private__.setFileId=function(Q){return Vt=Q!==void 0&&/^[a-fA-F0-9]{32}$/.test(Q)?Q.toUpperCase():Vt.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),I!==null&&(ki=new Au(I.userPermissions,I.userPassword,I.ownerPassword,Vt)),Vt};U.setFileId=function(Q){return zt(Q),this},U.getFileId=function(){return jt()};var Wt=U.__private__.convertDateToPDFDate=function(Q){var J=Q.getTimezoneOffset(),bt=J<0?"+":"-",Dt=Math.floor(Math.abs(J/60)),qt=Math.abs(J%60),ne=[bt,_t(Dt),"'",_t(qt),"'"].join("");return["D:",Q.getFullYear(),_t(Q.getMonth()+1),_t(Q.getDate()),_t(Q.getHours()),_t(Q.getMinutes()),_t(Q.getSeconds()),ne].join("")},Yt=U.__private__.convertPDFDateToDate=function(Q){var J=parseInt(Q.substr(2,4),10),bt=parseInt(Q.substr(6,2),10)-1,Dt=parseInt(Q.substr(8,2),10),qt=parseInt(Q.substr(10,2),10),ne=parseInt(Q.substr(12,2),10),be=parseInt(Q.substr(14,2),10);return new Date(J,bt,Dt,qt,ne,be,0)},me=U.__private__.setCreationDate=function(Q){var J;if(Q===void 0&&(Q=new Date),Q instanceof Date)J=Wt(Q);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(Q))throw new Error("Invalid argument passed to jsPDF.setCreationDate");J=Q}return $t=J},et=U.__private__.getCreationDate=function(Q){var J=$t;return Q==="jsDate"&&(J=Yt($t)),J};U.setCreationDate=function(Q){return me(Q),this},U.getCreationDate=function(Q){return et(Q)};var dt,_t=U.__private__.padd2=function(Q){return("0"+parseInt(Q)).slice(-2)},Ct=U.__private__.padd2Hex=function(Q){return("00"+(Q=Q.toString())).substr(Q.length)},Ot=0,Rt=[],Zt=[],Jt=0,xe=[],we=[],Te=!1,Ee=Zt,Ve=function(){Ot=0,Jt=0,Zt=[],Rt=[],xe=[],Sr=ue(),nr=ue()};U.__private__.setCustomOutputDestination=function(Q){Te=!0,Ee=Q};var ie=function(Q){Te||(Ee=Q)};U.__private__.resetCustomOutputDestination=function(){Te=!1,Ee=Zt};var rt=U.__private__.out=function(Q){return Q=Q.toString(),Jt+=Q.length+1,Ee.push(Q),Ee},dr=U.__private__.write=function(Q){return rt(arguments.length===1?Q.toString():Array.prototype.join.call(arguments," "))},je=U.__private__.getArrayBuffer=function(Q){for(var J=Q.length,bt=new ArrayBuffer(J),Dt=new Uint8Array(bt);J--;)Dt[J]=Q.charCodeAt(J);return bt},se=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];U.__private__.getStandardFonts=function(){return se};var fe=n.fontSize||16;U.__private__.setFontSize=U.setFontSize=function(Q){return fe=ht===tt.ADVANCED?Q/Le:Q,this};var Ue,Se=U.__private__.getFontSize=U.getFontSize=function(){return ht===tt.COMPAT?fe:fe*Le},Re=n.R2L||!1;U.__private__.setR2L=U.setR2L=function(Q){return Re=Q,this},U.__private__.getR2L=U.getR2L=function(){return Re};var We,ar=U.__private__.setZoomMode=function(Q){var J=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(Q))Ue=Q;else if(isNaN(Q)){if(J.indexOf(Q)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+Q+'" is not recognized.');Ue=Q}else Ue=parseInt(Q,10)};U.__private__.getZoomMode=function(){return Ue};var wr,Fr=U.__private__.setPageMode=function(Q){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(Q)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+Q+'" is not recognized.');We=Q};U.__private__.getPageMode=function(){return We};var oe=U.__private__.setLayoutMode=function(Q){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(Q)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+Q+'" is not recognized.');wr=Q};U.__private__.getLayoutMode=function(){return wr},U.__private__.setDisplayMode=U.setDisplayMode=function(Q,J,bt){return ar(Q),oe(J),Fr(bt),this};var er={title:"",subject:"",author:"",keywords:"",creator:""};U.__private__.getDocumentProperty=function(Q){if(Object.keys(er).indexOf(Q)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return er[Q]},U.__private__.getDocumentProperties=function(){return er},U.__private__.setDocumentProperties=U.setProperties=U.setDocumentProperties=function(Q){for(var J in er)er.hasOwnProperty(J)&&Q[J]&&(er[J]=Q[J]);return this},U.__private__.setDocumentProperty=function(Q,J){if(Object.keys(er).indexOf(Q)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return er[Q]=J};var or,Le,Zr,ce,ir,Pe={},_r={},ni=[],Qe={},mi={},Kr={},si={},Xr=null,yt=0,$=[],X=new fv(U),at=n.hotfixes||[],ft={},Qt={},Nt=[],Pt=function Q(J,bt,Dt,qt,ne,be){if(!(this instanceof Q))return new Q(J,bt,Dt,qt,ne,be);isNaN(J)&&(J=1),isNaN(bt)&&(bt=0),isNaN(Dt)&&(Dt=0),isNaN(qt)&&(qt=1),isNaN(ne)&&(ne=0),isNaN(be)&&(be=0),this._matrix=[J,bt,Dt,qt,ne,be]};Object.defineProperty(Pt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(Q){this._matrix[0]=Q}}),Object.defineProperty(Pt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(Q){this._matrix[1]=Q}}),Object.defineProperty(Pt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(Q){this._matrix[2]=Q}}),Object.defineProperty(Pt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(Q){this._matrix[3]=Q}}),Object.defineProperty(Pt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(Q){this._matrix[4]=Q}}),Object.defineProperty(Pt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(Q){this._matrix[5]=Q}}),Object.defineProperty(Pt.prototype,"a",{get:function(){return this._matrix[0]},set:function(Q){this._matrix[0]=Q}}),Object.defineProperty(Pt.prototype,"b",{get:function(){return this._matrix[1]},set:function(Q){this._matrix[1]=Q}}),Object.defineProperty(Pt.prototype,"c",{get:function(){return this._matrix[2]},set:function(Q){this._matrix[2]=Q}}),Object.defineProperty(Pt.prototype,"d",{get:function(){return this._matrix[3]},set:function(Q){this._matrix[3]=Q}}),Object.defineProperty(Pt.prototype,"e",{get:function(){return this._matrix[4]},set:function(Q){this._matrix[4]=Q}}),Object.defineProperty(Pt.prototype,"f",{get:function(){return this._matrix[5]},set:function(Q){this._matrix[5]=Q}}),Object.defineProperty(Pt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Pt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Pt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Pt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Pt.prototype.join=function(Q){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(xt).join(Q)},Pt.prototype.multiply=function(Q){var J=Q.sx*this.sx+Q.shy*this.shx,bt=Q.sx*this.shy+Q.shy*this.sy,Dt=Q.shx*this.sx+Q.sy*this.shx,qt=Q.shx*this.shy+Q.sy*this.sy,ne=Q.tx*this.sx+Q.ty*this.shx+this.tx,be=Q.tx*this.shy+Q.ty*this.sy+this.ty;return new Pt(J,bt,Dt,qt,ne,be)},Pt.prototype.decompose=function(){var Q=this.sx,J=this.shy,bt=this.shx,Dt=this.sy,qt=this.tx,ne=this.ty,be=Math.sqrt(Q*Q+J*J),He=(Q/=be)*bt+(J/=be)*Dt;bt-=Q*He,Dt-=J*He;var ur=Math.sqrt(bt*bt+Dt*Dt);return He/=ur,Q*(Dt/=ur)<J*(bt/=ur)&&(Q=-Q,J=-J,He=-He,be=-be),{scale:new Pt(be,0,0,ur,0,0),translate:new Pt(1,0,0,1,qt,ne),rotate:new Pt(Q,J,-J,Q,0,0),skew:new Pt(1,0,He,1,0,0)}},Pt.prototype.toString=function(Q){return this.join(" ")},Pt.prototype.inversed=function(){var Q=this.sx,J=this.shy,bt=this.shx,Dt=this.sy,qt=this.tx,ne=this.ty,be=1/(Q*Dt-J*bt),He=Dt*be,ur=-J*be,Ir=-bt*be,Er=Q*be;return new Pt(He,ur,Ir,Er,-He*qt-Ir*ne,-ur*qt-Er*ne)},Pt.prototype.applyToPoint=function(Q){var J=Q.x*this.sx+Q.y*this.shx+this.tx,bt=Q.x*this.shy+Q.y*this.sy+this.ty;return new Bs(J,bt)},Pt.prototype.applyToRectangle=function(Q){var J=this.applyToPoint(Q),bt=this.applyToPoint(new Bs(Q.x+Q.w,Q.y+Q.h));return new bA(J.x,J.y,bt.x-J.x,bt.y-J.y)},Pt.prototype.clone=function(){var Q=this.sx,J=this.shy,bt=this.shx,Dt=this.sy,qt=this.tx,ne=this.ty;return new Pt(Q,J,bt,Dt,qt,ne)},U.Matrix=Pt;var Et=U.matrixMult=function(Q,J){return J.multiply(Q)},te=new Pt(1,0,0,1,0,0);U.unitMatrix=U.identityMatrix=te;var ae=function(Q,J){if(!mi[Q]){var bt=(J instanceof yc?"Sh":"P")+(Object.keys(Qe).length+1).toString(10);J.id=bt,mi[Q]=bt,Qe[bt]=J,X.publish("addPattern",J)}};U.ShadingPattern=yc,U.TilingPattern=cu,U.addShadingPattern=function(Q,J){return pt("addShadingPattern()"),ae(Q,J),this},U.beginTilingPattern=function(Q){pt("beginTilingPattern()"),hl(Q.boundingBox[0],Q.boundingBox[1],Q.boundingBox[2]-Q.boundingBox[0],Q.boundingBox[3]-Q.boundingBox[1],Q.matrix)},U.endTilingPattern=function(Q,J){pt("endTilingPattern()"),J.stream=we[dt].join(`
`),ae(Q,J),X.publish("endTilingPattern",J),Nt.pop().restore()};var Gt=U.__private__.newObject=function(){var Q=ue();return Me(Q,!0),Q},ue=U.__private__.newObjectDeferred=function(){return Ot++,Rt[Ot]=function(){return Jt},Ot},Me=function(Q,J){return J=typeof J=="boolean"&&J,Rt[Q]=Jt,J&&rt(Q+" 0 obj"),Q},Xe=U.__private__.newAdditionalObject=function(){var Q={objId:ue(),content:""};return xe.push(Q),Q},Sr=ue(),nr=ue(),br=U.__private__.decodeColorString=function(Q){var J=Q.split(" ");if(J.length!==2||J[1]!=="g"&&J[1]!=="G")J.length===5&&(J[4]==="k"||J[4]==="K")&&(J=[(1-J[0])*(1-J[3]),(1-J[1])*(1-J[3]),(1-J[2])*(1-J[3]),"r"]);else{var bt=parseFloat(J[0]);J=[bt,bt,bt,"r"]}for(var Dt="#",qt=0;qt<3;qt++)Dt+=("0"+Math.floor(255*parseFloat(J[qt])).toString(16)).slice(-2);return Dt},Ar=U.__private__.encodeColorString=function(Q){var J;typeof Q=="string"&&(Q={ch1:Q});var bt=Q.ch1,Dt=Q.ch2,qt=Q.ch3,ne=Q.ch4,be=Q.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof bt=="string"&&bt.charAt(0)!=="#"){var He=new uv(bt);if(He.ok)bt=He.toHex();else if(!/^\d*\.?\d*$/.test(bt))throw new Error('Invalid color "'+bt+'" passed to jsPDF.encodeColorString.')}if(typeof bt=="string"&&/^#[0-9A-Fa-f]{3}$/.test(bt)&&(bt="#"+bt[1]+bt[1]+bt[2]+bt[2]+bt[3]+bt[3]),typeof bt=="string"&&/^#[0-9A-Fa-f]{6}$/.test(bt)){var ur=parseInt(bt.substr(1),16);bt=ur>>16&255,Dt=ur>>8&255,qt=255&ur}if(Dt===void 0||ne===void 0&&bt===Dt&&Dt===qt)if(typeof bt=="string")J=bt+" "+be[0];else switch(Q.precision){case 2:J=Xt(bt/255)+" "+be[0];break;case 3:default:J=st(bt/255)+" "+be[0]}else if(ne===void 0||Ai(ne)==="object"){if(ne&&!isNaN(ne.a)&&ne.a===0)return J=["1.","1.","1.",be[1]].join(" ");if(typeof bt=="string")J=[bt,Dt,qt,be[1]].join(" ");else switch(Q.precision){case 2:J=[Xt(bt/255),Xt(Dt/255),Xt(qt/255),be[1]].join(" ");break;default:case 3:J=[st(bt/255),st(Dt/255),st(qt/255),be[1]].join(" ")}}else if(typeof bt=="string")J=[bt,Dt,qt,ne,be[2]].join(" ");else switch(Q.precision){case 2:J=[Xt(bt),Xt(Dt),Xt(qt),Xt(ne),be[2]].join(" ");break;case 3:default:J=[st(bt),st(Dt),st(qt),st(ne),be[2]].join(" ")}return J},Yr=U.__private__.getFilters=function(){return d},$r=U.__private__.putStream=function(Q){var J=(Q=Q||{}).data||"",bt=Q.filters||Yr(),Dt=Q.alreadyAppliedFilters||[],qt=Q.addLength1||!1,ne=J.length,be=Q.objectId,He=function(Fn){return Fn};if(I!==null&&be===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");I!==null&&(He=ki.encryptor(be,0));var ur={};bt===!0&&(bt=["FlateEncode"]);var Ir=Q.additionalKeyValues||[],Er=(ur=Ur.API.processDataByFilters!==void 0?Ur.API.processDataByFilters(J,bt):{data:J,reverseChain:[]}).reverseChain+(Array.isArray(Dt)?Dt.join(" "):Dt.toString());if(ur.data.length!==0&&(Ir.push({key:"Length",value:ur.data.length}),qt===!0&&Ir.push({key:"Length1",value:ne})),Er.length!=0)if(Er.split("/").length-1==1)Ir.push({key:"Filter",value:Er});else{Ir.push({key:"Filter",value:"["+Er+"]"});for(var Or=0;Or<Ir.length;Or+=1)if(Ir[Or].key==="DecodeParms"){for(var wi=[],Ri=0;Ri<ur.reverseChain.split("/").length-1;Ri+=1)wi.push("null");wi.push(Ir[Or].value),Ir[Or].value="["+wi.join(" ")+"]"}}rt("<<");for(var kr=0;kr<Ir.length;kr++)rt("/"+Ir[kr].key+" "+Ir[kr].value);rt(">>"),ur.data.length!==0&&(rt("stream"),rt(He(ur.data)),rt("endstream"))},gr=U.__private__.putPage=function(Q){var J=Q.number,bt=Q.data,Dt=Q.objId,qt=Q.contentsObjId;Me(Dt,!0),rt("<</Type /Page"),rt("/Parent "+Q.rootDictionaryObjId+" 0 R"),rt("/Resources "+Q.resourceDictionaryObjId+" 0 R"),rt("/MediaBox ["+parseFloat(xt(Q.mediaBox.bottomLeftX))+" "+parseFloat(xt(Q.mediaBox.bottomLeftY))+" "+xt(Q.mediaBox.topRightX)+" "+xt(Q.mediaBox.topRightY)+"]"),Q.cropBox!==null&&rt("/CropBox ["+xt(Q.cropBox.bottomLeftX)+" "+xt(Q.cropBox.bottomLeftY)+" "+xt(Q.cropBox.topRightX)+" "+xt(Q.cropBox.topRightY)+"]"),Q.bleedBox!==null&&rt("/BleedBox ["+xt(Q.bleedBox.bottomLeftX)+" "+xt(Q.bleedBox.bottomLeftY)+" "+xt(Q.bleedBox.topRightX)+" "+xt(Q.bleedBox.topRightY)+"]"),Q.trimBox!==null&&rt("/TrimBox ["+xt(Q.trimBox.bottomLeftX)+" "+xt(Q.trimBox.bottomLeftY)+" "+xt(Q.trimBox.topRightX)+" "+xt(Q.trimBox.topRightY)+"]"),Q.artBox!==null&&rt("/ArtBox ["+xt(Q.artBox.bottomLeftX)+" "+xt(Q.artBox.bottomLeftY)+" "+xt(Q.artBox.topRightX)+" "+xt(Q.artBox.topRightY)+"]"),typeof Q.userUnit=="number"&&Q.userUnit!==1&&rt("/UserUnit "+Q.userUnit),X.publish("putPage",{objId:Dt,pageContext:$[J],pageNumber:J,page:bt}),rt("/Contents "+qt+" 0 R"),rt(">>"),rt("endobj");var ne=bt.join(`
`);return ht===tt.ADVANCED&&(ne+=`
Q`),Me(qt,!0),$r({data:ne,filters:Yr(),objectId:qt}),rt("endobj"),Dt},zr=U.__private__.putPages=function(){var Q,J,bt=[];for(Q=1;Q<=yt;Q++)$[Q].objId=ue(),$[Q].contentsObjId=ue();for(Q=1;Q<=yt;Q++)bt.push(gr({number:Q,data:we[Q],objId:$[Q].objId,contentsObjId:$[Q].contentsObjId,mediaBox:$[Q].mediaBox,cropBox:$[Q].cropBox,bleedBox:$[Q].bleedBox,trimBox:$[Q].trimBox,artBox:$[Q].artBox,userUnit:$[Q].userUnit,rootDictionaryObjId:Sr,resourceDictionaryObjId:nr}));Me(Sr,!0),rt("<</Type /Pages");var Dt="/Kids [";for(J=0;J<yt;J++)Dt+=bt[J]+" 0 R ";rt(Dt+"]"),rt("/Count "+yt),rt(">>"),rt("endobj"),X.publish("postPutPages")},Jr=function(Q){X.publish("putFont",{font:Q,out:rt,newObject:Gt,putStream:$r}),Q.isAlreadyPutted!==!0&&(Q.objectNumber=Gt(),rt("<<"),rt("/Type /Font"),rt("/BaseFont /"+lu(Q.postScriptName)),rt("/Subtype /Type1"),typeof Q.encoding=="string"&&rt("/Encoding /"+Q.encoding),rt("/FirstChar 32"),rt("/LastChar 255"),rt(">>"),rt("endobj"))},Ft=function(){for(var Q in Pe)Pe.hasOwnProperty(Q)&&(T===!1||T===!0&&P.hasOwnProperty(Q))&&Jr(Pe[Q])},Ie=function(Q){Q.objectNumber=Gt();var J=[];J.push({key:"Type",value:"/XObject"}),J.push({key:"Subtype",value:"/Form"}),J.push({key:"BBox",value:"["+[xt(Q.x),xt(Q.y),xt(Q.x+Q.width),xt(Q.y+Q.height)].join(" ")+"]"}),J.push({key:"Matrix",value:"["+Q.matrix.toString()+"]"});var bt=Q.pages[1].join(`
`);$r({data:bt,additionalKeyValues:J,objectId:Q.objectNumber}),rt("endobj")},ve=function(){for(var Q in ft)ft.hasOwnProperty(Q)&&Ie(ft[Q])},Pr=function(Q,J){var bt,Dt=[],qt=1/(J-1);for(bt=0;bt<1;bt+=qt)Dt.push(bt);if(Dt.push(1),Q[0].offset!=0){var ne={offset:0,color:Q[0].color};Q.unshift(ne)}if(Q[Q.length-1].offset!=1){var be={offset:1,color:Q[Q.length-1].color};Q.push(be)}for(var He="",ur=0,Ir=0;Ir<Dt.length;Ir++){for(bt=Dt[Ir];bt>Q[ur+1].offset;)ur++;var Er=Q[ur].offset,Or=(bt-Er)/(Q[ur+1].offset-Er),wi=Q[ur].color,Ri=Q[ur+1].color;He+=Ct(Math.round((1-Or)*wi[0]+Or*Ri[0]).toString(16))+Ct(Math.round((1-Or)*wi[1]+Or*Ri[1]).toString(16))+Ct(Math.round((1-Or)*wi[2]+Or*Ri[2]).toString(16))}return He.trim()},mr=function(Q,J){J||(J=21);var bt=Gt(),Dt=Pr(Q.colors,J),qt=[];qt.push({key:"FunctionType",value:"0"}),qt.push({key:"Domain",value:"[0.0 1.0]"}),qt.push({key:"Size",value:"["+J+"]"}),qt.push({key:"BitsPerSample",value:"8"}),qt.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),qt.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),$r({data:Dt,additionalKeyValues:qt,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:bt}),rt("endobj"),Q.objectNumber=Gt(),rt("<< /ShadingType "+Q.type),rt("/ColorSpace /DeviceRGB");var ne="/Coords ["+xt(parseFloat(Q.coords[0]))+" "+xt(parseFloat(Q.coords[1]))+" ";Q.type===2?ne+=xt(parseFloat(Q.coords[2]))+" "+xt(parseFloat(Q.coords[3])):ne+=xt(parseFloat(Q.coords[2]))+" "+xt(parseFloat(Q.coords[3]))+" "+xt(parseFloat(Q.coords[4]))+" "+xt(parseFloat(Q.coords[5])),rt(ne+="]"),Q.matrix&&rt("/Matrix ["+Q.matrix.toString()+"]"),rt("/Function "+bt+" 0 R"),rt("/Extend [true true]"),rt(">>"),rt("endobj")},Xi=function(Q,J){var bt=ue(),Dt=Gt();J.push({resourcesOid:bt,objectOid:Dt}),Q.objectNumber=Dt;var qt=[];qt.push({key:"Type",value:"/Pattern"}),qt.push({key:"PatternType",value:"1"}),qt.push({key:"PaintType",value:"1"}),qt.push({key:"TilingType",value:"1"}),qt.push({key:"BBox",value:"["+Q.boundingBox.map(xt).join(" ")+"]"}),qt.push({key:"XStep",value:xt(Q.xStep)}),qt.push({key:"YStep",value:xt(Q.yStep)}),qt.push({key:"Resources",value:bt+" 0 R"}),Q.matrix&&qt.push({key:"Matrix",value:"["+Q.matrix.toString()+"]"}),$r({data:Q.stream,additionalKeyValues:qt,objectId:Q.objectNumber}),rt("endobj")},li=function(Q){var J;for(J in Qe)Qe.hasOwnProperty(J)&&(Qe[J]instanceof yc?mr(Qe[J]):Qe[J]instanceof cu&&Xi(Qe[J],Q))},yi=function(Q){for(var J in Q.objectNumber=Gt(),rt("<<"),Q)switch(J){case"opacity":rt("/ca "+Xt(Q[J]));break;case"stroke-opacity":rt("/CA "+Xt(Q[J]))}rt(">>"),rt("endobj")},fi=function(){var Q;for(Q in Kr)Kr.hasOwnProperty(Q)&&yi(Kr[Q])},ji=function(){for(var Q in rt("/XObject <<"),ft)ft.hasOwnProperty(Q)&&ft[Q].objectNumber>=0&&rt("/"+Q+" "+ft[Q].objectNumber+" 0 R");X.publish("putXobjectDict"),rt(">>")},pn=function(){ki.oid=Gt(),rt("<<"),rt("/Filter /Standard"),rt("/V "+ki.v),rt("/R "+ki.r),rt("/U <"+ki.toHexString(ki.U)+">"),rt("/O <"+ki.toHexString(ki.O)+">"),rt("/P "+ki.P),rt(">>"),rt("endobj")},Cn=function(){for(var Q in rt("/Font <<"),Pe)Pe.hasOwnProperty(Q)&&(T===!1||T===!0&&P.hasOwnProperty(Q))&&rt("/"+Q+" "+Pe[Q].objectNumber+" 0 R");rt(">>")},Xa=function(){if(Object.keys(Qe).length>0){for(var Q in rt("/Shading <<"),Qe)Qe.hasOwnProperty(Q)&&Qe[Q]instanceof yc&&Qe[Q].objectNumber>=0&&rt("/"+Q+" "+Qe[Q].objectNumber+" 0 R");X.publish("putShadingPatternDict"),rt(">>")}},bs=function(Q){if(Object.keys(Qe).length>0){for(var J in rt("/Pattern <<"),Qe)Qe.hasOwnProperty(J)&&Qe[J]instanceof U.TilingPattern&&Qe[J].objectNumber>=0&&Qe[J].objectNumber<Q&&rt("/"+J+" "+Qe[J].objectNumber+" 0 R");X.publish("putTilingPatternDict"),rt(">>")}},Qi=function(){if(Object.keys(Kr).length>0){var Q;for(Q in rt("/ExtGState <<"),Kr)Kr.hasOwnProperty(Q)&&Kr[Q].objectNumber>=0&&rt("/"+Q+" "+Kr[Q].objectNumber+" 0 R");X.publish("putGStateDict"),rt(">>")}},vi=function(Q){Me(Q.resourcesOid,!0),rt("<<"),rt("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Cn(),Xa(),bs(Q.objectOid),Qi(),ji(),rt(">>"),rt("endobj")},$n=function(){var Q=[];Ft(),fi(),ve(),li(Q),X.publish("putResources"),Q.forEach(vi),vi({resourcesOid:nr,objectOid:Number.MAX_SAFE_INTEGER}),X.publish("postPutResources")},Fi=function(){X.publish("putAdditionalObjects");for(var Q=0;Q<xe.length;Q++){var J=xe[Q];Me(J.objId,!0),rt(J.content),rt("endobj")}X.publish("postPutAdditionalObjects")},Po=function(Q){_r[Q.fontName]=_r[Q.fontName]||{},_r[Q.fontName][Q.fontStyle]=Q.id},Dn=function(Q,J,bt,Dt,qt){var ne={id:"F"+(Object.keys(Pe).length+1).toString(10),postScriptName:Q,fontName:J,fontStyle:bt,encoding:Dt,isStandardFont:qt||!1,metadata:{}};return X.publish("addFont",{font:ne,instance:this}),Pe[ne.id]=ne,Po(ne),ne.id},al=function(Q){for(var J=0,bt=se.length;J<bt;J++){var Dt=Dn.call(this,Q[J][0],Q[J][1],Q[J][2],se[J][3],!0);T===!1&&(P[Dt]=!0);var qt=Q[J][0].split("-");Po({id:Dt,fontName:qt[0],fontStyle:qt[1]||""})}X.publish("addFonts",{fonts:Pe,dictionary:_r})},Oi=function(Q){return Q.foo=function(){try{return Q.apply(this,arguments)}catch(Dt){var J=Dt.stack||"";~J.indexOf(" at ")&&(J=J.split(" at ")[1]);var bt="Error in function "+J.split(`
`)[0].split("<")[0]+": "+Dt.message;if(!Tr.console)throw new Error(bt);Tr.console.error(bt,Dt),Tr.alert&&alert(bt)}},Q.foo.bar=Q,Q.foo},AA=function(Q,J){var bt,Dt,qt,ne,be,He,ur,Ir,Er;if(qt=(J=J||{}).sourceEncoding||"Unicode",be=J.outputEncoding,(J.autoencode||be)&&Pe[or].metadata&&Pe[or].metadata[qt]&&Pe[or].metadata[qt].encoding&&(ne=Pe[or].metadata[qt].encoding,!be&&Pe[or].encoding&&(be=Pe[or].encoding),!be&&ne.codePages&&(be=ne.codePages[0]),typeof be=="string"&&(be=ne[be]),be)){for(ur=!1,He=[],bt=0,Dt=Q.length;bt<Dt;bt++)(Ir=be[Q.charCodeAt(bt)])?He.push(String.fromCharCode(Ir)):He.push(Q[bt]),He[bt].charCodeAt(0)>>8&&(ur=!0);Q=He.join("")}for(bt=Q.length;ur===void 0&&bt!==0;)Q.charCodeAt(bt-1)>>8&&(ur=!0),bt--;if(!ur)return Q;for(He=J.noBOM?[]:[254,255],bt=0,Dt=Q.length;bt<Dt;bt++){if((Er=(Ir=Q.charCodeAt(bt))>>8)>>8)throw new Error("Character at position "+bt+" of string '"+Q+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");He.push(Er),He.push(Ir-(Er<<8))}return String.fromCharCode.apply(void 0,He)},fn=U.__private__.pdfEscape=U.pdfEscape=function(Q,J){return AA(Q,J).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Rs=U.__private__.beginPage=function(Q){we[++yt]=[],$[yt]={objId:0,contentsObjId:0,userUnit:Number(A),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(Q[0]),topRightY:Number(Q[1])}},lA(yt),ie(we[dt])},zs=function(Q,J){var bt,Dt,qt;switch(i=J||i,typeof Q=="string"&&(bt=K(Q.toLowerCase()),Array.isArray(bt)&&(Dt=bt[0],qt=bt[1])),Array.isArray(Q)&&(Dt=Q[0]*Le,qt=Q[1]*Le),isNaN(Dt)&&(Dt=c[0],qt=c[1]),(Dt>14400||qt>14400)&&(Ti.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Dt=Math.min(14400,Dt),qt=Math.min(14400,qt)),c=[Dt,qt],i.substr(0,1)){case"l":qt>Dt&&(c=[qt,Dt]);break;case"p":Dt>qt&&(c=[qt,Dt])}Rs(c),tc(Do),rt(js),wA!==0&&rt(wA+" J"),_A!==0&&rt(_A+" j"),X.publish("addPage",{pageNumber:yt})},Wr=function(Q){Q>0&&Q<=yt&&(we.splice(Q,1),$.splice(Q,1),yt--,dt>yt&&(dt=yt),this.setPage(dt))},lA=function(Q){Q>0&&Q<=yt&&(dt=Q)},ol=U.__private__.getNumberOfPages=U.getNumberOfPages=function(){return we.length-1},Fa=function(Q,J,bt){var Dt,qt=void 0;return bt=bt||{},Q=Q!==void 0?Q:Pe[or].fontName,J=J!==void 0?J:Pe[or].fontStyle,Dt=Q.toLowerCase(),_r[Dt]!==void 0&&_r[Dt][J]!==void 0?qt=_r[Dt][J]:_r[Q]!==void 0&&_r[Q][J]!==void 0?qt=_r[Q][J]:bt.disableWarning===!1&&Ti.warn("Unable to look up font label for font '"+Q+"', '"+J+"'. Refer to getFontList() for available fonts."),qt||bt.noFallback||(qt=_r.times[J])==null&&(qt=_r.times.normal),qt},Al=U.__private__.putInfo=function(){var Q=Gt(),J=function(Dt){return Dt};for(var bt in I!==null&&(J=ki.encryptor(Q,0)),rt("<<"),rt("/Producer ("+fn(J("jsPDF "+Ur.version))+")"),er)er.hasOwnProperty(bt)&&er[bt]&&rt("/"+bt.substr(0,1).toUpperCase()+bt.substr(1)+" ("+fn(J(er[bt]))+")");rt("/CreationDate ("+fn(J($t))+")"),rt(">>"),rt("endobj")},Wa=U.__private__.putCatalog=function(Q){var J=(Q=Q||{}).rootDictionaryObjId||Sr;switch(Gt(),rt("<<"),rt("/Type /Catalog"),rt("/Pages "+J+" 0 R"),Ue||(Ue="fullwidth"),Ue){case"fullwidth":rt("/OpenAction [3 0 R /FitH null]");break;case"fullheight":rt("/OpenAction [3 0 R /FitV null]");break;case"fullpage":rt("/OpenAction [3 0 R /Fit]");break;case"original":rt("/OpenAction [3 0 R /XYZ null null 1]");break;default:var bt=""+Ue;bt.substr(bt.length-1)==="%"&&(Ue=parseInt(Ue)/100),typeof Ue=="number"&&rt("/OpenAction [3 0 R /XYZ null null "+Xt(Ue)+"]")}switch(wr||(wr="continuous"),wr){case"continuous":rt("/PageLayout /OneColumn");break;case"single":rt("/PageLayout /SinglePage");break;case"two":case"twoleft":rt("/PageLayout /TwoColumnLeft");break;case"tworight":rt("/PageLayout /TwoColumnRight")}We&&rt("/PageMode /"+We),X.publish("putCatalog"),rt(">>"),rt("endobj")},Qo=U.__private__.putTrailer=function(){rt("trailer"),rt("<<"),rt("/Size "+(Ot+1)),rt("/Root "+Ot+" 0 R"),rt("/Info "+(Ot-1)+" 0 R"),I!==null&&rt("/Encrypt "+ki.oid+" 0 R"),rt("/ID [ <"+Vt+"> <"+Vt+"> ]"),rt(">>")},cA=U.__private__.putHeader=function(){rt("%PDF-"+V),rt("%ºß¬à")},Za=U.__private__.putXRef=function(){var Q="0000000000";rt("xref"),rt("0 "+(Ot+1)),rt("0000000000 65535 f ");for(var J=1;J<=Ot;J++)typeof Rt[J]=="function"?rt((Q+Rt[J]()).slice(-10)+" 00000 n "):Rt[J]!==void 0?rt((Q+Rt[J]).slice(-10)+" 00000 n "):rt("0000000000 00000 n ")},aa=U.__private__.buildDocument=function(){Ve(),ie(Zt),X.publish("buildDocument"),cA(),zr(),Fi(),$n(),I!==null&&pn(),Al(),Wa();var Q=Jt;return Za(),Qo(),rt("startxref"),rt(""+Q),rt("%%EOF"),ie(we[dt]),Zt.join(`
`)},uA=U.__private__.getBlob=function(Q){return new Blob([je(Q)],{type:"application/pdf"})},ko=U.output=U.__private__.output=Oi(function(Q,J){switch(typeof(J=J||{})=="string"?J={filename:J}:J.filename=J.filename||"generated.pdf",Q){case void 0:return aa();case"save":U.save(J.filename);break;case"arraybuffer":return je(aa());case"blob":return uA(aa());case"bloburi":case"bloburl":if(Tr.URL!==void 0&&typeof Tr.URL.createObjectURL=="function")return Tr.URL&&Tr.URL.createObjectURL(uA(aa()))||void 0;Ti.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var bt="",Dt=aa();try{bt=Ig(Dt)}catch{bt=Ig(unescape(encodeURIComponent(Dt)))}return"data:application/pdf;filename="+J.filename+";base64,"+bt;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Tr)==="[object Window]"){var qt="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",ne=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';J.pdfObjectUrl&&(qt=J.pdfObjectUrl,ne="");var be='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+qt+'"'+ne+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(J)+");<\/script></body></html>",He=Tr.open();return He!==null&&He.document.write(be),He}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Tr)==="[object Window]"){var ur='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(J.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+J.filename+'" width="500px" height="400px" /></body></html>',Ir=Tr.open();if(Ir!==null){Ir.document.write(ur);var Er=this;Ir.document.documentElement.querySelector("#pdfViewer").onload=function(){Ir.document.title=J.filename,Ir.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Er.output("bloburl"))}}return Ir}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Tr)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Or='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",J)+'"></iframe></body></html>',wi=Tr.open();if(wi!==null&&(wi.document.write(Or),wi.document.title=J.filename),wi||typeof safari>"u")return wi;break;case"datauri":case"dataurl":return Tr.document.location.href=this.output("datauristring",J);default:return null}}),Yl=function(Q){return Array.isArray(at)===!0&&at.indexOf(Q)>-1};switch(s){case"pt":Le=1;break;case"mm":Le=72/25.4;break;case"cm":Le=72/2.54;break;case"in":Le=72;break;case"px":Le=Yl("px_scaling")==1?.75:96/72;break;case"pc":case"em":Le=12;break;case"ex":Le=6;break;default:if(typeof s!="number")throw new Error("Invalid unit: "+s);Le=s}var ki=null;me(),zt();var Mo=function(Q){return I!==null?ki.encryptor(Q,0):function(J){return J}},gn=U.__private__.getPageInfo=U.getPageInfo=function(Q){if(isNaN(Q)||Q%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:$[Q].objId,pageNumber:Q,pageContext:$[Q]}},lr=U.__private__.getPageInfoByObjId=function(Q){if(isNaN(Q)||Q%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var J in $)if($[J].objId===Q)break;return gn(J)},hA=U.__private__.getCurrentPageInfo=U.getCurrentPageInfo=function(){return{objId:$[dt].objId,pageNumber:dt,pageContext:$[dt]}};U.addPage=function(){return zs.apply(this,arguments),this},U.setPage=function(){return lA.apply(this,arguments),ie.call(this,we[dt]),this},U.insertPage=function(Q){return this.addPage(),this.movePage(dt,Q),this},U.movePage=function(Q,J){var bt,Dt;if(Q>J){bt=we[Q],Dt=$[Q];for(var qt=Q;qt>J;qt--)we[qt]=we[qt-1],$[qt]=$[qt-1];we[J]=bt,$[J]=Dt,this.setPage(J)}else if(Q<J){bt=we[Q],Dt=$[Q];for(var ne=Q;ne<J;ne++)we[ne]=we[ne+1],$[ne]=$[ne+1];we[J]=bt,$[J]=Dt,this.setPage(J)}return this},U.deletePage=function(){return Wr.apply(this,arguments),this},U.__private__.text=U.text=function(Q,J,bt,Dt,qt){var ne,be,He,ur,Ir,Er,Or,wi,Ri,kr=(Dt=Dt||{}).scope||this;if(typeof Q=="number"&&typeof J=="number"&&(typeof bt=="string"||Array.isArray(bt))){var Fn=bt;bt=J,J=Q,Q=Fn}if(arguments[3]instanceof Pt?(pt("The transform parameter of text() with a Matrix value"),Ri=qt):(He=arguments[4],ur=arguments[5],Ai(Or=arguments[3])==="object"&&Or!==null||(typeof He=="string"&&(ur=He,He=null),typeof Or=="string"&&(ur=Or,Or=null),typeof Or=="number"&&(He=Or,Or=null),Dt={flags:Or,angle:He,align:ur})),isNaN(J)||isNaN(bt)||Q==null)throw new Error("Invalid arguments passed to jsPDF.text");if(Q.length===0)return kr;var cr="",Gn=!1,Vr=typeof Dt.lineHeightFactor=="number"?Dt.lineHeightFactor:Ia,jr=kr.internal.scaleFactor;function ca(Dr){return Dr=Dr.split("	").join(Array(Dt.TabLen||9).join(" ")),fn(Dr,Or)}function Ea(Dr){for(var ti,Mi=Dr.concat(),$i=[],ai=Mi.length;ai--;)typeof(ti=Mi.shift())=="string"?$i.push(ti):Array.isArray(Dr)&&(ti.length===1||ti[1]===void 0&&ti[2]===void 0)?$i.push(ti[0]):$i.push([ti[0],ti[1],ti[2]]);return $i}function Ta(Dr,ti){var Mi;if(typeof Dr=="string")Mi=ti(Dr)[0];else if(Array.isArray(Dr)){for(var $i,ai,On=Dr.concat(),rn=[],ao=On.length;ao--;)typeof($i=On.shift())=="string"?rn.push(ti($i)[0]):Array.isArray($i)&&typeof $i[0]=="string"&&(ai=ti($i[0],$i[1],$i[2]),rn.push([ai[0],ai[1],ai[2]]));Mi=rn}return Mi}var to=!1,Ks=!0;if(typeof Q=="string")to=!0;else if(Array.isArray(Q)){var ua=Q.concat();be=[];for(var mn,Wi=ua.length;Wi--;)(typeof(mn=ua.shift())!="string"||Array.isArray(mn)&&typeof mn[0]!="string")&&(Ks=!1);to=Ks}if(to===!1)throw new Error('Type of text must be string or Array. "'+Q+'" is not recognized.');typeof Q=="string"&&(Q=Q.match(/[\r?\n]/)?Q.split(/\r\n|\r|\n/g):[Q]);var eo=fe/kr.internal.scaleFactor,ro=eo*(Vr-1);switch(Dt.baseline){case"bottom":bt-=ro;break;case"top":bt+=eo-ro;break;case"hanging":bt+=eo-2*ro;break;case"middle":bt+=eo/2-ro}if((Er=Dt.maxWidth||0)>0&&(typeof Q=="string"?Q=kr.splitTextToSize(Q,Er):Object.prototype.toString.call(Q)==="[object Array]"&&(Q=Q.reduce(function(Dr,ti){return Dr.concat(kr.splitTextToSize(ti,Er))},[]))),ne={text:Q,x:J,y:bt,options:Dt,mutex:{pdfEscape:fn,activeFontKey:or,fonts:Pe,activeFontSize:fe}},X.publish("preProcessText",ne),Q=ne.text,He=(Dt=ne.options).angle,!(Ri instanceof Pt)&&He&&typeof He=="number"){He*=Math.PI/180,Dt.rotationDirection===0&&(He=-He),ht===tt.ADVANCED&&(He=-He);var Cs=Math.cos(He),Ua=Math.sin(He);Ri=new Pt(Cs,Ua,-Ua,Cs,0,0)}else He&&He instanceof Pt&&(Ri=He);ht!==tt.ADVANCED||Ri||(Ri=te),(Ir=Dt.charSpace||Ya)!==void 0&&(cr+=xt(ut(Ir))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(wi=Dt.horizontalScale)!==void 0&&(cr+=xt(100*wi)+` Tz
`),Dt.lang;var en=-1,io=Dt.renderingMode!==void 0?Dt.renderingMode:Dt.stroke,La=kr.internal.getCurrentPageInfo().pageContext;switch(io){case 0:case!1:case"fill":en=0;break;case 1:case!0:case"stroke":en=1;break;case 2:case"fillThenStroke":en=2;break;case 3:case"invisible":en=3;break;case 4:case"fillAndAddForClipping":en=4;break;case 5:case"strokeAndAddPathForClipping":en=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":en=6;break;case 7:case"addToPathForClipping":en=7}var Ro=La.usedRenderingMode!==void 0?La.usedRenderingMode:-1;en!==-1?cr+=en+` Tr
`:Ro!==-1&&(cr+=`0 Tr
`),en!==-1&&(La.usedRenderingMode=en),ur=Dt.align||"left";var yn,$s=fe*Vr,pl=kr.internal.pageSize.getWidth(),CA=Pe[or];Ir=Dt.charSpace||Ya,Er=Dt.maxWidth||0,Or=Object.assign({autoencode:!0,noBOM:!0},Dt.flags);var Mr=[],ha=function(Dr){return kr.getStringUnitWidth(Dr,{font:CA,charSpace:Ir,fontSize:fe,doKerning:!1})*fe/jr};if(Object.prototype.toString.call(Q)==="[object Array]"){var qn;be=Ea(Q),ur!=="left"&&(yn=be.map(ha));var Sn,as=0;if(ur==="right"){J-=yn[0],Q=[],Wi=be.length;for(var da=0;da<Wi;da++)da===0?(Sn=Qr(J),qn=xs(bt)):(Sn=ut(as-yn[da]),qn=-$s),Q.push([be[da],Sn,qn]),as=yn[da]}else if(ur==="center"){J-=yn[0]/2,Q=[],Wi=be.length;for(var Fs=0;Fs<Wi;Fs++)Fs===0?(Sn=Qr(J),qn=xs(bt)):(Sn=ut((as-yn[Fs])/2),qn=-$s),Q.push([be[Fs],Sn,qn]),as=yn[Fs]}else if(ur==="left"){Q=[],Wi=be.length;for(var zo=0;zo<Wi;zo++)Q.push(be[zo])}else if(ur==="justify"&&CA.encoding==="Identity-H"){Q=[],Wi=be.length,Er=Er!==0?Er:pl;for(var pa=0,Si=0;Si<Wi;Si++)if(qn=Si===0?xs(bt):-$s,Sn=Si===0?Qr(J):pa,Si<Wi-1){var no=ut((Er-yn[Si])/(be[Si].split(" ").length-1)),Ki=be[Si].split(" ");Q.push([Ki[0]+" ",Sn,qn]),pa=0;for(var vn=1;vn<Ki.length;vn++){var Gs=(ha(Ki[vn-1]+" "+Ki[vn])-ha(Ki[vn]))*jr+no;vn==Ki.length-1?Q.push([Ki[vn],Gs,0]):Q.push([Ki[vn]+" ",Gs,0]),pa-=Gs}}else Q.push([be[Si],Sn,qn]);Q.push(["",pa,0])}else{if(ur!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(Q=[],Wi=be.length,Er=Er!==0?Er:pl,Si=0;Si<Wi;Si++)qn=Si===0?xs(bt):-$s,Sn=Si===0?Qr(J):0,Si<Wi-1?Mr.push(xt(ut((Er-yn[Si])/(be[Si].split(" ").length-1)))):Mr.push(0),Q.push([be[Si],Sn,qn])}}var FA=typeof Dt.R2L=="boolean"?Dt.R2L:Re;FA===!0&&(Q=Ta(Q,function(Dr,ti,Mi){return[Dr.split("").reverse().join(""),ti,Mi]})),ne={text:Q,x:J,y:bt,options:Dt,mutex:{pdfEscape:fn,activeFontKey:or,fonts:Pe,activeFontSize:fe}},X.publish("postProcessText",ne),Q=ne.text,Gn=ne.mutex.isHex||!1;var fa=Pe[or].encoding;fa!=="WinAnsiEncoding"&&fa!=="StandardEncoding"||(Q=Ta(Q,function(Dr,ti,Mi){return[ca(Dr),ti,Mi]})),be=Ea(Q),Q=[];for(var qs,ga,Xs,Pa=0,SA=1,so=Array.isArray(be[0])?SA:Pa,Ws="",Ho=function(Dr,ti,Mi){var $i="";return Mi instanceof Pt?(Mi=typeof Dt.angle=="number"?Et(Mi,new Pt(1,0,0,1,Dr,ti)):Et(new Pt(1,0,0,1,Dr,ti),Mi),ht===tt.ADVANCED&&(Mi=Et(new Pt(1,0,0,-1,0,0),Mi)),$i=Mi.join(" ")+` Tm
`):$i=xt(Dr)+" "+xt(ti)+` Td
`,$i},In=0;In<be.length;In++){switch(Ws="",so){case SA:Xs=(Gn?"<":"(")+be[In][0]+(Gn?">":")"),qs=parseFloat(be[In][1]),ga=parseFloat(be[In][2]);break;case Pa:Xs=(Gn?"<":"(")+be[In]+(Gn?">":")"),qs=Qr(J),ga=xs(bt)}Mr!==void 0&&Mr[In]!==void 0&&(Ws=Mr[In]+` Tw
`),In===0?Q.push(Ws+Ho(qs,ga,Ri)+Xs):so===Pa?Q.push(Ws+Xs):so===SA&&Q.push(Ws+Ho(qs,ga,Ri)+Xs)}Q=so===Pa?Q.join(` Tj
T* `):Q.join(` Tj
`),Q+=` Tj
`;var En=`BT
/`;return En+=or+" "+fe+` Tf
`,En+=xt(fe*Vr)+` TL
`,En+=No+`
`,En+=cr,En+=Q,rt(En+="ET"),P[or]=!0,kr};var dA=U.__private__.clip=U.clip=function(Q){return rt(Q==="evenodd"?"W*":"W"),this};U.clipEvenOdd=function(){return dA("evenodd")},U.__private__.discardPath=U.discardPath=function(){return rt("n"),this};var ns=U.__private__.isValidStyle=function(Q){var J=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(Q)!==-1&&(J=!0),J};U.__private__.setDefaultPathOperation=U.setDefaultPathOperation=function(Q){return ns(Q)&&(C=Q),this};var ll=U.__private__.getStyle=U.getStyle=function(Q){var J=C;switch(Q){case"D":case"S":J="S";break;case"F":J="f";break;case"FD":case"DF":J="B";break;case"f":case"f*":case"B":case"B*":J=Q}return J},Sa=U.close=function(){return rt("h"),this};U.stroke=function(){return rt("S"),this},U.fill=function(Q){return pA("f",Q),this},U.fillEvenOdd=function(Q){return pA("f*",Q),this},U.fillStroke=function(Q){return pA("B",Q),this},U.fillStrokeEvenOdd=function(Q){return pA("B*",Q),this};var pA=function(Q,J){Ai(J)==="object"?Rc(J,Q):rt(Q)},fA=function(Q){Q===null||ht===tt.ADVANCED&&Q===void 0||(Q=ll(Q),rt(Q))};function Jl(Q,J,bt,Dt,qt){var ne=new cu(J||this.boundingBox,bt||this.xStep,Dt||this.yStep,this.gState,qt||this.matrix);ne.stream=this.stream;var be=Q+"$$"+this.cloneIndex+++"$$";return ae(be,ne),ne}var Rc=function(Q,J){var bt=mi[Q.key],Dt=Qe[bt];if(Dt instanceof yc)rt("q"),rt(zc(J)),Dt.gState&&U.setGState(Dt.gState),rt(Q.matrix.toString()+" cm"),rt("/"+bt+" sh"),rt("Q");else if(Dt instanceof cu){var qt=new Pt(1,0,0,-1,0,Ja());Q.matrix&&(qt=qt.multiply(Q.matrix||te),bt=Jl.call(Dt,Q.key,Q.boundingBox,Q.xStep,Q.yStep,qt).id),rt("q"),rt("/Pattern cs"),rt("/"+bt+" scn"),Dt.gState&&U.setGState(Dt.gState),rt(J),rt("Q")}},zc=function(Q){switch(Q){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},gA=U.moveTo=function(Q,J){return rt(xt(ut(Q))+" "+xt(vt(J))+" m"),this},Hs=U.lineTo=function(Q,J){return rt(xt(ut(Q))+" "+xt(vt(J))+" l"),this},oa=U.curveTo=function(Q,J,bt,Dt,qt,ne){return rt([xt(ut(Q)),xt(vt(J)),xt(ut(bt)),xt(vt(Dt)),xt(ut(qt)),xt(vt(ne)),"c"].join(" ")),this};U.__private__.line=U.line=function(Q,J,bt,Dt,qt){if(isNaN(Q)||isNaN(J)||isNaN(bt)||isNaN(Dt)||!ns(qt))throw new Error("Invalid arguments passed to jsPDF.line");return ht===tt.COMPAT?this.lines([[bt-Q,Dt-J]],Q,J,[1,1],qt||"S"):this.lines([[bt-Q,Dt-J]],Q,J,[1,1]).stroke()},U.__private__.lines=U.lines=function(Q,J,bt,Dt,qt,ne){var be,He,ur,Ir,Er,Or,wi,Ri,kr,Fn,cr,Gn;if(typeof Q=="number"&&(Gn=bt,bt=J,J=Q,Q=Gn),Dt=Dt||[1,1],ne=ne||!1,isNaN(J)||isNaN(bt)||!Array.isArray(Q)||!Array.isArray(Dt)||!ns(qt)||typeof ne!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(gA(J,bt),be=Dt[0],He=Dt[1],Ir=Q.length,Fn=J,cr=bt,ur=0;ur<Ir;ur++)(Er=Q[ur]).length===2?(Fn=Er[0]*be+Fn,cr=Er[1]*He+cr,Hs(Fn,cr)):(Or=Er[0]*be+Fn,wi=Er[1]*He+cr,Ri=Er[2]*be+Fn,kr=Er[3]*He+cr,Fn=Er[4]*be+Fn,cr=Er[5]*He+cr,oa(Or,wi,Ri,kr,Fn,cr));return ne&&Sa(),fA(qt),this},U.path=function(Q){for(var J=0;J<Q.length;J++){var bt=Q[J],Dt=bt.c;switch(bt.op){case"m":gA(Dt[0],Dt[1]);break;case"l":Hs(Dt[0],Dt[1]);break;case"c":oa.apply(this,Dt);break;case"h":Sa()}}return this},U.__private__.rect=U.rect=function(Q,J,bt,Dt,qt){if(isNaN(Q)||isNaN(J)||isNaN(bt)||isNaN(Dt)||!ns(qt))throw new Error("Invalid arguments passed to jsPDF.rect");return ht===tt.COMPAT&&(Dt=-Dt),rt([xt(ut(Q)),xt(vt(J)),xt(ut(bt)),xt(ut(Dt)),"re"].join(" ")),fA(qt),this},U.__private__.triangle=U.triangle=function(Q,J,bt,Dt,qt,ne,be){if(isNaN(Q)||isNaN(J)||isNaN(bt)||isNaN(Dt)||isNaN(qt)||isNaN(ne)||!ns(be))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[bt-Q,Dt-J],[qt-bt,ne-Dt],[Q-qt,J-ne]],Q,J,[1,1],be,!0),this},U.__private__.roundedRect=U.roundedRect=function(Q,J,bt,Dt,qt,ne,be){if(isNaN(Q)||isNaN(J)||isNaN(bt)||isNaN(Dt)||isNaN(qt)||isNaN(ne)||!ns(be))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var He=4/3*(Math.SQRT2-1);return qt=Math.min(qt,.5*bt),ne=Math.min(ne,.5*Dt),this.lines([[bt-2*qt,0],[qt*He,0,qt,ne-ne*He,qt,ne],[0,Dt-2*ne],[0,ne*He,-qt*He,ne,-qt,ne],[2*qt-bt,0],[-qt*He,0,-qt,-ne*He,-qt,-ne],[0,2*ne-Dt],[0,-ne*He,qt*He,-ne,qt,-ne]],Q+qt,J,[1,1],be,!0),this},U.__private__.ellipse=U.ellipse=function(Q,J,bt,Dt,qt){if(isNaN(Q)||isNaN(J)||isNaN(bt)||isNaN(Dt)||!ns(qt))throw new Error("Invalid arguments passed to jsPDF.ellipse");var ne=4/3*(Math.SQRT2-1)*bt,be=4/3*(Math.SQRT2-1)*Dt;return gA(Q+bt,J),oa(Q+bt,J-be,Q+ne,J-Dt,Q,J-Dt),oa(Q-ne,J-Dt,Q-bt,J-be,Q-bt,J),oa(Q-bt,J+be,Q-ne,J+Dt,Q,J+Dt),oa(Q+ne,J+Dt,Q+bt,J+be,Q+bt,J),fA(qt),this},U.__private__.circle=U.circle=function(Q,J,bt,Dt){if(isNaN(Q)||isNaN(J)||isNaN(bt)||!ns(Dt))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(Q,J,bt,bt,Dt)},U.setFont=function(Q,J,bt){return bt&&(J=Ut(J,bt)),or=Fa(Q,J,{disableWarning:!1}),this};var mA=U.__private__.getFont=U.getFont=function(){return Pe[Fa.apply(U,arguments)]};U.__private__.getFontList=U.getFontList=function(){var Q,J,bt={};for(Q in _r)if(_r.hasOwnProperty(Q))for(J in bt[Q]=[],_r[Q])_r[Q].hasOwnProperty(J)&&bt[Q].push(J);return bt},U.addFont=function(Q,J,bt,Dt,qt){var ne=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&ne.indexOf(arguments[3])!==-1?qt=arguments[3]:arguments[3]&&ne.indexOf(arguments[3])==-1&&(bt=Ut(bt,Dt)),qt=qt||"Identity-H",Dn.call(this,Q,J,bt,qt)};var Ia,Do=n.lineWidth||.200025,Nn=U.__private__.getLineWidth=U.getLineWidth=function(){return Do},tc=U.__private__.setLineWidth=U.setLineWidth=function(Q){return Do=Q,rt(xt(ut(Q))+" w"),this};U.__private__.setLineDash=Ur.API.setLineDash=Ur.API.setLineDashPattern=function(Q,J){if(Q=Q||[],J=J||0,isNaN(J)||!Array.isArray(Q))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return Q=Q.map(function(bt){return xt(ut(bt))}).join(" "),J=xt(ut(J)),rt("["+Q+"] "+J+" d"),this};var yA=U.__private__.getLineHeight=U.getLineHeight=function(){return fe*Ia};U.__private__.getLineHeight=U.getLineHeight=function(){return fe*Ia};var Aa=U.__private__.setLineHeightFactor=U.setLineHeightFactor=function(Q){return typeof(Q=Q||1.15)=="number"&&(Ia=Q),this},Vs=U.__private__.getLineHeightFactor=U.getLineHeightFactor=function(){return Ia};Aa(n.lineHeight);var Qr=U.__private__.getHorizontalCoordinate=function(Q){return ut(Q)},xs=U.__private__.getVerticalCoordinate=function(Q){return ht===tt.ADVANCED?Q:$[dt].mediaBox.topRightY-$[dt].mediaBox.bottomLeftY-ut(Q)},Hc=U.__private__.getHorizontalCoordinateString=U.getHorizontalCoordinateString=function(Q){return xt(Qr(Q))},ss=U.__private__.getVerticalCoordinateString=U.getVerticalCoordinateString=function(Q){return xt(xs(Q))},js=n.strokeColor||"0 G";U.__private__.getStrokeColor=U.getDrawColor=function(){return br(js)},U.__private__.setStrokeColor=U.setDrawColor=function(Q,J,bt,Dt){return js=Ar({ch1:Q,ch2:J,ch3:bt,ch4:Dt,pdfColorType:"draw",precision:2}),rt(js),this};var vA=n.fillColor||"0 g";U.__private__.getFillColor=U.getFillColor=function(){return br(vA)},U.__private__.setFillColor=U.setFillColor=function(Q,J,bt,Dt){return vA=Ar({ch1:Q,ch2:J,ch3:bt,ch4:Dt,pdfColorType:"fill",precision:2}),rt(vA),this};var No=n.textColor||"0 g",ec=U.__private__.getTextColor=U.getTextColor=function(){return br(No)};U.__private__.setTextColor=U.setTextColor=function(Q,J,bt,Dt){return No=Ar({ch1:Q,ch2:J,ch3:bt,ch4:Dt,pdfColorType:"text",precision:3}),this};var Ya=n.charSpace,rc=U.__private__.getCharSpace=U.getCharSpace=function(){return parseFloat(Ya||0)};U.__private__.setCharSpace=U.setCharSpace=function(Q){if(isNaN(Q))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Ya=Q,this};var wA=0;U.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},U.__private__.setLineCap=U.setLineCap=function(Q){var J=U.CapJoinStyles[Q];if(J===void 0)throw new Error("Line cap style of '"+Q+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return wA=J,rt(J+" J"),this};var _A=0;U.__private__.setLineJoin=U.setLineJoin=function(Q){var J=U.CapJoinStyles[Q];if(J===void 0)throw new Error("Line join style of '"+Q+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return _A=J,rt(J+" j"),this},U.__private__.setLineMiterLimit=U.__private__.setMiterLimit=U.setLineMiterLimit=U.setMiterLimit=function(Q){if(Q=Q||0,isNaN(Q))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return rt(xt(ut(Q))+" M"),this},U.GState=Kd,U.setGState=function(Q){(Q=typeof Q=="string"?Kr[si[Q]]:cl(null,Q)).equals(Xr)||(rt("/"+Q.id+" gs"),Xr=Q)};var cl=function(Q,J){if(!Q||!si[Q]){var bt=!1;for(var Dt in Kr)if(Kr.hasOwnProperty(Dt)&&Kr[Dt].equals(J)){bt=!0;break}if(bt)J=Kr[Dt];else{var qt="GS"+(Object.keys(Kr).length+1).toString(10);Kr[qt]=J,J.id=qt}return Q&&(si[Q]=J.id),X.publish("addGState",J),J}};U.addGState=function(Q,J){return cl(Q,J),this},U.saveGraphicsState=function(){return rt("q"),ni.push({key:or,size:fe,color:No}),this},U.restoreGraphicsState=function(){rt("Q");var Q=ni.pop();return or=Q.key,fe=Q.size,No=Q.color,Xr=null,this},U.setCurrentTransformationMatrix=function(Q){return rt(Q.toString()+" cm"),this},U.comment=function(Q){return rt("#"+Q),this};var Bs=function(Q,J){var bt=Q||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return bt},set:function(ne){isNaN(ne)||(bt=parseFloat(ne))}});var Dt=J||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Dt},set:function(ne){isNaN(ne)||(Dt=parseFloat(ne))}});var qt="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return qt},set:function(ne){qt=ne.toString()}}),this},bA=function(Q,J,bt,Dt){Bs.call(this,Q,J),this.type="rect";var qt=bt||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return qt},set:function(be){isNaN(be)||(qt=parseFloat(be))}});var ne=Dt||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return ne},set:function(be){isNaN(be)||(ne=parseFloat(be))}}),this},ul=function(){this.page=yt,this.currentPage=dt,this.pages=we.slice(0),this.pagesContext=$.slice(0),this.x=Zr,this.y=ce,this.matrix=ir,this.width=la(dt),this.height=Ja(dt),this.outputDestination=Ee,this.id="",this.objectNumber=-1};ul.prototype.restore=function(){yt=this.page,dt=this.currentPage,$=this.pagesContext,we=this.pages,Zr=this.x,ce=this.y,ir=this.matrix,dl(dt,this.width),BA(dt,this.height),Ee=this.outputDestination};var hl=function(Q,J,bt,Dt,qt){Nt.push(new ul),yt=dt=0,we=[],Zr=Q,ce=J,ir=qt,Rs([bt,Dt])},Oo=function(Q){if(Qt[Q])Nt.pop().restore();else{var J=new ul,bt="Xo"+(Object.keys(ft).length+1).toString(10);J.id=bt,Qt[Q]=bt,ft[bt]=J,X.publish("addFormObject",J),Nt.pop().restore()}};for(var xA in U.beginFormObject=function(Q,J,bt,Dt,qt){return hl(Q,J,bt,Dt,qt),this},U.endFormObject=function(Q){return Oo(Q),this},U.doFormObject=function(Q,J){var bt=ft[Qt[Q]];return rt("q"),rt(J.toString()+" cm"),rt("/"+bt.id+" Do"),rt("Q"),this},U.getFormObject=function(Q){var J=ft[Qt[Q]];return{x:J.x,y:J.y,width:J.width,height:J.height,matrix:J.matrix}},U.save=function(Q,J){return Q=Q||"generated.pdf",(J=J||{}).returnPromise=J.returnPromise||!1,J.returnPromise===!1?(mc(uA(aa()),Q),typeof mc.unload=="function"&&Tr.setTimeout&&setTimeout(mc.unload,911),this):new Promise(function(bt,Dt){try{var qt=mc(uA(aa()),Q);typeof mc.unload=="function"&&Tr.setTimeout&&setTimeout(mc.unload,911),bt(qt)}catch(ne){Dt(ne.message)}})},Ur.API)Ur.API.hasOwnProperty(xA)&&(xA==="events"&&Ur.API.events.length?function(Q,J){var bt,Dt,qt;for(qt=J.length-1;qt!==-1;qt--)bt=J[qt][0],Dt=J[qt][1],Q.subscribe.apply(Q,[bt].concat(typeof Dt=="function"?[Dt]:Dt))}(X,Ur.API.events):U[xA]=Ur.API[xA]);var la=U.getPageWidth=function(Q){return($[Q=Q||dt].mediaBox.topRightX-$[Q].mediaBox.bottomLeftX)/Le},dl=U.setPageWidth=function(Q,J){$[Q].mediaBox.topRightX=J*Le+$[Q].mediaBox.bottomLeftX},Ja=U.getPageHeight=function(Q){return($[Q=Q||dt].mediaBox.topRightY-$[Q].mediaBox.bottomLeftY)/Le},BA=U.setPageHeight=function(Q,J){$[Q].mediaBox.topRightY=J*Le+$[Q].mediaBox.bottomLeftY};return U.internal={pdfEscape:fn,getStyle:ll,getFont:mA,getFontSize:Se,getCharSpace:rc,getTextColor:ec,getLineHeight:yA,getLineHeightFactor:Vs,getLineWidth:Nn,write:dr,getHorizontalCoordinate:Qr,getVerticalCoordinate:xs,getCoordinateString:Hc,getVerticalCoordinateString:ss,collections:{},newObject:Gt,newAdditionalObject:Xe,newObjectDeferred:ue,newObjectDeferredBegin:Me,getFilters:Yr,putStream:$r,events:X,scaleFactor:Le,pageSize:{getWidth:function(){return la(dt)},setWidth:function(Q){dl(dt,Q)},getHeight:function(){return Ja(dt)},setHeight:function(Q){BA(dt,Q)}},encryptionOptions:I,encryption:ki,getEncryptor:Mo,output:ko,getNumberOfPages:ol,pages:we,out:rt,f2:Xt,f3:st,getPageInfo:gn,getPageInfoByObjId:lr,getCurrentPageInfo:hA,getPDFVersion:R,Point:Bs,Rectangle:bA,Matrix:Pt,hasHotfix:Yl},Object.defineProperty(U.internal.pageSize,"width",{get:function(){return la(dt)},set:function(Q){dl(dt,Q)},enumerable:!0,configurable:!0}),Object.defineProperty(U.internal.pageSize,"height",{get:function(){return Ja(dt)},set:function(Q){BA(dt,Q)},enumerable:!0,configurable:!0}),al.call(U,se),or="F1",zs(c,i),X.publish("initialized"),U}Au.prototype.lsbFirstWord=function(n){return String.fromCharCode(n>>0&255,n>>8&255,n>>16&255,n>>24&255)},Au.prototype.toHexString=function(n){return n.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Au.prototype.hexToBytes=function(n){for(var e=[],i=0;i<n.length;i+=2)e.push(String.fromCharCode(parseInt(n.substr(i,2),16)));return e.join("")},Au.prototype.processOwnerPassword=function(n,e){return Ug(Tg(e).substr(0,5),n)},Au.prototype.encryptor=function(n,e){var i=Tg(this.encryptionKey+String.fromCharCode(255&n,n>>8&255,n>>16&255,255&e,e>>8&255)).substr(0,10);return function(s){return Ug(i,s)}},Kd.prototype.equals=function(n){var e,i="id,objectNumber,equals";if(!n||Ai(n)!==Ai(this))return!1;var s=0;for(e in this)if(!(i.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!n.hasOwnProperty(e)||this[e]!==n[e])return!1;s++}for(e in n)n.hasOwnProperty(e)&&i.indexOf(e)<0&&s--;return s===0},Ur.API={events:[]},Ur.version="2.5.2";var Yi=Ur.API,Lg=1,vc=function(n){return n.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},uu=function(n){return n.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Nr=function(n){return n.toFixed(2)},Ml=function(n){return n.toFixed(5)};Yi.__acroform__={};var ia=function(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n},mv=function(n){return n*Lg},tA=function(n){var e=new vv,i=sr.internal.getHeight(n)||0,s=sr.internal.getWidth(n)||0;return e.BBox=[0,0,Number(Nr(s)),Number(Nr(i))],e},K4=Yi.__acroform__.setBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return n|=1<<e},$4=Yi.__acroform__.clearBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return n&=~(1<<e)},G4=Yi.__acroform__.getBit=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return n&1<<e?1:0},an=Yi.__acroform__.getBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return G4(n,e-1)},on=Yi.__acroform__.setBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return K4(n,e-1)},An=Yi.__acroform__.clearBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return $4(n,e-1)},q4=Yi.__acroform__.calculateCoordinates=function(n,e){var i=e.internal.getHorizontalCoordinate,s=e.internal.getVerticalCoordinate,c=n[0],h=n[1],d=n[2],A=n[3],v={};return v.lowerLeft_X=i(c)||0,v.lowerLeft_Y=s(h+A)||0,v.upperRight_X=i(c+d)||0,v.upperRight_Y=s(h)||0,[Number(Nr(v.lowerLeft_X)),Number(Nr(v.lowerLeft_Y)),Number(Nr(v.upperRight_X)),Number(Nr(v.upperRight_Y))]},X4=function(n){if(n.appearanceStreamContent)return n.appearanceStreamContent;if(n.V||n.DV){var e=[],i=n._V||n.DV,s=Pg(n,i),c=n.scope.internal.getFont(n.fontName,n.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(n.scope.__private__.encodeColorString(n.color)),e.push("/"+c+" "+Nr(s.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(s.text),e.push("ET"),e.push("Q"),e.push("EMC");var h=tA(n);return h.scope=n.scope,h.stream=e.join(`
`),h}},Pg=function(n,e){var i=n.fontSize===0?n.maxFontSize:n.fontSize,s={text:"",fontSize:""},c=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");c=n.multiline?c.map(function(st){return st.split(`
`)}):c.map(function(st){return[st]});var h=i,d=sr.internal.getHeight(n)||0;d=d<0?-d:d;var A=sr.internal.getWidth(n)||0;A=A<0?-A:A;var v=function(st,ut,mt){if(st+1<c.length){var vt=ut+" "+c[st+1][0];return $d(vt,n,mt).width<=A-4}return!1};h++;t:for(;h>0;){e="",h--;var C,I,T=$d("3",n,h).height,P=n.multiline?d-h:(d-T)/2,U=P+=2,V=0,R=0,Z=0;if(h<=0){e=`(...) Tj
`,e+="% Width of Text: "+$d(e,n,h=12).width+", FieldWidth:"+A+`
`;break}for(var K="",tt=0,ht=0;ht<c.length;ht++)if(c.hasOwnProperty(ht)){var Bt=!1;if(c[ht].length!==1&&Z!==c[ht].length-1){if((T+2)*(tt+2)+2>d)continue t;K+=c[ht][Z],Bt=!0,R=ht,ht--}else{K=(K+=c[ht][Z]+" ").substr(K.length-1)==" "?K.substr(0,K.length-1):K;var Lt=parseInt(ht),Ut=v(Lt,K,h),xt=ht>=c.length-1;if(Ut&&!xt){K+=" ",Z=0;continue}if(Ut||xt){if(xt)R=Lt;else if(n.multiline&&(T+2)*(tt+2)+2>d)continue t}else{if(!n.multiline||(T+2)*(tt+2)+2>d)continue t;R=Lt}}for(var pt="",kt=V;kt<=R;kt++){var Xt=c[kt];if(n.multiline){if(kt===R){pt+=Xt[Z]+" ",Z=(Z+1)%Xt.length;continue}if(kt===V){pt+=Xt[Xt.length-1]+" ";continue}}pt+=Xt[0]+" "}switch(pt=pt.substr(pt.length-1)==" "?pt.substr(0,pt.length-1):pt,I=$d(pt,n,h).width,n.textAlign){case"right":C=A-I-2;break;case"center":C=(A-I)/2;break;case"left":default:C=2}e+=Nr(C)+" "+Nr(U)+` Td
`,e+="("+vc(pt)+`) Tj
`,e+=-Nr(C)+` 0 Td
`,U=-(h+2),I=0,V=Bt?R:R+1,tt++,K=""}break}return s.text=e,s.fontSize=h,s},$d=function(n,e,i){var s=e.scope.internal.getFont(e.fontName,e.fontStyle),c=e.scope.getStringUnitWidth(n,{font:s,fontSize:parseFloat(i),charSpace:0})*parseFloat(i);return{height:e.scope.getStringUnitWidth("3",{font:s,fontSize:parseFloat(i),charSpace:0})*parseFloat(i)*1.5,width:c}},W4={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},Z4=function(n,e){var i={type:"reference",object:n};e.internal.getPageInfo(n.page).pageContext.annotations.find(function(s){return s.type===i.type&&s.object===i.object})===void 0&&e.internal.getPageInfo(n.page).pageContext.annotations.push(i)},Y4=function(n,e){for(var i in n)if(n.hasOwnProperty(i)){var s=i,c=n[i];e.internal.newObjectDeferredBegin(c.objId,!0),Ai(c)==="object"&&typeof c.putStream=="function"&&c.putStream(),delete n[s]}},J4=function(n,e){if(e.scope=n,n.internal!==void 0&&(n.internal.acroformPlugin===void 0||n.internal.acroformPlugin.isInitialized===!1)){if(vo.FieldNum=0,n.internal.acroformPlugin=JSON.parse(JSON.stringify(W4)),n.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Lg=n.internal.scaleFactor,n.internal.acroformPlugin.acroFormDictionaryRoot=new wv,n.internal.acroformPlugin.acroFormDictionaryRoot.scope=n,n.internal.acroformPlugin.acroFormDictionaryRoot._eventID=n.internal.events.subscribe("postPutResources",function(){(function(i){i.internal.events.unsubscribe(i.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete i.internal.acroformPlugin.acroFormDictionaryRoot._eventID,i.internal.acroformPlugin.printedOut=!0})(n)}),n.internal.events.subscribe("buildDocument",function(){(function(i){i.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var s=i.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var c in s)if(s.hasOwnProperty(c)){var h=s[c];h.objId=void 0,h.hasAnnotation&&Z4(h,i)}})(n)}),n.internal.events.subscribe("putCatalog",function(){(function(i){if(i.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");i.internal.write("/AcroForm "+i.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(n)}),n.internal.events.subscribe("postPutPages",function(i){(function(s,c){var h=!s;for(var d in s||(c.internal.newObjectDeferredBegin(c.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),c.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),s=s||c.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(s.hasOwnProperty(d)){var A=s[d],v=[],C=A.Rect;if(A.Rect&&(A.Rect=q4(A.Rect,c)),c.internal.newObjectDeferredBegin(A.objId,!0),A.DA=sr.createDefaultAppearanceStream(A),Ai(A)==="object"&&typeof A.getKeyValueListForStream=="function"&&(v=A.getKeyValueListForStream()),A.Rect=C,A.hasAppearanceStream&&!A.appearanceStreamContent){var I=X4(A);v.push({key:"AP",value:"<</N "+I+">>"}),c.internal.acroformPlugin.xForms.push(I)}if(A.appearanceStreamContent){var T="";for(var P in A.appearanceStreamContent)if(A.appearanceStreamContent.hasOwnProperty(P)){var U=A.appearanceStreamContent[P];if(T+="/"+P+" ",T+="<<",Object.keys(U).length>=1||Array.isArray(U)){for(var d in U)if(U.hasOwnProperty(d)){var V=U[d];typeof V=="function"&&(V=V.call(c,A)),T+="/"+d+" "+V+" ",c.internal.acroformPlugin.xForms.indexOf(V)>=0||c.internal.acroformPlugin.xForms.push(V)}}else typeof(V=U)=="function"&&(V=V.call(c,A)),T+="/"+d+" "+V,c.internal.acroformPlugin.xForms.indexOf(V)>=0||c.internal.acroformPlugin.xForms.push(V);T+=">>"}v.push({key:"AP",value:`<<
`+T+">>"})}c.internal.putStream({additionalKeyValues:v,objectId:A.objId}),c.internal.out("endobj")}h&&Y4(c.internal.acroformPlugin.xForms,c)})(i,n)}),n.internal.acroformPlugin.isInitialized=!0}},yv=Yi.__acroform__.arrayToPdfArray=function(n,e,i){var s=function(d){return d};if(Array.isArray(n)){for(var c="[",h=0;h<n.length;h++)switch(h!==0&&(c+=" "),Ai(n[h])){case"boolean":case"number":case"object":c+=n[h].toString();break;case"string":n[h].substr(0,1)!=="/"?(e!==void 0&&i&&(s=i.internal.getEncryptor(e)),c+="("+vc(s(n[h].toString()))+")"):c+=n[h].toString()}return c+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Qg=function(n,e,i){var s=function(c){return c};return e!==void 0&&i&&(s=i.internal.getEncryptor(e)),(n=n||"").toString(),n="("+vc(s(n))+")"},eA=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(n){this._objId=n}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};eA.prototype.toString=function(){return this.objId+" 0 R"},eA.prototype.putStream=function(){var n=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:n,objectId:this.objId}),this.scope.internal.out("endobj")},eA.prototype.getKeyValueListForStream=function(){var n=[],e=Object.getOwnPropertyNames(this).filter(function(h){return h!="content"&&h!="appearanceStreamContent"&&h!="scope"&&h!="objId"&&h.substring(0,1)!="_"});for(var i in e)if(Object.getOwnPropertyDescriptor(this,e[i]).configurable===!1){var s=e[i],c=this[s];c&&(Array.isArray(c)?n.push({key:s,value:yv(c,this.objId,this.scope)}):c instanceof eA?(c.scope=this.scope,n.push({key:s,value:c.objId+" 0 R"})):typeof c!="function"&&n.push({key:s,value:c}))}return n};var vv=function(){eA.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var n,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(i){e=i}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(i){n=i.trim()},get:function(){return n||null}})};ia(vv,eA);var wv=function(){eA.call(this);var n,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(n){var i=function(s){return s};return this.scope&&(i=this.scope.internal.getEncryptor(this.objId)),"("+vc(i(n))+")"}},set:function(i){n=i}})};ia(wv,eA);var vo=function n(){eA.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(K){if(isNaN(K))throw new Error('Invalid value "'+K+'" for attribute F supplied.');e=K}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!an(e,3)},set:function(K){K?this.F=on(e,3):this.F=An(e,3)}});var i=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return i},set:function(K){if(isNaN(K))throw new Error('Invalid value "'+K+'" for attribute Ff supplied.');i=K}});var s=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(s.length!==0)return s},set:function(K){s=K!==void 0?K:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[0])?0:s[0]},set:function(K){s[0]=K}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[1])?0:s[1]},set:function(K){s[1]=K}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[2])?0:s[2]},set:function(K){s[2]=K}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[3])?0:s[3]},set:function(K){s[3]=K}});var c="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return c},set:function(K){switch(K){case"/Btn":case"/Tx":case"/Ch":case"/Sig":c=K;break;default:throw new Error('Invalid value "'+K+'" for attribute FT supplied.')}}});var h=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!h||h.length<1){if(this instanceof Xd)return;h="FieldObject"+n.FieldNum++}var K=function(tt){return tt};return this.scope&&(K=this.scope.internal.getEncryptor(this.objId)),"("+vc(K(h))+")"},set:function(K){h=K.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return h},set:function(K){h=K}});var d="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return d},set:function(K){d=K}});var A="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return A},set:function(K){A=K}});var v=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return v},set:function(K){v=K}});var C=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return C===void 0?50/Lg:C},set:function(K){C=K}});var I="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return I},set:function(K){I=K}});var T="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!T||this instanceof Xd||this instanceof wc))return Qg(T,this.objId,this.scope)},set:function(K){K=K.toString(),T=K}});var P=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(P)return this instanceof Vn?P:Qg(P,this.objId,this.scope)},set:function(K){K=K.toString(),P=this instanceof Vn?K:K.substr(0,1)==="("?uu(K.substr(1,K.length-2)):uu(K)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Vn?uu(P.substr(1,P.length-1)):P},set:function(K){K=K.toString(),P=this instanceof Vn?"/"+K:K}});var U=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(U)return U},set:function(K){this.V=K}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(U)return this instanceof Vn?U:Qg(U,this.objId,this.scope)},set:function(K){K=K.toString(),U=this instanceof Vn?K:K.substr(0,1)==="("?uu(K.substr(1,K.length-2)):uu(K)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Vn?uu(U.substr(1,U.length-1)):U},set:function(K){K=K.toString(),U=this instanceof Vn?"/"+K:K}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var V,R=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return R},set:function(K){K=!!K,R=K}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(V)return V},set:function(K){V=K}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!an(this.Ff,1)},set:function(K){K?this.Ff=on(this.Ff,1):this.Ff=An(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!an(this.Ff,2)},set:function(K){K?this.Ff=on(this.Ff,2):this.Ff=An(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!an(this.Ff,3)},set:function(K){K?this.Ff=on(this.Ff,3):this.Ff=An(this.Ff,3)}});var Z=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(Z!==null)return Z},set:function(K){if([0,1,2].indexOf(K)===-1)throw new Error('Invalid value "'+K+'" for attribute Q supplied.');Z=K}}),Object.defineProperty(this,"textAlign",{get:function(){var K;switch(Z){case 0:default:K="left";break;case 1:K="center";break;case 2:K="right"}return K},configurable:!0,enumerable:!0,set:function(K){switch(K){case"right":case 2:Z=2;break;case"center":case 1:Z=1;break;case"left":case 0:default:Z=0}}})};ia(vo,eA);var hu=function(){vo.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var n=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return n},set:function(i){n=i}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return yv(e,this.objId,this.scope)},set:function(i){var s,c;c=[],typeof(s=i)=="string"&&(c=function(h,d,A){A||(A=1);for(var v,C=[];v=d.exec(h);)C.push(v[A]);return C}(s,/\((.*?)\)/g)),e=c}}),this.getOptions=function(){return e},this.setOptions=function(i){e=i,this.sort&&e.sort()},this.addOption=function(i){i=(i=i||"").toString(),e.push(i),this.sort&&e.sort()},this.removeOption=function(i,s){for(s=s||!1,i=(i=i||"").toString();e.indexOf(i)!==-1&&(e.splice(e.indexOf(i),1),s!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!an(this.Ff,18)},set:function(i){i?this.Ff=on(this.Ff,18):this.Ff=An(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!an(this.Ff,19)},set:function(i){this.combo===!0&&(i?this.Ff=on(this.Ff,19):this.Ff=An(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!an(this.Ff,20)},set:function(i){i?(this.Ff=on(this.Ff,20),e.sort()):this.Ff=An(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!an(this.Ff,22)},set:function(i){i?this.Ff=on(this.Ff,22):this.Ff=An(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!an(this.Ff,23)},set:function(i){i?this.Ff=on(this.Ff,23):this.Ff=An(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!an(this.Ff,27)},set:function(i){i?this.Ff=on(this.Ff,27):this.Ff=An(this.Ff,27)}}),this.hasAppearanceStream=!1};ia(hu,vo);var du=function(){hu.call(this),this.fontName="helvetica",this.combo=!1};ia(du,hu);var pu=function(){du.call(this),this.combo=!0};ia(pu,du);var Gd=function(){pu.call(this),this.edit=!0};ia(Gd,pu);var Vn=function(){vo.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!an(this.Ff,15)},set:function(i){i?this.Ff=on(this.Ff,15):this.Ff=An(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!an(this.Ff,16)},set:function(i){i?this.Ff=on(this.Ff,16):this.Ff=An(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!an(this.Ff,17)},set:function(i){i?this.Ff=on(this.Ff,17):this.Ff=An(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!an(this.Ff,26)},set:function(i){i?this.Ff=on(this.Ff,26):this.Ff=An(this.Ff,26)}});var n,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(h){return h};if(this.scope&&(i=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var s,c=[];for(s in c.push("<<"),e)c.push("/"+s+" ("+vc(i(e[s]))+")");return c.push(">>"),c.join(`
`)}},set:function(i){Ai(i)==="object"&&(e=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(i){typeof i=="string"&&(e.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(i){n="/"+i}})};ia(Vn,vo);var qd=function(){Vn.call(this),this.pushButton=!0};ia(qd,Vn);var fu=function(){Vn.call(this),this.radio=!0,this.pushButton=!1;var n=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e!==void 0?e:[]}})};ia(fu,Vn);var Xd=function(){var n,e;vo.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return n},set:function(c){n=c}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(c){e=c}});var i,s={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var c=function(A){return A};this.scope&&(c=this.scope.internal.getEncryptor(this.objId));var h,d=[];for(h in d.push("<<"),s)d.push("/"+h+" ("+vc(c(s[h]))+")");return d.push(">>"),d.join(`
`)},set:function(c){Ai(c)==="object"&&(s=c)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return s.CA||""},set:function(c){typeof c=="string"&&(s.CA=c)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return i},set:function(c){i=c}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return i.substr(1,i.length-1)},set:function(c){i="/"+c}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=sr.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};ia(Xd,vo),fu.prototype.setAppearance=function(n){if(!("createAppearanceStream"in n)||!("getCA"in n))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var i=this.Kids[e];i.appearanceStreamContent=n.createAppearanceStream(i.optionName),i.caption=n.getCA()}},fu.prototype.createOption=function(n){var e=new Xd;return e.Parent=this,e.optionName=n,this.Kids.push(e),t3.call(this.scope,e),e};var Wd=function(){Vn.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=sr.CheckBox.createAppearanceStream()};ia(Wd,Vn);var wc=function(){vo.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!an(this.Ff,13)},set:function(e){e?this.Ff=on(this.Ff,13):this.Ff=An(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!an(this.Ff,21)},set:function(e){e?this.Ff=on(this.Ff,21):this.Ff=An(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!an(this.Ff,23)},set:function(e){e?this.Ff=on(this.Ff,23):this.Ff=An(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!an(this.Ff,24)},set:function(e){e?this.Ff=on(this.Ff,24):this.Ff=An(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!an(this.Ff,25)},set:function(e){e?this.Ff=on(this.Ff,25):this.Ff=An(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!an(this.Ff,26)},set:function(e){e?this.Ff=on(this.Ff,26):this.Ff=An(this.Ff,26)}});var n=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return n},set:function(e){Number.isInteger(e)&&(n=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};ia(wc,vo);var Zd=function(){wc.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!an(this.Ff,14)},set:function(n){n?this.Ff=on(this.Ff,14):this.Ff=An(this.Ff,14)}}),this.password=!0};ia(Zd,wc);var sr={CheckBox:{createAppearanceStream:function(){return{N:{On:sr.CheckBox.YesNormal},D:{On:sr.CheckBox.YesPushDown,Off:sr.CheckBox.OffPushDown}}},YesPushDown:function(n){var e=tA(n);e.scope=n.scope;var i=[],s=n.scope.internal.getFont(n.fontName,n.fontStyle).id,c=n.scope.__private__.encodeColorString(n.color),h=Pg(n,n.caption);return i.push("0.749023 g"),i.push("0 0 "+Nr(sr.internal.getWidth(n))+" "+Nr(sr.internal.getHeight(n))+" re"),i.push("f"),i.push("BMC"),i.push("q"),i.push("0 0 1 rg"),i.push("/"+s+" "+Nr(h.fontSize)+" Tf "+c),i.push("BT"),i.push(h.text),i.push("ET"),i.push("Q"),i.push("EMC"),e.stream=i.join(`
`),e},YesNormal:function(n){var e=tA(n);e.scope=n.scope;var i=n.scope.internal.getFont(n.fontName,n.fontStyle).id,s=n.scope.__private__.encodeColorString(n.color),c=[],h=sr.internal.getHeight(n),d=sr.internal.getWidth(n),A=Pg(n,n.caption);return c.push("1 g"),c.push("0 0 "+Nr(d)+" "+Nr(h)+" re"),c.push("f"),c.push("q"),c.push("0 0 1 rg"),c.push("0 0 "+Nr(d-1)+" "+Nr(h-1)+" re"),c.push("W"),c.push("n"),c.push("0 g"),c.push("BT"),c.push("/"+i+" "+Nr(A.fontSize)+" Tf "+s),c.push(A.text),c.push("ET"),c.push("Q"),e.stream=c.join(`
`),e},OffPushDown:function(n){var e=tA(n);e.scope=n.scope;var i=[];return i.push("0.749023 g"),i.push("0 0 "+Nr(sr.internal.getWidth(n))+" "+Nr(sr.internal.getHeight(n))+" re"),i.push("f"),e.stream=i.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(n){var e={D:{Off:sr.RadioButton.Circle.OffPushDown},N:{}};return e.N[n]=sr.RadioButton.Circle.YesNormal,e.D[n]=sr.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(n){var e=tA(n);e.scope=n.scope;var i=[],s=sr.internal.getWidth(n)<=sr.internal.getHeight(n)?sr.internal.getWidth(n)/4:sr.internal.getHeight(n)/4;s=Number((.9*s).toFixed(5));var c=sr.internal.Bezier_C,h=Number((s*c).toFixed(5));return i.push("q"),i.push("1 0 0 1 "+Ml(sr.internal.getWidth(n)/2)+" "+Ml(sr.internal.getHeight(n)/2)+" cm"),i.push(s+" 0 m"),i.push(s+" "+h+" "+h+" "+s+" 0 "+s+" c"),i.push("-"+h+" "+s+" -"+s+" "+h+" -"+s+" 0 c"),i.push("-"+s+" -"+h+" -"+h+" -"+s+" 0 -"+s+" c"),i.push(h+" -"+s+" "+s+" -"+h+" "+s+" 0 c"),i.push("f"),i.push("Q"),e.stream=i.join(`
`),e},YesPushDown:function(n){var e=tA(n);e.scope=n.scope;var i=[],s=sr.internal.getWidth(n)<=sr.internal.getHeight(n)?sr.internal.getWidth(n)/4:sr.internal.getHeight(n)/4;s=Number((.9*s).toFixed(5));var c=Number((2*s).toFixed(5)),h=Number((c*sr.internal.Bezier_C).toFixed(5)),d=Number((s*sr.internal.Bezier_C).toFixed(5));return i.push("0.749023 g"),i.push("q"),i.push("1 0 0 1 "+Ml(sr.internal.getWidth(n)/2)+" "+Ml(sr.internal.getHeight(n)/2)+" cm"),i.push(c+" 0 m"),i.push(c+" "+h+" "+h+" "+c+" 0 "+c+" c"),i.push("-"+h+" "+c+" -"+c+" "+h+" -"+c+" 0 c"),i.push("-"+c+" -"+h+" -"+h+" -"+c+" 0 -"+c+" c"),i.push(h+" -"+c+" "+c+" -"+h+" "+c+" 0 c"),i.push("f"),i.push("Q"),i.push("0 g"),i.push("q"),i.push("1 0 0 1 "+Ml(sr.internal.getWidth(n)/2)+" "+Ml(sr.internal.getHeight(n)/2)+" cm"),i.push(s+" 0 m"),i.push(s+" "+d+" "+d+" "+s+" 0 "+s+" c"),i.push("-"+d+" "+s+" -"+s+" "+d+" -"+s+" 0 c"),i.push("-"+s+" -"+d+" -"+d+" -"+s+" 0 -"+s+" c"),i.push(d+" -"+s+" "+s+" -"+d+" "+s+" 0 c"),i.push("f"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(n){var e=tA(n);e.scope=n.scope;var i=[],s=sr.internal.getWidth(n)<=sr.internal.getHeight(n)?sr.internal.getWidth(n)/4:sr.internal.getHeight(n)/4;s=Number((.9*s).toFixed(5));var c=Number((2*s).toFixed(5)),h=Number((c*sr.internal.Bezier_C).toFixed(5));return i.push("0.749023 g"),i.push("q"),i.push("1 0 0 1 "+Ml(sr.internal.getWidth(n)/2)+" "+Ml(sr.internal.getHeight(n)/2)+" cm"),i.push(c+" 0 m"),i.push(c+" "+h+" "+h+" "+c+" 0 "+c+" c"),i.push("-"+h+" "+c+" -"+c+" "+h+" -"+c+" 0 c"),i.push("-"+c+" -"+h+" -"+h+" -"+c+" 0 -"+c+" c"),i.push(h+" -"+c+" "+c+" -"+h+" "+c+" 0 c"),i.push("f"),i.push("Q"),e.stream=i.join(`
`),e}},Cross:{createAppearanceStream:function(n){var e={D:{Off:sr.RadioButton.Cross.OffPushDown},N:{}};return e.N[n]=sr.RadioButton.Cross.YesNormal,e.D[n]=sr.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(n){var e=tA(n);e.scope=n.scope;var i=[],s=sr.internal.calculateCross(n);return i.push("q"),i.push("1 1 "+Nr(sr.internal.getWidth(n)-2)+" "+Nr(sr.internal.getHeight(n)-2)+" re"),i.push("W"),i.push("n"),i.push(Nr(s.x1.x)+" "+Nr(s.x1.y)+" m"),i.push(Nr(s.x2.x)+" "+Nr(s.x2.y)+" l"),i.push(Nr(s.x4.x)+" "+Nr(s.x4.y)+" m"),i.push(Nr(s.x3.x)+" "+Nr(s.x3.y)+" l"),i.push("s"),i.push("Q"),e.stream=i.join(`
`),e},YesPushDown:function(n){var e=tA(n);e.scope=n.scope;var i=sr.internal.calculateCross(n),s=[];return s.push("0.749023 g"),s.push("0 0 "+Nr(sr.internal.getWidth(n))+" "+Nr(sr.internal.getHeight(n))+" re"),s.push("f"),s.push("q"),s.push("1 1 "+Nr(sr.internal.getWidth(n)-2)+" "+Nr(sr.internal.getHeight(n)-2)+" re"),s.push("W"),s.push("n"),s.push(Nr(i.x1.x)+" "+Nr(i.x1.y)+" m"),s.push(Nr(i.x2.x)+" "+Nr(i.x2.y)+" l"),s.push(Nr(i.x4.x)+" "+Nr(i.x4.y)+" m"),s.push(Nr(i.x3.x)+" "+Nr(i.x3.y)+" l"),s.push("s"),s.push("Q"),e.stream=s.join(`
`),e},OffPushDown:function(n){var e=tA(n);e.scope=n.scope;var i=[];return i.push("0.749023 g"),i.push("0 0 "+Nr(sr.internal.getWidth(n))+" "+Nr(sr.internal.getHeight(n))+" re"),i.push("f"),e.stream=i.join(`
`),e}}},createDefaultAppearanceStream:function(n){var e=n.scope.internal.getFont(n.fontName,n.fontStyle).id,i=n.scope.__private__.encodeColorString(n.color);return"/"+e+" "+n.fontSize+" Tf "+i}};sr.internal={Bezier_C:.551915024494,calculateCross:function(n){var e=sr.internal.getWidth(n),i=sr.internal.getHeight(n),s=Math.min(e,i);return{x1:{x:(e-s)/2,y:(i-s)/2+s},x2:{x:(e-s)/2+s,y:(i-s)/2},x3:{x:(e-s)/2,y:(i-s)/2},x4:{x:(e-s)/2+s,y:(i-s)/2+s}}}},sr.internal.getWidth=function(n){var e=0;return Ai(n)==="object"&&(e=mv(n.Rect[2])),e},sr.internal.getHeight=function(n){var e=0;return Ai(n)==="object"&&(e=mv(n.Rect[3])),e};var t3=Yi.addField=function(n){if(J4(this,n),!(n instanceof vo))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=n).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),n.page=n.scope.internal.getCurrentPageInfo().pageNumber,this};Yi.AcroFormChoiceField=hu,Yi.AcroFormListBox=du,Yi.AcroFormComboBox=pu,Yi.AcroFormEditBox=Gd,Yi.AcroFormButton=Vn,Yi.AcroFormPushButton=qd,Yi.AcroFormRadioButton=fu,Yi.AcroFormCheckBox=Wd,Yi.AcroFormTextField=wc,Yi.AcroFormPasswordField=Zd,Yi.AcroFormAppearance=sr,Yi.AcroForm={ChoiceField:hu,ListBox:du,ComboBox:pu,EditBox:Gd,Button:Vn,PushButton:qd,RadioButton:fu,CheckBox:Wd,TextField:wc,PasswordField:Zd,Appearance:sr},Ur.AcroForm={ChoiceField:hu,ListBox:du,ComboBox:pu,EditBox:Gd,Button:Vn,PushButton:qd,RadioButton:fu,CheckBox:Wd,TextField:wc,PasswordField:Zd,Appearance:sr};function _v(n){return n.reduce(function(e,i,s){return e[i]=s,e},{})}(function(n){n.__addimage__={};var e="UNKNOWN",i={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},s=n.__addimage__.getImageFileTypeByImageData=function(st,ut){var mt,vt,$t,Vt,jt,zt=e;if((ut=ut||e)==="RGBA"||st.data!==void 0&&st.data instanceof Uint8ClampedArray&&"height"in st&&"width"in st)return"RGBA";if(Ut(st))for(jt in i)for($t=i[jt],mt=0;mt<$t.length;mt+=1){for(Vt=!0,vt=0;vt<$t[mt].length;vt+=1)if($t[mt][vt]!==void 0&&$t[mt][vt]!==st[vt]){Vt=!1;break}if(Vt===!0){zt=jt;break}}else for(jt in i)for($t=i[jt],mt=0;mt<$t.length;mt+=1){for(Vt=!0,vt=0;vt<$t[mt].length;vt+=1)if($t[mt][vt]!==void 0&&$t[mt][vt]!==st.charCodeAt(vt)){Vt=!1;break}if(Vt===!0){zt=jt;break}}return zt===e&&ut!==e&&(zt=ut),zt},c=function st(ut){for(var mt=this.internal.write,vt=this.internal.putStream,$t=(0,this.internal.getFilters)();$t.indexOf("FlateEncode")!==-1;)$t.splice($t.indexOf("FlateEncode"),1);ut.objectId=this.internal.newObject();var Vt=[];if(Vt.push({key:"Type",value:"/XObject"}),Vt.push({key:"Subtype",value:"/Image"}),Vt.push({key:"Width",value:ut.width}),Vt.push({key:"Height",value:ut.height}),ut.colorSpace===Z.INDEXED?Vt.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(ut.palette.length/3-1)+" "+("sMask"in ut&&ut.sMask!==void 0?ut.objectId+2:ut.objectId+1)+" 0 R]"}):(Vt.push({key:"ColorSpace",value:"/"+ut.colorSpace}),ut.colorSpace===Z.DEVICE_CMYK&&Vt.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),Vt.push({key:"BitsPerComponent",value:ut.bitsPerComponent}),"decodeParameters"in ut&&ut.decodeParameters!==void 0&&Vt.push({key:"DecodeParms",value:"<<"+ut.decodeParameters+">>"}),"transparency"in ut&&Array.isArray(ut.transparency)){for(var jt="",zt=0,Wt=ut.transparency.length;zt<Wt;zt++)jt+=ut.transparency[zt]+" "+ut.transparency[zt]+" ";Vt.push({key:"Mask",value:"["+jt+"]"})}ut.sMask!==void 0&&Vt.push({key:"SMask",value:ut.objectId+1+" 0 R"});var Yt=ut.filter!==void 0?["/"+ut.filter]:void 0;if(vt({data:ut.data,additionalKeyValues:Vt,alreadyAppliedFilters:Yt,objectId:ut.objectId}),mt("endobj"),"sMask"in ut&&ut.sMask!==void 0){var me="/Predictor "+ut.predictor+" /Colors 1 /BitsPerComponent "+ut.bitsPerComponent+" /Columns "+ut.width,et={width:ut.width,height:ut.height,colorSpace:"DeviceGray",bitsPerComponent:ut.bitsPerComponent,decodeParameters:me,data:ut.sMask};"filter"in ut&&(et.filter=ut.filter),st.call(this,et)}if(ut.colorSpace===Z.INDEXED){var dt=this.internal.newObject();vt({data:pt(new Uint8Array(ut.palette)),objectId:dt}),mt("endobj")}},h=function(){var st=this.internal.collections.addImage_images;for(var ut in st)c.call(this,st[ut])},d=function(){var st,ut=this.internal.collections.addImage_images,mt=this.internal.write;for(var vt in ut)mt("/I"+(st=ut[vt]).index,st.objectId,"0","R")},A=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",h),this.internal.events.subscribe("putXobjectDict",d))},v=function(){var st=this.internal.collections.addImage_images;return A.call(this),st},C=function(){return Object.keys(this.internal.collections.addImage_images).length},I=function(st){return typeof n["process"+st.toUpperCase()]=="function"},T=function(st){return Ai(st)==="object"&&st.nodeType===1},P=function(st,ut){if(st.nodeName==="IMG"&&st.hasAttribute("src")){var mt=""+st.getAttribute("src");if(mt.indexOf("data:image/")===0)return wh(unescape(mt).split("base64,").pop());var vt=n.loadFile(mt,!0);if(vt!==void 0)return vt}if(st.nodeName==="CANVAS"){if(st.width===0||st.height===0)throw new Error("Given canvas must have data. Canvas width: "+st.width+", height: "+st.height);var $t;switch(ut){case"PNG":$t="image/png";break;case"WEBP":$t="image/webp";break;case"JPEG":case"JPG":default:$t="image/jpeg"}return wh(st.toDataURL($t,1).split("base64,").pop())}},U=function(st){var ut=this.internal.collections.addImage_images;if(ut){for(var mt in ut)if(st===ut[mt].alias)return ut[mt]}},V=function(st,ut,mt){return st||ut||(st=-96,ut=-96),st<0&&(st=-1*mt.width*72/st/this.internal.scaleFactor),ut<0&&(ut=-1*mt.height*72/ut/this.internal.scaleFactor),st===0&&(st=ut*mt.width/mt.height),ut===0&&(ut=st*mt.height/mt.width),[st,ut]},R=function(st,ut,mt,vt,$t,Vt){var jt=V.call(this,mt,vt,$t),zt=this.internal.getCoordinateString,Wt=this.internal.getVerticalCoordinateString,Yt=v.call(this);if(mt=jt[0],vt=jt[1],Yt[$t.index]=$t,Vt){Vt*=Math.PI/180;var me=Math.cos(Vt),et=Math.sin(Vt),dt=function(Ct){return Ct.toFixed(4)},_t=[dt(me),dt(et),dt(-1*et),dt(me),0,0,"cm"]}this.internal.write("q"),Vt?(this.internal.write([1,"0","0",1,zt(st),Wt(ut+vt),"cm"].join(" ")),this.internal.write(_t.join(" ")),this.internal.write([zt(mt),"0","0",zt(vt),"0","0","cm"].join(" "))):this.internal.write([zt(mt),"0","0",zt(vt),zt(st),Wt(ut+vt),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+$t.index+" Do"),this.internal.write("Q")},Z=n.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};n.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var K=n.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},tt=n.__addimage__.sHashCode=function(st){var ut,mt,vt=0;if(typeof st=="string")for(mt=st.length,ut=0;ut<mt;ut++)vt=(vt<<5)-vt+st.charCodeAt(ut),vt|=0;else if(Ut(st))for(mt=st.byteLength/2,ut=0;ut<mt;ut++)vt=(vt<<5)-vt+st[ut],vt|=0;return vt},ht=n.__addimage__.validateStringAsBase64=function(st){(st=st||"").toString().trim();var ut=!0;return st.length===0&&(ut=!1),st.length%4!=0&&(ut=!1),/^[A-Za-z0-9+/]+$/.test(st.substr(0,st.length-2))===!1&&(ut=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(st.substr(-2))===!1&&(ut=!1),ut},Bt=n.__addimage__.extractImageFromDataUrl=function(st){var ut=(st=st||"").split("base64,"),mt=null;if(ut.length===2){var vt=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(ut[0]);Array.isArray(vt)&&(mt={mimeType:vt[1],charset:vt[2],data:ut[1]})}return mt},Lt=n.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};n.__addimage__.isArrayBuffer=function(st){return Lt()&&st instanceof ArrayBuffer};var Ut=n.__addimage__.isArrayBufferView=function(st){return Lt()&&typeof Uint32Array<"u"&&(st instanceof Int8Array||st instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&st instanceof Uint8ClampedArray||st instanceof Int16Array||st instanceof Uint16Array||st instanceof Int32Array||st instanceof Uint32Array||st instanceof Float32Array||st instanceof Float64Array)},xt=n.__addimage__.binaryStringToUint8Array=function(st){for(var ut=st.length,mt=new Uint8Array(ut),vt=0;vt<ut;vt++)mt[vt]=st.charCodeAt(vt);return mt},pt=n.__addimage__.arrayBufferToBinaryString=function(st){for(var ut="",mt=Ut(st)?st:new Uint8Array(st),vt=0;vt<mt.length;vt+=8192)ut+=String.fromCharCode.apply(null,mt.subarray(vt,vt+8192));return ut};n.addImage=function(){var st,ut,mt,vt,$t,Vt,jt,zt,Wt;if(typeof arguments[1]=="number"?(ut=e,mt=arguments[1],vt=arguments[2],$t=arguments[3],Vt=arguments[4],jt=arguments[5],zt=arguments[6],Wt=arguments[7]):(ut=arguments[1],mt=arguments[2],vt=arguments[3],$t=arguments[4],Vt=arguments[5],jt=arguments[6],zt=arguments[7],Wt=arguments[8]),Ai(st=arguments[0])==="object"&&!T(st)&&"imageData"in st){var Yt=st;st=Yt.imageData,ut=Yt.format||ut||e,mt=Yt.x||mt||0,vt=Yt.y||vt||0,$t=Yt.w||Yt.width||$t,Vt=Yt.h||Yt.height||Vt,jt=Yt.alias||jt,zt=Yt.compression||zt,Wt=Yt.rotation||Yt.angle||Wt}var me=this.internal.getFilters();if(zt===void 0&&me.indexOf("FlateEncode")!==-1&&(zt="SLOW"),isNaN(mt)||isNaN(vt))throw new Error("Invalid coordinates passed to jsPDF.addImage");A.call(this);var et=kt.call(this,st,ut,jt,zt);return R.call(this,mt,vt,$t,Vt,et,Wt),this};var kt=function(st,ut,mt,vt){var $t,Vt,jt;if(typeof st=="string"&&s(st)===e){st=unescape(st);var zt=Xt(st,!1);(zt!==""||(zt=n.loadFile(st,!0))!==void 0)&&(st=zt)}if(T(st)&&(st=P(st,ut)),ut=s(st,ut),!I(ut))throw new Error("addImage does not support files of type '"+ut+"', please ensure that a plugin for '"+ut+"' support is added.");if(((jt=mt)==null||jt.length===0)&&(mt=function(Wt){return typeof Wt=="string"||Ut(Wt)?tt(Wt):Ut(Wt.data)?tt(Wt.data):null}(st)),($t=U.call(this,mt))||(Lt()&&(st instanceof Uint8Array||ut==="RGBA"||(Vt=st,st=xt(st))),$t=this["process"+ut.toUpperCase()](st,C.call(this),mt,function(Wt){return Wt&&typeof Wt=="string"&&(Wt=Wt.toUpperCase()),Wt in n.image_compression?Wt:K.NONE}(vt),Vt)),!$t)throw new Error("An unknown error occurred whilst processing the image.");return $t},Xt=n.__addimage__.convertBase64ToBinaryString=function(st,ut){var mt;ut=typeof ut!="boolean"||ut;var vt,$t="";if(typeof st=="string"){vt=(mt=Bt(st))!==null?mt.data:st;try{$t=wh(vt)}catch(Vt){if(ut)throw ht(vt)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+Vt.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return $t};n.getImageProperties=function(st){var ut,mt,vt="";if(T(st)&&(st=P(st)),typeof st=="string"&&s(st)===e&&((vt=Xt(st,!1))===""&&(vt=n.loadFile(st)||""),st=vt),mt=s(st),!I(mt))throw new Error("addImage does not support files of type '"+mt+"', please ensure that a plugin for '"+mt+"' support is added.");if(!Lt()||st instanceof Uint8Array||(st=xt(st)),!(ut=this["process"+mt.toUpperCase()](st)))throw new Error("An unknown error occurred whilst processing the image");return ut.fileType=mt,ut}})(Ur.API),function(n){var e=function(i){if(i!==void 0&&i!="")return!0};Ur.API.events.push(["addPage",function(i){this.internal.getPageInfo(i.pageNumber).pageContext.annotations=[]}]),n.events.push(["putPage",function(i){for(var s,c,h,d=this.internal.getCoordinateString,A=this.internal.getVerticalCoordinateString,v=this.internal.getPageInfoByObjId(i.objId),C=i.pageContext.annotations,I=!1,T=0;T<C.length&&!I;T++)switch((s=C[T]).type){case"link":(e(s.options.url)||e(s.options.pageNumber))&&(I=!0);break;case"reference":case"text":case"freetext":I=!0}if(I!=0){this.internal.write("/Annots [");for(var P=0;P<C.length;P++){s=C[P];var U=this.internal.pdfEscape,V=this.internal.getEncryptor(i.objId);switch(s.type){case"reference":this.internal.write(" "+s.object.objId+" 0 R ");break;case"text":var R=this.internal.newAdditionalObject(),Z=this.internal.newAdditionalObject(),K=this.internal.getEncryptor(R.objId),tt=s.title||"Note";h="<</Type /Annot /Subtype /Text "+(c="/Rect ["+d(s.bounds.x)+" "+A(s.bounds.y+s.bounds.h)+" "+d(s.bounds.x+s.bounds.w)+" "+A(s.bounds.y)+"] ")+"/Contents ("+U(K(s.contents))+")",h+=" /Popup "+Z.objId+" 0 R",h+=" /P "+v.objId+" 0 R",h+=" /T ("+U(K(tt))+") >>",R.content=h;var ht=R.objId+" 0 R";h="<</Type /Annot /Subtype /Popup "+(c="/Rect ["+d(s.bounds.x+30)+" "+A(s.bounds.y+s.bounds.h)+" "+d(s.bounds.x+s.bounds.w+30)+" "+A(s.bounds.y)+"] ")+" /Parent "+ht,s.open&&(h+=" /Open true"),h+=" >>",Z.content=h,this.internal.write(R.objId,"0 R",Z.objId,"0 R");break;case"freetext":c="/Rect ["+d(s.bounds.x)+" "+A(s.bounds.y)+" "+d(s.bounds.x+s.bounds.w)+" "+A(s.bounds.y+s.bounds.h)+"] ";var Bt=s.color||"#000000";h="<</Type /Annot /Subtype /FreeText "+c+"/Contents ("+U(V(s.contents))+")",h+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+Bt+")",h+=" /Border [0 0 0]",h+=" >>",this.internal.write(h);break;case"link":if(s.options.name){var Lt=this.annotations._nameMap[s.options.name];s.options.pageNumber=Lt.page,s.options.top=Lt.y}else s.options.top||(s.options.top=0);if(c="/Rect ["+s.finalBounds.x+" "+s.finalBounds.y+" "+s.finalBounds.w+" "+s.finalBounds.h+"] ",h="",s.options.url)h="<</Type /Annot /Subtype /Link "+c+"/Border [0 0 0] /A <</S /URI /URI ("+U(V(s.options.url))+") >>";else if(s.options.pageNumber)switch(h="<</Type /Annot /Subtype /Link "+c+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(s.options.pageNumber).objId+" 0 R",s.options.magFactor=s.options.magFactor||"XYZ",s.options.magFactor){case"Fit":h+=" /Fit]";break;case"FitH":h+=" /FitH "+s.options.top+"]";break;case"FitV":s.options.left=s.options.left||0,h+=" /FitV "+s.options.left+"]";break;case"XYZ":default:var Ut=A(s.options.top);s.options.left=s.options.left||0,s.options.zoom===void 0&&(s.options.zoom=0),h+=" /XYZ "+s.options.left+" "+Ut+" "+s.options.zoom+"]"}h!=""&&(h+=" >>",this.internal.write(h))}}this.internal.write("]")}}]),n.createAnnotation=function(i){var s=this.internal.getCurrentPageInfo();switch(i.type){case"link":this.link(i.bounds.x,i.bounds.y,i.bounds.w,i.bounds.h,i);break;case"text":case"freetext":s.pageContext.annotations.push(i)}},n.link=function(i,s,c,h,d){var A=this.internal.getCurrentPageInfo(),v=this.internal.getCoordinateString,C=this.internal.getVerticalCoordinateString;A.pageContext.annotations.push({finalBounds:{x:v(i),y:C(s),w:v(i+c),h:C(s+h)},options:d,type:"link"})},n.textWithLink=function(i,s,c,h){var d,A,v=this.getTextWidth(i),C=this.internal.getLineHeight()/this.internal.scaleFactor;if(h.maxWidth!==void 0){A=h.maxWidth;var I=this.splitTextToSize(i,A).length;d=Math.ceil(C*I)}else A=v,d=C;return this.text(i,s,c,h),c+=.2*C,h.align==="center"&&(s-=v/2),h.align==="right"&&(s-=v),this.link(s,c-C,A,d,h),v},n.getTextWidth=function(i){var s=this.internal.getFontSize();return this.getStringUnitWidth(i)*s/this.internal.scaleFactor}}(Ur.API),function(n){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},i={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},s={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},c=[1570,1571,1573,1575];n.__arabicParser__={};var h=n.__arabicParser__.isInArabicSubstitutionA=function(R){return e[R.charCodeAt(0)]!==void 0},d=n.__arabicParser__.isArabicLetter=function(R){return typeof R=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(R)},A=n.__arabicParser__.isArabicEndLetter=function(R){return d(R)&&h(R)&&e[R.charCodeAt(0)].length<=2},v=n.__arabicParser__.isArabicAlfLetter=function(R){return d(R)&&c.indexOf(R.charCodeAt(0))>=0};n.__arabicParser__.arabicLetterHasIsolatedForm=function(R){return d(R)&&h(R)&&e[R.charCodeAt(0)].length>=1};var C=n.__arabicParser__.arabicLetterHasFinalForm=function(R){return d(R)&&h(R)&&e[R.charCodeAt(0)].length>=2};n.__arabicParser__.arabicLetterHasInitialForm=function(R){return d(R)&&h(R)&&e[R.charCodeAt(0)].length>=3};var I=n.__arabicParser__.arabicLetterHasMedialForm=function(R){return d(R)&&h(R)&&e[R.charCodeAt(0)].length==4},T=n.__arabicParser__.resolveLigatures=function(R){var Z=0,K=i,tt="",ht=0;for(Z=0;Z<R.length;Z+=1)K[R.charCodeAt(Z)]!==void 0?(ht++,typeof(K=K[R.charCodeAt(Z)])=="number"&&(tt+=String.fromCharCode(K),K=i,ht=0),Z===R.length-1&&(K=i,tt+=R.charAt(Z-(ht-1)),Z-=ht-1,ht=0)):(K=i,tt+=R.charAt(Z-ht),Z-=ht,ht=0);return tt};n.__arabicParser__.isArabicDiacritic=function(R){return R!==void 0&&s[R.charCodeAt(0)]!==void 0};var P=n.__arabicParser__.getCorrectForm=function(R,Z,K){return d(R)?h(R)===!1?-1:!C(R)||!d(Z)&&!d(K)||!d(K)&&A(Z)||A(R)&&!d(Z)||A(R)&&v(Z)||A(R)&&A(Z)?0:I(R)&&d(Z)&&!A(Z)&&d(K)&&C(K)?3:A(R)||!d(K)?1:2:-1},U=function(R){var Z=0,K=0,tt=0,ht="",Bt="",Lt="",Ut=(R=R||"").split("\\s+"),xt=[];for(Z=0;Z<Ut.length;Z+=1){for(xt.push(""),K=0;K<Ut[Z].length;K+=1)ht=Ut[Z][K],Bt=Ut[Z][K-1],Lt=Ut[Z][K+1],d(ht)?(tt=P(ht,Bt,Lt),xt[Z]+=tt!==-1?String.fromCharCode(e[ht.charCodeAt(0)][tt]):ht):xt[Z]+=ht;xt[Z]=T(xt[Z])}return xt.join(" ")},V=n.__arabicParser__.processArabic=n.processArabic=function(){var R,Z=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,K=[];if(Array.isArray(Z)){var tt=0;for(K=[],tt=0;tt<Z.length;tt+=1)Array.isArray(Z[tt])?K.push([U(Z[tt][0]),Z[tt][1],Z[tt][2]]):K.push([U(Z[tt])]);R=K}else R=U(Z);return typeof arguments[0]=="string"?R:(arguments[0].text=R,arguments[0])};n.events.push(["preProcessText",V])}(Ur.API),Ur.API.autoPrint=function(n){var e;switch((n=n||{}).variant=n.variant||"non-conform",n.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(n){var e=function(){var i=void 0;Object.defineProperty(this,"pdf",{get:function(){return i},set:function(A){i=A}});var s=150;Object.defineProperty(this,"width",{get:function(){return s},set:function(A){s=isNaN(A)||Number.isInteger(A)===!1||A<0?150:A,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=s+1)}});var c=300;Object.defineProperty(this,"height",{get:function(){return c},set:function(A){c=isNaN(A)||Number.isInteger(A)===!1||A<0?300:A,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=c+1)}});var h=[];Object.defineProperty(this,"childNodes",{get:function(){return h},set:function(A){h=A}});var d={};Object.defineProperty(this,"style",{get:function(){return d},set:function(A){d=A}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(i,s){var c;if((i=i||"2d")!=="2d")return null;for(c in s)this.pdf.context2d.hasOwnProperty(c)&&(this.pdf.context2d[c]=s[c]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},n.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(Ur.API),function(n){var e={left:0,top:0,bottom:0,right:0},i=!1,s=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),c.call(this))},c=function(){this.internal.__cell__.lastCell=new h,this.internal.__cell__.pages=1},h=function(){var v=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return v},set:function(R){v=R}});var C=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return C},set:function(R){C=R}});var I=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return I},set:function(R){I=R}});var T=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return T},set:function(R){T=R}});var P=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return P},set:function(R){P=R}});var U=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return U},set:function(R){U=R}});var V=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return V},set:function(R){V=R}}),this};h.prototype.clone=function(){return new h(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},h.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},n.setHeaderFunction=function(v){return s.call(this),this.internal.__cell__.headerFunction=typeof v=="function"?v:void 0,this},n.getTextDimensions=function(v,C){s.call(this);var I=(C=C||{}).fontSize||this.getFontSize(),T=C.font||this.getFont(),P=C.scaleFactor||this.internal.scaleFactor,U=0,V=0,R=0,Z=this;if(!Array.isArray(v)&&typeof v!="string"){if(typeof v!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");v=String(v)}var K=C.maxWidth;K>0?typeof v=="string"?v=this.splitTextToSize(v,K):Object.prototype.toString.call(v)==="[object Array]"&&(v=v.reduce(function(ht,Bt){return ht.concat(Z.splitTextToSize(Bt,K))},[])):v=Array.isArray(v)?v:[v];for(var tt=0;tt<v.length;tt++)U<(R=this.getStringUnitWidth(v[tt],{font:T})*I)&&(U=R);return U!==0&&(V=v.length),{w:U/=P,h:Math.max((V*I*this.getLineHeightFactor()-I*(this.getLineHeightFactor()-1))/P,0)}},n.cellAddPage=function(){s.call(this),this.addPage();var v=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new h(v.left,v.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var d=n.cell=function(){var v;v=arguments[0]instanceof h?arguments[0]:new h(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),s.call(this);var C=this.internal.__cell__.lastCell,I=this.internal.__cell__.padding,T=this.internal.__cell__.margins||e,P=this.internal.__cell__.tableHeaderRow,U=this.internal.__cell__.printHeaders;return C.lineNumber!==void 0&&(C.lineNumber===v.lineNumber?(v.x=(C.x||0)+(C.width||0),v.y=C.y||0):C.y+C.height+v.height+T.bottom>this.getPageHeight()?(this.cellAddPage(),v.y=T.top,U&&P&&(this.printHeaderRow(v.lineNumber,!0),v.y+=P[0].height)):v.y=C.y+C.height||v.y),v.text[0]!==void 0&&(this.rect(v.x,v.y,v.width,v.height,i===!0?"FD":void 0),v.align==="right"?this.text(v.text,v.x+v.width-I,v.y+I,{align:"right",baseline:"top"}):v.align==="center"?this.text(v.text,v.x+v.width/2,v.y+I,{align:"center",baseline:"top",maxWidth:v.width-I-I}):this.text(v.text,v.x+I,v.y+I,{align:"left",baseline:"top",maxWidth:v.width-I-I})),this.internal.__cell__.lastCell=v,this};n.table=function(v,C,I,T,P){if(s.call(this),!I)throw new Error("No data for PDF table.");var U,V,R,Z,K=[],tt=[],ht=[],Bt={},Lt={},Ut=[],xt=[],pt=(P=P||{}).autoSize||!1,kt=P.printHeaders!==!1,Xt=P.css&&P.css["font-size"]!==void 0?16*P.css["font-size"]:P.fontSize||12,st=P.margins||Object.assign({width:this.getPageWidth()},e),ut=typeof P.padding=="number"?P.padding:3,mt=P.headerBackgroundColor||"#c8c8c8",vt=P.headerTextColor||"#000";if(c.call(this),this.internal.__cell__.printHeaders=kt,this.internal.__cell__.margins=st,this.internal.__cell__.table_font_size=Xt,this.internal.__cell__.padding=ut,this.internal.__cell__.headerBackgroundColor=mt,this.internal.__cell__.headerTextColor=vt,this.setFontSize(Xt),T==null)tt=K=Object.keys(I[0]),ht=K.map(function(){return"left"});else if(Array.isArray(T)&&Ai(T[0])==="object")for(K=T.map(function(Yt){return Yt.name}),tt=T.map(function(Yt){return Yt.prompt||Yt.name||""}),ht=T.map(function(Yt){return Yt.align||"left"}),U=0;U<T.length;U+=1)Lt[T[U].name]=T[U].width*(19.049976/25.4);else Array.isArray(T)&&typeof T[0]=="string"&&(tt=K=T,ht=K.map(function(){return"left"}));if(pt||Array.isArray(T)&&typeof T[0]=="string")for(U=0;U<K.length;U+=1){for(Bt[Z=K[U]]=I.map(function(Yt){return Yt[Z]}),this.setFont(void 0,"bold"),Ut.push(this.getTextDimensions(tt[U],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),V=Bt[Z],this.setFont(void 0,"normal"),R=0;R<V.length;R+=1)Ut.push(this.getTextDimensions(V[R],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);Lt[Z]=Math.max.apply(null,Ut)+ut+ut,Ut=[]}if(kt){var $t={};for(U=0;U<K.length;U+=1)$t[K[U]]={},$t[K[U]].text=tt[U],$t[K[U]].align=ht[U];var Vt=A.call(this,$t,Lt);xt=K.map(function(Yt){return new h(v,C,Lt[Yt],Vt,$t[Yt].text,void 0,$t[Yt].align)}),this.setTableHeaderRow(xt),this.printHeaderRow(1,!1)}var jt=T.reduce(function(Yt,me){return Yt[me.name]=me.align,Yt},{});for(U=0;U<I.length;U+=1){"rowStart"in P&&P.rowStart instanceof Function&&P.rowStart({row:U,data:I[U]},this);var zt=A.call(this,I[U],Lt);for(R=0;R<K.length;R+=1){var Wt=I[U][K[R]];"cellStart"in P&&P.cellStart instanceof Function&&P.cellStart({row:U,col:R,data:Wt},this),d.call(this,new h(v,C,Lt[K[R]],zt,Wt,U+2,jt[K[R]]))}}return this.internal.__cell__.table_x=v,this.internal.__cell__.table_y=C,this};var A=function(v,C){var I=this.internal.__cell__.padding,T=this.internal.__cell__.table_font_size,P=this.internal.scaleFactor;return Object.keys(v).map(function(U){var V=v[U];return this.splitTextToSize(V.hasOwnProperty("text")?V.text:V,C[U]-I-I)},this).map(function(U){return this.getLineHeightFactor()*U.length*T/P+I+I},this).reduce(function(U,V){return Math.max(U,V)},0)};n.setTableHeaderRow=function(v){s.call(this),this.internal.__cell__.tableHeaderRow=v},n.printHeaderRow=function(v,C){if(s.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var I;if(i=!0,typeof this.internal.__cell__.headerFunction=="function"){var T=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new h(T[0],T[1],T[2],T[3],void 0,-1)}this.setFont(void 0,"bold");for(var P=[],U=0;U<this.internal.__cell__.tableHeaderRow.length;U+=1){I=this.internal.__cell__.tableHeaderRow[U].clone(),C&&(I.y=this.internal.__cell__.margins.top||0,P.push(I)),I.lineNumber=v;var V=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),d.call(this,I),this.setTextColor(V)}P.length>0&&this.setTableHeaderRow(P),this.setFont(void 0,"normal"),i=!1}}(Ur.API);var bv={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},xv=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],kg=_v(xv),Bv=[100,200,300,400,500,600,700,800,900],e3=_v(Bv);function Mg(n){var e=n.family.replace(/"|'/g,"").toLowerCase(),i=function(h){return bv[h=h||"normal"]?h:"normal"}(n.style),s=function(h){if(!h)return 400;if(typeof h=="number")return h>=100&&h<=900&&h%100==0?h:400;if(/^\d00$/.test(h))return parseInt(h);switch(h){case"bold":return 700;case"normal":default:return 400}}(n.weight),c=function(h){return typeof kg[h=h||"normal"]=="number"?h:"normal"}(n.stretch);return{family:e,style:i,weight:s,stretch:c,src:n.src||[],ref:n.ref||{name:e,style:[c,i,s].join(" ")}}}function Cv(n,e,i,s){var c;for(c=i;c>=0&&c<e.length;c+=s)if(n[e[c]])return n[e[c]];for(c=i;c>=0&&c<e.length;c-=s)if(n[e[c]])return n[e[c]]}var r3={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Fv={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Sv(n){return[n.stretch,n.style,n.weight,n.family].join(" ")}function i3(n,e,i){for(var s=(i=i||{}).defaultFontFamily||"times",c=Object.assign({},r3,i.genericFontFamilies||{}),h=null,d=null,A=0;A<e.length;++A)if(c[(h=Mg(e[A])).family]&&(h.family=c[h.family]),n.hasOwnProperty(h.family)){d=n[h.family];break}if(!(d=d||n[s]))throw new Error("Could not find a font-family for the rule '"+Sv(h)+"' and default family '"+s+"'.");if(d=function(v,C){if(C[v])return C[v];var I=kg[v],T=I<=kg.normal?-1:1,P=Cv(C,xv,I,T);if(!P)throw new Error("Could not find a matching font-stretch value for "+v);return P}(h.stretch,d),d=function(v,C){if(C[v])return C[v];for(var I=bv[v],T=0;T<I.length;++T)if(C[I[T]])return C[I[T]];throw new Error("Could not find a matching font-style for "+v)}(h.style,d),!(d=function(v,C){if(C[v])return C[v];if(v===400&&C[500])return C[500];if(v===500&&C[400])return C[400];var I=e3[v],T=Cv(C,Bv,I,v<400?-1:1);if(!T)throw new Error("Could not find a matching font-weight for value "+v);return T}(h.weight,d)))throw new Error("Failed to resolve a font for the rule '"+Sv(h)+"'.");return d}function Iv(n){return n.trimLeft()}function n3(n,e){for(var i=0;i<n.length;){if(n.charAt(i)===e)return[n.substring(0,i),n.substring(i+1)];i+=1}return null}function s3(n){var e=n.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],n.substring(e[0].length)]}var Yd,Ev,Tv,Uv=["times"];(function(n){var e,i,s,c,h,d,A,v,C,I=function(et){return et=et||{},this.isStrokeTransparent=et.isStrokeTransparent||!1,this.strokeOpacity=et.strokeOpacity||1,this.strokeStyle=et.strokeStyle||"#000000",this.fillStyle=et.fillStyle||"#000000",this.isFillTransparent=et.isFillTransparent||!1,this.fillOpacity=et.fillOpacity||1,this.font=et.font||"10px sans-serif",this.textBaseline=et.textBaseline||"alphabetic",this.textAlign=et.textAlign||"left",this.lineWidth=et.lineWidth||1,this.lineJoin=et.lineJoin||"miter",this.lineCap=et.lineCap||"butt",this.path=et.path||[],this.transform=et.transform!==void 0?et.transform.clone():new v,this.globalCompositeOperation=et.globalCompositeOperation||"normal",this.globalAlpha=et.globalAlpha||1,this.clip_path=et.clip_path||[],this.currentPoint=et.currentPoint||new d,this.miterLimit=et.miterLimit||10,this.lastPoint=et.lastPoint||new d,this.lineDashOffset=et.lineDashOffset||0,this.lineDash=et.lineDash||[],this.margin=et.margin||[0,0,0,0],this.prevPageLastElemOffset=et.prevPageLastElemOffset||0,this.ignoreClearRect=typeof et.ignoreClearRect!="boolean"||et.ignoreClearRect,this};n.events.push(["initialized",function(){this.context2d=new T(this),e=this.internal.f2,i=this.internal.getCoordinateString,s=this.internal.getVerticalCoordinateString,c=this.internal.getHorizontalCoordinate,h=this.internal.getVerticalCoordinate,d=this.internal.Point,A=this.internal.Rectangle,v=this.internal.Matrix,C=new I}]);var T=function(et){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var dt=et;Object.defineProperty(this,"pdf",{get:function(){return dt}});var _t=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return _t},set:function(ie){_t=!!ie}});var Ct=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return Ct},set:function(ie){Ct=!!ie}});var Ot=0;Object.defineProperty(this,"posX",{get:function(){return Ot},set:function(ie){isNaN(ie)||(Ot=ie)}});var Rt=0;Object.defineProperty(this,"posY",{get:function(){return Rt},set:function(ie){isNaN(ie)||(Rt=ie)}}),Object.defineProperty(this,"margin",{get:function(){return C.margin},set:function(ie){var rt;typeof ie=="number"?rt=[ie,ie,ie,ie]:((rt=new Array(4))[0]=ie[0],rt[1]=ie.length>=2?ie[1]:rt[0],rt[2]=ie.length>=3?ie[2]:rt[0],rt[3]=ie.length>=4?ie[3]:rt[1]),C.margin=rt}});var Zt=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Zt},set:function(ie){Zt=ie}});var Jt=0;Object.defineProperty(this,"lastBreak",{get:function(){return Jt},set:function(ie){Jt=ie}});var xe=[];Object.defineProperty(this,"pageBreaks",{get:function(){return xe},set:function(ie){xe=ie}}),Object.defineProperty(this,"ctx",{get:function(){return C},set:function(ie){ie instanceof I&&(C=ie)}}),Object.defineProperty(this,"path",{get:function(){return C.path},set:function(ie){C.path=ie}});var we=[];Object.defineProperty(this,"ctxStack",{get:function(){return we},set:function(ie){we=ie}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(ie){var rt;rt=P(ie),this.ctx.fillStyle=rt.style,this.ctx.isFillTransparent=rt.a===0,this.ctx.fillOpacity=rt.a,this.pdf.setFillColor(rt.r,rt.g,rt.b,{a:rt.a}),this.pdf.setTextColor(rt.r,rt.g,rt.b,{a:rt.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(ie){var rt=P(ie);this.ctx.strokeStyle=rt.style,this.ctx.isStrokeTransparent=rt.a===0,this.ctx.strokeOpacity=rt.a,rt.a===0?this.pdf.setDrawColor(255,255,255):(rt.a,this.pdf.setDrawColor(rt.r,rt.g,rt.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(ie){["butt","round","square"].indexOf(ie)!==-1&&(this.ctx.lineCap=ie,this.pdf.setLineCap(ie))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(ie){isNaN(ie)||(this.ctx.lineWidth=ie,this.pdf.setLineWidth(ie))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(ie){["bevel","round","miter"].indexOf(ie)!==-1&&(this.ctx.lineJoin=ie,this.pdf.setLineJoin(ie))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(ie){isNaN(ie)||(this.ctx.miterLimit=ie,this.pdf.setMiterLimit(ie))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(ie){this.ctx.textBaseline=ie}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(ie){["right","end","center","left","start"].indexOf(ie)!==-1&&(this.ctx.textAlign=ie)}});var Te=null;function Ee(ie,rt){if(Te===null){var dr=function(je){var se=[];return Object.keys(je).forEach(function(fe){je[fe].forEach(function(Ue){var Se=null;switch(Ue){case"bold":Se={family:fe,weight:"bold"};break;case"italic":Se={family:fe,style:"italic"};break;case"bolditalic":Se={family:fe,weight:"bold",style:"italic"};break;case"":case"normal":Se={family:fe}}Se!==null&&(Se.ref={name:fe,style:Ue},se.push(Se))})}),se}(ie.getFontList());Te=function(je){for(var se={},fe=0;fe<je.length;++fe){var Ue=Mg(je[fe]),Se=Ue.family,Re=Ue.stretch,We=Ue.style,ar=Ue.weight;se[Se]=se[Se]||{},se[Se][Re]=se[Se][Re]||{},se[Se][Re][We]=se[Se][Re][We]||{},se[Se][Re][We][ar]=Ue}return se}(dr.concat(rt))}return Te}var Ve=null;Object.defineProperty(this,"fontFaces",{get:function(){return Ve},set:function(ie){Te=null,Ve=ie}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(ie){var rt;if(this.ctx.font=ie,(rt=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(ie))!==null){var dr=rt[1],je=(rt[2],rt[3]),se=rt[4],fe=(rt[5],rt[6]),Ue=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(se)[2];se=Math.floor(Ue==="px"?parseFloat(se)*this.pdf.internal.scaleFactor:Ue==="em"?parseFloat(se)*this.pdf.getFontSize():parseFloat(se)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(se);var Se=function(er){var or,Le,Zr=[],ce=er.trim();if(ce==="")return Uv;if(ce in Fv)return[Fv[ce]];for(;ce!=="";){switch(Le=null,or=(ce=Iv(ce)).charAt(0)){case'"':case"'":Le=n3(ce.substring(1),or);break;default:Le=s3(ce)}if(Le===null||(Zr.push(Le[0]),(ce=Iv(Le[1]))!==""&&ce.charAt(0)!==","))return Uv;ce=ce.replace(/^,/,"")}return Zr}(fe);if(this.fontFaces){var Re=i3(Ee(this.pdf,this.fontFaces),Se.map(function(er){return{family:er,stretch:"normal",weight:je,style:dr}}));this.pdf.setFont(Re.ref.name,Re.ref.style)}else{var We="";(je==="bold"||parseInt(je,10)>=700||dr==="bold")&&(We="bold"),dr==="italic"&&(We+="italic"),We.length===0&&(We="normal");for(var ar="",wr={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Fr=0;Fr<Se.length;Fr++){if(this.pdf.internal.getFont(Se[Fr],We,{noFallback:!0,disableWarning:!0})!==void 0){ar=Se[Fr];break}if(We==="bolditalic"&&this.pdf.internal.getFont(Se[Fr],"bold",{noFallback:!0,disableWarning:!0})!==void 0)ar=Se[Fr],We="bold";else if(this.pdf.internal.getFont(Se[Fr],"normal",{noFallback:!0,disableWarning:!0})!==void 0){ar=Se[Fr],We="normal";break}}if(ar===""){for(var oe=0;oe<Se.length;oe++)if(wr[Se[oe]]){ar=wr[Se[oe]];break}}ar=ar===""?"Times":ar,this.pdf.setFont(ar,We)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(ie){this.ctx.globalCompositeOperation=ie}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(ie){this.ctx.globalAlpha=ie}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(ie){this.ctx.lineDashOffset=ie,me.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(ie){this.ctx.lineDash=ie,me.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(ie){this.ctx.ignoreClearRect=!!ie}})};T.prototype.setLineDash=function(et){this.lineDash=et},T.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},T.prototype.fill=function(){Bt.call(this,"fill",!1)},T.prototype.stroke=function(){Bt.call(this,"stroke",!1)},T.prototype.beginPath=function(){this.path=[{type:"begin"}]},T.prototype.moveTo=function(et,dt){if(isNaN(et)||isNaN(dt))throw Ti.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var _t=this.ctx.transform.applyToPoint(new d(et,dt));this.path.push({type:"mt",x:_t.x,y:_t.y}),this.ctx.lastPoint=new d(et,dt)},T.prototype.closePath=function(){var et=new d(0,0),dt=0;for(dt=this.path.length-1;dt!==-1;dt--)if(this.path[dt].type==="begin"&&Ai(this.path[dt+1])==="object"&&typeof this.path[dt+1].x=="number"){et=new d(this.path[dt+1].x,this.path[dt+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new d(et.x,et.y)},T.prototype.lineTo=function(et,dt){if(isNaN(et)||isNaN(dt))throw Ti.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var _t=this.ctx.transform.applyToPoint(new d(et,dt));this.path.push({type:"lt",x:_t.x,y:_t.y}),this.ctx.lastPoint=new d(_t.x,_t.y)},T.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),Bt.call(this,null,!0)},T.prototype.quadraticCurveTo=function(et,dt,_t,Ct){if(isNaN(_t)||isNaN(Ct)||isNaN(et)||isNaN(dt))throw Ti.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var Ot=this.ctx.transform.applyToPoint(new d(_t,Ct)),Rt=this.ctx.transform.applyToPoint(new d(et,dt));this.path.push({type:"qct",x1:Rt.x,y1:Rt.y,x:Ot.x,y:Ot.y}),this.ctx.lastPoint=new d(Ot.x,Ot.y)},T.prototype.bezierCurveTo=function(et,dt,_t,Ct,Ot,Rt){if(isNaN(Ot)||isNaN(Rt)||isNaN(et)||isNaN(dt)||isNaN(_t)||isNaN(Ct))throw Ti.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Zt=this.ctx.transform.applyToPoint(new d(Ot,Rt)),Jt=this.ctx.transform.applyToPoint(new d(et,dt)),xe=this.ctx.transform.applyToPoint(new d(_t,Ct));this.path.push({type:"bct",x1:Jt.x,y1:Jt.y,x2:xe.x,y2:xe.y,x:Zt.x,y:Zt.y}),this.ctx.lastPoint=new d(Zt.x,Zt.y)},T.prototype.arc=function(et,dt,_t,Ct,Ot,Rt){if(isNaN(et)||isNaN(dt)||isNaN(_t)||isNaN(Ct)||isNaN(Ot))throw Ti.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(Rt=!!Rt,!this.ctx.transform.isIdentity){var Zt=this.ctx.transform.applyToPoint(new d(et,dt));et=Zt.x,dt=Zt.y;var Jt=this.ctx.transform.applyToPoint(new d(0,_t)),xe=this.ctx.transform.applyToPoint(new d(0,0));_t=Math.sqrt(Math.pow(Jt.x-xe.x,2)+Math.pow(Jt.y-xe.y,2))}Math.abs(Ot-Ct)>=2*Math.PI&&(Ct=0,Ot=2*Math.PI),this.path.push({type:"arc",x:et,y:dt,radius:_t,startAngle:Ct,endAngle:Ot,counterclockwise:Rt})},T.prototype.arcTo=function(et,dt,_t,Ct,Ot){throw new Error("arcTo not implemented.")},T.prototype.rect=function(et,dt,_t,Ct){if(isNaN(et)||isNaN(dt)||isNaN(_t)||isNaN(Ct))throw Ti.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(et,dt),this.lineTo(et+_t,dt),this.lineTo(et+_t,dt+Ct),this.lineTo(et,dt+Ct),this.lineTo(et,dt),this.lineTo(et+_t,dt),this.lineTo(et,dt)},T.prototype.fillRect=function(et,dt,_t,Ct){if(isNaN(et)||isNaN(dt)||isNaN(_t)||isNaN(Ct))throw Ti.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!U.call(this)){var Ot={};this.lineCap!=="butt"&&(Ot.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(Ot.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(et,dt,_t,Ct),this.fill(),Ot.hasOwnProperty("lineCap")&&(this.lineCap=Ot.lineCap),Ot.hasOwnProperty("lineJoin")&&(this.lineJoin=Ot.lineJoin)}},T.prototype.strokeRect=function(et,dt,_t,Ct){if(isNaN(et)||isNaN(dt)||isNaN(_t)||isNaN(Ct))throw Ti.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");V.call(this)||(this.beginPath(),this.rect(et,dt,_t,Ct),this.stroke())},T.prototype.clearRect=function(et,dt,_t,Ct){if(isNaN(et)||isNaN(dt)||isNaN(_t)||isNaN(Ct))throw Ti.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(et,dt,_t,Ct))},T.prototype.save=function(et){et=typeof et!="boolean"||et;for(var dt=this.pdf.internal.getCurrentPageInfo().pageNumber,_t=0;_t<this.pdf.internal.getNumberOfPages();_t++)this.pdf.setPage(_t+1),this.pdf.internal.out("q");if(this.pdf.setPage(dt),et){this.ctx.fontSize=this.pdf.internal.getFontSize();var Ct=new I(this.ctx);this.ctxStack.push(this.ctx),this.ctx=Ct}},T.prototype.restore=function(et){et=typeof et!="boolean"||et;for(var dt=this.pdf.internal.getCurrentPageInfo().pageNumber,_t=0;_t<this.pdf.internal.getNumberOfPages();_t++)this.pdf.setPage(_t+1),this.pdf.internal.out("Q");this.pdf.setPage(dt),et&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},T.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var P=function(et){var dt,_t,Ct,Ot;if(et.isCanvasGradient===!0&&(et=et.getColor()),!et)return{r:0,g:0,b:0,a:0,style:et};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(et))dt=0,_t=0,Ct=0,Ot=0;else{var Rt=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(et);if(Rt!==null)dt=parseInt(Rt[1]),_t=parseInt(Rt[2]),Ct=parseInt(Rt[3]),Ot=1;else if((Rt=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(et))!==null)dt=parseInt(Rt[1]),_t=parseInt(Rt[2]),Ct=parseInt(Rt[3]),Ot=parseFloat(Rt[4]);else{if(Ot=1,typeof et=="string"&&et.charAt(0)!=="#"){var Zt=new uv(et);et=Zt.ok?Zt.toHex():"#000000"}et.length===4?(dt=et.substring(1,2),dt+=dt,_t=et.substring(2,3),_t+=_t,Ct=et.substring(3,4),Ct+=Ct):(dt=et.substring(1,3),_t=et.substring(3,5),Ct=et.substring(5,7)),dt=parseInt(dt,16),_t=parseInt(_t,16),Ct=parseInt(Ct,16)}}return{r:dt,g:_t,b:Ct,a:Ot,style:et}},U=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},V=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};T.prototype.fillText=function(et,dt,_t,Ct){if(isNaN(dt)||isNaN(_t)||typeof et!="string")throw Ti.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(Ct=isNaN(Ct)?void 0:Ct,!U.call(this)){var Ot=zt(this.ctx.transform.rotation),Rt=this.ctx.transform.scaleX;ut.call(this,{text:et,x:dt,y:_t,scale:Rt,angle:Ot,align:this.textAlign,maxWidth:Ct})}},T.prototype.strokeText=function(et,dt,_t,Ct){if(isNaN(dt)||isNaN(_t)||typeof et!="string")throw Ti.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!V.call(this)){Ct=isNaN(Ct)?void 0:Ct;var Ot=zt(this.ctx.transform.rotation),Rt=this.ctx.transform.scaleX;ut.call(this,{text:et,x:dt,y:_t,scale:Rt,renderingMode:"stroke",angle:Ot,align:this.textAlign,maxWidth:Ct})}},T.prototype.measureText=function(et){if(typeof et!="string")throw Ti.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var dt=this.pdf,_t=this.pdf.internal.scaleFactor,Ct=dt.internal.getFontSize(),Ot=dt.getStringUnitWidth(et)*Ct/dt.internal.scaleFactor,Rt=function(Zt){var Jt=(Zt=Zt||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Jt}}),this};return new Rt({width:Ot*=Math.round(96*_t/72*1e4)/1e4})},T.prototype.scale=function(et,dt){if(isNaN(et)||isNaN(dt))throw Ti.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var _t=new v(et,0,0,dt,0,0);this.ctx.transform=this.ctx.transform.multiply(_t)},T.prototype.rotate=function(et){if(isNaN(et))throw Ti.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var dt=new v(Math.cos(et),Math.sin(et),-Math.sin(et),Math.cos(et),0,0);this.ctx.transform=this.ctx.transform.multiply(dt)},T.prototype.translate=function(et,dt){if(isNaN(et)||isNaN(dt))throw Ti.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var _t=new v(1,0,0,1,et,dt);this.ctx.transform=this.ctx.transform.multiply(_t)},T.prototype.transform=function(et,dt,_t,Ct,Ot,Rt){if(isNaN(et)||isNaN(dt)||isNaN(_t)||isNaN(Ct)||isNaN(Ot)||isNaN(Rt))throw Ti.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Zt=new v(et,dt,_t,Ct,Ot,Rt);this.ctx.transform=this.ctx.transform.multiply(Zt)},T.prototype.setTransform=function(et,dt,_t,Ct,Ot,Rt){et=isNaN(et)?1:et,dt=isNaN(dt)?0:dt,_t=isNaN(_t)?0:_t,Ct=isNaN(Ct)?1:Ct,Ot=isNaN(Ot)?0:Ot,Rt=isNaN(Rt)?0:Rt,this.ctx.transform=new v(et,dt,_t,Ct,Ot,Rt)};var R=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};T.prototype.drawImage=function(et,dt,_t,Ct,Ot,Rt,Zt,Jt,xe){var we=this.pdf.getImageProperties(et),Te=1,Ee=1,Ve=1,ie=1;Ct!==void 0&&Jt!==void 0&&(Ve=Jt/Ct,ie=xe/Ot,Te=we.width/Ct*Jt/Ct,Ee=we.height/Ot*xe/Ot),Rt===void 0&&(Rt=dt,Zt=_t,dt=0,_t=0),Ct!==void 0&&Jt===void 0&&(Jt=Ct,xe=Ot),Ct===void 0&&Jt===void 0&&(Jt=we.width,xe=we.height);for(var rt,dr=this.ctx.transform.decompose(),je=zt(dr.rotate.shx),se=new v,fe=(se=(se=(se=se.multiply(dr.translate)).multiply(dr.skew)).multiply(dr.scale)).applyToRectangle(new A(Rt-dt*Ve,Zt-_t*ie,Ct*Te,Ot*Ee)),Ue=Z.call(this,fe),Se=[],Re=0;Re<Ue.length;Re+=1)Se.indexOf(Ue[Re])===-1&&Se.push(Ue[Re]);if(ht(Se),this.autoPaging)for(var We=Se[0],ar=Se[Se.length-1],wr=We;wr<ar+1;wr++){this.pdf.setPage(wr);var Fr=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],oe=wr===1?this.posY+this.margin[0]:this.margin[0],er=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],or=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Le=wr===1?0:er+(wr-2)*or;if(this.ctx.clip_path.length!==0){var Zr=this.path;rt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=tt(rt,this.posX+this.margin[3],-Le+oe+this.ctx.prevPageLastElemOffset),Lt.call(this,"fill",!0),this.path=Zr}var ce=JSON.parse(JSON.stringify(fe));ce=tt([ce],this.posX+this.margin[3],-Le+oe+this.ctx.prevPageLastElemOffset)[0];var ir=(wr>We||wr<ar)&&R.call(this);ir&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Fr,or,null).clip().discardPath()),this.pdf.addImage(et,"JPEG",ce.x,ce.y,ce.w,ce.h,null,null,je),ir&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(et,"JPEG",fe.x,fe.y,fe.w,fe.h,null,null,je)};var Z=function(et,dt,_t){var Ct=[];dt=dt||this.pdf.internal.pageSize.width,_t=_t||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var Ot=this.posY+this.ctx.prevPageLastElemOffset;switch(et.type){default:case"mt":case"lt":Ct.push(Math.floor((et.y+Ot)/_t)+1);break;case"arc":Ct.push(Math.floor((et.y+Ot-et.radius)/_t)+1),Ct.push(Math.floor((et.y+Ot+et.radius)/_t)+1);break;case"qct":var Rt=Wt(this.ctx.lastPoint.x,this.ctx.lastPoint.y,et.x1,et.y1,et.x,et.y);Ct.push(Math.floor((Rt.y+Ot)/_t)+1),Ct.push(Math.floor((Rt.y+Rt.h+Ot)/_t)+1);break;case"bct":var Zt=Yt(this.ctx.lastPoint.x,this.ctx.lastPoint.y,et.x1,et.y1,et.x2,et.y2,et.x,et.y);Ct.push(Math.floor((Zt.y+Ot)/_t)+1),Ct.push(Math.floor((Zt.y+Zt.h+Ot)/_t)+1);break;case"rect":Ct.push(Math.floor((et.y+Ot)/_t)+1),Ct.push(Math.floor((et.y+et.h+Ot)/_t)+1)}for(var Jt=0;Jt<Ct.length;Jt+=1)for(;this.pdf.internal.getNumberOfPages()<Ct[Jt];)K.call(this);return Ct},K=function(){var et=this.fillStyle,dt=this.strokeStyle,_t=this.font,Ct=this.lineCap,Ot=this.lineWidth,Rt=this.lineJoin;this.pdf.addPage(),this.fillStyle=et,this.strokeStyle=dt,this.font=_t,this.lineCap=Ct,this.lineWidth=Ot,this.lineJoin=Rt},tt=function(et,dt,_t){for(var Ct=0;Ct<et.length;Ct++)switch(et[Ct].type){case"bct":et[Ct].x2+=dt,et[Ct].y2+=_t;case"qct":et[Ct].x1+=dt,et[Ct].y1+=_t;case"mt":case"lt":case"arc":default:et[Ct].x+=dt,et[Ct].y+=_t}return et},ht=function(et){return et.sort(function(dt,_t){return dt-_t})},Bt=function(et,dt){for(var _t,Ct,Ot=this.fillStyle,Rt=this.strokeStyle,Zt=this.lineCap,Jt=this.lineWidth,xe=Math.abs(Jt*this.ctx.transform.scaleX),we=this.lineJoin,Te=JSON.parse(JSON.stringify(this.path)),Ee=JSON.parse(JSON.stringify(this.path)),Ve=[],ie=0;ie<Ee.length;ie++)if(Ee[ie].x!==void 0)for(var rt=Z.call(this,Ee[ie]),dr=0;dr<rt.length;dr+=1)Ve.indexOf(rt[dr])===-1&&Ve.push(rt[dr]);for(var je=0;je<Ve.length;je++)for(;this.pdf.internal.getNumberOfPages()<Ve[je];)K.call(this);if(ht(Ve),this.autoPaging)for(var se=Ve[0],fe=Ve[Ve.length-1],Ue=se;Ue<fe+1;Ue++){this.pdf.setPage(Ue),this.fillStyle=Ot,this.strokeStyle=Rt,this.lineCap=Zt,this.lineWidth=xe,this.lineJoin=we;var Se=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Re=Ue===1?this.posY+this.margin[0]:this.margin[0],We=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ar=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],wr=Ue===1?0:We+(Ue-2)*ar;if(this.ctx.clip_path.length!==0){var Fr=this.path;_t=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=tt(_t,this.posX+this.margin[3],-wr+Re+this.ctx.prevPageLastElemOffset),Lt.call(this,et,!0),this.path=Fr}if(Ct=JSON.parse(JSON.stringify(Te)),this.path=tt(Ct,this.posX+this.margin[3],-wr+Re+this.ctx.prevPageLastElemOffset),dt===!1||Ue===0){var oe=(Ue>se||Ue<fe)&&R.call(this);oe&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Se,ar,null).clip().discardPath()),Lt.call(this,et,dt),oe&&this.pdf.restoreGraphicsState()}this.lineWidth=Jt}else this.lineWidth=xe,Lt.call(this,et,dt),this.lineWidth=Jt;this.path=Te},Lt=function(et,dt){if((et!=="stroke"||dt||!V.call(this))&&(et==="stroke"||dt||!U.call(this))){for(var _t,Ct,Ot=[],Rt=this.path,Zt=0;Zt<Rt.length;Zt++){var Jt=Rt[Zt];switch(Jt.type){case"begin":Ot.push({begin:!0});break;case"close":Ot.push({close:!0});break;case"mt":Ot.push({start:Jt,deltas:[],abs:[]});break;case"lt":var xe=Ot.length;if(Rt[Zt-1]&&!isNaN(Rt[Zt-1].x)&&(_t=[Jt.x-Rt[Zt-1].x,Jt.y-Rt[Zt-1].y],xe>0)){for(;xe>=0;xe--)if(Ot[xe-1].close!==!0&&Ot[xe-1].begin!==!0){Ot[xe-1].deltas.push(_t),Ot[xe-1].abs.push(Jt);break}}break;case"bct":_t=[Jt.x1-Rt[Zt-1].x,Jt.y1-Rt[Zt-1].y,Jt.x2-Rt[Zt-1].x,Jt.y2-Rt[Zt-1].y,Jt.x-Rt[Zt-1].x,Jt.y-Rt[Zt-1].y],Ot[Ot.length-1].deltas.push(_t);break;case"qct":var we=Rt[Zt-1].x+2/3*(Jt.x1-Rt[Zt-1].x),Te=Rt[Zt-1].y+2/3*(Jt.y1-Rt[Zt-1].y),Ee=Jt.x+2/3*(Jt.x1-Jt.x),Ve=Jt.y+2/3*(Jt.y1-Jt.y),ie=Jt.x,rt=Jt.y;_t=[we-Rt[Zt-1].x,Te-Rt[Zt-1].y,Ee-Rt[Zt-1].x,Ve-Rt[Zt-1].y,ie-Rt[Zt-1].x,rt-Rt[Zt-1].y],Ot[Ot.length-1].deltas.push(_t);break;case"arc":Ot.push({deltas:[],abs:[],arc:!0}),Array.isArray(Ot[Ot.length-1].abs)&&Ot[Ot.length-1].abs.push(Jt)}}Ct=dt?null:et==="stroke"?"stroke":"fill";for(var dr=!1,je=0;je<Ot.length;je++)if(Ot[je].arc)for(var se=Ot[je].abs,fe=0;fe<se.length;fe++){var Ue=se[fe];Ue.type==="arc"?pt.call(this,Ue.x,Ue.y,Ue.radius,Ue.startAngle,Ue.endAngle,Ue.counterclockwise,void 0,dt,!dr):mt.call(this,Ue.x,Ue.y),dr=!0}else if(Ot[je].close===!0)this.pdf.internal.out("h"),dr=!1;else if(Ot[je].begin!==!0){var Se=Ot[je].start.x,Re=Ot[je].start.y;vt.call(this,Ot[je].deltas,Se,Re),dr=!0}Ct&&kt.call(this,Ct),dt&&Xt.call(this)}},Ut=function(et){var dt=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,_t=dt*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return et-_t;case"top":return et+dt-_t;case"hanging":return et+dt-2*_t;case"middle":return et+dt/2-_t;case"ideographic":return et;case"alphabetic":default:return et}},xt=function(et){return et+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};T.prototype.createLinearGradient=function(){var et=function(){};return et.colorStops=[],et.addColorStop=function(dt,_t){this.colorStops.push([dt,_t])},et.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},et.isCanvasGradient=!0,et},T.prototype.createPattern=function(){return this.createLinearGradient()},T.prototype.createRadialGradient=function(){return this.createLinearGradient()};var pt=function(et,dt,_t,Ct,Ot,Rt,Zt,Jt,xe){for(var we=Vt.call(this,_t,Ct,Ot,Rt),Te=0;Te<we.length;Te++){var Ee=we[Te];Te===0&&(xe?st.call(this,Ee.x1+et,Ee.y1+dt):mt.call(this,Ee.x1+et,Ee.y1+dt)),$t.call(this,et,dt,Ee.x2,Ee.y2,Ee.x3,Ee.y3,Ee.x4,Ee.y4)}Jt?Xt.call(this):kt.call(this,Zt)},kt=function(et){switch(et){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},Xt=function(){this.pdf.clip(),this.pdf.discardPath()},st=function(et,dt){this.pdf.internal.out(i(et)+" "+s(dt)+" m")},ut=function(et){var dt;switch(et.align){case"right":case"end":dt="right";break;case"center":dt="center";break;case"left":case"start":default:dt="left"}var _t=this.pdf.getTextDimensions(et.text),Ct=Ut.call(this,et.y),Ot=xt.call(this,Ct)-_t.h,Rt=this.ctx.transform.applyToPoint(new d(et.x,Ct)),Zt=this.ctx.transform.decompose(),Jt=new v;Jt=(Jt=(Jt=Jt.multiply(Zt.translate)).multiply(Zt.skew)).multiply(Zt.scale);for(var xe,we,Te,Ee=this.ctx.transform.applyToRectangle(new A(et.x,Ct,_t.w,_t.h)),Ve=Jt.applyToRectangle(new A(et.x,Ot,_t.w,_t.h)),ie=Z.call(this,Ve),rt=[],dr=0;dr<ie.length;dr+=1)rt.indexOf(ie[dr])===-1&&rt.push(ie[dr]);if(ht(rt),this.autoPaging)for(var je=rt[0],se=rt[rt.length-1],fe=je;fe<se+1;fe++){this.pdf.setPage(fe);var Ue=fe===1?this.posY+this.margin[0]:this.margin[0],Se=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Re=this.pdf.internal.pageSize.height-this.margin[2],We=Re-this.margin[0],ar=this.pdf.internal.pageSize.width-this.margin[1],wr=ar-this.margin[3],Fr=fe===1?0:Se+(fe-2)*We;if(this.ctx.clip_path.length!==0){var oe=this.path;xe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=tt(xe,this.posX+this.margin[3],-1*Fr+Ue),Lt.call(this,"fill",!0),this.path=oe}var er=tt([JSON.parse(JSON.stringify(Ve))],this.posX+this.margin[3],-Fr+Ue+this.ctx.prevPageLastElemOffset)[0];et.scale>=.01&&(we=this.pdf.internal.getFontSize(),this.pdf.setFontSize(we*et.scale),Te=this.lineWidth,this.lineWidth=Te*et.scale);var or=this.autoPaging!=="text";if(or||er.y+er.h<=Re){if(or||er.y>=Ue&&er.x<=ar){var Le=or?et.text:this.pdf.splitTextToSize(et.text,et.maxWidth||ar-er.x)[0],Zr=tt([JSON.parse(JSON.stringify(Ee))],this.posX+this.margin[3],-Fr+Ue+this.ctx.prevPageLastElemOffset)[0],ce=or&&(fe>je||fe<se)&&R.call(this);ce&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],wr,We,null).clip().discardPath()),this.pdf.text(Le,Zr.x,Zr.y,{angle:et.angle,align:dt,renderingMode:et.renderingMode}),ce&&this.pdf.restoreGraphicsState()}}else er.y<Re&&(this.ctx.prevPageLastElemOffset+=Re-er.y);et.scale>=.01&&(this.pdf.setFontSize(we),this.lineWidth=Te)}else et.scale>=.01&&(we=this.pdf.internal.getFontSize(),this.pdf.setFontSize(we*et.scale),Te=this.lineWidth,this.lineWidth=Te*et.scale),this.pdf.text(et.text,Rt.x+this.posX,Rt.y+this.posY,{angle:et.angle,align:dt,renderingMode:et.renderingMode,maxWidth:et.maxWidth}),et.scale>=.01&&(this.pdf.setFontSize(we),this.lineWidth=Te)},mt=function(et,dt,_t,Ct){_t=_t||0,Ct=Ct||0,this.pdf.internal.out(i(et+_t)+" "+s(dt+Ct)+" l")},vt=function(et,dt,_t){return this.pdf.lines(et,dt,_t,null,null)},$t=function(et,dt,_t,Ct,Ot,Rt,Zt,Jt){this.pdf.internal.out([e(c(_t+et)),e(h(Ct+dt)),e(c(Ot+et)),e(h(Rt+dt)),e(c(Zt+et)),e(h(Jt+dt)),"c"].join(" "))},Vt=function(et,dt,_t,Ct){for(var Ot=2*Math.PI,Rt=Math.PI/2;dt>_t;)dt-=Ot;var Zt=Math.abs(_t-dt);Zt<Ot&&Ct&&(Zt=Ot-Zt);for(var Jt=[],xe=Ct?-1:1,we=dt;Zt>1e-5;){var Te=we+xe*Math.min(Zt,Rt);Jt.push(jt.call(this,et,we,Te)),Zt-=Math.abs(Te-we),we=Te}return Jt},jt=function(et,dt,_t){var Ct=(_t-dt)/2,Ot=et*Math.cos(Ct),Rt=et*Math.sin(Ct),Zt=Ot,Jt=-Rt,xe=Zt*Zt+Jt*Jt,we=xe+Zt*Ot+Jt*Rt,Te=4/3*(Math.sqrt(2*xe*we)-we)/(Zt*Rt-Jt*Ot),Ee=Zt-Te*Jt,Ve=Jt+Te*Zt,ie=Ee,rt=-Ve,dr=Ct+dt,je=Math.cos(dr),se=Math.sin(dr);return{x1:et*Math.cos(dt),y1:et*Math.sin(dt),x2:Ee*je-Ve*se,y2:Ee*se+Ve*je,x3:ie*je-rt*se,y3:ie*se+rt*je,x4:et*Math.cos(_t),y4:et*Math.sin(_t)}},zt=function(et){return 180*et/Math.PI},Wt=function(et,dt,_t,Ct,Ot,Rt){var Zt=et+.5*(_t-et),Jt=dt+.5*(Ct-dt),xe=Ot+.5*(_t-Ot),we=Rt+.5*(Ct-Rt),Te=Math.min(et,Ot,Zt,xe),Ee=Math.max(et,Ot,Zt,xe),Ve=Math.min(dt,Rt,Jt,we),ie=Math.max(dt,Rt,Jt,we);return new A(Te,Ve,Ee-Te,ie-Ve)},Yt=function(et,dt,_t,Ct,Ot,Rt,Zt,Jt){var xe,we,Te,Ee,Ve,ie,rt,dr,je,se,fe,Ue,Se,Re,We=_t-et,ar=Ct-dt,wr=Ot-_t,Fr=Rt-Ct,oe=Zt-Ot,er=Jt-Rt;for(we=0;we<41;we++)je=(rt=(Te=et+(xe=we/40)*We)+xe*((Ve=_t+xe*wr)-Te))+xe*(Ve+xe*(Ot+xe*oe-Ve)-rt),se=(dr=(Ee=dt+xe*ar)+xe*((ie=Ct+xe*Fr)-Ee))+xe*(ie+xe*(Rt+xe*er-ie)-dr),we==0?(fe=je,Ue=se,Se=je,Re=se):(fe=Math.min(fe,je),Ue=Math.min(Ue,se),Se=Math.max(Se,je),Re=Math.max(Re,se));return new A(Math.round(fe),Math.round(Ue),Math.round(Se-fe),Math.round(Re-Ue))},me=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var et,dt,_t=(et=this.ctx.lineDash,dt=this.ctx.lineDashOffset,JSON.stringify({lineDash:et,lineDashOffset:dt}));this.prevLineDash!==_t&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=_t)}}})(Ur.API),function(n){var e=function(h){var d,A,v,C,I,T,P,U,V,R;for(A=[],v=0,C=(h+=d="\0\0\0\0".slice(h.length%4||4)).length;C>v;v+=4)(I=(h.charCodeAt(v)<<24)+(h.charCodeAt(v+1)<<16)+(h.charCodeAt(v+2)<<8)+h.charCodeAt(v+3))!==0?(T=(I=((I=((I=((I=(I-(R=I%85))/85)-(V=I%85))/85)-(U=I%85))/85)-(P=I%85))/85)%85,A.push(T+33,P+33,U+33,V+33,R+33)):A.push(122);return function(Z,K){for(var tt=K;tt>0;tt--)Z.pop()}(A,d.length),String.fromCharCode.apply(String,A)+"~>"},i=function(h){var d,A,v,C,I,T=String,P="length",U=255,V="charCodeAt",R="slice",Z="replace";for(h[R](-2),h=h[R](0,-2)[Z](/\s/g,"")[Z]("z","!!!!!"),v=[],C=0,I=(h+=d="uuuuu"[R](h[P]%5||5))[P];I>C;C+=5)A=52200625*(h[V](C)-33)+614125*(h[V](C+1)-33)+7225*(h[V](C+2)-33)+85*(h[V](C+3)-33)+(h[V](C+4)-33),v.push(U&A>>24,U&A>>16,U&A>>8,U&A);return function(K,tt){for(var ht=tt;ht>0;ht--)K.pop()}(v,d[P]),T.fromCharCode.apply(T,v)},s=function(h){var d=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((h=h.replace(/\s/g,"")).indexOf(">")!==-1&&(h=h.substr(0,h.indexOf(">"))),h.length%2&&(h+="0"),d.test(h)===!1)return"";for(var A="",v=0;v<h.length;v+=2)A+=String.fromCharCode("0x"+(h[v]+h[v+1]));return A},c=function(h){for(var d=new Uint8Array(h.length),A=h.length;A--;)d[A]=h.charCodeAt(A);return h=(d=Cg(d)).reduce(function(v,C){return v+String.fromCharCode(C)},"")};n.processDataByFilters=function(h,d){var A=0,v=h||"",C=[];for(typeof(d=d||[])=="string"&&(d=[d]),A=0;A<d.length;A+=1)switch(d[A]){case"ASCII85Decode":case"/ASCII85Decode":v=i(v),C.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":v=e(v),C.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":v=s(v),C.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":v=v.split("").map(function(I){return("0"+I.charCodeAt().toString(16)).slice(-2)}).join("")+">",C.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":v=c(v),C.push("/FlateDecode");break;default:throw new Error('The filter: "'+d[A]+'" is not implemented')}return{data:v,reverseChain:C.reverse().join(" ")}}}(Ur.API),function(n){n.loadFile=function(e,i,s){return function(c,h,d){h=h!==!1,d=typeof d=="function"?d:function(){};var A=void 0;try{A=function(v,C,I){var T=new XMLHttpRequest,P=0,U=function(V){var R=V.length,Z=[],K=String.fromCharCode;for(P=0;P<R;P+=1)Z.push(K(255&V.charCodeAt(P)));return Z.join("")};if(T.open("GET",v,!C),T.overrideMimeType("text/plain; charset=x-user-defined"),C===!1&&(T.onload=function(){T.status===200?I(U(this.responseText)):I(void 0)}),T.send(null),C&&T.status===200)return U(T.responseText)}(c,h,d)}catch{}return A}(e,i,s)},n.loadImageFile=n.loadFile}(Ur.API),function(n){function e(){return(Tr.html2canvas?Promise.resolve(Tr.html2canvas):Promise.resolve().then(()=>YT)).catch(function(d){return Promise.reject(new Error("Could not load html2canvas: "+d))}).then(function(d){return d.default?d.default:d})}function i(){return(Tr.DOMPurify?Promise.resolve(Tr.DOMPurify):Promise.resolve().then(()=>IU)).catch(function(d){return Promise.reject(new Error("Could not load dompurify: "+d))}).then(function(d){return d.default?d.default:d})}var s=function(d){var A=Ai(d);return A==="undefined"?"undefined":A==="string"||d instanceof String?"string":A==="number"||d instanceof Number?"number":A==="function"||d instanceof Function?"function":d&&d.constructor===Array?"array":d&&d.nodeType===1?"element":A==="object"?"object":"unknown"},c=function(d,A){var v=document.createElement(d);for(var C in A.className&&(v.className=A.className),A.innerHTML&&A.dompurify&&(v.innerHTML=A.dompurify.sanitize(A.innerHTML)),A.style)v.style[C]=A.style[C];return v},h=function d(A){var v=Object.assign(d.convert(Promise.resolve()),JSON.parse(JSON.stringify(d.template))),C=d.convert(Promise.resolve(),v);return C=(C=C.setProgress(1,d,1,[d])).set(A)};(h.prototype=Object.create(Promise.prototype)).constructor=h,h.convert=function(d,A){return d.__proto__=A||h.prototype,d},h.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},h.prototype.from=function(d,A){return this.then(function(){switch(A=A||function(v){switch(s(v)){case"string":return"string";case"element":return v.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(d)){case"string":return this.then(i).then(function(v){return this.set({src:c("div",{innerHTML:d,dompurify:v})})});case"element":return this.set({src:d});case"canvas":return this.set({canvas:d});case"img":return this.set({img:d});default:return this.error("Unknown source type.")}})},h.prototype.to=function(d){switch(d){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},h.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var d={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},A=function v(C,I){for(var T=C.nodeType===3?document.createTextNode(C.nodeValue):C.cloneNode(!1),P=C.firstChild;P;P=P.nextSibling)I!==!0&&P.nodeType===1&&P.nodeName==="SCRIPT"||T.appendChild(v(P,I));return C.nodeType===1&&(C.nodeName==="CANVAS"?(T.width=C.width,T.height=C.height,T.getContext("2d").drawImage(C,0,0)):C.nodeName!=="TEXTAREA"&&C.nodeName!=="SELECT"||(T.value=C.value),T.addEventListener("load",function(){T.scrollTop=C.scrollTop,T.scrollLeft=C.scrollLeft},!0)),T}(this.prop.src,this.opt.html2canvas.javascriptEnabled);A.tagName==="BODY"&&(d.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=c("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=c("div",{className:"html2pdf__container",style:d}),this.prop.container.appendChild(A),this.prop.container.firstChild.appendChild(c("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},h.prototype.toCanvas=function(){var d=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(d).then(e).then(function(A){var v=Object.assign({},this.opt.html2canvas);return delete v.onrendered,A(this.prop.container,v)}).then(function(A){(this.opt.html2canvas.onrendered||function(){})(A),this.prop.canvas=A,document.body.removeChild(this.prop.overlay)})},h.prototype.toContext2d=function(){var d=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(d).then(e).then(function(A){var v=this.opt.jsPDF,C=this.opt.fontFaces,I=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,T=Object.assign({async:!0,allowTaint:!0,scale:I,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete T.onrendered,v.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,v.context2d.posX=this.opt.x,v.context2d.posY=this.opt.y,v.context2d.margin=this.opt.margin,v.context2d.fontFaces=C,C)for(var P=0;P<C.length;++P){var U=C[P],V=U.src.find(function(R){return R.format==="truetype"});V&&v.addFont(V.url,U.ref.name,U.ref.style)}return T.windowHeight=T.windowHeight||0,T.windowHeight=T.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):T.windowHeight,v.context2d.save(!0),A(this.prop.container,T)}).then(function(A){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(A),this.prop.canvas=A,document.body.removeChild(this.prop.overlay)})},h.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var d=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=d})},h.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},h.prototype.output=function(d,A,v){return(v=v||"pdf").toLowerCase()==="img"||v.toLowerCase()==="image"?this.outputImg(d,A):this.outputPdf(d,A)},h.prototype.outputPdf=function(d,A){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(d,A)})},h.prototype.outputImg=function(d){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(d){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+d+'" is not supported.'}})},h.prototype.save=function(d){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(d?{filename:d}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},h.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},h.prototype.set=function(d){if(s(d)!=="object")return this;var A=Object.keys(d||{}).map(function(v){if(v in h.template.prop)return function(){this.prop[v]=d[v]};switch(v){case"margin":return this.setMargin.bind(this,d.margin);case"jsPDF":return function(){return this.opt.jsPDF=d.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,d.pageSize);default:return function(){this.opt[v]=d[v]}}},this);return this.then(function(){return this.thenList(A)})},h.prototype.get=function(d,A){return this.then(function(){var v=d in h.template.prop?this.prop[d]:this.opt[d];return A?A(v):v})},h.prototype.setMargin=function(d){return this.then(function(){switch(s(d)){case"number":d=[d,d,d,d];case"array":if(d.length===2&&(d=[d[0],d[1],d[0],d[1]]),d.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=d}).then(this.setPageSize)},h.prototype.setPageSize=function(d){function A(v,C){return Math.floor(v*C/72*96)}return this.then(function(){(d=d||Ur.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(d.inner={width:d.width-this.opt.margin[1]-this.opt.margin[3],height:d.height-this.opt.margin[0]-this.opt.margin[2]},d.inner.px={width:A(d.inner.width,d.k),height:A(d.inner.height,d.k)},d.inner.ratio=d.inner.height/d.inner.width),this.prop.pageSize=d})},h.prototype.setProgress=function(d,A,v,C){return d!=null&&(this.progress.val=d),A!=null&&(this.progress.state=A),v!=null&&(this.progress.n=v),C!=null&&(this.progress.stack=C),this.progress.ratio=this.progress.val/this.progress.state,this},h.prototype.updateProgress=function(d,A,v,C){return this.setProgress(d?this.progress.val+d:null,A||null,v?this.progress.n+v:null,C?this.progress.stack.concat(C):null)},h.prototype.then=function(d,A){var v=this;return this.thenCore(d,A,function(C,I){return v.updateProgress(null,null,1,[C]),Promise.prototype.then.call(this,function(T){return v.updateProgress(null,C),T}).then(C,I).then(function(T){return v.updateProgress(1),T})})},h.prototype.thenCore=function(d,A,v){v=v||Promise.prototype.then,d&&(d=d.bind(this)),A&&(A=A.bind(this));var C=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:h.convert(Object.assign({},this),Promise.prototype),I=v.call(C,d,A);return h.convert(I,this.__proto__)},h.prototype.thenExternal=function(d,A){return Promise.prototype.then.call(this,d,A)},h.prototype.thenList=function(d){var A=this;return d.forEach(function(v){A=A.thenCore(v)}),A},h.prototype.catch=function(d){d&&(d=d.bind(this));var A=Promise.prototype.catch.call(this,d);return h.convert(A,this)},h.prototype.catchExternal=function(d){return Promise.prototype.catch.call(this,d)},h.prototype.error=function(d){return this.then(function(){throw new Error(d)})},h.prototype.using=h.prototype.set,h.prototype.saveAs=h.prototype.save,h.prototype.export=h.prototype.output,h.prototype.run=h.prototype.then,Ur.getPageSize=function(d,A,v){if(Ai(d)==="object"){var C=d;d=C.orientation,A=C.unit||A,v=C.format||v}A=A||"mm",v=v||"a4",d=(""+(d||"P")).toLowerCase();var I,T=(""+v).toLowerCase(),P={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(A){case"pt":I=1;break;case"mm":I=72/25.4;break;case"cm":I=72/2.54;break;case"in":I=72;break;case"px":I=.75;break;case"pc":case"em":I=12;break;case"ex":I=6;break;default:throw"Invalid unit: "+A}var U,V=0,R=0;if(P.hasOwnProperty(T))V=P[T][1]/I,R=P[T][0]/I;else try{V=v[1],R=v[0]}catch{throw new Error("Invalid format: "+v)}if(d==="p"||d==="portrait")d="p",R>V&&(U=R,R=V,V=U);else{if(d!=="l"&&d!=="landscape")throw"Invalid orientation: "+d;d="l",V>R&&(U=R,R=V,V=U)}return{width:R,height:V,unit:A,k:I,orientation:d}},n.html=function(d,A){(A=A||{}).callback=A.callback||function(){},A.html2canvas=A.html2canvas||{},A.html2canvas.canvas=A.html2canvas.canvas||this.canvas,A.jsPDF=A.jsPDF||this,A.fontFaces=A.fontFaces?A.fontFaces.map(Mg):null;var v=new h(A);return A.worker?v:v.from(d).doCallback()}}(Ur.API),Ur.API.addJS=function(n){return Tv=n,this.internal.events.subscribe("postPutResources",function(){Yd=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Yd+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),Ev=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Tv+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Yd!==void 0&&Ev!==void 0&&this.internal.out("/Names <</JavaScript "+Yd+" 0 R>>")}),this},function(n){var e;n.events.push(["postPutResources",function(){var i=this,s=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var c=i.outline.render().split(/\r\n/),h=0;h<c.length;h++){var d=c[h],A=s.exec(d);if(A!=null){var v=A[1];i.internal.newObjectDeferredBegin(v,!1)}i.internal.write(d)}if(this.outline.createNamedDestinations){var C=this.internal.pages.length,I=[];for(h=0;h<C;h++){var T=i.internal.newObject();I.push(T);var P=i.internal.getPageInfo(h+1);i.internal.write("<< /D["+P.objId+" 0 R /XYZ null null null]>> endobj")}var U=i.internal.newObject();for(i.internal.write("<< /Names [ "),h=0;h<I.length;h++)i.internal.write("(page_"+(h+1)+")"+I[h]+" 0 R");i.internal.write(" ] >>","endobj"),e=i.internal.newObject(),i.internal.write("<< /Dests "+U+" 0 R"),i.internal.write(">>","endobj")}}]),n.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),n.events.push(["initialized",function(){var i=this;i.outline={createNamedDestinations:!1,root:{children:[]}},i.outline.add=function(s,c,h){var d={title:c,options:h,children:[]};return s==null&&(s=this.root),s.children.push(d),d},i.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=i,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},i.outline.genIds_r=function(s){s.id=i.internal.newObjectDeferred();for(var c=0;c<s.children.length;c++)this.genIds_r(s.children[c])},i.outline.renderRoot=function(s){this.objStart(s),this.line("/Type /Outlines"),s.children.length>0&&(this.line("/First "+this.makeRef(s.children[0])),this.line("/Last "+this.makeRef(s.children[s.children.length-1]))),this.line("/Count "+this.count_r({count:0},s)),this.objEnd()},i.outline.renderItems=function(s){for(var c=this.ctx.pdf.internal.getVerticalCoordinateString,h=0;h<s.children.length;h++){var d=s.children[h];this.objStart(d),this.line("/Title "+this.makeString(d.title)),this.line("/Parent "+this.makeRef(s)),h>0&&this.line("/Prev "+this.makeRef(s.children[h-1])),h<s.children.length-1&&this.line("/Next "+this.makeRef(s.children[h+1])),d.children.length>0&&(this.line("/First "+this.makeRef(d.children[0])),this.line("/Last "+this.makeRef(d.children[d.children.length-1])));var A=this.count=this.count_r({count:0},d);if(A>0&&this.line("/Count "+A),d.options&&d.options.pageNumber){var v=i.internal.getPageInfo(d.options.pageNumber);this.line("/Dest ["+v.objId+" 0 R /XYZ 0 "+c(0)+" 0]")}this.objEnd()}for(var C=0;C<s.children.length;C++)this.renderItems(s.children[C])},i.outline.line=function(s){this.ctx.val+=s+`\r
`},i.outline.makeRef=function(s){return s.id+" 0 R"},i.outline.makeString=function(s){return"("+i.internal.pdfEscape(s)+")"},i.outline.objStart=function(s){this.ctx.val+=`\r
`+s.id+` 0 obj\r
<<\r
`},i.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},i.outline.count_r=function(s,c){for(var h=0;h<c.children.length;h++)s.count++,this.count_r(s,c.children[h]);return s.count}}])}(Ur.API),function(n){var e=[192,193,194,195,196,197,198,199];n.processJPEG=function(i,s,c,h,d,A){var v,C=this.decode.DCT_DECODE,I=null;if(typeof i=="string"||this.__addimage__.isArrayBuffer(i)||this.__addimage__.isArrayBufferView(i)){switch(i=d||i,i=this.__addimage__.isArrayBuffer(i)?new Uint8Array(i):i,(v=function(T){for(var P,U=256*T.charCodeAt(4)+T.charCodeAt(5),V=T.length,R={width:0,height:0,numcomponents:1},Z=4;Z<V;Z+=2){if(Z+=U,e.indexOf(T.charCodeAt(Z+1))!==-1){P=256*T.charCodeAt(Z+5)+T.charCodeAt(Z+6),R={width:256*T.charCodeAt(Z+7)+T.charCodeAt(Z+8),height:P,numcomponents:T.charCodeAt(Z+9)};break}U=256*T.charCodeAt(Z+2)+T.charCodeAt(Z+3)}return R}(i=this.__addimage__.isArrayBufferView(i)?this.__addimage__.arrayBufferToBinaryString(i):i)).numcomponents){case 1:A=this.color_spaces.DEVICE_GRAY;break;case 4:A=this.color_spaces.DEVICE_CMYK;break;case 3:A=this.color_spaces.DEVICE_RGB}I={data:i,width:v.width,height:v.height,colorSpace:A,bitsPerComponent:8,filter:C,index:s,alias:c}}return I}}(Ur.API);var gu,Jd,Lv,Pv,Qv,a3=function(){var n,e,i;function s(h){var d,A,v,C,I,T,P,U,V,R,Z,K,tt,ht;for(this.data=h,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},T=null;;){switch(d=this.readUInt32(),V=(function(){var Bt,Lt;for(Lt=[],Bt=0;Bt<4;++Bt)Lt.push(String.fromCharCode(this.data[this.pos++]));return Lt}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(d);break;case"fcTL":T&&this.animation.frames.push(T),this.pos+=4,T={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},I=this.readUInt16(),C=this.readUInt16()||100,T.delay=1e3*I/C,T.disposeOp=this.data[this.pos++],T.blendOp=this.data[this.pos++],T.data=[];break;case"IDAT":case"fdAT":for(V==="fdAT"&&(this.pos+=4,d-=4),h=(T!=null?T.data:void 0)||this.imgData,K=0;0<=d?K<d:K>d;0<=d?++K:--K)h.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(v=this.palette.length/3,this.transparency.indexed=this.read(d),this.transparency.indexed.length>v)throw new Error("More transparent colors than palette size");if((R=v-this.transparency.indexed.length)>0)for(tt=0;0<=R?tt<R:tt>R;0<=R?++tt:--tt)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(d)[0];break;case 2:this.transparency.rgb=this.read(d)}break;case"tEXt":P=(Z=this.read(d)).indexOf(0),U=String.fromCharCode.apply(String,Z.slice(0,P)),this.text[U]=String.fromCharCode.apply(String,Z.slice(P+1));break;case"IEND":return T&&this.animation.frames.push(T),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(ht=this.colorType)===4||ht===6,A=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*A,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=d}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}s.prototype.read=function(h){var d,A;for(A=[],d=0;0<=h?d<h:d>h;0<=h?++d:--d)A.push(this.data[this.pos++]);return A},s.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},s.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},s.prototype.decodePixels=function(h){var d=this.pixelBitlength/8,A=new Uint8Array(this.width*this.height*d),v=0,C=this;if(h==null&&(h=this.imgData),h.length===0)return new Uint8Array(0);function I(T,P,U,V){var R,Z,K,tt,ht,Bt,Lt,Ut,xt,pt,kt,Xt,st,ut,mt,vt,$t,Vt,jt,zt,Wt,Yt=Math.ceil((C.width-T)/U),me=Math.ceil((C.height-P)/V),et=C.width==Yt&&C.height==me;for(ut=d*Yt,Xt=et?A:new Uint8Array(ut*me),Bt=h.length,st=0,Z=0;st<me&&v<Bt;){switch(h[v++]){case 0:for(tt=$t=0;$t<ut;tt=$t+=1)Xt[Z++]=h[v++];break;case 1:for(tt=Vt=0;Vt<ut;tt=Vt+=1)R=h[v++],ht=tt<d?0:Xt[Z-d],Xt[Z++]=(R+ht)%256;break;case 2:for(tt=jt=0;jt<ut;tt=jt+=1)R=h[v++],K=(tt-tt%d)/d,mt=st&&Xt[(st-1)*ut+K*d+tt%d],Xt[Z++]=(mt+R)%256;break;case 3:for(tt=zt=0;zt<ut;tt=zt+=1)R=h[v++],K=(tt-tt%d)/d,ht=tt<d?0:Xt[Z-d],mt=st&&Xt[(st-1)*ut+K*d+tt%d],Xt[Z++]=(R+Math.floor((ht+mt)/2))%256;break;case 4:for(tt=Wt=0;Wt<ut;tt=Wt+=1)R=h[v++],K=(tt-tt%d)/d,ht=tt<d?0:Xt[Z-d],st===0?mt=vt=0:(mt=Xt[(st-1)*ut+K*d+tt%d],vt=K&&Xt[(st-1)*ut+(K-1)*d+tt%d]),Lt=ht+mt-vt,Ut=Math.abs(Lt-ht),pt=Math.abs(Lt-mt),kt=Math.abs(Lt-vt),xt=Ut<=pt&&Ut<=kt?ht:pt<=kt?mt:vt,Xt[Z++]=(R+xt)%256;break;default:throw new Error("Invalid filter algorithm: "+h[v-1])}if(!et){var dt=((P+st*V)*C.width+T)*d,_t=st*ut;for(tt=0;tt<Yt;tt+=1){for(var Ct=0;Ct<d;Ct+=1)A[dt++]=Xt[_t++];dt+=(U-1)*d}}st++}}return h=N4(h),C.interlaceMethod==1?(I(0,0,8,8),I(4,0,8,8),I(0,4,4,8),I(2,0,4,4),I(0,2,2,4),I(1,0,2,2),I(0,1,1,2)):I(0,0,1,1),A},s.prototype.decodePalette=function(){var h,d,A,v,C,I,T,P,U;for(A=this.palette,I=this.transparency.indexed||[],C=new Uint8Array((I.length||0)+A.length),v=0,h=0,d=T=0,P=A.length;T<P;d=T+=3)C[v++]=A[d],C[v++]=A[d+1],C[v++]=A[d+2],C[v++]=(U=I[h++])!=null?U:255;return C},s.prototype.copyToImageData=function(h,d){var A,v,C,I,T,P,U,V,R,Z,K;if(v=this.colors,R=null,A=this.hasAlphaChannel,this.palette.length&&(R=(K=this._decodedPalette)!=null?K:this._decodedPalette=this.decodePalette(),v=4,A=!0),V=(C=h.data||h).length,T=R||d,I=P=0,v===1)for(;I<V;)U=R?4*d[I/4]:P,Z=T[U++],C[I++]=Z,C[I++]=Z,C[I++]=Z,C[I++]=A?T[U++]:255,P=U;else for(;I<V;)U=R?4*d[I/4]:P,C[I++]=T[U++],C[I++]=T[U++],C[I++]=T[U++],C[I++]=A?T[U++]:255,P=U},s.prototype.decode=function(){var h;return h=new Uint8Array(this.width*this.height*4),this.copyToImageData(h,this.decodePixels()),h};var c=function(){if(Object.prototype.toString.call(Tr)==="[object Window]"){try{e=Tr.document.createElement("canvas"),i=e.getContext("2d")}catch{return!1}return!0}return!1};return c(),n=function(h){var d;if(c()===!0)return i.width=h.width,i.height=h.height,i.clearRect(0,0,h.width,h.height),i.putImageData(h,0,0),(d=new Image).src=e.toDataURL(),d;throw new Error("This method requires a Browser with Canvas-capability.")},s.prototype.decodeFrames=function(h){var d,A,v,C,I,T,P,U;if(this.animation){for(U=[],A=I=0,T=(P=this.animation.frames).length;I<T;A=++I)d=P[A],v=h.createImageData(d.width,d.height),C=this.decodePixels(new Uint8Array(d.data)),this.copyToImageData(v,C),d.imageData=v,U.push(d.image=n(v));return U}},s.prototype.renderFrame=function(h,d){var A,v,C;return A=(v=this.animation.frames)[d],C=v[d-1],d===0&&h.clearRect(0,0,this.width,this.height),(C!=null?C.disposeOp:void 0)===1?h.clearRect(C.xOffset,C.yOffset,C.width,C.height):(C!=null?C.disposeOp:void 0)===2&&h.putImageData(C.imageData,C.xOffset,C.yOffset),A.blendOp===0&&h.clearRect(A.xOffset,A.yOffset,A.width,A.height),h.drawImage(A.image,A.xOffset,A.yOffset)},s.prototype.animate=function(h){var d,A,v,C,I,T,P=this;return A=0,T=this.animation,C=T.numFrames,v=T.frames,I=T.numPlays,(d=function(){var U,V;if(U=A++%C,V=v[U],P.renderFrame(h,U),C>1&&A/C<I)return P.animation._timeout=setTimeout(d,V.delay)})()},s.prototype.stopAnimation=function(){var h;return clearTimeout((h=this.animation)!=null?h._timeout:void 0)},s.prototype.render=function(h){var d,A;return h._png&&h._png.stopAnimation(),h._png=this,h.width=this.width,h.height=this.height,d=h.getContext("2d"),this.animation?(this.decodeFrames(d),this.animate(d)):(A=d.createImageData(this.width,this.height),this.copyToImageData(A,this.decodePixels()),d.putImageData(A,0,0))},s}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function o3(n){var e=0;if(n[e++]!==71||n[e++]!==73||n[e++]!==70||n[e++]!==56||(n[e++]+1&253)!=56||n[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var i=n[e++]|n[e++]<<8,s=n[e++]|n[e++]<<8,c=n[e++],h=c>>7,d=1<<(7&c)+1;n[e++],n[e++];var A=null,v=null;h&&(A=e,v=d,e+=3*d);var C=!0,I=[],T=0,P=null,U=0,V=null;for(this.width=i,this.height=s;C&&e<n.length;)switch(n[e++]){case 33:switch(n[e++]){case 255:if(n[e]!==11||n[e+1]==78&&n[e+2]==69&&n[e+3]==84&&n[e+4]==83&&n[e+5]==67&&n[e+6]==65&&n[e+7]==80&&n[e+8]==69&&n[e+9]==50&&n[e+10]==46&&n[e+11]==48&&n[e+12]==3&&n[e+13]==1&&n[e+16]==0)e+=14,V=n[e++]|n[e++]<<8,e++;else for(e+=12;;){if(!((st=n[e++])>=0))throw Error("Invalid block size");if(st===0)break;e+=st}break;case 249:if(n[e++]!==4||n[e+4]!==0)throw new Error("Invalid graphics extension block.");var R=n[e++];T=n[e++]|n[e++]<<8,P=n[e++],!(1&R)&&(P=null),U=R>>2&7,e++;break;case 254:for(;;){if(!((st=n[e++])>=0))throw Error("Invalid block size");if(st===0)break;e+=st}break;default:throw new Error("Unknown graphic control label: 0x"+n[e-1].toString(16))}break;case 44:var Z=n[e++]|n[e++]<<8,K=n[e++]|n[e++]<<8,tt=n[e++]|n[e++]<<8,ht=n[e++]|n[e++]<<8,Bt=n[e++],Lt=Bt>>6&1,Ut=1<<(7&Bt)+1,xt=A,pt=v,kt=!1;Bt>>7&&(kt=!0,xt=e,pt=Ut,e+=3*Ut);var Xt=e;for(e++;;){var st;if(!((st=n[e++])>=0))throw Error("Invalid block size");if(st===0)break;e+=st}I.push({x:Z,y:K,width:tt,height:ht,has_local_palette:kt,palette_offset:xt,palette_size:pt,data_offset:Xt,data_length:e-Xt,transparent_index:P,interlaced:!!Lt,delay:T,disposal:U});break;case 59:C=!1;break;default:throw new Error("Unknown gif block: 0x"+n[e-1].toString(16))}this.numFrames=function(){return I.length},this.loopCount=function(){return V},this.frameInfo=function(ut){if(ut<0||ut>=I.length)throw new Error("Frame index out of range.");return I[ut]},this.decodeAndBlitFrameBGRA=function(ut,mt){var vt=this.frameInfo(ut),$t=vt.width*vt.height,Vt=new Uint8Array($t);kv(n,vt.data_offset,Vt,$t);var jt=vt.palette_offset,zt=vt.transparent_index;zt===null&&(zt=256);var Wt=vt.width,Yt=i-Wt,me=Wt,et=4*(vt.y*i+vt.x),dt=4*((vt.y+vt.height)*i+vt.x),_t=et,Ct=4*Yt;vt.interlaced===!0&&(Ct+=4*i*7);for(var Ot=8,Rt=0,Zt=Vt.length;Rt<Zt;++Rt){var Jt=Vt[Rt];if(me===0&&(me=Wt,(_t+=Ct)>=dt&&(Ct=4*Yt+4*i*(Ot-1),_t=et+(Wt+Yt)*(Ot<<1),Ot>>=1)),Jt===zt)_t+=4;else{var xe=n[jt+3*Jt],we=n[jt+3*Jt+1],Te=n[jt+3*Jt+2];mt[_t++]=Te,mt[_t++]=we,mt[_t++]=xe,mt[_t++]=255}--me}},this.decodeAndBlitFrameRGBA=function(ut,mt){var vt=this.frameInfo(ut),$t=vt.width*vt.height,Vt=new Uint8Array($t);kv(n,vt.data_offset,Vt,$t);var jt=vt.palette_offset,zt=vt.transparent_index;zt===null&&(zt=256);var Wt=vt.width,Yt=i-Wt,me=Wt,et=4*(vt.y*i+vt.x),dt=4*((vt.y+vt.height)*i+vt.x),_t=et,Ct=4*Yt;vt.interlaced===!0&&(Ct+=4*i*7);for(var Ot=8,Rt=0,Zt=Vt.length;Rt<Zt;++Rt){var Jt=Vt[Rt];if(me===0&&(me=Wt,(_t+=Ct)>=dt&&(Ct=4*Yt+4*i*(Ot-1),_t=et+(Wt+Yt)*(Ot<<1),Ot>>=1)),Jt===zt)_t+=4;else{var xe=n[jt+3*Jt],we=n[jt+3*Jt+1],Te=n[jt+3*Jt+2];mt[_t++]=xe,mt[_t++]=we,mt[_t++]=Te,mt[_t++]=255}--me}}}function kv(n,e,i,s){for(var c=n[e++],h=1<<c,d=h+1,A=d+1,v=c+1,C=(1<<v)-1,I=0,T=0,P=0,U=n[e++],V=new Int32Array(4096),R=null;;){for(;I<16&&U!==0;)T|=n[e++]<<I,I+=8,U===1?U=n[e++]:--U;if(I<v)break;var Z=T&C;if(T>>=v,I-=v,Z!==h){if(Z===d)break;for(var K=Z<A?Z:R,tt=0,ht=K;ht>h;)ht=V[ht]>>8,++tt;var Bt=ht;if(P+tt+(K!==Z?1:0)>s)return void Ti.log("Warning, gif stream longer than expected.");i[P++]=Bt;var Lt=P+=tt;for(K!==Z&&(i[P++]=Bt),ht=K;tt--;)ht=V[ht],i[--Lt]=255&ht,ht>>=8;R!==null&&A<4096&&(V[A++]=R<<8|Bt,A>=C+1&&v<12&&(++v,C=C<<1|1)),R=Z}else A=d+1,C=(1<<(v=c+1))-1,R=null}return P!==s&&Ti.log("Warning, gif stream shorter than expected."),i}/**
	 * @license
	  Copyright (c) 2008, Adobe Systems Incorporated
	  All rights reserved.

	  Redistribution and use in source and binary forms, with or without 
	  modification, are permitted provided that the following conditions are
	  met:

	  * Redistributions of source code must retain the above copyright notice, 
	    this list of conditions and the following disclaimer.
	  
	  * Redistributions in binary form must reproduce the above copyright
	    notice, this list of conditions and the following disclaimer in the 
	    documentation and/or other materials provided with the distribution.
	  
	  * Neither the name of Adobe Systems Incorporated nor the names of its 
	    contributors may be used to endorse or promote products derived from 
	    this software without specific prior written permission.

	  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
	  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
	  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
	  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
	  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
	  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
	  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
	  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
	  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
	  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
	  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
	*/function Dg(n){var e,i,s,c,h,d=Math.floor,A=new Array(64),v=new Array(64),C=new Array(64),I=new Array(64),T=new Array(65535),P=new Array(65535),U=new Array(64),V=new Array(64),R=[],Z=0,K=7,tt=new Array(64),ht=new Array(64),Bt=new Array(64),Lt=new Array(256),Ut=new Array(2048),xt=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],pt=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],kt=[0,1,2,3,4,5,6,7,8,9,10,11],Xt=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],st=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],ut=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],mt=[0,1,2,3,4,5,6,7,8,9,10,11],vt=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],$t=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Vt(et,dt){for(var _t=0,Ct=0,Ot=new Array,Rt=1;Rt<=16;Rt++){for(var Zt=1;Zt<=et[Rt];Zt++)Ot[dt[Ct]]=[],Ot[dt[Ct]][0]=_t,Ot[dt[Ct]][1]=Rt,Ct++,_t++;_t*=2}return Ot}function jt(et){for(var dt=et[0],_t=et[1]-1;_t>=0;)dt&1<<_t&&(Z|=1<<K),_t--,--K<0&&(Z==255?(zt(255),zt(0)):zt(Z),K=7,Z=0)}function zt(et){R.push(et)}function Wt(et){zt(et>>8&255),zt(255&et)}function Yt(et,dt,_t,Ct,Ot){for(var Rt,Zt=Ot[0],Jt=Ot[240],xe=function(se,fe){var Ue,Se,Re,We,ar,wr,Fr,oe,er,or,Le=0;for(er=0;er<8;++er){Ue=se[Le],Se=se[Le+1],Re=se[Le+2],We=se[Le+3],ar=se[Le+4],wr=se[Le+5],Fr=se[Le+6];var Zr=Ue+(oe=se[Le+7]),ce=Ue-oe,ir=Se+Fr,Pe=Se-Fr,_r=Re+wr,ni=Re-wr,Qe=We+ar,mi=We-ar,Kr=Zr+Qe,si=Zr-Qe,Xr=ir+_r,yt=ir-_r;se[Le]=Kr+Xr,se[Le+4]=Kr-Xr;var $=.707106781*(yt+si);se[Le+2]=si+$,se[Le+6]=si-$;var X=.382683433*((Kr=mi+ni)-(yt=Pe+ce)),at=.5411961*Kr+X,ft=1.306562965*yt+X,Qt=.707106781*(Xr=ni+Pe),Nt=ce+Qt,Pt=ce-Qt;se[Le+5]=Pt+at,se[Le+3]=Pt-at,se[Le+1]=Nt+ft,se[Le+7]=Nt-ft,Le+=8}for(Le=0,er=0;er<8;++er){Ue=se[Le],Se=se[Le+8],Re=se[Le+16],We=se[Le+24],ar=se[Le+32],wr=se[Le+40],Fr=se[Le+48];var Et=Ue+(oe=se[Le+56]),te=Ue-oe,ae=Se+Fr,Gt=Se-Fr,ue=Re+wr,Me=Re-wr,Xe=We+ar,Sr=We-ar,nr=Et+Xe,br=Et-Xe,Ar=ae+ue,Yr=ae-ue;se[Le]=nr+Ar,se[Le+32]=nr-Ar;var $r=.707106781*(Yr+br);se[Le+16]=br+$r,se[Le+48]=br-$r;var gr=.382683433*((nr=Sr+Me)-(Yr=Gt+te)),zr=.5411961*nr+gr,Jr=1.306562965*Yr+gr,Ft=.707106781*(Ar=Me+Gt),Ie=te+Ft,ve=te-Ft;se[Le+40]=ve+zr,se[Le+24]=ve-zr,se[Le+8]=Ie+Jr,se[Le+56]=Ie-Jr,Le++}for(er=0;er<64;++er)or=se[er]*fe[er],U[er]=or>0?or+.5|0:or-.5|0;return U}(et,dt),we=0;we<64;++we)V[xt[we]]=xe[we];var Te=V[0]-_t;_t=V[0],Te==0?jt(Ct[0]):(jt(Ct[P[Rt=32767+Te]]),jt(T[Rt]));for(var Ee=63;Ee>0&&V[Ee]==0;)Ee--;if(Ee==0)return jt(Zt),_t;for(var Ve,ie=1;ie<=Ee;){for(var rt=ie;V[ie]==0&&ie<=Ee;)++ie;var dr=ie-rt;if(dr>=16){Ve=dr>>4;for(var je=1;je<=Ve;++je)jt(Jt);dr&=15}Rt=32767+V[ie],jt(Ot[(dr<<4)+P[Rt]]),jt(T[Rt]),ie++}return Ee!=63&&jt(Zt),_t}function me(et){et=Math.min(Math.max(et,1),100),h!=et&&(function(dt){for(var _t=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],Ct=0;Ct<64;Ct++){var Ot=d((_t[Ct]*dt+50)/100);Ot=Math.min(Math.max(Ot,1),255),A[xt[Ct]]=Ot}for(var Rt=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Zt=0;Zt<64;Zt++){var Jt=d((Rt[Zt]*dt+50)/100);Jt=Math.min(Math.max(Jt,1),255),v[xt[Zt]]=Jt}for(var xe=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],we=0,Te=0;Te<8;Te++)for(var Ee=0;Ee<8;Ee++)C[we]=1/(A[xt[we]]*xe[Te]*xe[Ee]*8),I[we]=1/(v[xt[we]]*xe[Te]*xe[Ee]*8),we++}(et<50?Math.floor(5e3/et):Math.floor(200-2*et)),h=et)}this.encode=function(et,dt){dt&&me(dt),R=new Array,Z=0,K=7,Wt(65496),Wt(65504),Wt(16),zt(74),zt(70),zt(73),zt(70),zt(0),zt(1),zt(1),zt(0),Wt(1),Wt(1),zt(0),zt(0),function(){Wt(65499),Wt(132),zt(0);for(var Se=0;Se<64;Se++)zt(A[Se]);zt(1);for(var Re=0;Re<64;Re++)zt(v[Re])}(),function(Se,Re){Wt(65472),Wt(17),zt(8),Wt(Re),Wt(Se),zt(3),zt(1),zt(17),zt(0),zt(2),zt(17),zt(1),zt(3),zt(17),zt(1)}(et.width,et.height),function(){Wt(65476),Wt(418),zt(0);for(var Se=0;Se<16;Se++)zt(pt[Se+1]);for(var Re=0;Re<=11;Re++)zt(kt[Re]);zt(16);for(var We=0;We<16;We++)zt(Xt[We+1]);for(var ar=0;ar<=161;ar++)zt(st[ar]);zt(1);for(var wr=0;wr<16;wr++)zt(ut[wr+1]);for(var Fr=0;Fr<=11;Fr++)zt(mt[Fr]);zt(17);for(var oe=0;oe<16;oe++)zt(vt[oe+1]);for(var er=0;er<=161;er++)zt($t[er])}(),Wt(65498),Wt(12),zt(3),zt(1),zt(0),zt(2),zt(17),zt(3),zt(17),zt(0),zt(63),zt(0);var _t=0,Ct=0,Ot=0;Z=0,K=7,this.encode.displayName="_encode_";for(var Rt,Zt,Jt,xe,we,Te,Ee,Ve,ie,rt=et.data,dr=et.width,je=et.height,se=4*dr,fe=0;fe<je;){for(Rt=0;Rt<se;){for(we=se*fe+Rt,Ee=-1,Ve=0,ie=0;ie<64;ie++)Te=we+(Ve=ie>>3)*se+(Ee=4*(7&ie)),fe+Ve>=je&&(Te-=se*(fe+1+Ve-je)),Rt+Ee>=se&&(Te-=Rt+Ee-se+4),Zt=rt[Te++],Jt=rt[Te++],xe=rt[Te++],tt[ie]=(Ut[Zt]+Ut[Jt+256>>0]+Ut[xe+512>>0]>>16)-128,ht[ie]=(Ut[Zt+768>>0]+Ut[Jt+1024>>0]+Ut[xe+1280>>0]>>16)-128,Bt[ie]=(Ut[Zt+1280>>0]+Ut[Jt+1536>>0]+Ut[xe+1792>>0]>>16)-128;_t=Yt(tt,C,_t,e,s),Ct=Yt(ht,I,Ct,i,c),Ot=Yt(Bt,I,Ot,i,c),Rt+=32}fe+=8}if(K>=0){var Ue=[];Ue[1]=K+1,Ue[0]=(1<<K+1)-1,jt(Ue)}return Wt(65497),new Uint8Array(R)},n=n||50,function(){for(var et=String.fromCharCode,dt=0;dt<256;dt++)Lt[dt]=et(dt)}(),e=Vt(pt,kt),i=Vt(ut,mt),s=Vt(Xt,st),c=Vt(vt,$t),function(){for(var et=1,dt=2,_t=1;_t<=15;_t++){for(var Ct=et;Ct<dt;Ct++)P[32767+Ct]=_t,T[32767+Ct]=[],T[32767+Ct][1]=_t,T[32767+Ct][0]=Ct;for(var Ot=-(dt-1);Ot<=-et;Ot++)P[32767+Ot]=_t,T[32767+Ot]=[],T[32767+Ot][1]=_t,T[32767+Ot][0]=dt-1+Ot;et<<=1,dt<<=1}}(),function(){for(var et=0;et<256;et++)Ut[et]=19595*et,Ut[et+256>>0]=38470*et,Ut[et+512>>0]=7471*et+32768,Ut[et+768>>0]=-11059*et,Ut[et+1024>>0]=-21709*et,Ut[et+1280>>0]=32768*et+8421375,Ut[et+1536>>0]=-27439*et,Ut[et+1792>>0]=-5329*et}(),me(n)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function wo(n,e){if(this.pos=0,this.buffer=n,this.datav=new DataView(n.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function Mv(n){function e(pt){if(!pt)throw Error("assert :P")}function i(pt,kt,Xt){for(var st=0;4>st;st++)if(pt[kt+st]!=Xt.charCodeAt(st))return!0;return!1}function s(pt,kt,Xt,st,ut){for(var mt=0;mt<ut;mt++)pt[kt+mt]=Xt[st+mt]}function c(pt,kt,Xt,st){for(var ut=0;ut<st;ut++)pt[kt+ut]=Xt}function h(pt){return new Int32Array(pt)}function d(pt,kt){for(var Xt=[],st=0;st<pt;st++)Xt.push(new kt);return Xt}function A(pt,kt){var Xt=[];return function st(ut,mt,vt){for(var $t=vt[mt],Vt=0;Vt<$t&&(ut.push(vt.length>mt+1?[]:new kt),!(vt.length<mt+1));Vt++)st(ut[Vt],mt+1,vt)}(Xt,0,pt),Xt}var v=function(){var pt=this;function kt(_,F){for(var f=1<<F-1>>>0;_&f;)f>>>=1;return f?(_&f-1)+f:_}function Xt(_,F,f,t,o){e(!(t%f));do _[F+(t-=f)]=o;while(0<t)}function st(_,F,f,t,o){if(e(2328>=o),512>=o)var u=h(512);else if((u=h(o))==null)return 0;return function(g,m,x,B,E,k){var N,D,j=m,G=1<<x,H=h(16),W=h(16);for(e(E!=0),e(B!=null),e(g!=null),e(0<x),D=0;D<E;++D){if(15<B[D])return 0;++H[B[D]]}if(H[0]==E)return 0;for(W[1]=0,N=1;15>N;++N){if(H[N]>1<<N)return 0;W[N+1]=W[N]+H[N]}for(D=0;D<E;++D)N=B[D],0<B[D]&&(k[W[N]++]=D);if(W[15]==1)return(B=new ut).g=0,B.value=k[0],Xt(g,j,1,G,B),G;var nt,ot=-1,ct=G-1,At=0,gt=1,Tt=1,St=1<<x;for(D=0,N=1,E=2;N<=x;++N,E<<=1){if(gt+=Tt<<=1,0>(Tt-=H[N]))return 0;for(;0<H[N];--H[N])(B=new ut).g=N,B.value=k[D++],Xt(g,j+At,E,St,B),At=kt(At,N)}for(N=x+1,E=2;15>=N;++N,E<<=1){if(gt+=Tt<<=1,0>(Tt-=H[N]))return 0;for(;0<H[N];--H[N]){if(B=new ut,(At&ct)!=ot){for(j+=St,nt=1<<(ot=N)-x;15>ot&&!(0>=(nt-=H[ot]));)++ot,nt<<=1;G+=St=1<<(nt=ot-x),g[m+(ot=At&ct)].g=nt+x,g[m+ot].value=j-m-ot}B.g=N-x,B.value=k[D++],Xt(g,j+(At>>x),E,St,B),At=kt(At,N)}}return gt!=2*W[15]-1?0:G}(_,F,f,t,o,u)}function ut(){this.value=this.g=0}function mt(){this.value=this.g=0}function vt(){this.G=d(5,ut),this.H=h(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=d(Wi,mt)}function $t(_,F,f,t){e(_!=null),e(F!=null),e(2147483648>t),_.Ca=254,_.I=0,_.b=-8,_.Ka=0,_.oa=F,_.pa=f,_.Jd=F,_.Yc=f+t,_.Zc=4<=t?f+t-4+1:f,Rt(_)}function Vt(_,F){for(var f=0;0<F--;)f|=Jt(_,128)<<F;return f}function jt(_,F){var f=Vt(_,F);return Zt(_)?-f:f}function zt(_,F,f,t){var o,u=0;for(e(_!=null),e(F!=null),e(4294967288>t),_.Sb=t,_.Ra=0,_.u=0,_.h=0,4<t&&(t=4),o=0;o<t;++o)u+=F[f+o]<<8*o;_.Ra=u,_.bb=t,_.oa=F,_.pa=f}function Wt(_){for(;8<=_.u&&_.bb<_.Sb;)_.Ra>>>=8,_.Ra+=_.oa[_.pa+_.bb]<<Cs-8>>>0,++_.bb,_.u-=8;_t(_)&&(_.h=1,_.u=0)}function Yt(_,F){if(e(0<=F),!_.h&&F<=ro){var f=dt(_)&eo[F];return _.u+=F,Wt(_),f}return _.h=1,_.u=0}function me(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function et(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function dt(_){return _.Ra>>>(_.u&Cs-1)>>>0}function _t(_){return e(_.bb<=_.Sb),_.h||_.bb==_.Sb&&_.u>Cs}function Ct(_,F){_.u=F,_.h=_t(_)}function Ot(_){_.u>=Ua&&(e(_.u>=Ua),Wt(_))}function Rt(_){e(_!=null&&_.oa!=null),_.pa<_.Zc?(_.I=(_.oa[_.pa++]|_.I<<8)>>>0,_.b+=8):(e(_!=null&&_.oa!=null),_.pa<_.Yc?(_.b+=8,_.I=_.oa[_.pa++]|_.I<<8):_.Ka?_.b=0:(_.I<<=8,_.b+=8,_.Ka=1))}function Zt(_){return Vt(_,1)}function Jt(_,F){var f=_.Ca;0>_.b&&Rt(_);var t=_.b,o=f*F>>>8,u=(_.I>>>t>o)+0;for(u?(f-=o,_.I-=o+1<<t>>>0):f=o+1,t=f,o=0;256<=t;)o+=8,t>>=8;return t=7^o+en[t],_.b-=t,_.Ca=(f<<t)-1,u}function xe(_,F,f){_[F+0]=f>>24&255,_[F+1]=f>>16&255,_[F+2]=f>>8&255,_[F+3]=f>>0&255}function we(_,F){return _[F+0]<<0|_[F+1]<<8}function Te(_,F){return we(_,F)|_[F+2]<<16}function Ee(_,F){return we(_,F)|we(_,F+2)<<16}function Ve(_,F){var f=1<<F;return e(_!=null),e(0<F),_.X=h(f),_.X==null?0:(_.Mb=32-F,_.Xa=F,1)}function ie(_,F){e(_!=null),e(F!=null),e(_.Xa==F.Xa),s(F.X,0,_.X,0,1<<F.Xa)}function rt(){this.X=[],this.Xa=this.Mb=0}function dr(_,F,f,t){e(f!=null),e(t!=null);var o=f[0],u=t[0];return o==0&&(o=(_*u+F/2)/F),u==0&&(u=(F*o+_/2)/_),0>=o||0>=u?0:(f[0]=o,t[0]=u,1)}function je(_,F){return _+(1<<F)-1>>>F}function se(_,F){return((4278255360&_)+(4278255360&F)>>>0&4278255360)+((16711935&_)+(16711935&F)>>>0&16711935)>>>0}function fe(_,F){pt[F]=function(f,t,o,u,g,m,x){var B;for(B=0;B<g;++B){var E=pt[_](m[x+B-1],o,u+B);m[x+B]=se(f[t+B],E)}}}function Ue(){this.ud=this.hd=this.jd=0}function Se(_,F){return((4278124286&(_^F))>>>1)+(_&F)>>>0}function Re(_){return 0<=_&&256>_?_:0>_?0:255<_?255:void 0}function We(_,F){return Re(_+(_-F+.5>>1))}function ar(_,F,f){return Math.abs(F-f)-Math.abs(_-f)}function wr(_,F,f,t,o,u,g){for(t=u[g-1],f=0;f<o;++f)u[g+f]=t=se(_[F+f],t)}function Fr(_,F,f,t,o){var u;for(u=0;u<f;++u){var g=_[F+u],m=g>>8&255,x=16711935&(x=(x=16711935&g)+((m<<16)+m));t[o+u]=(4278255360&g)+x>>>0}}function oe(_,F){F.jd=_>>0&255,F.hd=_>>8&255,F.ud=_>>16&255}function er(_,F,f,t,o,u){var g;for(g=0;g<t;++g){var m=F[f+g],x=m>>>8,B=m,E=255&(E=(E=m>>>16)+((_.jd<<24>>24)*(x<<24>>24)>>>5));B=255&(B=(B=B+((_.hd<<24>>24)*(x<<24>>24)>>>5))+((_.ud<<24>>24)*(E<<24>>24)>>>5)),o[u+g]=(4278255360&m)+(E<<16)+B}}function or(_,F,f,t,o){pt[F]=function(u,g,m,x,B,E,k,N,D){for(x=k;x<N;++x)for(k=0;k<D;++k)B[E++]=o(m[t(u[g++])])},pt[_]=function(u,g,m,x,B,E,k){var N=8>>u.b,D=u.Ea,j=u.K[0],G=u.w;if(8>N)for(u=(1<<u.b)-1,G=(1<<N)-1;g<m;++g){var H,W=0;for(H=0;H<D;++H)H&u||(W=t(x[B++])),E[k++]=o(j[W&G]),W>>=N}else pt["VP8LMapColor"+f](x,B,j,G,E,k,g,m,D)}}function Le(_,F,f,t,o){for(f=F+f;F<f;){var u=_[F++];t[o++]=u>>16&255,t[o++]=u>>8&255,t[o++]=u>>0&255}}function Zr(_,F,f,t,o){for(f=F+f;F<f;){var u=_[F++];t[o++]=u>>16&255,t[o++]=u>>8&255,t[o++]=u>>0&255,t[o++]=u>>24&255}}function ce(_,F,f,t,o){for(f=F+f;F<f;){var u=(g=_[F++])>>16&240|g>>12&15,g=g>>0&240|g>>28&15;t[o++]=u,t[o++]=g}}function ir(_,F,f,t,o){for(f=F+f;F<f;){var u=(g=_[F++])>>16&248|g>>13&7,g=g>>5&224|g>>3&31;t[o++]=u,t[o++]=g}}function Pe(_,F,f,t,o){for(f=F+f;F<f;){var u=_[F++];t[o++]=u>>0&255,t[o++]=u>>8&255,t[o++]=u>>16&255}}function _r(_,F,f,t,o,u){if(u==0)for(f=F+f;F<f;)xe(t,((u=_[F++])[0]>>24|u[1]>>8&65280|u[2]<<8&16711680|u[3]<<24)>>>0),o+=32;else s(t,o,_,F,f)}function ni(_,F){pt[F][0]=pt[_+"0"],pt[F][1]=pt[_+"1"],pt[F][2]=pt[_+"2"],pt[F][3]=pt[_+"3"],pt[F][4]=pt[_+"4"],pt[F][5]=pt[_+"5"],pt[F][6]=pt[_+"6"],pt[F][7]=pt[_+"7"],pt[F][8]=pt[_+"8"],pt[F][9]=pt[_+"9"],pt[F][10]=pt[_+"10"],pt[F][11]=pt[_+"11"],pt[F][12]=pt[_+"12"],pt[F][13]=pt[_+"13"],pt[F][14]=pt[_+"0"],pt[F][15]=pt[_+"0"]}function Qe(_){return _==TA||_==$o||_==UA||_==ml}function mi(){this.eb=[],this.size=this.A=this.fb=0}function Kr(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function si(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new mi,this.f.kb=new Kr,this.sd=null}function Xr(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function yt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function $(_){return alert("todo:WebPSamplerProcessPlane"),_.T}function X(_,F){var f=_.T,t=F.ba.f.RGBA,o=t.eb,u=t.fb+_.ka*t.A,g=Cr[F.ba.S],m=_.y,x=_.O,B=_.f,E=_.N,k=_.ea,N=_.W,D=F.cc,j=F.dc,G=F.Mc,H=F.Nc,W=_.ka,nt=_.ka+_.T,ot=_.U,ct=ot+1>>1;for(W==0?g(m,x,null,null,B,E,k,N,B,E,k,N,o,u,null,null,ot):(g(F.ec,F.fc,m,x,D,j,G,H,B,E,k,N,o,u-t.A,o,u,ot),++f);W+2<nt;W+=2)D=B,j=E,G=k,H=N,E+=_.Rc,N+=_.Rc,u+=2*t.A,g(m,(x+=2*_.fa)-_.fa,m,x,D,j,G,H,B,E,k,N,o,u-t.A,o,u,ot);return x+=_.fa,_.j+nt<_.o?(s(F.ec,F.fc,m,x,ot),s(F.cc,F.dc,B,E,ct),s(F.Mc,F.Nc,k,N,ct),f--):1&nt||g(m,x,null,null,B,E,k,N,B,E,k,N,o,u+t.A,null,null,ot),f}function at(_,F,f){var t=_.F,o=[_.J];if(t!=null){var u=_.U,g=F.ba.S,m=g==EA||g==UA;F=F.ba.f.RGBA;var x=[0],B=_.ka;x[0]=_.T,_.Kb&&(B==0?--x[0]:(--B,o[0]-=_.width),_.j+_.ka+_.T==_.o&&(x[0]=_.o-_.j-B));var E=F.eb;B=F.fb+B*F.A,_=ti(t,o[0],_.width,u,x,E,B+(m?0:3),F.A),e(f==x),_&&Qe(g)&&En(E,B,m,u,x,F.A)}return 0}function ft(_){var F=_.ma,f=F.ba.S,t=11>f,o=f==jo||f==Ko||f==EA||f==gl||f==12||Qe(f);if(F.memory=null,F.Ib=null,F.Jb=null,F.Nd=null,!Ks(F.Oa,_,o?11:12))return 0;if(o&&Qe(f)&&be(),_.da)alert("todo:use_scaling");else{if(t){if(F.Ib=$,_.Kb){if(f=_.U+1>>1,F.memory=h(_.U+2*f),F.memory==null)return 0;F.ec=F.memory,F.fc=0,F.cc=F.ec,F.dc=F.fc+_.U,F.Mc=F.cc,F.Nc=F.dc+f,F.Ib=X,be()}}else alert("todo:EmitYUV");o&&(F.Jb=at,t&&qt())}if(t&&!ci){for(_=0;256>_;++_)kA[_]=89858*(_-128)+sc>>wl,Yu[_]=-22014*(_-128)+sc,oc[_]=-45773*(_-128),ac[_]=113618*(_-128)+sc>>wl;for(_=Xo;_<Zc;++_)F=76283*(_-16)+sc>>wl,_l[_-Xo]=Vr(F,255),bl[_-Xo]=Vr(F+8>>4,15);ci=1}return 1}function Qt(_){var F=_.ma,f=_.U,t=_.T;return e(!(1&_.ka)),0>=f||0>=t?0:(f=F.Ib(_,F),F.Jb!=null&&F.Jb(_,F,f),F.Dc+=f,1)}function Nt(_){_.ma.memory=null}function Pt(_,F,f,t){return Yt(_,8)!=47?0:(F[0]=Yt(_,14)+1,f[0]=Yt(_,14)+1,t[0]=Yt(_,1),Yt(_,3)!=0?0:!_.h)}function Et(_,F){if(4>_)return _+1;var f=_-2>>1;return(2+(1&_)<<f)+Yt(F,f)+1}function te(_,F){return 120<F?F-120:1<=(f=((f=Ss[F-1])>>4)*_+(8-(15&f)))?f:1;var f}function ae(_,F,f){var t=dt(f),o=_[F+=255&t].g-8;return 0<o&&(Ct(f,f.u+8),t=dt(f),F+=_[F].value,F+=t&(1<<o)-1),Ct(f,f.u+_[F].g),_[F].value}function Gt(_,F,f){return f.g+=_.g,f.value+=_.value<<F>>>0,e(8>=f.g),_.g}function ue(_,F,f){var t=_.xc;return e((F=t==0?0:_.vc[_.md*(f>>t)+(F>>t)])<_.Wb),_.Ya[F]}function Me(_,F,f,t){var o=_.ab,u=_.c*F,g=_.C;F=g+F;var m=f,x=t;for(t=_.Ta,f=_.Ua;0<o--;){var B=_.gc[o],E=g,k=F,N=m,D=x,j=(x=t,m=f,B.Ea);switch(e(E<k),e(k<=B.nc),B.hc){case 2:Ro(N,D,(k-E)*j,x,m);break;case 0:var G=E,H=k,W=x,nt=m,ot=(St=B).Ea;G==0&&(io(N,D,null,null,1,W,nt),wr(N,D+1,0,0,ot-1,W,nt+1),D+=ot,nt+=ot,++G);for(var ct=1<<St.b,At=ct-1,gt=je(ot,St.b),Tt=St.K,St=St.w+(G>>St.b)*gt;G<H;){var ee=Tt,Ae=St,he=1;for(La(N,D,W,nt-ot,1,W,nt);he<ot;){var ge=(he&~At)+ct;ge>ot&&(ge=ot),(0,Mr[ee[Ae++]>>8&15])(N,D+ +he,W,nt+he-ot,ge-he,W,nt+he),he=ge}D+=ot,nt+=ot,++G&At||(St+=gt)}k!=B.nc&&s(x,m-j,x,m+(k-E-1)*j,j);break;case 1:for(j=N,H=D,ot=(N=B.Ea)-(nt=N&~(W=(D=1<<B.b)-1)),G=je(N,B.b),ct=B.K,B=B.w+(E>>B.b)*G;E<k;){for(At=ct,gt=B,Tt=new Ue,St=H+nt,ee=H+N;H<St;)oe(At[gt++],Tt),ha(Tt,j,H,D,x,m),H+=D,m+=D;H<ee&&(oe(At[gt++],Tt),ha(Tt,j,H,ot,x,m),H+=ot,m+=ot),++E&W||(B+=G)}break;case 3:if(N==x&&D==m&&0<B.b){for(H=x,N=j=m+(k-E)*j-(nt=(k-E)*je(B.Ea,B.b)),D=x,W=m,G=[],nt=(ot=nt)-1;0<=nt;--nt)G[nt]=D[W+nt];for(nt=ot-1;0<=nt;--nt)H[N+nt]=G[nt];yn(B,E,k,x,j,x,m)}else yn(B,E,k,N,D,x,m)}m=t,x=f}x!=f&&s(t,f,m,x,u)}function Xe(_,F){var f=_.V,t=_.Ba+_.c*_.C,o=F-_.C;if(e(F<=_.l.o),e(16>=o),0<o){var u=_.l,g=_.Ta,m=_.Ua,x=u.width;if(Me(_,o,f,t),o=m=[m],e((f=_.C)<(t=F)),e(u.v<u.va),t>u.o&&(t=u.o),f<u.j){var B=u.j-f;f=u.j,o[0]+=B*x}if(f>=t?f=0:(o[0]+=4*u.v,u.ka=f-u.j,u.U=u.va-u.v,u.T=t-f,f=1),f){if(m=m[0],11>(f=_.ca).S){var E=f.f.RGBA,k=(t=f.S,o=u.U,u=u.T,B=E.eb,E.A),N=u;for(E=E.fb+_.Ma*E.A;0<N--;){var D=g,j=m,G=o,H=B,W=E;switch(t){case IA:qn(D,j,G,H,W);break;case jo:Sn(D,j,G,H,W);break;case TA:Sn(D,j,G,H,W),En(H,W,0,G,1,0);break;case ic:Fs(D,j,G,H,W);break;case Ko:_r(D,j,G,H,W,1);break;case $o:_r(D,j,G,H,W,1),En(H,W,0,G,1,0);break;case EA:_r(D,j,G,H,W,0);break;case UA:_r(D,j,G,H,W,0),En(H,W,1,G,1,0);break;case gl:as(D,j,G,H,W);break;case ml:as(D,j,G,H,W),Dr(H,W,G,1,0);break;case oo:da(D,j,G,H,W);break;default:e(0)}m+=x,E+=k}_.Ma+=u}else alert("todo:EmitRescaledRowsYUVA");e(_.Ma<=f.height)}}_.C=F,e(_.C<=_.i)}function Sr(_){var F;if(0<_.ua)return 0;for(F=0;F<_.Wb;++F){var f=_.Ya[F].G,t=_.Ya[F].H;if(0<f[1][t[1]+0].g||0<f[2][t[2]+0].g||0<f[3][t[3]+0].g)return 0}return 1}function nr(_,F,f,t,o,u){if(_.Z!=0){var g=_.qd,m=_.rd;for(e(va[_.Z]!=null);F<f;++F)va[_.Z](g,m,t,o,t,o,u),g=t,m=o,o+=u;_.qd=g,_.rd=m}}function br(_,F){var f=_.l.ma,t=f.Z==0||f.Z==1?_.l.j:_.C;if(t=_.C<t?t:_.C,e(F<=_.l.o),F>t){var o=_.l.width,u=f.ca,g=f.tb+o*t,m=_.V,x=_.Ba+_.c*t,B=_.gc;e(_.ab==1),e(B[0].hc==3),pl(B[0],t,F,m,x,u,g),nr(f,t,F,u,g,o)}_.C=_.Ma=F}function Ar(_,F,f,t,o,u,g){var m=_.$/t,x=_.$%t,B=_.m,E=_.s,k=f+_.$,N=k;o=f+t*o;var D=f+t*u,j=280+E.ua,G=_.Pb?m:16777216,H=0<E.ua?E.Wa:null,W=E.wc,nt=k<D?ue(E,x,m):null;e(_.C<u),e(D<=o);var ot=!1;t:for(;;){for(;ot||k<D;){var ct=0;if(m>=G){var At=k-f;e((G=_).Pb),G.wd=G.m,G.xd=At,0<G.s.ua&&ie(G.s.Wa,G.s.vb),G=m+Kc}if(x&W||(nt=ue(E,x,m)),e(nt!=null),nt.Qb&&(F[k]=nt.qb,ot=!0),!ot)if(Ot(B),nt.jc){ct=B,At=F;var gt=k,Tt=nt.pd[dt(ct)&Wi-1];e(nt.jc),256>Tt.g?(Ct(ct,ct.u+Tt.g),At[gt]=Tt.value,ct=0):(Ct(ct,ct.u+Tt.g-256),e(256<=Tt.value),ct=Tt.value),ct==0&&(ot=!0)}else ct=ae(nt.G[0],nt.H[0],B);if(B.h)break;if(ot||256>ct){if(!ot)if(nt.nd)F[k]=(nt.qb|ct<<8)>>>0;else{if(Ot(B),ot=ae(nt.G[1],nt.H[1],B),Ot(B),At=ae(nt.G[2],nt.H[2],B),gt=ae(nt.G[3],nt.H[3],B),B.h)break;F[k]=(gt<<24|ot<<16|ct<<8|At)>>>0}if(ot=!1,++k,++x>=t&&(x=0,++m,g!=null&&m<=u&&!(m%16)&&g(_,m),H!=null))for(;N<k;)ct=F[N++],H.X[(506832829*ct&4294967295)>>>H.Mb]=ct}else if(280>ct){if(ct=Et(ct-256,B),At=ae(nt.G[4],nt.H[4],B),Ot(B),At=te(t,At=Et(At,B)),B.h)break;if(k-f<At||o-k<ct)break t;for(gt=0;gt<ct;++gt)F[k+gt]=F[k+gt-At];for(k+=ct,x+=ct;x>=t;)x-=t,++m,g!=null&&m<=u&&!(m%16)&&g(_,m);if(e(k<=o),x&W&&(nt=ue(E,x,m)),H!=null)for(;N<k;)ct=F[N++],H.X[(506832829*ct&4294967295)>>>H.Mb]=ct}else{if(!(ct<j))break t;for(ot=ct-280,e(H!=null);N<k;)ct=F[N++],H.X[(506832829*ct&4294967295)>>>H.Mb]=ct;ct=k,e(!(ot>>>(At=H).Xa)),F[ct]=At.X[ot],ot=!0}ot||e(B.h==_t(B))}if(_.Pb&&B.h&&k<o)e(_.m.h),_.a=5,_.m=_.wd,_.$=_.xd,0<_.s.ua&&ie(_.s.vb,_.s.Wa);else{if(B.h)break t;g!=null&&g(_,m>u?u:m),_.a=0,_.$=k-f}return 1}return _.a=3,0}function Yr(_){e(_!=null),_.vc=null,_.yc=null,_.Ya=null;var F=_.Wa;F!=null&&(F.X=null),_.vb=null,e(_!=null)}function $r(){var _=new Oo;return _==null?null:(_.a=0,_.xb=Go,ni("Predictor","VP8LPredictors"),ni("Predictor","VP8LPredictors_C"),ni("PredictorAdd","VP8LPredictorsAdd"),ni("PredictorAdd","VP8LPredictorsAdd_C"),Ro=Fr,ha=er,qn=Le,Sn=Zr,as=ce,da=ir,Fs=Pe,pt.VP8LMapColor32b=$s,pt.VP8LMapColor8b=CA,_)}function gr(_,F,f,t,o){var u=1,g=[_],m=[F],x=t.m,B=t.s,E=null,k=0;t:for(;;){if(f)for(;u&&Yt(x,1);){var N=g,D=m,j=t,G=1,H=j.m,W=j.gc[j.ab],nt=Yt(H,2);if(j.Oc&1<<nt)u=0;else{switch(j.Oc|=1<<nt,W.hc=nt,W.Ea=N[0],W.nc=D[0],W.K=[null],++j.ab,e(4>=j.ab),nt){case 0:case 1:W.b=Yt(H,3)+2,G=gr(je(W.Ea,W.b),je(W.nc,W.b),0,j,W.K),W.K=W.K[0];break;case 3:var ot,ct=Yt(H,8)+1,At=16<ct?0:4<ct?1:2<ct?2:3;if(N[0]=je(W.Ea,At),W.b=At,ot=G=gr(ct,1,0,j,W.K)){var gt,Tt=ct,St=W,ee=1<<(8>>St.b),Ae=h(ee);if(Ae==null)ot=0;else{var he=St.K[0],ge=St.w;for(Ae[0]=St.K[0][0],gt=1;gt<1*Tt;++gt)Ae[gt]=se(he[ge+gt],Ae[gt-1]);for(;gt<4*ee;++gt)Ae[gt]=0;St.K[0]=null,St.K[0]=Ae,ot=1}}G=ot;break;case 2:break;default:e(0)}u=G}}if(g=g[0],m=m[0],u&&Yt(x,1)&&!(u=1<=(k=Yt(x,4))&&11>=k)){t.a=3;break t}var pe;if(pe=u)e:{var de,ye,$e,Be=t,Ce=g,Je=m,yr=k,pr=f,xr=Be.m,Lr=Be.s,ei=[null],_i=1,Gr=0,Ui=ma[yr];r:for(;;){if(pr&&Yt(xr,1)){var ri=Yt(xr,3)+2,Ii=je(Ce,ri),zi=je(Je,ri),Rn=Ii*zi;if(!gr(Ii,zi,0,Be,ei))break r;for(ei=ei[0],Lr.xc=ri,de=0;de<Rn;++de){var cs=ei[de]>>8&65535;ei[de]=cs,cs>=_i&&(_i=cs+1)}}if(xr.h)break r;for(ye=0;5>ye;++ye){var bi=yl[ye];!ye&&0<yr&&(bi+=1<<yr),Gr<bi&&(Gr=bi)}var lo=d(_i*Ui,ut),us=_i,Bl=d(us,vt);if(Bl==null)var MA=null;else e(65536>=us),MA=Bl;var Tn=h(Gr);if(MA==null||Tn==null||lo==null){Be.a=1;break r}var zn=lo;for(de=$e=0;de<_i;++de){var sn=MA[de],Un=sn.G,Di=sn.H,wn=0,Ln=1,Hr=0;for(ye=0;5>ye;++ye){bi=yl[ye],Un[ye]=zn,Di[ye]=$e,!ye&&0<yr&&(bi+=1<<yr);n:{var wa,co=bi,ka=Be,DA=Tn,md=zn,Ju=$e,_a=0,Ma=ka.m,Ac=Yt(Ma,1);if(c(DA,0,0,co),Ac){var Cl=Yt(Ma,1)+1,lc=Yt(Ma,1),Fl=Yt(Ma,lc==0?1:8);DA[Fl]=1,Cl==2&&(DA[Fl=Yt(Ma,8)]=1);var Da=1}else{var NA=h(19),Yc=Yt(Ma,4)+4;if(19<Yc){ka.a=3;var Jc=0;break n}for(wa=0;wa<Yc;++wa)NA[qu[wa]]=Yt(Ma,3);var th=void 0,tu=void 0,eh=ka,eu=NA,Wo=co,uo=DA,Js=0,hs=eh.m,yd=8,OA=d(128,ut);i:for(;st(OA,0,7,eu,19);){if(Yt(hs,1)){var uy=2+2*Yt(hs,3);if((th=2+Yt(hs,uy))>Wo)break i}else th=Wo;for(tu=0;tu<Wo&&th--;){Ot(hs);var vd=OA[0+(127&dt(hs))];Ct(hs,hs.u+vd.g);var xi=vd.value;if(16>xi)uo[tu++]=xi,xi!=0&&(yd=xi);else{var wd=xi==16,_d=xi-16,Sl=jc[_d],RA=Yt(hs,Vc[_d])+Sl;if(tu+RA>Wo)break i;for(var rh=wd?yd:0;0<RA--;)uo[tu++]=rh}}Js=1;break i}Js||(eh.a=3),Da=Js}(Da=Da&&!Ma.h)&&(_a=st(md,Ju,8,DA,co)),Da&&_a!=0?Jc=_a:(ka.a=3,Jc=0)}if(Jc==0)break r;if(Ln&&LA[ye]==1&&(Ln=zn[$e].g==0),wn+=zn[$e].g,$e+=Jc,3>=ye){var Il,ih=Tn[0];for(Il=1;Il<bi;++Il)Tn[Il]>ih&&(ih=Tn[Il]);Hr+=ih}}if(sn.nd=Ln,sn.Qb=0,Ln&&(sn.qb=(Un[3][Di[3]+0].value<<24|Un[1][Di[1]+0].value<<16|Un[2][Di[2]+0].value)>>>0,wn==0&&256>Un[0][Di[0]+0].value&&(sn.Qb=1,sn.qb+=Un[0][Di[0]+0].value<<8)),sn.jc=!sn.Qb&&6>Hr,sn.jc){var nh,ho=sn;for(nh=0;nh<Wi;++nh){var zA=nh,po=ho.pd[zA],sh=ho.G[0][ho.H[0]+zA];256<=sh.value?(po.g=sh.g+256,po.value=sh.value):(po.g=0,po.value=0,zA>>=Gt(sh,8,po),zA>>=Gt(ho.G[1][ho.H[1]+zA],16,po),zA>>=Gt(ho.G[2][ho.H[2]+zA],0,po),Gt(ho.G[3][ho.H[3]+zA],24,po))}}}Lr.vc=ei,Lr.Wb=_i,Lr.Ya=MA,Lr.yc=lo,pe=1;break e}pe=0}if(!(u=pe)){t.a=3;break t}if(0<k){if(B.ua=1<<k,!Ve(B.Wa,k)){t.a=1,u=0;break t}}else B.ua=0;var ru=t,bd=g,Wf=m,HA=ru.s,xd=HA.xc;if(ru.c=bd,ru.i=Wf,HA.md=je(bd,xd),HA.wc=xd==0?-1:(1<<xd)-1,f){t.xb=QA;break t}if((E=h(g*m))==null){t.a=1,u=0;break t}u=(u=Ar(t,E,0,g,m,m,null))&&!x.h;break t}return u?(o!=null?o[0]=E:(e(E==null),e(f)),t.$=0,f||Yr(B)):Yr(B),u}function zr(_,F){var f=_.c*_.i,t=f+F+16*F;return e(_.c<=F),_.V=h(t),_.V==null?(_.Ta=null,_.Ua=0,_.a=1,0):(_.Ta=_.V,_.Ua=_.Ba+f+F,1)}function Jr(_,F){var f=_.C,t=F-f,o=_.V,u=_.Ba+_.c*f;for(e(F<=_.l.o);0<t;){var g=16<t?16:t,m=_.l.ma,x=_.l.width,B=x*g,E=m.ca,k=m.tb+x*f,N=_.Ta,D=_.Ua;Me(_,g,o,u),Mi(N,D,E,k,B),nr(m,f,f+g,E,k,x),t-=g,o+=g*_.c,f+=g}e(f==F),_.C=_.Ma=F}function Ft(){this.ub=this.yd=this.td=this.Rb=0}function Ie(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function ve(){this.Fb=this.Bb=this.Cb=0,this.Zb=h(4),this.Lb=h(4)}function Pr(){this.Yb=function(){var _=[];return function F(f,t,o){for(var u=o[t],g=0;g<u&&(f.push(o.length>t+1?[]:0),!(o.length<t+1));g++)F(f[g],t+1,o)}(_,0,[3,11]),_}()}function mr(){this.jb=h(3),this.Wc=A([4,8],Pr),this.Xc=A([4,17],Pr)}function Xi(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new h(4),this.od=new h(4)}function li(){this.ld=this.La=this.dd=this.tc=0}function yi(){this.Na=this.la=0}function fi(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function ji(){this.ad=h(384),this.Za=0,this.Ob=h(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function pn(){this.uc=this.M=this.Nb=0,this.wa=Array(new li),this.Y=0,this.ya=Array(new ji),this.aa=0,this.l=new bs}function Cn(){this.y=h(16),this.f=h(8),this.ea=h(8)}function Xa(){this.cb=this.a=0,this.sc="",this.m=new me,this.Od=new Ft,this.Kc=new Ie,this.ed=new Xi,this.Qa=new ve,this.Ic=this.$c=this.Aa=0,this.D=new pn,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=d(8,me),this.ia=0,this.pb=d(4,fi),this.Pa=new mr,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Cn),this.Hd=0,this.rb=Array(new yi),this.sb=0,this.wa=Array(new li),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new ji),this.L=this.aa=0,this.gd=A([4,2],li),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function bs(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Qi(){var _=new Xa;return _!=null&&(_.a=0,_.sc="OK",_.cb=0,_.Xb=0,vl||(vl=Po)),_}function vi(_,F,f){return _.a==0&&(_.a=F,_.sc=f,_.cb=0),0}function $n(_,F,f){return 3<=f&&_[F+0]==157&&_[F+1]==1&&_[F+2]==42}function Fi(_,F){if(_==null)return 0;if(_.a=0,_.sc="OK",F==null)return vi(_,2,"null VP8Io passed to VP8GetHeaders()");var f=F.data,t=F.w,o=F.ha;if(4>o)return vi(_,7,"Truncated header.");var u=f[t+0]|f[t+1]<<8|f[t+2]<<16,g=_.Od;if(g.Rb=!(1&u),g.td=u>>1&7,g.yd=u>>4&1,g.ub=u>>5,3<g.td)return vi(_,3,"Incorrect keyframe parameters.");if(!g.yd)return vi(_,4,"Frame not displayable.");t+=3,o-=3;var m=_.Kc;if(g.Rb){if(7>o)return vi(_,7,"cannot parse picture header");if(!$n(f,t,o))return vi(_,3,"Bad code word");m.c=16383&(f[t+4]<<8|f[t+3]),m.Td=f[t+4]>>6,m.i=16383&(f[t+6]<<8|f[t+5]),m.Ud=f[t+6]>>6,t+=7,o-=7,_.za=m.c+15>>4,_.Ub=m.i+15>>4,F.width=m.c,F.height=m.i,F.Da=0,F.j=0,F.v=0,F.va=F.width,F.o=F.height,F.da=0,F.ib=F.width,F.hb=F.height,F.U=F.width,F.T=F.height,c((u=_.Pa).jb,0,255,u.jb.length),e((u=_.Qa)!=null),u.Cb=0,u.Bb=0,u.Fb=1,c(u.Zb,0,0,u.Zb.length),c(u.Lb,0,0,u.Lb)}if(g.ub>o)return vi(_,7,"bad partition length");$t(u=_.m,f,t,g.ub),t+=g.ub,o-=g.ub,g.Rb&&(m.Ld=Zt(u),m.Kd=Zt(u)),m=_.Qa;var x,B=_.Pa;if(e(u!=null),e(m!=null),m.Cb=Zt(u),m.Cb){if(m.Bb=Zt(u),Zt(u)){for(m.Fb=Zt(u),x=0;4>x;++x)m.Zb[x]=Zt(u)?jt(u,7):0;for(x=0;4>x;++x)m.Lb[x]=Zt(u)?jt(u,6):0}if(m.Bb)for(x=0;3>x;++x)B.jb[x]=Zt(u)?Vt(u,8):255}else m.Bb=0;if(u.Ka)return vi(_,3,"cannot parse segment header");if((m=_.ed).zd=Zt(u),m.Tb=Vt(u,6),m.wb=Vt(u,3),m.Pc=Zt(u),m.Pc&&Zt(u)){for(B=0;4>B;++B)Zt(u)&&(m.vd[B]=jt(u,6));for(B=0;4>B;++B)Zt(u)&&(m.od[B]=jt(u,6))}if(_.L=m.Tb==0?0:m.zd?1:2,u.Ka)return vi(_,3,"cannot parse filter header");var E=o;if(o=x=t,t=x+E,m=E,_.Xb=(1<<Vt(_.m,2))-1,E<3*(B=_.Xb))f=7;else{for(x+=3*B,m-=3*B,E=0;E<B;++E){var k=f[o+0]|f[o+1]<<8|f[o+2]<<16;k>m&&(k=m),$t(_.Jc[+E],f,x,k),x+=k,m-=k,o+=3}$t(_.Jc[+B],f,x,m),f=x<t?0:5}if(f!=0)return vi(_,f,"cannot parse partitions");for(f=Vt(x=_.m,7),o=Zt(x)?jt(x,4):0,t=Zt(x)?jt(x,4):0,m=Zt(x)?jt(x,4):0,B=Zt(x)?jt(x,4):0,x=Zt(x)?jt(x,4):0,E=_.Qa,k=0;4>k;++k){if(E.Cb){var N=E.Zb[k];E.Fb||(N+=f)}else{if(0<k){_.pb[k]=_.pb[0];continue}N=f}var D=_.pb[k];D.Sc[0]=os[Vr(N+o,127)],D.Sc[1]=Qa[Vr(N+0,127)],D.Eb[0]=2*os[Vr(N+t,127)],D.Eb[1]=101581*Qa[Vr(N+m,127)]>>16,8>D.Eb[1]&&(D.Eb[1]=8),D.Qc[0]=os[Vr(N+B,117)],D.Qc[1]=Qa[Vr(N+x,127)],D.lc=N+x}if(!g.Rb)return vi(_,4,"Not a key frame.");for(Zt(u),g=_.Pa,f=0;4>f;++f){for(o=0;8>o;++o)for(t=0;3>t;++t)for(m=0;11>m;++m)B=Jt(u,Is[f][o][t][m])?Vt(u,8):Gc[f][o][t][m],g.Wc[f][o].Yb[t][m]=B;for(o=0;17>o;++o)g.Xc[f][o]=g.Wc[f][Oe[o]]}return _.kc=Zt(u),_.kc&&(_.Bd=Vt(u,8)),_.cb=1}function Po(_,F,f,t,o,u,g){var m=F[o].Yb[f];for(f=0;16>o;++o){if(!Jt(_,m[f+0]))return o;for(;!Jt(_,m[f+1]);)if(m=F[++o].Yb[0],f=0,o==16)return 16;var x=F[o+1].Yb;if(Jt(_,m[f+2])){var B=_,E=0;if(Jt(B,(N=m)[(k=f)+3]))if(Jt(B,N[k+6])){for(m=0,k=2*(E=Jt(B,N[k+8]))+(N=Jt(B,N[k+9+E])),E=0,N=fd[k];N[m];++m)E+=E+Jt(B,N[m]);E+=3+(8<<k)}else Jt(B,N[k+7])?(E=7+2*Jt(B,165),E+=Jt(B,145)):E=5+Jt(B,159);else E=Jt(B,N[k+4])?3+Jt(B,N[k+5]):2;m=x[2]}else E=1,m=x[1];x=g+Xu[o],0>(B=_).b&&Rt(B);var k,N=B.b,D=(k=B.Ca>>1)-(B.I>>N)>>31;--B.b,B.Ca+=D,B.Ca|=1,B.I-=(k+1&D)<<N,u[x]=((E^D)-D)*t[(0<o)+0]}return 16}function Dn(_){var F=_.rb[_.sb-1];F.la=0,F.Na=0,c(_.zc,0,0,_.zc.length),_.ja=0}function al(_,F){if(_==null)return 0;if(F==null)return vi(_,2,"NULL VP8Io parameter in VP8Decode().");if(!_.cb&&!Fi(_,F))return 0;if(e(_.cb),F.ac==null||F.ac(F)){F.ob&&(_.L=0);var f=Ao[_.L];if(_.L==2?(_.yb=0,_.zb=0):(_.yb=F.v-f>>4,_.zb=F.j-f>>4,0>_.yb&&(_.yb=0),0>_.zb&&(_.zb=0)),_.Va=F.o+15+f>>4,_.Hb=F.va+15+f>>4,_.Hb>_.za&&(_.Hb=_.za),_.Va>_.Ub&&(_.Va=_.Ub),0<_.L){var t=_.ed;for(f=0;4>f;++f){var o;if(_.Qa.Cb){var u=_.Qa.Lb[f];_.Qa.Fb||(u+=t.Tb)}else u=t.Tb;for(o=0;1>=o;++o){var g=_.gd[f][o],m=u;if(t.Pc&&(m+=t.vd[0],o&&(m+=t.od[0])),0<(m=0>m?0:63<m?63:m)){var x=m;0<t.wb&&(x=4<t.wb?x>>2:x>>1)>9-t.wb&&(x=9-t.wb),1>x&&(x=1),g.dd=x,g.tc=2*m+x,g.ld=40<=m?2:15<=m?1:0}else g.tc=0;g.La=o}}}f=0}else vi(_,6,"Frame setup failed"),f=_.a;if(f=f==0){if(f){_.$c=0,0<_.Aa||(_.Ic=hr);t:{f=_.Ic,t=4*(x=_.za);var B=32*x,E=x+1,k=0<_.L?x*(0<_.Aa?2:1):0,N=(_.Aa==2?2:1)*x;if((g=t+832+(o=3*(16*f+Ao[_.L])/2*B)+(u=_.Fa!=null&&0<_.Fa.length?_.Kc.c*_.Kc.i:0))!=g)f=0;else{if(g>_.Vb){if(_.Vb=0,_.Ec=h(g),_.Fc=0,_.Ec==null){f=vi(_,1,"no memory during frame initialization.");break t}_.Vb=g}g=_.Ec,m=_.Fc,_.Ac=g,_.Bc=m,m+=t,_.Gd=d(B,Cn),_.Hd=0,_.rb=d(E+1,yi),_.sb=1,_.wa=k?d(k,li):null,_.Y=0,_.D.Nb=0,_.D.wa=_.wa,_.D.Y=_.Y,0<_.Aa&&(_.D.Y+=x),e(!0),_.oc=g,_.pc=m,m+=832,_.ya=d(N,ji),_.aa=0,_.D.ya=_.ya,_.D.aa=_.aa,_.Aa==2&&(_.D.aa+=x),_.R=16*x,_.B=8*x,x=(B=Ao[_.L])*_.R,B=B/2*_.B,_.sa=g,_.ta=m+x,_.qa=_.sa,_.ra=_.ta+16*f*_.R+B,_.Ha=_.qa,_.Ia=_.ra+8*f*_.B+B,_.$c=0,m+=o,_.mb=u?g:null,_.nb=u?m:null,e(m+u<=_.Fc+_.Vb),Dn(_),c(_.Ac,_.Bc,0,t),f=1}}if(f){if(F.ka=0,F.y=_.sa,F.O=_.ta,F.f=_.qa,F.N=_.ra,F.ea=_.Ha,F.Vd=_.Ia,F.fa=_.R,F.Rc=_.B,F.F=null,F.J=0,!ao){for(f=-255;255>=f;++f)$i[255+f]=0>f?-f:f;for(f=-1020;1020>=f;++f)ai[1020+f]=-128>f?-128:127<f?127:f;for(f=-112;112>=f;++f)On[112+f]=-16>f?-16:15<f?15:f;for(f=-255;510>=f;++f)rn[255+f]=0>f?0:255<f?255:f;ao=1}zo=Al,pa=Wr,no=lA,Ki=ol,vn=Fa,Si=zs,Gs=vA,FA=No,fa=rc,qs=wA,ga=ec,Xs=Ya,Pa=_A,SA=cl,so=Vs,Ws=Qr,Ho=xs,In=Hc,As[0]=ns,As[1]=Qo,As[2]=hA,As[3]=dA,As[4]=ll,As[5]=pA,As[6]=Sa,As[7]=fA,As[8]=Rc,As[9]=Jl,Zs[0]=Yl,Zs[1]=Za,Zs[2]=aa,Zs[3]=uA,Zs[4]=ki,Zs[5]=Mo,Zs[6]=gn,ya[0]=oa,ya[1]=cA,ya[2]=zc,ya[3]=gA,ya[4]=Ia,ya[5]=mA,ya[6]=Do,f=1}else f=0}f&&(f=function(D,j){for(D.M=0;D.M<D.Va;++D.M){var G,H=D.Jc[D.M&D.Xb],W=D.m,nt=D;for(G=0;G<nt.za;++G){var ot=W,ct=nt,At=ct.Ac,gt=ct.Bc+4*G,Tt=ct.zc,St=ct.ya[ct.aa+G];if(ct.Qa.Bb?St.$b=Jt(ot,ct.Pa.jb[0])?2+Jt(ot,ct.Pa.jb[2]):Jt(ot,ct.Pa.jb[1]):St.$b=0,ct.kc&&(St.Ad=Jt(ot,ct.Bd)),St.Za=!Jt(ot,145)+0,St.Za){var ee=St.Ob,Ae=0;for(ct=0;4>ct;++ct){var he,ge=Tt[0+ct];for(he=0;4>he;++he){ge=PA[At[gt+he]][ge];for(var pe=$c[Jt(ot,ge[0])];0<pe;)pe=$c[2*pe+Jt(ot,ge[pe])];ge=-pe,At[gt+he]=ge}s(ee,Ae,At,gt,4),Ae+=4,Tt[0+ct]=ge}}else ge=Jt(ot,156)?Jt(ot,128)?1:3:Jt(ot,163)?2:0,St.Ob[0]=ge,c(At,gt,ge,4),c(Tt,0,ge,4);St.Dd=Jt(ot,142)?Jt(ot,114)?Jt(ot,183)?1:3:2:0}if(nt.m.Ka)return vi(D,7,"Premature end-of-partition0 encountered.");for(;D.ja<D.za;++D.ja){if(nt=H,ot=(W=D).rb[W.sb-1],At=W.rb[W.sb+W.ja],G=W.ya[W.aa+W.ja],gt=W.kc?G.Ad:0)ot.la=At.la=0,G.Za||(ot.Na=At.Na=0),G.Hc=0,G.Gc=0,G.ia=0;else{var de,ye;if(ot=At,At=nt,gt=W.Pa.Xc,Tt=W.ya[W.aa+W.ja],St=W.pb[Tt.$b],ct=Tt.ad,ee=0,Ae=W.rb[W.sb-1],ge=he=0,c(ct,ee,0,384),Tt.Za)var $e=0,Be=gt[3];else{pe=h(16);var Ce=ot.Na+Ae.Na;if(Ce=vl(At,gt[1],Ce,St.Eb,0,pe,0),ot.Na=Ae.Na=(0<Ce)+0,1<Ce)zo(pe,0,ct,ee);else{var Je=pe[0]+3>>3;for(pe=0;256>pe;pe+=16)ct[ee+pe]=Je}$e=1,Be=gt[0]}var yr=15&ot.la,pr=15&Ae.la;for(pe=0;4>pe;++pe){var xr=1&pr;for(Je=ye=0;4>Je;++Je)yr=yr>>1|(xr=(Ce=vl(At,Be,Ce=xr+(1&yr),St.Sc,$e,ct,ee))>$e)<<7,ye=ye<<2|(3<Ce?3:1<Ce?2:ct[ee+0]!=0),ee+=16;yr>>=4,pr=pr>>1|xr<<7,he=(he<<8|ye)>>>0}for(Be=yr,$e=pr>>4,de=0;4>de;de+=2){for(ye=0,yr=ot.la>>4+de,pr=Ae.la>>4+de,pe=0;2>pe;++pe){for(xr=1&pr,Je=0;2>Je;++Je)Ce=xr+(1&yr),yr=yr>>1|(xr=0<(Ce=vl(At,gt[2],Ce,St.Qc,0,ct,ee)))<<3,ye=ye<<2|(3<Ce?3:1<Ce?2:ct[ee+0]!=0),ee+=16;yr>>=2,pr=pr>>1|xr<<5}ge|=ye<<4*de,Be|=yr<<4<<de,$e|=(240&pr)<<de}ot.la=Be,Ae.la=$e,Tt.Hc=he,Tt.Gc=ge,Tt.ia=43690&ge?0:St.ia,gt=!(he|ge)}if(0<W.L&&(W.wa[W.Y+W.ja]=W.gd[G.$b][G.Za],W.wa[W.Y+W.ja].La|=!gt),nt.Ka)return vi(D,7,"Premature end-of-file encountered.")}if(Dn(D),W=j,nt=1,G=(H=D).D,ot=0<H.L&&H.M>=H.zb&&H.M<=H.Va,H.Aa==0)t:{if(G.M=H.M,G.uc=ot,Ta(H,G),nt=1,G=(ye=H.D).Nb,ot=(ge=Ao[H.L])*H.R,At=ge/2*H.B,pe=16*G*H.R,Je=8*G*H.B,gt=H.sa,Tt=H.ta-ot+pe,St=H.qa,ct=H.ra-At+Je,ee=H.Ha,Ae=H.Ia-At+Je,pr=(yr=ye.M)==0,he=yr>=H.Va-1,H.Aa==2&&Ta(H,ye),ye.uc)for(xr=(Ce=H).D.M,e(Ce.D.uc),ye=Ce.yb;ye<Ce.Hb;++ye){$e=ye,Be=xr;var Lr=(ei=(bi=Ce).D).Nb;de=bi.R;var ei=ei.wa[ei.Y+$e],_i=bi.sa,Gr=bi.ta+16*Lr*de+16*$e,Ui=ei.dd,ri=ei.tc;if(ri!=0)if(e(3<=ri),bi.L==1)0<$e&&Ws(_i,Gr,de,ri+4),ei.La&&In(_i,Gr,de,ri),0<Be&&so(_i,Gr,de,ri+4),ei.La&&Ho(_i,Gr,de,ri);else{var Ii=bi.B,zi=bi.qa,Rn=bi.ra+8*Lr*Ii+8*$e,cs=bi.Ha,bi=bi.Ia+8*Lr*Ii+8*$e;Lr=ei.ld,0<$e&&(FA(_i,Gr,de,ri+4,Ui,Lr),qs(zi,Rn,cs,bi,Ii,ri+4,Ui,Lr)),ei.La&&(Xs(_i,Gr,de,ri,Ui,Lr),SA(zi,Rn,cs,bi,Ii,ri,Ui,Lr)),0<Be&&(Gs(_i,Gr,de,ri+4,Ui,Lr),fa(zi,Rn,cs,bi,Ii,ri+4,Ui,Lr)),ei.La&&(ga(_i,Gr,de,ri,Ui,Lr),Pa(zi,Rn,cs,bi,Ii,ri,Ui,Lr))}}if(H.ia&&alert("todo:DitherRow"),W.put!=null){if(ye=16*yr,yr=16*(yr+1),pr?(W.y=H.sa,W.O=H.ta+pe,W.f=H.qa,W.N=H.ra+Je,W.ea=H.Ha,W.W=H.Ia+Je):(ye-=ge,W.y=gt,W.O=Tt,W.f=St,W.N=ct,W.ea=ee,W.W=Ae),he||(yr-=ge),yr>W.o&&(yr=W.o),W.F=null,W.J=null,H.Fa!=null&&0<H.Fa.length&&ye<yr&&(W.J=BA(H,W,ye,yr-ye),W.F=H.mb,W.F==null&&W.F.length==0)){nt=vi(H,3,"Could not decode alpha data.");break t}ye<W.j&&(ge=W.j-ye,ye=W.j,e(!(1&ge)),W.O+=H.R*ge,W.N+=H.B*(ge>>1),W.W+=H.B*(ge>>1),W.F!=null&&(W.J+=W.width*ge)),ye<yr&&(W.O+=W.v,W.N+=W.v>>1,W.W+=W.v>>1,W.F!=null&&(W.J+=W.v),W.ka=ye-W.j,W.U=W.va-W.v,W.T=yr-ye,nt=W.put(W))}G+1!=H.Ic||he||(s(H.sa,H.ta-ot,gt,Tt+16*H.R,ot),s(H.qa,H.ra-At,St,ct+8*H.B,At),s(H.Ha,H.Ia-At,ee,Ae+8*H.B,At))}if(!nt)return vi(D,6,"Output aborted.")}return 1}(_,F)),F.bc!=null&&F.bc(F),f&=1}return f?(_.cb=0,f):0}function Oi(_,F,f,t,o){o=_[F+f+32*t]+(o>>3),_[F+f+32*t]=-256&o?0>o?0:255:o}function AA(_,F,f,t,o,u){Oi(_,F,0,f,t+o),Oi(_,F,1,f,t+u),Oi(_,F,2,f,t-u),Oi(_,F,3,f,t-o)}function fn(_){return(20091*_>>16)+_}function Rs(_,F,f,t){var o,u=0,g=h(16);for(o=0;4>o;++o){var m=_[F+0]+_[F+8],x=_[F+0]-_[F+8],B=(35468*_[F+4]>>16)-fn(_[F+12]),E=fn(_[F+4])+(35468*_[F+12]>>16);g[u+0]=m+E,g[u+1]=x+B,g[u+2]=x-B,g[u+3]=m-E,u+=4,F++}for(o=u=0;4>o;++o)m=(_=g[u+0]+4)+g[u+8],x=_-g[u+8],B=(35468*g[u+4]>>16)-fn(g[u+12]),Oi(f,t,0,0,m+(E=fn(g[u+4])+(35468*g[u+12]>>16))),Oi(f,t,1,0,x+B),Oi(f,t,2,0,x-B),Oi(f,t,3,0,m-E),u++,t+=32}function zs(_,F,f,t){var o=_[F+0]+4,u=35468*_[F+4]>>16,g=fn(_[F+4]),m=35468*_[F+1]>>16;AA(f,t,0,o+g,_=fn(_[F+1]),m),AA(f,t,1,o+u,_,m),AA(f,t,2,o-u,_,m),AA(f,t,3,o-g,_,m)}function Wr(_,F,f,t,o){Rs(_,F,f,t),o&&Rs(_,F+16,f,t+4)}function lA(_,F,f,t){pa(_,F+0,f,t,1),pa(_,F+32,f,t+128,1)}function ol(_,F,f,t){var o;for(_=_[F+0]+4,o=0;4>o;++o)for(F=0;4>F;++F)Oi(f,t,F,o,_)}function Fa(_,F,f,t){_[F+0]&&Ki(_,F+0,f,t),_[F+16]&&Ki(_,F+16,f,t+4),_[F+32]&&Ki(_,F+32,f,t+128),_[F+48]&&Ki(_,F+48,f,t+128+4)}function Al(_,F,f,t){var o,u=h(16);for(o=0;4>o;++o){var g=_[F+0+o]+_[F+12+o],m=_[F+4+o]+_[F+8+o],x=_[F+4+o]-_[F+8+o],B=_[F+0+o]-_[F+12+o];u[0+o]=g+m,u[8+o]=g-m,u[4+o]=B+x,u[12+o]=B-x}for(o=0;4>o;++o)g=(_=u[0+4*o]+3)+u[3+4*o],m=u[1+4*o]+u[2+4*o],x=u[1+4*o]-u[2+4*o],B=_-u[3+4*o],f[t+0]=g+m>>3,f[t+16]=B+x>>3,f[t+32]=g-m>>3,f[t+48]=B-x>>3,t+=64}function Wa(_,F,f){var t,o=F-32,u=nn,g=255-_[o-1];for(t=0;t<f;++t){var m,x=u,B=g+_[F-1];for(m=0;m<f;++m)_[F+m]=x[B+_[o+m]];F+=32}}function Qo(_,F){Wa(_,F,4)}function cA(_,F){Wa(_,F,8)}function Za(_,F){Wa(_,F,16)}function aa(_,F){var f;for(f=0;16>f;++f)s(_,F+32*f,_,F-32,16)}function uA(_,F){var f;for(f=16;0<f;--f)c(_,F,_[F-1],16),F+=32}function ko(_,F,f){var t;for(t=0;16>t;++t)c(F,f+32*t,_,16)}function Yl(_,F){var f,t=16;for(f=0;16>f;++f)t+=_[F-1+32*f]+_[F+f-32];ko(t>>5,_,F)}function ki(_,F){var f,t=8;for(f=0;16>f;++f)t+=_[F-1+32*f];ko(t>>4,_,F)}function Mo(_,F){var f,t=8;for(f=0;16>f;++f)t+=_[F+f-32];ko(t>>4,_,F)}function gn(_,F){ko(128,_,F)}function lr(_,F,f){return _+2*F+f+2>>2}function hA(_,F){var f,t=F-32;for(t=new Uint8Array([lr(_[t-1],_[t+0],_[t+1]),lr(_[t+0],_[t+1],_[t+2]),lr(_[t+1],_[t+2],_[t+3]),lr(_[t+2],_[t+3],_[t+4])]),f=0;4>f;++f)s(_,F+32*f,t,0,t.length)}function dA(_,F){var f=_[F-1],t=_[F-1+32],o=_[F-1+64],u=_[F-1+96];xe(_,F+0,16843009*lr(_[F-1-32],f,t)),xe(_,F+32,16843009*lr(f,t,o)),xe(_,F+64,16843009*lr(t,o,u)),xe(_,F+96,16843009*lr(o,u,u))}function ns(_,F){var f,t=4;for(f=0;4>f;++f)t+=_[F+f-32]+_[F-1+32*f];for(t>>=3,f=0;4>f;++f)c(_,F+32*f,t,4)}function ll(_,F){var f=_[F-1+0],t=_[F-1+32],o=_[F-1+64],u=_[F-1-32],g=_[F+0-32],m=_[F+1-32],x=_[F+2-32],B=_[F+3-32];_[F+0+96]=lr(t,o,_[F-1+96]),_[F+1+96]=_[F+0+64]=lr(f,t,o),_[F+2+96]=_[F+1+64]=_[F+0+32]=lr(u,f,t),_[F+3+96]=_[F+2+64]=_[F+1+32]=_[F+0+0]=lr(g,u,f),_[F+3+64]=_[F+2+32]=_[F+1+0]=lr(m,g,u),_[F+3+32]=_[F+2+0]=lr(x,m,g),_[F+3+0]=lr(B,x,m)}function Sa(_,F){var f=_[F+1-32],t=_[F+2-32],o=_[F+3-32],u=_[F+4-32],g=_[F+5-32],m=_[F+6-32],x=_[F+7-32];_[F+0+0]=lr(_[F+0-32],f,t),_[F+1+0]=_[F+0+32]=lr(f,t,o),_[F+2+0]=_[F+1+32]=_[F+0+64]=lr(t,o,u),_[F+3+0]=_[F+2+32]=_[F+1+64]=_[F+0+96]=lr(o,u,g),_[F+3+32]=_[F+2+64]=_[F+1+96]=lr(u,g,m),_[F+3+64]=_[F+2+96]=lr(g,m,x),_[F+3+96]=lr(m,x,x)}function pA(_,F){var f=_[F-1+0],t=_[F-1+32],o=_[F-1+64],u=_[F-1-32],g=_[F+0-32],m=_[F+1-32],x=_[F+2-32],B=_[F+3-32];_[F+0+0]=_[F+1+64]=u+g+1>>1,_[F+1+0]=_[F+2+64]=g+m+1>>1,_[F+2+0]=_[F+3+64]=m+x+1>>1,_[F+3+0]=x+B+1>>1,_[F+0+96]=lr(o,t,f),_[F+0+64]=lr(t,f,u),_[F+0+32]=_[F+1+96]=lr(f,u,g),_[F+1+32]=_[F+2+96]=lr(u,g,m),_[F+2+32]=_[F+3+96]=lr(g,m,x),_[F+3+32]=lr(m,x,B)}function fA(_,F){var f=_[F+0-32],t=_[F+1-32],o=_[F+2-32],u=_[F+3-32],g=_[F+4-32],m=_[F+5-32],x=_[F+6-32],B=_[F+7-32];_[F+0+0]=f+t+1>>1,_[F+1+0]=_[F+0+64]=t+o+1>>1,_[F+2+0]=_[F+1+64]=o+u+1>>1,_[F+3+0]=_[F+2+64]=u+g+1>>1,_[F+0+32]=lr(f,t,o),_[F+1+32]=_[F+0+96]=lr(t,o,u),_[F+2+32]=_[F+1+96]=lr(o,u,g),_[F+3+32]=_[F+2+96]=lr(u,g,m),_[F+3+64]=lr(g,m,x),_[F+3+96]=lr(m,x,B)}function Jl(_,F){var f=_[F-1+0],t=_[F-1+32],o=_[F-1+64],u=_[F-1+96];_[F+0+0]=f+t+1>>1,_[F+2+0]=_[F+0+32]=t+o+1>>1,_[F+2+32]=_[F+0+64]=o+u+1>>1,_[F+1+0]=lr(f,t,o),_[F+3+0]=_[F+1+32]=lr(t,o,u),_[F+3+32]=_[F+1+64]=lr(o,u,u),_[F+3+64]=_[F+2+64]=_[F+0+96]=_[F+1+96]=_[F+2+96]=_[F+3+96]=u}function Rc(_,F){var f=_[F-1+0],t=_[F-1+32],o=_[F-1+64],u=_[F-1+96],g=_[F-1-32],m=_[F+0-32],x=_[F+1-32],B=_[F+2-32];_[F+0+0]=_[F+2+32]=f+g+1>>1,_[F+0+32]=_[F+2+64]=t+f+1>>1,_[F+0+64]=_[F+2+96]=o+t+1>>1,_[F+0+96]=u+o+1>>1,_[F+3+0]=lr(m,x,B),_[F+2+0]=lr(g,m,x),_[F+1+0]=_[F+3+32]=lr(f,g,m),_[F+1+32]=_[F+3+64]=lr(t,f,g),_[F+1+64]=_[F+3+96]=lr(o,t,f),_[F+1+96]=lr(u,o,t)}function zc(_,F){var f;for(f=0;8>f;++f)s(_,F+32*f,_,F-32,8)}function gA(_,F){var f;for(f=0;8>f;++f)c(_,F,_[F-1],8),F+=32}function Hs(_,F,f){var t;for(t=0;8>t;++t)c(F,f+32*t,_,8)}function oa(_,F){var f,t=8;for(f=0;8>f;++f)t+=_[F+f-32]+_[F-1+32*f];Hs(t>>4,_,F)}function mA(_,F){var f,t=4;for(f=0;8>f;++f)t+=_[F+f-32];Hs(t>>3,_,F)}function Ia(_,F){var f,t=4;for(f=0;8>f;++f)t+=_[F-1+32*f];Hs(t>>3,_,F)}function Do(_,F){Hs(128,_,F)}function Nn(_,F,f){var t=_[F-f],o=_[F+0],u=3*(o-t)+fl[1020+_[F-2*f]-_[F+f]],g=Vo[112+(u+4>>3)];_[F-f]=nn[255+t+Vo[112+(u+3>>3)]],_[F+0]=nn[255+o-g]}function tc(_,F,f,t){var o=_[F+0],u=_[F+f];return Gi[255+_[F-2*f]-_[F-f]]>t||Gi[255+u-o]>t}function yA(_,F,f,t){return 4*Gi[255+_[F-f]-_[F+0]]+Gi[255+_[F-2*f]-_[F+f]]<=t}function Aa(_,F,f,t,o){var u=_[F-3*f],g=_[F-2*f],m=_[F-f],x=_[F+0],B=_[F+f],E=_[F+2*f],k=_[F+3*f];return 4*Gi[255+m-x]+Gi[255+g-B]>t?0:Gi[255+_[F-4*f]-u]<=o&&Gi[255+u-g]<=o&&Gi[255+g-m]<=o&&Gi[255+k-E]<=o&&Gi[255+E-B]<=o&&Gi[255+B-x]<=o}function Vs(_,F,f,t){var o=2*t+1;for(t=0;16>t;++t)yA(_,F+t,f,o)&&Nn(_,F+t,f)}function Qr(_,F,f,t){var o=2*t+1;for(t=0;16>t;++t)yA(_,F+t*f,1,o)&&Nn(_,F+t*f,1)}function xs(_,F,f,t){var o;for(o=3;0<o;--o)Vs(_,F+=4*f,f,t)}function Hc(_,F,f,t){var o;for(o=3;0<o;--o)Qr(_,F+=4,f,t)}function ss(_,F,f,t,o,u,g,m){for(u=2*u+1;0<o--;){if(Aa(_,F,f,u,g))if(tc(_,F,f,m))Nn(_,F,f);else{var x=_,B=F,E=f,k=x[B-2*E],N=x[B-E],D=x[B+0],j=x[B+E],G=x[B+2*E],H=27*(nt=fl[1020+3*(D-N)+fl[1020+k-j]])+63>>7,W=18*nt+63>>7,nt=9*nt+63>>7;x[B-3*E]=nn[255+x[B-3*E]+nt],x[B-2*E]=nn[255+k+W],x[B-E]=nn[255+N+H],x[B+0]=nn[255+D-H],x[B+E]=nn[255+j-W],x[B+2*E]=nn[255+G-nt]}F+=t}}function js(_,F,f,t,o,u,g,m){for(u=2*u+1;0<o--;){if(Aa(_,F,f,u,g))if(tc(_,F,f,m))Nn(_,F,f);else{var x=_,B=F,E=f,k=x[B-E],N=x[B+0],D=x[B+E],j=Vo[112+((G=3*(N-k))+4>>3)],G=Vo[112+(G+3>>3)],H=j+1>>1;x[B-2*E]=nn[255+x[B-2*E]+H],x[B-E]=nn[255+k+G],x[B+0]=nn[255+N-j],x[B+E]=nn[255+D-H]}F+=t}}function vA(_,F,f,t,o,u){ss(_,F,f,1,16,t,o,u)}function No(_,F,f,t,o,u){ss(_,F,1,f,16,t,o,u)}function ec(_,F,f,t,o,u){var g;for(g=3;0<g;--g)js(_,F+=4*f,f,1,16,t,o,u)}function Ya(_,F,f,t,o,u){var g;for(g=3;0<g;--g)js(_,F+=4,1,f,16,t,o,u)}function rc(_,F,f,t,o,u,g,m){ss(_,F,o,1,8,u,g,m),ss(f,t,o,1,8,u,g,m)}function wA(_,F,f,t,o,u,g,m){ss(_,F,1,o,8,u,g,m),ss(f,t,1,o,8,u,g,m)}function _A(_,F,f,t,o,u,g,m){js(_,F+4*o,o,1,8,u,g,m),js(f,t+4*o,o,1,8,u,g,m)}function cl(_,F,f,t,o,u,g,m){js(_,F+4,1,o,8,u,g,m),js(f,t+4,1,o,8,u,g,m)}function Bs(){this.ba=new si,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new yt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function bA(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function ul(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function hl(){this.ua=0,this.Wa=new rt,this.vb=new rt,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new vt,this.yc=new ut}function Oo(){this.xb=this.a=0,this.l=new bs,this.ca=new si,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new et,this.Pb=0,this.wd=new et,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new hl,this.ab=0,this.gc=d(4,ul),this.Oc=0}function xA(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new bs,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function la(_,F,f,t,o,u,g){for(_=_==null?0:_[F+0],F=0;F<g;++F)o[u+F]=_+f[t+F]&255,_=o[u+F]}function dl(_,F,f,t,o,u,g){var m;if(_==null)la(null,null,f,t,o,u,g);else for(m=0;m<g;++m)o[u+m]=_[F+m]+f[t+m]&255}function Ja(_,F,f,t,o,u,g){if(_==null)la(null,null,f,t,o,u,g);else{var m,x=_[F+0],B=x,E=x;for(m=0;m<g;++m)B=E+(x=_[F+m])-B,E=f[t+m]+(-256&B?0>B?0:255:B)&255,B=x,o[u+m]=E}}function BA(_,F,f,t){var o=F.width,u=F.o;if(e(_!=null&&F!=null),0>f||0>=t||f+t>u)return null;if(!_.Cc){if(_.ga==null){var g;if(_.ga=new xA,(g=_.ga==null)||(g=F.width*F.o,e(_.Gb.length==0),_.Gb=h(g),_.Uc=0,_.Gb==null?g=0:(_.mb=_.Gb,_.nb=_.Uc,_.rc=null,g=1),g=!g),!g){g=_.ga;var m=_.Fa,x=_.P,B=_.qc,E=_.mb,k=_.nb,N=x+1,D=B-1,j=g.l;if(e(m!=null&&E!=null&&F!=null),va[0]=null,va[1]=la,va[2]=dl,va[3]=Ja,g.ca=E,g.tb=k,g.c=F.width,g.i=F.height,e(0<g.c&&0<g.i),1>=B)F=0;else if(g.$a=m[x+0]>>0&3,g.Z=m[x+0]>>2&3,g.Lc=m[x+0]>>4&3,x=m[x+0]>>6&3,0>g.$a||1<g.$a||4<=g.Z||1<g.Lc||x)F=0;else if(j.put=Qt,j.ac=ft,j.bc=Nt,j.ma=g,j.width=F.width,j.height=F.height,j.Da=F.Da,j.v=F.v,j.va=F.va,j.j=F.j,j.o=F.o,g.$a)t:{e(g.$a==1),F=$r();e:for(;;){if(F==null){F=0;break t}if(e(g!=null),g.mc=F,F.c=g.c,F.i=g.i,F.l=g.l,F.l.ma=g,F.l.width=g.c,F.l.height=g.i,F.a=0,zt(F.m,m,N,D),!gr(g.c,g.i,1,F,null)||(F.ab==1&&F.gc[0].hc==3&&Sr(F.s)?(g.ic=1,m=F.c*F.i,F.Ta=null,F.Ua=0,F.V=h(m),F.Ba=0,F.V==null?(F.a=1,F=0):F=1):(g.ic=0,F=zr(F,g.c)),!F))break e;F=1;break t}g.mc=null,F=0}else F=D>=g.c*g.i;g=!F}if(g)return null;_.ga.Lc!=1?_.Ga=0:t=u-f}e(_.ga!=null),e(f+t<=u);t:{if(F=(m=_.ga).c,u=m.l.o,m.$a==0){if(N=_.rc,D=_.Vc,j=_.Fa,x=_.P+1+f*F,B=_.mb,E=_.nb+f*F,e(x<=_.P+_.qc),m.Z!=0)for(e(va[m.Z]!=null),g=0;g<t;++g)va[m.Z](N,D,j,x,B,E,F),N=B,D=E,E+=F,x+=F;else for(g=0;g<t;++g)s(B,E,j,x,F),N=B,D=E,E+=F,x+=F;_.rc=N,_.Vc=D}else{if(e(m.mc!=null),F=f+t,e((g=m.mc)!=null),e(F<=g.i),g.C>=F)F=1;else if(m.ic||qt(),m.ic){m=g.V,N=g.Ba,D=g.c;var G=g.i,H=(j=1,x=g.$/D,B=g.$%D,E=g.m,k=g.s,g.$),W=D*G,nt=D*F,ot=k.wc,ct=H<nt?ue(k,B,x):null;e(H<=W),e(F<=G),e(Sr(k));e:for(;;){for(;!E.h&&H<nt;){if(B&ot||(ct=ue(k,B,x)),e(ct!=null),Ot(E),256>(G=ae(ct.G[0],ct.H[0],E)))m[N+H]=G,++H,++B>=D&&(B=0,++x<=F&&!(x%16)&&br(g,x));else{if(!(280>G)){j=0;break e}G=Et(G-256,E);var At,gt=ae(ct.G[4],ct.H[4],E);if(Ot(E),!(H>=(gt=te(D,gt=Et(gt,E)))&&W-H>=G)){j=0;break e}for(At=0;At<G;++At)m[N+H+At]=m[N+H+At-gt];for(H+=G,B+=G;B>=D;)B-=D,++x<=F&&!(x%16)&&br(g,x);H<nt&&B&ot&&(ct=ue(k,B,x))}e(E.h==_t(E))}br(g,x>F?F:x);break e}!j||E.h&&H<W?(j=0,g.a=E.h?5:3):g.$=H,F=j}else F=Ar(g,g.V,g.Ba,g.c,g.i,F,Jr);if(!F){t=0;break t}}f+t>=u&&(_.Cc=1),t=1}if(!t)return null;if(_.Cc&&((t=_.ga)!=null&&(t.mc=null),_.ga=null,0<_.Ga))return alert("todo:WebPDequantizeLevels"),null}return _.nb+f*o}function Q(_,F,f,t,o,u){for(;0<o--;){var g,m=_,x=F+(f?1:0),B=_,E=F+(f?0:3);for(g=0;g<t;++g){var k=B[E+4*g];k!=255&&(k*=32897,m[x+4*g+0]=m[x+4*g+0]*k>>23,m[x+4*g+1]=m[x+4*g+1]*k>>23,m[x+4*g+2]=m[x+4*g+2]*k>>23)}F+=u}}function J(_,F,f,t,o){for(;0<t--;){var u;for(u=0;u<f;++u){var g=_[F+2*u+0],m=15&(B=_[F+2*u+1]),x=4369*m,B=(240&B|B>>4)*x>>16;_[F+2*u+0]=(240&g|g>>4)*x>>16&240|(15&g|g<<4)*x>>16>>4&15,_[F+2*u+1]=240&B|m}F+=o}}function bt(_,F,f,t,o,u,g,m){var x,B,E=255;for(B=0;B<o;++B){for(x=0;x<t;++x){var k=_[F+x];u[g+4*x]=k,E&=k}F+=f,g+=m}return E!=255}function Dt(_,F,f,t,o){var u;for(u=0;u<o;++u)f[t+u]=_[F+u]>>8}function qt(){En=Q,Dr=J,ti=bt,Mi=Dt}function ne(_,F,f){pt[_]=function(t,o,u,g,m,x,B,E,k,N,D,j,G,H,W,nt,ot){var ct,At=ot-1>>1,gt=m[x+0]|B[E+0]<<16,Tt=k[N+0]|D[j+0]<<16;e(t!=null);var St=3*gt+Tt+131074>>2;for(F(t[o+0],255&St,St>>16,G,H),u!=null&&(St=3*Tt+gt+131074>>2,F(u[g+0],255&St,St>>16,W,nt)),ct=1;ct<=At;++ct){var ee=m[x+ct]|B[E+ct]<<16,Ae=k[N+ct]|D[j+ct]<<16,he=gt+ee+Tt+Ae+524296,ge=he+2*(ee+Tt)>>3;St=ge+gt>>1,gt=(he=he+2*(gt+Ae)>>3)+ee>>1,F(t[o+2*ct-1],255&St,St>>16,G,H+(2*ct-1)*f),F(t[o+2*ct-0],255&gt,gt>>16,G,H+(2*ct-0)*f),u!=null&&(St=he+Tt>>1,gt=ge+Ae>>1,F(u[g+2*ct-1],255&St,St>>16,W,nt+(2*ct-1)*f),F(u[g+2*ct+0],255&gt,gt>>16,W,nt+(2*ct+0)*f)),gt=ee,Tt=Ae}1&ot||(St=3*gt+Tt+131074>>2,F(t[o+ot-1],255&St,St>>16,G,H+(ot-1)*f),u!=null&&(St=3*Tt+gt+131074>>2,F(u[g+ot-1],255&St,St>>16,W,nt+(ot-1)*f)))}}function be(){Cr[IA]=qc,Cr[jo]=nc,Cr[ic]=gd,Cr[Ko]=Wu,Cr[EA]=qo,Cr[gl]=Xc,Cr[oo]=Wc,Cr[TA]=nc,Cr[$o]=Wu,Cr[UA]=qo,Cr[ml]=Xc}function He(_){return _&~ls?0>_?0:255:_>>Zu}function ur(_,F){return He((19077*_>>8)+(26149*F>>8)-14234)}function Ir(_,F,f){return He((19077*_>>8)-(6419*F>>8)-(13320*f>>8)+8708)}function Er(_,F){return He((19077*_>>8)+(33050*F>>8)-17685)}function Or(_,F,f,t,o){t[o+0]=ur(_,f),t[o+1]=Ir(_,F,f),t[o+2]=Er(_,F)}function wi(_,F,f,t,o){t[o+0]=Er(_,F),t[o+1]=Ir(_,F,f),t[o+2]=ur(_,f)}function Ri(_,F,f,t,o){var u=Ir(_,F,f);F=u<<3&224|Er(_,F)>>3,t[o+0]=248&ur(_,f)|u>>5,t[o+1]=F}function kr(_,F,f,t,o){var u=240&Er(_,F)|15;t[o+0]=240&ur(_,f)|Ir(_,F,f)>>4,t[o+1]=u}function Fn(_,F,f,t,o){t[o+0]=255,Or(_,F,f,t,o+1)}function cr(_,F,f,t,o){wi(_,F,f,t,o),t[o+3]=255}function Gn(_,F,f,t,o){Or(_,F,f,t,o),t[o+3]=255}function Vr(_,F){return 0>_?0:_>F?F:_}function jr(_,F,f){pt[_]=function(t,o,u,g,m,x,B,E,k){for(var N=E+(-2&k)*f;E!=N;)F(t[o+0],u[g+0],m[x+0],B,E),F(t[o+1],u[g+0],m[x+0],B,E+f),o+=2,++g,++x,E+=2*f;1&k&&F(t[o+0],u[g+0],m[x+0],B,E)}}function ca(_,F,f){return f==0?_==0?F==0?6:5:F==0?4:0:f}function Ea(_,F,f,t,o){switch(_>>>30){case 3:pa(F,f,t,o,0);break;case 2:Si(F,f,t,o);break;case 1:Ki(F,f,t,o)}}function Ta(_,F){var f,t,o=F.M,u=F.Nb,g=_.oc,m=_.pc+40,x=_.oc,B=_.pc+584,E=_.oc,k=_.pc+600;for(f=0;16>f;++f)g[m+32*f-1]=129;for(f=0;8>f;++f)x[B+32*f-1]=129,E[k+32*f-1]=129;for(0<o?g[m-1-32]=x[B-1-32]=E[k-1-32]=129:(c(g,m-32-1,127,21),c(x,B-32-1,127,9),c(E,k-32-1,127,9)),t=0;t<_.za;++t){var N=F.ya[F.aa+t];if(0<t){for(f=-1;16>f;++f)s(g,m+32*f-4,g,m+32*f+12,4);for(f=-1;8>f;++f)s(x,B+32*f-4,x,B+32*f+4,4),s(E,k+32*f-4,E,k+32*f+4,4)}var D=_.Gd,j=_.Hd+t,G=N.ad,H=N.Hc;if(0<o&&(s(g,m-32,D[j].y,0,16),s(x,B-32,D[j].f,0,8),s(E,k-32,D[j].ea,0,8)),N.Za){var W=g,nt=m-32+16;for(0<o&&(t>=_.za-1?c(W,nt,D[j].y[15],4):s(W,nt,D[j+1].y,0,4)),f=0;4>f;f++)W[nt+128+f]=W[nt+256+f]=W[nt+384+f]=W[nt+0+f];for(f=0;16>f;++f,H<<=2)W=g,nt=m+Ys[f],As[N.Ob[f]](W,nt),Ea(H,G,16*+f,W,nt)}else if(W=ca(t,o,N.Ob[0]),Zs[W](g,m),H!=0)for(f=0;16>f;++f,H<<=2)Ea(H,G,16*+f,g,m+Ys[f]);for(f=N.Gc,W=ca(t,o,N.Dd),ya[W](x,B),ya[W](E,k),H=G,W=x,nt=B,255&(N=f>>0)&&(170&N?no(H,256,W,nt):vn(H,256,W,nt)),N=E,H=k,255&(f>>=8)&&(170&f?no(G,320,N,H):vn(G,320,N,H)),o<_.Ub-1&&(s(D[j].y,0,g,m+480,16),s(D[j].f,0,x,B+224,8),s(D[j].ea,0,E,k+224,8)),f=8*u*_.B,D=_.sa,j=_.ta+16*t+16*u*_.R,G=_.qa,N=_.ra+8*t+f,H=_.Ha,W=_.Ia+8*t+f,f=0;16>f;++f)s(D,j+f*_.R,g,m+32*f,16);for(f=0;8>f;++f)s(G,N+f*_.B,x,B+32*f,8),s(H,W+f*_.B,E,k+32*f,8)}}function to(_,F,f,t,o,u,g,m,x){var B=[0],E=[0],k=0,N=x!=null?x.kd:0,D=x??new bA;if(_==null||12>f)return 7;D.data=_,D.w=F,D.ha=f,F=[F],f=[f],D.gb=[D.gb];t:{var j=F,G=f,H=D.gb;if(e(_!=null),e(G!=null),e(H!=null),H[0]=0,12<=G[0]&&!i(_,j[0],"RIFF")){if(i(_,j[0]+8,"WEBP")){H=3;break t}var W=Ee(_,j[0]+4);if(12>W||4294967286<W){H=3;break t}if(N&&W>G[0]-8){H=7;break t}H[0]=W,j[0]+=12,G[0]-=12}H=0}if(H!=0)return H;for(W=0<D.gb[0],f=f[0];;){t:{var nt=_;G=F,H=f;var ot=B,ct=E,At=j=[0];if((St=k=[k])[0]=0,8>H[0])H=7;else{if(!i(nt,G[0],"VP8X")){if(Ee(nt,G[0]+4)!=10){H=3;break t}if(18>H[0]){H=7;break t}var gt=Ee(nt,G[0]+8),Tt=1+Te(nt,G[0]+12);if(2147483648<=Tt*(nt=1+Te(nt,G[0]+15))){H=3;break t}At!=null&&(At[0]=gt),ot!=null&&(ot[0]=Tt),ct!=null&&(ct[0]=nt),G[0]+=18,H[0]-=18,St[0]=1}H=0}}if(k=k[0],j=j[0],H!=0)return H;if(G=!!(2&j),!W&&k)return 3;if(u!=null&&(u[0]=!!(16&j)),g!=null&&(g[0]=G),m!=null&&(m[0]=0),g=B[0],j=E[0],k&&G&&x==null){H=0;break}if(4>f){H=7;break}if(W&&k||!W&&!k&&!i(_,F[0],"ALPH")){f=[f],D.na=[D.na],D.P=[D.P],D.Sa=[D.Sa];t:{gt=_,H=F,W=f;var St=D.gb;ot=D.na,ct=D.P,At=D.Sa,Tt=22,e(gt!=null),e(W!=null),nt=H[0];var ee=W[0];for(e(ot!=null),e(At!=null),ot[0]=null,ct[0]=null,At[0]=0;;){if(H[0]=nt,W[0]=ee,8>ee){H=7;break t}var Ae=Ee(gt,nt+4);if(4294967286<Ae){H=3;break t}var he=8+Ae+1&-2;if(Tt+=he,0<St&&Tt>St){H=3;break t}if(!i(gt,nt,"VP8 ")||!i(gt,nt,"VP8L")){H=0;break t}if(ee[0]<he){H=7;break t}i(gt,nt,"ALPH")||(ot[0]=gt,ct[0]=nt+8,At[0]=Ae),nt+=he,ee-=he}}if(f=f[0],D.na=D.na[0],D.P=D.P[0],D.Sa=D.Sa[0],H!=0)break}f=[f],D.Ja=[D.Ja],D.xa=[D.xa];t:if(St=_,H=F,W=f,ot=D.gb[0],ct=D.Ja,At=D.xa,gt=H[0],nt=!i(St,gt,"VP8 "),Tt=!i(St,gt,"VP8L"),e(St!=null),e(W!=null),e(ct!=null),e(At!=null),8>W[0])H=7;else{if(nt||Tt){if(St=Ee(St,gt+4),12<=ot&&St>ot-12){H=3;break t}if(N&&St>W[0]-8){H=7;break t}ct[0]=St,H[0]+=8,W[0]-=8,At[0]=Tt}else At[0]=5<=W[0]&&St[gt+0]==47&&!(St[gt+4]>>5),ct[0]=W[0];H=0}if(f=f[0],D.Ja=D.Ja[0],D.xa=D.xa[0],F=F[0],H!=0)break;if(4294967286<D.Ja)return 3;if(m==null||G||(m[0]=D.xa?2:1),g=[g],j=[j],D.xa){if(5>f){H=7;break}m=g,N=j,G=u,_==null||5>f?_=0:5<=f&&_[F+0]==47&&!(_[F+4]>>5)?(W=[0],St=[0],ot=[0],zt(ct=new et,_,F,f),Pt(ct,W,St,ot)?(m!=null&&(m[0]=W[0]),N!=null&&(N[0]=St[0]),G!=null&&(G[0]=ot[0]),_=1):_=0):_=0}else{if(10>f){H=7;break}m=j,_==null||10>f||!$n(_,F+3,f-3)?_=0:(N=_[F+0]|_[F+1]<<8|_[F+2]<<16,G=16383&(_[F+7]<<8|_[F+6]),_=16383&(_[F+9]<<8|_[F+8]),1&N||3<(N>>1&7)||!(N>>4&1)||N>>5>=D.Ja||!G||!_?_=0:(g&&(g[0]=G),m&&(m[0]=_),_=1))}if(!_||(g=g[0],j=j[0],k&&(B[0]!=g||E[0]!=j)))return 3;x!=null&&(x[0]=D,x.offset=F-x.w,e(4294967286>F-x.w),e(x.offset==x.ha-f));break}return H==0||H==7&&k&&x==null?(u!=null&&(u[0]|=D.na!=null&&0<D.na.length),t!=null&&(t[0]=g),o!=null&&(o[0]=j),0):H}function Ks(_,F,f){var t=F.width,o=F.height,u=0,g=0,m=t,x=o;if(F.Da=_!=null&&0<_.Da,F.Da&&(m=_.cd,x=_.bd,u=_.v,g=_.j,11>f||(u&=-2,g&=-2),0>u||0>g||0>=m||0>=x||u+m>t||g+x>o))return 0;if(F.v=u,F.j=g,F.va=u+m,F.o=g+x,F.U=m,F.T=x,F.da=_!=null&&0<_.da,F.da){if(!dr(m,x,f=[_.ib],u=[_.hb]))return 0;F.ib=f[0],F.hb=u[0]}return F.ob=_!=null&&_.ob,F.Kb=_==null||!_.Sd,F.da&&(F.ob=F.ib<3*t/4&&F.hb<3*o/4,F.Kb=0),1}function ua(_){if(_==null)return 2;if(11>_.S){var F=_.f.RGBA;F.fb+=(_.height-1)*F.A,F.A=-F.A}else F=_.f.kb,_=_.height,F.O+=(_-1)*F.fa,F.fa=-F.fa,F.N+=(_-1>>1)*F.Ab,F.Ab=-F.Ab,F.W+=(_-1>>1)*F.Db,F.Db=-F.Db,F.F!=null&&(F.J+=(_-1)*F.lb,F.lb=-F.lb);return 0}function mn(_,F,f,t){if(t==null||0>=_||0>=F)return 2;if(f!=null){if(f.Da){var o=f.cd,u=f.bd,g=-2&f.v,m=-2&f.j;if(0>g||0>m||0>=o||0>=u||g+o>_||m+u>F)return 2;_=o,F=u}if(f.da){if(!dr(_,F,o=[f.ib],u=[f.hb]))return 2;_=o[0],F=u[0]}}t.width=_,t.height=F;t:{var x=t.width,B=t.height;if(_=t.S,0>=x||0>=B||!(_>=IA&&13>_))_=2;else{if(0>=t.Rd&&t.sd==null){g=u=o=F=0;var E=(m=x*xl[_])*B;if(11>_||(u=(B+1)/2*(F=(x+1)/2),_==12&&(g=(o=x)*B)),(B=h(E+2*u+g))==null){_=1;break t}t.sd=B,11>_?((x=t.f.RGBA).eb=B,x.fb=0,x.A=m,x.size=E):((x=t.f.kb).y=B,x.O=0,x.fa=m,x.Fd=E,x.f=B,x.N=0+E,x.Ab=F,x.Cd=u,x.ea=B,x.W=0+E+u,x.Db=F,x.Ed=u,_==12&&(x.F=B,x.J=0+E+2*u),x.Tc=g,x.lb=o)}if(F=1,o=t.S,u=t.width,g=t.height,o>=IA&&13>o)if(11>o)_=t.f.RGBA,F&=(m=Math.abs(_.A))*(g-1)+u<=_.size,F&=m>=u*xl[o],F&=_.eb!=null;else{_=t.f.kb,m=(u+1)/2,E=(g+1)/2,x=Math.abs(_.fa),B=Math.abs(_.Ab);var k=Math.abs(_.Db),N=Math.abs(_.lb),D=N*(g-1)+u;F&=x*(g-1)+u<=_.Fd,F&=B*(E-1)+m<=_.Cd,F=(F&=k*(E-1)+m<=_.Ed)&x>=u&B>=m&k>=m,F&=_.y!=null,F&=_.f!=null,F&=_.ea!=null,o==12&&(F&=N>=u,F&=D<=_.Tc,F&=_.F!=null)}else F=0;_=F?0:2}}return _!=0||f!=null&&f.fd&&(_=ua(t)),_}var Wi=64,eo=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],ro=24,Cs=32,Ua=8,en=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];fe("Predictor0","PredictorAdd0"),pt.Predictor0=function(){return 4278190080},pt.Predictor1=function(_){return _},pt.Predictor2=function(_,F,f){return F[f+0]},pt.Predictor3=function(_,F,f){return F[f+1]},pt.Predictor4=function(_,F,f){return F[f-1]},pt.Predictor5=function(_,F,f){return Se(Se(_,F[f+1]),F[f+0])},pt.Predictor6=function(_,F,f){return Se(_,F[f-1])},pt.Predictor7=function(_,F,f){return Se(_,F[f+0])},pt.Predictor8=function(_,F,f){return Se(F[f-1],F[f+0])},pt.Predictor9=function(_,F,f){return Se(F[f+0],F[f+1])},pt.Predictor10=function(_,F,f){return Se(Se(_,F[f-1]),Se(F[f+0],F[f+1]))},pt.Predictor11=function(_,F,f){var t=F[f+0];return 0>=ar(t>>24&255,_>>24&255,(F=F[f-1])>>24&255)+ar(t>>16&255,_>>16&255,F>>16&255)+ar(t>>8&255,_>>8&255,F>>8&255)+ar(255&t,255&_,255&F)?t:_},pt.Predictor12=function(_,F,f){var t=F[f+0];return(Re((_>>24&255)+(t>>24&255)-((F=F[f-1])>>24&255))<<24|Re((_>>16&255)+(t>>16&255)-(F>>16&255))<<16|Re((_>>8&255)+(t>>8&255)-(F>>8&255))<<8|Re((255&_)+(255&t)-(255&F)))>>>0},pt.Predictor13=function(_,F,f){var t=F[f-1];return(We((_=Se(_,F[f+0]))>>24&255,t>>24&255)<<24|We(_>>16&255,t>>16&255)<<16|We(_>>8&255,t>>8&255)<<8|We(_>>0&255,t>>0&255))>>>0};var io=pt.PredictorAdd0;pt.PredictorAdd1=wr,fe("Predictor2","PredictorAdd2"),fe("Predictor3","PredictorAdd3"),fe("Predictor4","PredictorAdd4"),fe("Predictor5","PredictorAdd5"),fe("Predictor6","PredictorAdd6"),fe("Predictor7","PredictorAdd7"),fe("Predictor8","PredictorAdd8"),fe("Predictor9","PredictorAdd9"),fe("Predictor10","PredictorAdd10"),fe("Predictor11","PredictorAdd11"),fe("Predictor12","PredictorAdd12"),fe("Predictor13","PredictorAdd13");var La=pt.PredictorAdd2;or("ColorIndexInverseTransform","MapARGB","32b",function(_){return _>>8&255},function(_){return _}),or("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(_){return _},function(_){return _>>8&255});var Ro,yn=pt.ColorIndexInverseTransform,$s=pt.MapARGB,pl=pt.VP8LColorIndexInverseTransformAlpha,CA=pt.MapAlpha,Mr=pt.VP8LPredictorsAdd=[];Mr.length=16,(pt.VP8LPredictors=[]).length=16,(pt.VP8LPredictorsAdd_C=[]).length=16,(pt.VP8LPredictors_C=[]).length=16;var ha,qn,Sn,as,da,Fs,zo,pa,Si,no,Ki,vn,Gs,FA,fa,qs,ga,Xs,Pa,SA,so,Ws,Ho,In,En,Dr,ti,Mi,$i=h(511),ai=h(2041),On=h(225),rn=h(767),ao=0,fl=ai,Vo=On,nn=rn,Gi=$i,IA=0,jo=1,ic=2,Ko=3,EA=4,gl=5,oo=6,TA=7,$o=8,UA=9,ml=10,Vc=[2,3,7],jc=[3,3,11],yl=[280,256,256,256,40],LA=[0,1,1,1,0],qu=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Ss=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],ma=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Kc=8,os=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Qa=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],vl=null,fd=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Xu=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],$c=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Gc=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],PA=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Is=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Oe=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Zs=[],As=[],ya=[],QA=1,Go=2,va=[],Cr=[];ne("UpsampleRgbLinePair",Or,3),ne("UpsampleBgrLinePair",wi,3),ne("UpsampleRgbaLinePair",Gn,4),ne("UpsampleBgraLinePair",cr,4),ne("UpsampleArgbLinePair",Fn,4),ne("UpsampleRgba4444LinePair",kr,2),ne("UpsampleRgb565LinePair",Ri,2);var qc=pt.UpsampleRgbLinePair,gd=pt.UpsampleBgrLinePair,nc=pt.UpsampleRgbaLinePair,Wu=pt.UpsampleBgraLinePair,qo=pt.UpsampleArgbLinePair,Xc=pt.UpsampleRgba4444LinePair,Wc=pt.UpsampleRgb565LinePair,wl=16,sc=1<<wl-1,Xo=-227,Zc=482,Zu=6,ls=(256<<Zu)-1,ci=0,kA=h(256),ac=h(256),oc=h(256),Yu=h(256),_l=h(Zc-Xo),bl=h(Zc-Xo);jr("YuvToRgbRow",Or,3),jr("YuvToBgrRow",wi,3),jr("YuvToRgbaRow",Gn,4),jr("YuvToBgraRow",cr,4),jr("YuvToArgbRow",Fn,4),jr("YuvToRgba4444Row",kr,2),jr("YuvToRgb565Row",Ri,2);var Ys=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Ao=[0,2,8],Ge=[8,7,6,4,4,2,2,2,1,1,1,1],hr=1;this.WebPDecodeRGBA=function(_,F,f,t,o){var u=jo,g=new Bs,m=new si;g.ba=m,m.S=u,m.width=[m.width],m.height=[m.height];var x=m.width,B=m.height,E=new Xr;if(E==null||_==null)var k=2;else e(E!=null),k=to(_,F,f,E.width,E.height,E.Pd,E.Qd,E.format,null);if(k!=0?x=0:(x!=null&&(x[0]=E.width[0]),B!=null&&(B[0]=E.height[0]),x=1),x){m.width=m.width[0],m.height=m.height[0],t!=null&&(t[0]=m.width),o!=null&&(o[0]=m.height);t:{if(t=new bs,(o=new bA).data=_,o.w=F,o.ha=f,o.kd=1,F=[0],e(o!=null),((_=to(o.data,o.w,o.ha,null,null,null,F,null,o))==0||_==7)&&F[0]&&(_=4),(F=_)==0){if(e(g!=null),t.data=o.data,t.w=o.w+o.offset,t.ha=o.ha-o.offset,t.put=Qt,t.ac=ft,t.bc=Nt,t.ma=g,o.xa){if((_=$r())==null){g=1;break t}if(function(N,D){var j=[0],G=[0],H=[0];e:for(;;){if(N==null)return 0;if(D==null)return N.a=2,0;if(N.l=D,N.a=0,zt(N.m,D.data,D.w,D.ha),!Pt(N.m,j,G,H)){N.a=3;break e}if(N.xb=Go,D.width=j[0],D.height=G[0],!gr(j[0],G[0],1,N,null))break e;return 1}return e(N.a!=0),0}(_,t)){if(t=(F=mn(t.width,t.height,g.Oa,g.ba))==0){e:{t=_;r:for(;;){if(t==null){t=0;break e}if(e(t.s.yc!=null),e(t.s.Ya!=null),e(0<t.s.Wb),e((f=t.l)!=null),e((o=f.ma)!=null),t.xb!=0){if(t.ca=o.ba,t.tb=o.tb,e(t.ca!=null),!Ks(o.Oa,f,Ko)){t.a=2;break r}if(!zr(t,f.width)||f.da)break r;if((f.da||Qe(t.ca.S))&&qt(),11>t.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),t.ca.f.kb.F!=null&&qt()),t.Pb&&0<t.s.ua&&t.s.vb.X==null&&!Ve(t.s.vb,t.s.Wa.Xa)){t.a=1;break r}t.xb=0}if(!Ar(t,t.V,t.Ba,t.c,t.i,f.o,Xe))break r;o.Dc=t.Ma,t=1;break e}e(t.a!=0),t=0}t=!t}t&&(F=_.a)}else F=_.a}else{if((_=new Qi)==null){g=1;break t}if(_.Fa=o.na,_.P=o.P,_.qc=o.Sa,Fi(_,t)){if((F=mn(t.width,t.height,g.Oa,g.ba))==0){if(_.Aa=0,f=g.Oa,e((o=_)!=null),f!=null){if(0<(x=0>(x=f.Md)?0:100<x?255:255*x/100)){for(B=E=0;4>B;++B)12>(k=o.pb[B]).lc&&(k.ia=x*Ge[0>k.lc?0:k.lc]>>3),E|=k.ia;E&&(alert("todo:VP8InitRandom"),o.ia=1)}o.Ga=f.Id,100<o.Ga?o.Ga=100:0>o.Ga&&(o.Ga=0)}al(_,t)||(F=_.a)}}else F=_.a}F==0&&g.Oa!=null&&g.Oa.fd&&(F=ua(g.ba))}g=F}u=g!=0?null:11>u?m.f.RGBA.eb:m.f.kb.y}else u=null;return u};var xl=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function C(pt,kt){for(var Xt="",st=0;st<4;st++)Xt+=String.fromCharCode(pt[kt++]);return Xt}function I(pt,kt){return(pt[kt+0]<<0|pt[kt+1]<<8|pt[kt+2]<<16)>>>0}function T(pt,kt){return(pt[kt+0]<<0|pt[kt+1]<<8|pt[kt+2]<<16|pt[kt+3]<<24)>>>0}new v;var P=[0],U=[0],V=[],R=new v,Z=n,K=function(pt,kt){var Xt={},st=0,ut=!1,mt=0,vt=0;if(Xt.frames=[],!function(dt,_t,Ct,Ot){for(var Rt=0;Rt<Ot;Rt++)if(dt[_t+Rt]!=Ct.charCodeAt(Rt))return!0;return!1}(pt,kt,"RIFF",4)){var $t,Vt;for(T(pt,kt+=4),kt+=8;kt<pt.length;){var jt=C(pt,kt),zt=T(pt,kt+=4);kt+=4;var Wt=zt+(1&zt);switch(jt){case"VP8 ":case"VP8L":Xt.frames[st]===void 0&&(Xt.frames[st]={}),(et=Xt.frames[st]).src_off=ut?vt:kt-8,et.src_size=mt+zt+8,st++,ut&&(ut=!1,mt=0,vt=0);break;case"VP8X":(et=Xt.header={}).feature_flags=pt[kt];var Yt=kt+4;et.canvas_width=1+I(pt,Yt),Yt+=3,et.canvas_height=1+I(pt,Yt),Yt+=3;break;case"ALPH":ut=!0,mt=Wt+8,vt=kt-8;break;case"ANIM":(et=Xt.header).bgcolor=T(pt,kt),Yt=kt+4,et.loop_count=($t=pt)[(Vt=Yt)+0]<<0|$t[Vt+1]<<8,Yt+=2;break;case"ANMF":var me,et;(et=Xt.frames[st]={}).offset_x=2*I(pt,kt),kt+=3,et.offset_y=2*I(pt,kt),kt+=3,et.width=1+I(pt,kt),kt+=3,et.height=1+I(pt,kt),kt+=3,et.duration=I(pt,kt),kt+=3,me=pt[kt++],et.dispose=1&me,et.blend=me>>1&1}jt!="ANMF"&&(kt+=Wt)}return Xt}}(Z,0);K.response=Z,K.rgbaoutput=!0,K.dataurl=!1;var tt=K.header?K.header:null,ht=K.frames?K.frames:null;if(tt){tt.loop_counter=tt.loop_count,P=[tt.canvas_height],U=[tt.canvas_width];for(var Bt=0;Bt<ht.length&&ht[Bt].blend!=0;Bt++);}var Lt=ht[0],Ut=R.WebPDecodeRGBA(Z,Lt.src_off,Lt.src_size,U,P);Lt.rgba=Ut,Lt.imgwidth=U[0],Lt.imgheight=P[0];for(var xt=0;xt<U[0]*P[0]*4;xt++)V[xt]=Ut[xt];return this.width=U,this.height=P,this.data=V,this}(function(n){var e=function(){return typeof Cg=="function"},i=function(P,U,V,R){var Z=4,K=d;switch(R){case n.image_compression.FAST:Z=1,K=h;break;case n.image_compression.MEDIUM:Z=6,K=A;break;case n.image_compression.SLOW:Z=9,K=v}P=s(P,U,V,K);var tt=Cg(P,{level:Z});return n.__addimage__.arrayBufferToBinaryString(tt)},s=function(P,U,V,R){for(var Z,K,tt,ht=P.length/U,Bt=new Uint8Array(P.length+ht),Lt=I(),Ut=0;Ut<ht;Ut+=1){if(tt=Ut*U,Z=P.subarray(tt,tt+U),R)Bt.set(R(Z,V,K),tt+Ut);else{for(var xt,pt=Lt.length,kt=[];xt<pt;xt+=1)kt[xt]=Lt[xt](Z,V,K);var Xt=T(kt.concat());Bt.set(kt[Xt],tt+Ut)}K=Z}return Bt},c=function(P){var U=Array.apply([],P);return U.unshift(0),U},h=function(P,U){var V,R=[],Z=P.length;R[0]=1;for(var K=0;K<Z;K+=1)V=P[K-U]||0,R[K+1]=P[K]-V+256&255;return R},d=function(P,U,V){var R,Z=[],K=P.length;Z[0]=2;for(var tt=0;tt<K;tt+=1)R=V&&V[tt]||0,Z[tt+1]=P[tt]-R+256&255;return Z},A=function(P,U,V){var R,Z,K=[],tt=P.length;K[0]=3;for(var ht=0;ht<tt;ht+=1)R=P[ht-U]||0,Z=V&&V[ht]||0,K[ht+1]=P[ht]+256-(R+Z>>>1)&255;return K},v=function(P,U,V){var R,Z,K,tt,ht=[],Bt=P.length;ht[0]=4;for(var Lt=0;Lt<Bt;Lt+=1)R=P[Lt-U]||0,Z=V&&V[Lt]||0,K=V&&V[Lt-U]||0,tt=C(R,Z,K),ht[Lt+1]=P[Lt]-tt+256&255;return ht},C=function(P,U,V){if(P===U&&U===V)return P;var R=Math.abs(U-V),Z=Math.abs(P-V),K=Math.abs(P+U-V-V);return R<=Z&&R<=K?P:Z<=K?U:V},I=function(){return[c,h,d,A,v]},T=function(P){var U=P.map(function(V){return V.reduce(function(R,Z){return R+Math.abs(Z)},0)});return U.indexOf(Math.min.apply(null,U))};n.processPNG=function(P,U,V,R){var Z,K,tt,ht,Bt,Lt,Ut,xt,pt,kt,Xt,st,ut,mt,vt,$t=this.decode.FLATE_DECODE,Vt="";if(this.__addimage__.isArrayBuffer(P)&&(P=new Uint8Array(P)),this.__addimage__.isArrayBufferView(P)){if(P=(tt=new a3(P)).imgData,K=tt.bits,Z=tt.colorSpace,Bt=tt.colors,[4,6].indexOf(tt.colorType)!==-1){if(tt.bits===8){pt=(xt=tt.pixelBitlength==32?new Uint32Array(tt.decodePixels().buffer):tt.pixelBitlength==16?new Uint16Array(tt.decodePixels().buffer):new Uint8Array(tt.decodePixels().buffer)).length,Xt=new Uint8Array(pt*tt.colors),kt=new Uint8Array(pt);var jt,zt=tt.pixelBitlength-tt.bits;for(mt=0,vt=0;mt<pt;mt++){for(ut=xt[mt],jt=0;jt<zt;)Xt[vt++]=ut>>>jt&255,jt+=tt.bits;kt[mt]=ut>>>jt&255}}if(tt.bits===16){pt=(xt=new Uint32Array(tt.decodePixels().buffer)).length,Xt=new Uint8Array(pt*(32/tt.pixelBitlength)*tt.colors),kt=new Uint8Array(pt*(32/tt.pixelBitlength)),st=tt.colors>1,mt=0,vt=0;for(var Wt=0;mt<pt;)ut=xt[mt++],Xt[vt++]=ut>>>0&255,st&&(Xt[vt++]=ut>>>16&255,ut=xt[mt++],Xt[vt++]=ut>>>0&255),kt[Wt++]=ut>>>16&255;K=8}R!==n.image_compression.NONE&&e()?(P=i(Xt,tt.width*tt.colors,tt.colors,R),Ut=i(kt,tt.width,1,R)):(P=Xt,Ut=kt,$t=void 0)}if(tt.colorType===3&&(Z=this.color_spaces.INDEXED,Lt=tt.palette,tt.transparency.indexed)){var Yt=tt.transparency.indexed,me=0;for(mt=0,pt=Yt.length;mt<pt;++mt)me+=Yt[mt];if((me/=255)===pt-1&&Yt.indexOf(0)!==-1)ht=[Yt.indexOf(0)];else if(me!==pt){for(xt=tt.decodePixels(),kt=new Uint8Array(xt.length),mt=0,pt=xt.length;mt<pt;mt++)kt[mt]=Yt[xt[mt]];Ut=i(kt,tt.width,1)}}var et=function(dt){var _t;switch(dt){case n.image_compression.FAST:_t=11;break;case n.image_compression.MEDIUM:_t=13;break;case n.image_compression.SLOW:_t=14;break;default:_t=12}return _t}(R);return $t===this.decode.FLATE_DECODE&&(Vt="/Predictor "+et+" "),Vt+="/Colors "+Bt+" /BitsPerComponent "+K+" /Columns "+tt.width,(this.__addimage__.isArrayBuffer(P)||this.__addimage__.isArrayBufferView(P))&&(P=this.__addimage__.arrayBufferToBinaryString(P)),(Ut&&this.__addimage__.isArrayBuffer(Ut)||this.__addimage__.isArrayBufferView(Ut))&&(Ut=this.__addimage__.arrayBufferToBinaryString(Ut)),{alias:V,data:P,index:U,filter:$t,decodeParameters:Vt,transparency:ht,palette:Lt,sMask:Ut,predictor:et,width:tt.width,height:tt.height,bitsPerComponent:K,colorSpace:Z}}}})(Ur.API),function(n){n.processGIF89A=function(e,i,s,c){var h=new o3(e),d=h.width,A=h.height,v=[];h.decodeAndBlitFrameRGBA(0,v);var C={data:v,width:d,height:A},I=new Dg(100).encode(C,100);return n.processJPEG.call(this,I,i,s,c)},n.processGIF87A=n.processGIF89A}(Ur.API),wo.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var n=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(n);for(var e=0;e<n;e++){var i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),c=this.datav.getUint8(this.pos++,!0),h=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:c,green:s,blue:i,quad:h}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},wo.prototype.parseBGR=function(){this.pos=this.offset;try{var n="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[n]()}catch(i){Ti.log("bit decode error:"+i)}},wo.prototype.bit1=function(){var n,e=Math.ceil(this.width/8),i=e%4;for(n=this.height-1;n>=0;n--){for(var s=this.bottom_up?n:this.height-1-n,c=0;c<e;c++)for(var h=this.datav.getUint8(this.pos++,!0),d=s*this.width*4+8*c*4,A=0;A<8&&8*c+A<this.width;A++){var v=this.palette[h>>7-A&1];this.data[d+4*A]=v.blue,this.data[d+4*A+1]=v.green,this.data[d+4*A+2]=v.red,this.data[d+4*A+3]=255}i!==0&&(this.pos+=4-i)}},wo.prototype.bit4=function(){for(var n=Math.ceil(this.width/2),e=n%4,i=this.height-1;i>=0;i--){for(var s=this.bottom_up?i:this.height-1-i,c=0;c<n;c++){var h=this.datav.getUint8(this.pos++,!0),d=s*this.width*4+2*c*4,A=h>>4,v=15&h,C=this.palette[A];if(this.data[d]=C.blue,this.data[d+1]=C.green,this.data[d+2]=C.red,this.data[d+3]=255,2*c+1>=this.width)break;C=this.palette[v],this.data[d+4]=C.blue,this.data[d+4+1]=C.green,this.data[d+4+2]=C.red,this.data[d+4+3]=255}e!==0&&(this.pos+=4-e)}},wo.prototype.bit8=function(){for(var n=this.width%4,e=this.height-1;e>=0;e--){for(var i=this.bottom_up?e:this.height-1-e,s=0;s<this.width;s++){var c=this.datav.getUint8(this.pos++,!0),h=i*this.width*4+4*s;if(c<this.palette.length){var d=this.palette[c];this.data[h]=d.red,this.data[h+1]=d.green,this.data[h+2]=d.blue,this.data[h+3]=255}else this.data[h]=255,this.data[h+1]=255,this.data[h+2]=255,this.data[h+3]=255}n!==0&&(this.pos+=4-n)}},wo.prototype.bit15=function(){for(var n=this.width%3,e=parseInt("11111",2),i=this.height-1;i>=0;i--){for(var s=this.bottom_up?i:this.height-1-i,c=0;c<this.width;c++){var h=this.datav.getUint16(this.pos,!0);this.pos+=2;var d=(h&e)/e*255|0,A=(h>>5&e)/e*255|0,v=(h>>10&e)/e*255|0,C=h>>15?255:0,I=s*this.width*4+4*c;this.data[I]=v,this.data[I+1]=A,this.data[I+2]=d,this.data[I+3]=C}this.pos+=n}},wo.prototype.bit16=function(){for(var n=this.width%3,e=parseInt("11111",2),i=parseInt("111111",2),s=this.height-1;s>=0;s--){for(var c=this.bottom_up?s:this.height-1-s,h=0;h<this.width;h++){var d=this.datav.getUint16(this.pos,!0);this.pos+=2;var A=(d&e)/e*255|0,v=(d>>5&i)/i*255|0,C=(d>>11)/e*255|0,I=c*this.width*4+4*h;this.data[I]=C,this.data[I+1]=v,this.data[I+2]=A,this.data[I+3]=255}this.pos+=n}},wo.prototype.bit24=function(){for(var n=this.height-1;n>=0;n--){for(var e=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var s=this.datav.getUint8(this.pos++,!0),c=this.datav.getUint8(this.pos++,!0),h=this.datav.getUint8(this.pos++,!0),d=e*this.width*4+4*i;this.data[d]=h,this.data[d+1]=c,this.data[d+2]=s,this.data[d+3]=255}this.pos+=this.width%4}},wo.prototype.bit32=function(){for(var n=this.height-1;n>=0;n--)for(var e=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var s=this.datav.getUint8(this.pos++,!0),c=this.datav.getUint8(this.pos++,!0),h=this.datav.getUint8(this.pos++,!0),d=this.datav.getUint8(this.pos++,!0),A=e*this.width*4+4*i;this.data[A]=h,this.data[A+1]=c,this.data[A+2]=s,this.data[A+3]=d}},wo.prototype.getData=function(){return this.data},function(n){n.processBMP=function(e,i,s,c){var h=new wo(e,!1),d=h.width,A=h.height,v={data:h.getData(),width:d,height:A},C=new Dg(100).encode(v,100);return n.processJPEG.call(this,C,i,s,c)}}(Ur.API),Mv.prototype.getData=function(){return this.data},function(n){n.processWEBP=function(e,i,s,c){var h=new Mv(e),d=h.width,A=h.height,v={data:h.getData(),width:d,height:A},C=new Dg(100).encode(v,100);return n.processJPEG.call(this,C,i,s,c)}}(Ur.API),Ur.API.processRGBA=function(n,e,i){for(var s=n.data,c=s.length,h=new Uint8Array(c/4*3),d=new Uint8Array(c/4),A=0,v=0,C=0;C<c;C+=4){var I=s[C],T=s[C+1],P=s[C+2],U=s[C+3];h[A++]=I,h[A++]=T,h[A++]=P,d[v++]=U}var V=this.__addimage__.arrayBufferToBinaryString(h);return{alpha:this.__addimage__.arrayBufferToBinaryString(d),data:V,index:e,alias:i,colorSpace:"DeviceRGB",bitsPerComponent:8,width:n.width,height:n.height}},Ur.API.setLanguage=function(n){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[n]!==void 0&&(this.internal.languageSettings.languageCode=n,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},gu=Ur.API,Jd=gu.getCharWidthsArray=function(n,e){var i,s,c=(e=e||{}).font||this.internal.getFont(),h=e.fontSize||this.internal.getFontSize(),d=e.charSpace||this.internal.getCharSpace(),A=e.widths?e.widths:c.metadata.Unicode.widths,v=A.fof?A.fof:1,C=e.kerning?e.kerning:c.metadata.Unicode.kerning,I=C.fof?C.fof:1,T=e.doKerning!==!1,P=0,U=n.length,V=0,R=A[0]||v,Z=[];for(i=0;i<U;i++)s=n.charCodeAt(i),typeof c.metadata.widthOfString=="function"?Z.push((c.metadata.widthOfGlyph(c.metadata.characterToGlyph(s))+d*(1e3/h)||0)/1e3):(P=T&&Ai(C[s])==="object"&&!isNaN(parseInt(C[s][V],10))?C[s][V]/I:0,Z.push((A[s]||R)/v+P)),V=s;return Z},Lv=gu.getStringUnitWidth=function(n,e){var i=(e=e||{}).fontSize||this.internal.getFontSize(),s=e.font||this.internal.getFont(),c=e.charSpace||this.internal.getCharSpace();return gu.processArabic&&(n=gu.processArabic(n)),typeof s.metadata.widthOfString=="function"?s.metadata.widthOfString(n,i,c)/i:Jd.apply(this,arguments).reduce(function(h,d){return h+d},0)},Pv=function(n,e,i,s){for(var c=[],h=0,d=n.length,A=0;h!==d&&A+e[h]<i;)A+=e[h],h++;c.push(n.slice(0,h));var v=h;for(A=0;h!==d;)A+e[h]>s&&(c.push(n.slice(v,h)),A=0,v=h),A+=e[h],h++;return v!==h&&c.push(n.slice(v,h)),c},Qv=function(n,e,i){i||(i={});var s,c,h,d,A,v,C,I=[],T=[I],P=i.textIndent||0,U=0,V=0,R=n.split(" "),Z=Jd.apply(this,[" ",i])[0];if(v=i.lineIndent===-1?R[0].length+2:i.lineIndent||0){var K=Array(v).join(" "),tt=[];R.map(function(Bt){(Bt=Bt.split(/\s*\n/)).length>1?tt=tt.concat(Bt.map(function(Lt,Ut){return(Ut&&Lt.length?`
`:"")+Lt})):tt.push(Bt[0])}),R=tt,v=Lv.apply(this,[K,i])}for(h=0,d=R.length;h<d;h++){var ht=0;if(s=R[h],v&&s[0]==`
`&&(s=s.substr(1),ht=1),P+U+(V=(c=Jd.apply(this,[s,i])).reduce(function(Bt,Lt){return Bt+Lt},0))>e||ht){if(V>e){for(A=Pv.apply(this,[s,c,e-(P+U),e]),I.push(A.shift()),I=[A.pop()];A.length;)T.push([A.shift()]);V=c.slice(s.length-(I[0]?I[0].length:0)).reduce(function(Bt,Lt){return Bt+Lt},0)}else I=[s];T.push(I),P=V+v,U=Z}else I.push(s),P+=U+V,U=Z}return C=v?function(Bt,Lt){return(Lt?K:"")+Bt.join(" ")}:function(Bt){return Bt.join(" ")},T.map(C)},gu.splitTextToSize=function(n,e,i){var s,c=(i=i||{}).fontSize||this.internal.getFontSize(),h=(function(I){if(I.widths&&I.kerning)return{widths:I.widths,kerning:I.kerning};var T=this.internal.getFont(I.fontName,I.fontStyle);return T.metadata.Unicode?{widths:T.metadata.Unicode.widths||{0:1},kerning:T.metadata.Unicode.kerning||{}}:{font:T.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,i);s=Array.isArray(n)?n:String(n).split(/\r?\n/);var d=1*this.internal.scaleFactor*e/c;h.textIndent=i.textIndent?1*i.textIndent*this.internal.scaleFactor/c:0,h.lineIndent=i.lineIndent;var A,v,C=[];for(A=0,v=s.length;A<v;A++)C=C.concat(Qv.apply(this,[s[A],d,h]));return C},function(n){n.__fontmetrics__=n.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",i={},s={},c=0;c<e.length;c++)i[e[c]]="0123456789abcdef"[c],s["0123456789abcdef"[c]]=e[c];var h=function(T){return"0x"+parseInt(T,10).toString(16)},d=n.__fontmetrics__.compress=function(T){var P,U,V,R,Z=["{"];for(var K in T){if(P=T[K],isNaN(parseInt(K,10))?U="'"+K+"'":(K=parseInt(K,10),U=(U=h(K).slice(2)).slice(0,-1)+s[U.slice(-1)]),typeof P=="number")P<0?(V=h(P).slice(3),R="-"):(V=h(P).slice(2),R=""),V=R+V.slice(0,-1)+s[V.slice(-1)];else{if(Ai(P)!=="object")throw new Error("Don't know what to do with value type "+Ai(P)+".");V=d(P)}Z.push(U+V)}return Z.push("}"),Z.join("")},A=n.__fontmetrics__.uncompress=function(T){if(typeof T!="string")throw new Error("Invalid argument passed to uncompress.");for(var P,U,V,R,Z={},K=1,tt=Z,ht=[],Bt="",Lt="",Ut=T.length-1,xt=1;xt<Ut;xt+=1)(R=T[xt])=="'"?P?(V=P.join(""),P=void 0):P=[]:P?P.push(R):R=="{"?(ht.push([tt,V]),tt={},V=void 0):R=="}"?((U=ht.pop())[0][U[1]]=tt,V=void 0,tt=U[0]):R=="-"?K=-1:V===void 0?i.hasOwnProperty(R)?(Bt+=i[R],V=parseInt(Bt,16)*K,K=1,Bt=""):Bt+=R:i.hasOwnProperty(R)?(Lt+=i[R],tt[V]=parseInt(Lt,16)*K,K=1,V=void 0,Lt=""):Lt+=R;return Z},v={codePages:["WinAnsiEncoding"],WinAnsiEncoding:A("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},C={Unicode:{Courier:v,"Courier-Bold":v,"Courier-BoldOblique":v,"Courier-Oblique":v,Helvetica:v,"Helvetica-Bold":v,"Helvetica-BoldOblique":v,"Helvetica-Oblique":v,"Times-Roman":v,"Times-Bold":v,"Times-BoldItalic":v,"Times-Italic":v}},I={Unicode:{"Courier-Oblique":A("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":A("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":A("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:A("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":A("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":A("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:A("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:A("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":A("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:A("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":A("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":A("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":A("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":A("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};n.events.push(["addFont",function(T){var P=T.font,U=I.Unicode[P.postScriptName];U&&(P.metadata.Unicode={},P.metadata.Unicode.widths=U.widths,P.metadata.Unicode.kerning=U.kerning);var V=C.Unicode[P.postScriptName];V&&(P.metadata.Unicode.encoding=V,P.encoding=V.codePages[0])}])}(Ur.API),function(n){var e=function(i){for(var s=i.length,c=new Uint8Array(s),h=0;h<s;h++)c[h]=i.charCodeAt(h);return c};n.API.events.push(["addFont",function(i){var s=void 0,c=i.font,h=i.instance;if(!c.isStandardFont){if(h===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+c.postScriptName+"').");if(typeof(s=h.existsFileInVFS(c.postScriptName)===!1?h.loadFile(c.postScriptName):h.getFileFromVFS(c.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+c.postScriptName+"').");(function(d,A){A=/^\x00\x01\x00\x00/.test(A)?e(A):e(wh(A)),d.metadata=n.API.TTFFont.open(A),d.metadata.Unicode=d.metadata.Unicode||{encoding:{},kerning:{},widths:[]},d.metadata.glyIdsUsed=[0]})(c,s)}}])}(Ur),function(n){function e(){return(Tr.canvg?Promise.resolve(Tr.canvg):Promise.resolve().then(()=>v7)).catch(function(i){return Promise.reject(new Error("Could not load canvg: "+i))}).then(function(i){return i.default?i.default:i})}Ur.API.addSvgAsImage=function(i,s,c,h,d,A,v,C){if(isNaN(s)||isNaN(c))throw Ti.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(h)||isNaN(d))throw Ti.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var I=document.createElement("canvas");I.width=h,I.height=d;var T=I.getContext("2d");T.fillStyle="#fff",T.fillRect(0,0,I.width,I.height);var P={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},U=this;return e().then(function(V){return V.fromString(T,i,P)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(V){return V.render(P)}).then(function(){U.addImage(I.toDataURL("image/jpeg",1),s,c,h,d,v,C)})}}(),Ur.API.putTotalPages=function(n){var e,i=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(n,"g"),i=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(n,this.internal.getFont()),"g"),i=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var s=1;s<=this.internal.getNumberOfPages();s++)for(var c=0;c<this.internal.pages[s].length;c++)this.internal.pages[s][c]=this.internal.pages[s][c].replace(e,i);return this},Ur.API.viewerPreferences=function(n,e){var i;n=n||{},e=e||!1;var s,c,h,d={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},A=Object.keys(d),v=[],C=0,I=0,T=0;function P(V,R){var Z,K=!1;for(Z=0;Z<V.length;Z+=1)V[Z]===R&&(K=!0);return K}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(d)),this.internal.viewerpreferences.isSubscribed=!1),i=this.internal.viewerpreferences.configuration,n==="reset"||e===!0){var U=A.length;for(T=0;T<U;T+=1)i[A[T]].value=i[A[T]].defaultValue,i[A[T]].explicitSet=!1}if(Ai(n)==="object"){for(c in n)if(h=n[c],P(A,c)&&h!==void 0){if(i[c].type==="boolean"&&typeof h=="boolean")i[c].value=h;else if(i[c].type==="name"&&P(i[c].valueSet,h))i[c].value=h;else if(i[c].type==="integer"&&Number.isInteger(h))i[c].value=h;else if(i[c].type==="array"){for(C=0;C<h.length;C+=1)if(s=!0,h[C].length===1&&typeof h[C][0]=="number")v.push(String(h[C]-1));else if(h[C].length>1){for(I=0;I<h[C].length;I+=1)typeof h[C][I]!="number"&&(s=!1);s===!0&&v.push([h[C][0]-1,h[C][1]-1].join(" "))}i[c].value="["+v.join(" ")+"]"}else i[c].value=i[c].defaultValue;i[c].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var V,R=[];for(V in i)i[V].explicitSet===!0&&(i[V].type==="name"?R.push("/"+V+" /"+i[V].value):R.push("/"+V+" "+i[V].value));R.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+R.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=i,this},function(n){var e=function(){var s='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',c=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),h=unescape(encodeURIComponent(s)),d=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),A=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),v=unescape(encodeURIComponent("</x:xmpmeta>")),C=h.length+d.length+A.length+c.length+v.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+C+" >>"),this.internal.write("stream"),this.internal.write(c+h+d+A+v),this.internal.write("endstream"),this.internal.write("endobj")},i=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};n.addMetadata=function(s,c){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:s,namespaceuri:c||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",i),this.internal.events.subscribe("postPutResources",e)),this}}(Ur.API),function(n){var e=n.API,i=e.pdfEscape16=function(h,d){for(var A,v=d.metadata.Unicode.widths,C=["","0","00","000","0000"],I=[""],T=0,P=h.length;T<P;++T){if(A=d.metadata.characterToGlyph(h.charCodeAt(T)),d.metadata.glyIdsUsed.push(A),d.metadata.toUnicode[A]=h.charCodeAt(T),v.indexOf(A)==-1&&(v.push(A),v.push([parseInt(d.metadata.widthOfGlyph(A),10)])),A=="0")return I.join("");A=A.toString(16),I.push(C[4-A.length],A)}return I.join("")},s=function(h){var d,A,v,C,I,T,P;for(I=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,v=[],T=0,P=(A=Object.keys(h).sort(function(U,V){return U-V})).length;T<P;T++)d=A[T],v.length>=100&&(I+=`
`+v.length+` beginbfchar
`+v.join(`
`)+`
endbfchar`,v=[]),h[d]!==void 0&&h[d]!==null&&typeof h[d].toString=="function"&&(C=("0000"+h[d].toString(16)).slice(-4),d=("0000"+(+d).toString(16)).slice(-4),v.push("<"+d+"><"+C+">"));return v.length&&(I+=`
`+v.length+` beginbfchar
`+v.join(`
`)+`
endbfchar
`),I+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(h){(function(d){var A=d.font,v=d.out,C=d.newObject,I=d.putStream;if(A.metadata instanceof n.API.TTFFont&&A.encoding==="Identity-H"){for(var T=A.metadata.Unicode.widths,P=A.metadata.subset.encode(A.metadata.glyIdsUsed,1),U="",V=0;V<P.length;V++)U+=String.fromCharCode(P[V]);var R=C();I({data:U,addLength1:!0,objectId:R}),v("endobj");var Z=C();I({data:s(A.metadata.toUnicode),addLength1:!0,objectId:Z}),v("endobj");var K=C();v("<<"),v("/Type /FontDescriptor"),v("/FontName /"+lu(A.fontName)),v("/FontFile2 "+R+" 0 R"),v("/FontBBox "+n.API.PDFObject.convert(A.metadata.bbox)),v("/Flags "+A.metadata.flags),v("/StemV "+A.metadata.stemV),v("/ItalicAngle "+A.metadata.italicAngle),v("/Ascent "+A.metadata.ascender),v("/Descent "+A.metadata.decender),v("/CapHeight "+A.metadata.capHeight),v(">>"),v("endobj");var tt=C();v("<<"),v("/Type /Font"),v("/BaseFont /"+lu(A.fontName)),v("/FontDescriptor "+K+" 0 R"),v("/W "+n.API.PDFObject.convert(T)),v("/CIDToGIDMap /Identity"),v("/DW 1000"),v("/Subtype /CIDFontType2"),v("/CIDSystemInfo"),v("<<"),v("/Supplement 0"),v("/Registry (Adobe)"),v("/Ordering ("+A.encoding+")"),v(">>"),v(">>"),v("endobj"),A.objectNumber=C(),v("<<"),v("/Type /Font"),v("/Subtype /Type0"),v("/ToUnicode "+Z+" 0 R"),v("/BaseFont /"+lu(A.fontName)),v("/Encoding /"+A.encoding),v("/DescendantFonts ["+tt+" 0 R]"),v(">>"),v("endobj"),A.isAlreadyPutted=!0}})(h)}]),e.events.push(["putFont",function(h){(function(d){var A=d.font,v=d.out,C=d.newObject,I=d.putStream;if(A.metadata instanceof n.API.TTFFont&&A.encoding==="WinAnsiEncoding"){for(var T=A.metadata.rawData,P="",U=0;U<T.length;U++)P+=String.fromCharCode(T[U]);var V=C();I({data:P,addLength1:!0,objectId:V}),v("endobj");var R=C();I({data:s(A.metadata.toUnicode),addLength1:!0,objectId:R}),v("endobj");var Z=C();v("<<"),v("/Descent "+A.metadata.decender),v("/CapHeight "+A.metadata.capHeight),v("/StemV "+A.metadata.stemV),v("/Type /FontDescriptor"),v("/FontFile2 "+V+" 0 R"),v("/Flags 96"),v("/FontBBox "+n.API.PDFObject.convert(A.metadata.bbox)),v("/FontName /"+lu(A.fontName)),v("/ItalicAngle "+A.metadata.italicAngle),v("/Ascent "+A.metadata.ascender),v(">>"),v("endobj"),A.objectNumber=C();for(var K=0;K<A.metadata.hmtx.widths.length;K++)A.metadata.hmtx.widths[K]=parseInt(A.metadata.hmtx.widths[K]*(1e3/A.metadata.head.unitsPerEm));v("<</Subtype/TrueType/Type/Font/ToUnicode "+R+" 0 R/BaseFont/"+lu(A.fontName)+"/FontDescriptor "+Z+" 0 R/Encoding/"+A.encoding+" /FirstChar 29 /LastChar 255 /Widths "+n.API.PDFObject.convert(A.metadata.hmtx.widths)+">>"),v("endobj"),A.isAlreadyPutted=!0}})(h)}]);var c=function(h){var d,A=h.text||"",v=h.x,C=h.y,I=h.options||{},T=h.mutex||{},P=T.pdfEscape,U=T.activeFontKey,V=T.fonts,R=U,Z="",K=0,tt="",ht=V[R].encoding;if(V[R].encoding!=="Identity-H")return{text:A,x:v,y:C,options:I,mutex:T};for(tt=A,R=U,Array.isArray(A)&&(tt=A[0]),K=0;K<tt.length;K+=1)V[R].metadata.hasOwnProperty("cmap")&&(d=V[R].metadata.cmap.unicode.codeMap[tt[K].charCodeAt(0)]),d||tt[K].charCodeAt(0)<256&&V[R].metadata.hasOwnProperty("Unicode")?Z+=tt[K]:Z+="";var Bt="";return parseInt(R.slice(1))<14||ht==="WinAnsiEncoding"?Bt=P(Z,R).split("").map(function(Lt){return Lt.charCodeAt(0).toString(16)}).join(""):ht==="Identity-H"&&(Bt=i(Z,V[R])),T.isHex=!0,{text:Bt,x:v,y:C,options:I,mutex:T}};e.events.push(["postProcessText",function(h){var d=h.text||"",A=[],v={text:d,x:h.x,y:h.y,options:h.options,mutex:h.mutex};if(Array.isArray(d)){var C=0;for(C=0;C<d.length;C+=1)Array.isArray(d[C])&&d[C].length===3?A.push([c(Object.assign({},v,{text:d[C][0]})).text,d[C][1],d[C][2]]):A.push(c(Object.assign({},v,{text:d[C]})).text);h.text=A}else h.text=c(Object.assign({},v,{text:d})).text}])}(Ur),function(n){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};n.existsFileInVFS=function(i){return e.call(this),this.internal.vFS[i]!==void 0},n.addFileToVFS=function(i,s){return e.call(this),this.internal.vFS[i]=s,this},n.getFileFromVFS=function(i){return e.call(this),this.internal.vFS[i]!==void 0?this.internal.vFS[i]:null}}(Ur.API),function(n){n.__bidiEngine__=n.prototype.__bidiEngine__=function(s){var c,h,d,A,v,C,I,T=e,P=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],U=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],V={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},R={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},Z=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],K=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),tt=!1,ht=0;this.__bidiEngine__={};var Bt=function(st){var ut=st.charCodeAt(),mt=ut>>8,vt=R[mt];return vt!==void 0?T[256*vt+(255&ut)]:mt===252||mt===253?"AL":K.test(mt)?"L":mt===8?"R":"N"},Lt=function(st){for(var ut,mt=0;mt<st.length;mt++){if((ut=Bt(st.charAt(mt)))==="L")return!1;if(ut==="R")return!0}return!1},Ut=function(st,ut,mt,vt){var $t,Vt,jt,zt,Wt=ut[vt];switch(Wt){case"L":case"R":tt=!1;break;case"N":case"AN":break;case"EN":tt&&(Wt="AN");break;case"AL":tt=!0,Wt="R";break;case"WS":Wt="N";break;case"CS":vt<1||vt+1>=ut.length||($t=mt[vt-1])!=="EN"&&$t!=="AN"||(Vt=ut[vt+1])!=="EN"&&Vt!=="AN"?Wt="N":tt&&(Vt="AN"),Wt=Vt===$t?Vt:"N";break;case"ES":Wt=($t=vt>0?mt[vt-1]:"B")==="EN"&&vt+1<ut.length&&ut[vt+1]==="EN"?"EN":"N";break;case"ET":if(vt>0&&mt[vt-1]==="EN"){Wt="EN";break}if(tt){Wt="N";break}for(jt=vt+1,zt=ut.length;jt<zt&&ut[jt]==="ET";)jt++;Wt=jt<zt&&ut[jt]==="EN"?"EN":"N";break;case"NSM":if(d&&!A){for(zt=ut.length,jt=vt+1;jt<zt&&ut[jt]==="NSM";)jt++;if(jt<zt){var Yt=st[vt],me=Yt>=1425&&Yt<=2303||Yt===64286;if($t=ut[jt],me&&($t==="R"||$t==="AL")){Wt="R";break}}}Wt=vt<1||($t=ut[vt-1])==="B"?"N":mt[vt-1];break;case"B":tt=!1,c=!0,Wt=ht;break;case"S":h=!0,Wt="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":tt=!1;break;case"BN":Wt="N"}return Wt},xt=function(st,ut,mt){var vt=st.split("");return mt&&pt(vt,mt,{hiLevel:ht}),vt.reverse(),ut&&ut.reverse(),vt.join("")},pt=function(st,ut,mt){var vt,$t,Vt,jt,zt,Wt=-1,Yt=st.length,me=0,et=[],dt=ht?U:P,_t=[];for(tt=!1,c=!1,h=!1,$t=0;$t<Yt;$t++)_t[$t]=Bt(st[$t]);for(Vt=0;Vt<Yt;Vt++){if(zt=me,et[Vt]=Ut(st,_t,et,Vt),vt=240&(me=dt[zt][V[et[Vt]]]),me&=15,ut[Vt]=jt=dt[me][5],vt>0)if(vt===16){for($t=Wt;$t<Vt;$t++)ut[$t]=1;Wt=-1}else Wt=-1;if(dt[me][6])Wt===-1&&(Wt=Vt);else if(Wt>-1){for($t=Wt;$t<Vt;$t++)ut[$t]=jt;Wt=-1}_t[Vt]==="B"&&(ut[Vt]=0),mt.hiLevel|=jt}h&&function(Ct,Ot,Rt){for(var Zt=0;Zt<Rt;Zt++)if(Ct[Zt]==="S"){Ot[Zt]=ht;for(var Jt=Zt-1;Jt>=0&&Ct[Jt]==="WS";Jt--)Ot[Jt]=ht}}(_t,ut,Yt)},kt=function(st,ut,mt,vt,$t){if(!($t.hiLevel<st)){if(st===1&&ht===1&&!c)return ut.reverse(),void(mt&&mt.reverse());for(var Vt,jt,zt,Wt,Yt=ut.length,me=0;me<Yt;){if(vt[me]>=st){for(zt=me+1;zt<Yt&&vt[zt]>=st;)zt++;for(Wt=me,jt=zt-1;Wt<jt;Wt++,jt--)Vt=ut[Wt],ut[Wt]=ut[jt],ut[jt]=Vt,mt&&(Vt=mt[Wt],mt[Wt]=mt[jt],mt[jt]=Vt);me=zt}me++}}},Xt=function(st,ut,mt){var vt=st.split(""),$t={hiLevel:ht};return mt||(mt=[]),pt(vt,mt,$t),function(Vt,jt,zt){if(zt.hiLevel!==0&&I)for(var Wt,Yt=0;Yt<Vt.length;Yt++)jt[Yt]===1&&(Wt=Z.indexOf(Vt[Yt]))>=0&&(Vt[Yt]=Z[Wt+1])}(vt,mt,$t),kt(2,vt,ut,mt,$t),kt(1,vt,ut,mt,$t),vt.join("")};return this.__bidiEngine__.doBidiReorder=function(st,ut,mt){if(function($t,Vt){if(Vt)for(var jt=0;jt<$t.length;jt++)Vt[jt]=jt;A===void 0&&(A=Lt($t)),C===void 0&&(C=Lt($t))}(st,ut),d||!v||C)if(d&&v&&A^C)ht=A?1:0,st=xt(st,ut,mt);else if(!d&&v&&C)ht=A?1:0,st=Xt(st,ut,mt),st=xt(st,ut);else if(!d||A||v||C){if(d&&!v&&A^C)st=xt(st,ut),A?(ht=0,st=Xt(st,ut,mt)):(ht=1,st=Xt(st,ut,mt),st=xt(st,ut));else if(d&&A&&!v&&C)ht=1,st=Xt(st,ut,mt),st=xt(st,ut);else if(!d&&!v&&A^C){var vt=I;A?(ht=1,st=Xt(st,ut,mt),ht=0,I=!1,st=Xt(st,ut,mt),I=vt):(ht=0,st=Xt(st,ut,mt),st=xt(st,ut),ht=1,I=!1,st=Xt(st,ut,mt),I=vt,st=xt(st,ut))}}else ht=0,st=Xt(st,ut,mt);else ht=A?1:0,st=Xt(st,ut,mt);return st},this.__bidiEngine__.setOptions=function(st){st&&(d=st.isInputVisual,v=st.isOutputVisual,A=st.isInputRtl,C=st.isOutputRtl,I=st.isSymmetricSwapping)},this.__bidiEngine__.setOptions(s),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],i=new n.__bidiEngine__({isInputVisual:!0});n.API.events.push(["postProcessText",function(s){var c=s.text,h=(s.x,s.y,s.options||{}),d=(s.mutex,h.lang,[]);if(h.isInputVisual=typeof h.isInputVisual!="boolean"||h.isInputVisual,i.setOptions(h),Object.prototype.toString.call(c)==="[object Array]"){var A=0;for(d=[],A=0;A<c.length;A+=1)Object.prototype.toString.call(c[A])==="[object Array]"?d.push([i.doBidiReorder(c[A][0]),c[A][1],c[A][2]]):d.push([i.doBidiReorder(c[A])]);s.text=d}else s.text=i.doBidiReorder(c);i.setOptions({isInputVisual:!0})}])}(Ur),Ur.API.TTFFont=function(){function n(e){var i;if(this.rawData=e,i=this.contents=new Dl(e),this.contents.pos=4,i.readString(4)==="ttcf")throw new Error("TTCF not supported.");i.pos=0,this.parse(),this.subset=new b3(this),this.registerTTF()}return n.open=function(e){return new n(e)},n.prototype.parse=function(){return this.directory=new A3(this.contents),this.head=new c3(this),this.name=new f3(this),this.cmap=new Nv(this),this.toUnicode={},this.hhea=new u3(this),this.maxp=new g3(this),this.hmtx=new m3(this),this.post=new d3(this),this.os2=new h3(this),this.loca=new _3(this),this.glyf=new y3(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},n.prototype.registerTTF=function(){var e,i,s,c,h;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var d,A,v,C;for(C=[],d=0,A=(v=this.bbox).length;d<A;d++)e=v[d],C.push(Math.round(e*this.scaleFactor));return C}).call(this),this.stemV=0,this.post.exists?(s=255&(c=this.post.italic_angle),32768&(i=c>>16)&&(i=-(1+(65535^i))),this.italicAngle=+(i+"."+s)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(h=this.familyClass)===1||h===2||h===3||h===4||h===5||h===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},n.prototype.characterToGlyph=function(e){var i;return((i=this.cmap.unicode)!=null?i.codeMap[e]:void 0)||0},n.prototype.widthOfGlyph=function(e){var i;return i=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*i},n.prototype.widthOfString=function(e,i,s){var c,h,d,A;for(d=0,h=0,A=(e=""+e).length;0<=A?h<A:h>A;h=0<=A?++h:--h)c=e.charCodeAt(h),d+=this.widthOfGlyph(this.characterToGlyph(c))+s*(1e3/i)||0;return d*(i/1e3)},n.prototype.lineHeight=function(e,i){var s;return i==null&&(i=!1),s=i?this.lineGap:0,(this.ascender+s-this.decender)/1e3*e},n}();var _o,Dl=function(){function n(e){this.data=e??[],this.pos=0,this.length=this.data.length}return n.prototype.readByte=function(){return this.data[this.pos++]},n.prototype.writeByte=function(e){return this.data[this.pos++]=e},n.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},n.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},n.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},n.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},n.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},n.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},n.prototype.readString=function(e){var i,s;for(s=[],i=0;0<=e?i<e:i>e;i=0<=e?++i:--i)s[i]=String.fromCharCode(this.readByte());return s.join("")},n.prototype.writeString=function(e){var i,s,c;for(c=[],i=0,s=e.length;0<=s?i<s:i>s;i=0<=s?++i:--i)c.push(this.writeByte(e.charCodeAt(i)));return c},n.prototype.readShort=function(){return this.readInt16()},n.prototype.writeShort=function(e){return this.writeInt16(e)},n.prototype.readLongLong=function(){var e,i,s,c,h,d,A,v;return e=this.readByte(),i=this.readByte(),s=this.readByte(),c=this.readByte(),h=this.readByte(),d=this.readByte(),A=this.readByte(),v=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^i)+1099511627776*(255^s)+4294967296*(255^c)+16777216*(255^h)+65536*(255^d)+256*(255^A)+(255^v)+1):72057594037927940*e+281474976710656*i+1099511627776*s+4294967296*c+16777216*h+65536*d+256*A+v},n.prototype.writeLongLong=function(e){var i,s;return i=Math.floor(e/4294967296),s=4294967295&e,this.writeByte(i>>24&255),this.writeByte(i>>16&255),this.writeByte(i>>8&255),this.writeByte(255&i),this.writeByte(s>>24&255),this.writeByte(s>>16&255),this.writeByte(s>>8&255),this.writeByte(255&s)},n.prototype.readInt=function(){return this.readInt32()},n.prototype.writeInt=function(e){return this.writeInt32(e)},n.prototype.read=function(e){var i,s;for(i=[],s=0;0<=e?s<e:s>e;s=0<=e?++s:--s)i.push(this.readByte());return i},n.prototype.write=function(e){var i,s,c,h;for(h=[],s=0,c=e.length;s<c;s++)i=e[s],h.push(this.writeByte(i));return h},n}(),A3=function(){var n;function e(i){var s,c,h;for(this.scalarType=i.readInt(),this.tableCount=i.readShort(),this.searchRange=i.readShort(),this.entrySelector=i.readShort(),this.rangeShift=i.readShort(),this.tables={},c=0,h=this.tableCount;0<=h?c<h:c>h;c=0<=h?++c:--c)s={tag:i.readString(4),checksum:i.readInt(),offset:i.readInt(),length:i.readInt()},this.tables[s.tag]=s}return e.prototype.encode=function(i){var s,c,h,d,A,v,C,I,T,P,U,V,R;for(R in U=Object.keys(i).length,v=Math.log(2),T=16*Math.floor(Math.log(U)/v),d=Math.floor(T/v),I=16*U-T,(c=new Dl).writeInt(this.scalarType),c.writeShort(U),c.writeShort(T),c.writeShort(d),c.writeShort(I),h=16*U,C=c.pos+h,A=null,V=[],i)for(P=i[R],c.writeString(R),c.writeInt(n(P)),c.writeInt(C),c.writeInt(P.length),V=V.concat(P),R==="head"&&(A=C),C+=P.length;C%4;)V.push(0),C++;return c.write(V),s=2981146554-n(c.data),c.pos=A+8,c.writeUInt32(s),c.data},n=function(i){var s,c,h,d;for(i=Ov.call(i);i.length%4;)i.push(0);for(h=new Dl(i),c=0,s=0,d=i.length;s<d;s=s+=4)c+=h.readUInt32();return 4294967295&c},e}(),l3={}.hasOwnProperty,rA=function(n,e){for(var i in e)l3.call(e,i)&&(n[i]=e[i]);function s(){this.constructor=n}return s.prototype=e.prototype,n.prototype=new s,n.__super__=e.prototype,n};_o=function(){function n(e){var i;this.file=e,i=this.file.directory.tables[this.tag],this.exists=!!i,i&&(this.offset=i.offset,this.length=i.length,this.parse(this.file.contents))}return n.prototype.parse=function(){},n.prototype.encode=function(){},n.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},n}();var c3=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return rA(e,_o),e.prototype.tag="head",e.prototype.parse=function(i){return i.pos=this.offset,this.version=i.readInt(),this.revision=i.readInt(),this.checkSumAdjustment=i.readInt(),this.magicNumber=i.readInt(),this.flags=i.readShort(),this.unitsPerEm=i.readShort(),this.created=i.readLongLong(),this.modified=i.readLongLong(),this.xMin=i.readShort(),this.yMin=i.readShort(),this.xMax=i.readShort(),this.yMax=i.readShort(),this.macStyle=i.readShort(),this.lowestRecPPEM=i.readShort(),this.fontDirectionHint=i.readShort(),this.indexToLocFormat=i.readShort(),this.glyphDataFormat=i.readShort()},e.prototype.encode=function(i){var s;return(s=new Dl).writeInt(this.version),s.writeInt(this.revision),s.writeInt(this.checkSumAdjustment),s.writeInt(this.magicNumber),s.writeShort(this.flags),s.writeShort(this.unitsPerEm),s.writeLongLong(this.created),s.writeLongLong(this.modified),s.writeShort(this.xMin),s.writeShort(this.yMin),s.writeShort(this.xMax),s.writeShort(this.yMax),s.writeShort(this.macStyle),s.writeShort(this.lowestRecPPEM),s.writeShort(this.fontDirectionHint),s.writeShort(i),s.writeShort(this.glyphDataFormat),s.data},e}(),Dv=function(){function n(e,i){var s,c,h,d,A,v,C,I,T,P,U,V,R,Z,K,tt,ht;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=i+e.readInt(),T=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(v=0;v<256;++v)this.codeMap[v]=e.readByte();break;case 4:for(U=e.readUInt16(),P=U/2,e.pos+=6,h=function(){var Bt,Lt;for(Lt=[],v=Bt=0;0<=P?Bt<P:Bt>P;v=0<=P?++Bt:--Bt)Lt.push(e.readUInt16());return Lt}(),e.pos+=2,R=function(){var Bt,Lt;for(Lt=[],v=Bt=0;0<=P?Bt<P:Bt>P;v=0<=P?++Bt:--Bt)Lt.push(e.readUInt16());return Lt}(),C=function(){var Bt,Lt;for(Lt=[],v=Bt=0;0<=P?Bt<P:Bt>P;v=0<=P?++Bt:--Bt)Lt.push(e.readUInt16());return Lt}(),I=function(){var Bt,Lt;for(Lt=[],v=Bt=0;0<=P?Bt<P:Bt>P;v=0<=P?++Bt:--Bt)Lt.push(e.readUInt16());return Lt}(),c=(this.length-e.pos+this.offset)/2,A=function(){var Bt,Lt;for(Lt=[],v=Bt=0;0<=c?Bt<c:Bt>c;v=0<=c?++Bt:--Bt)Lt.push(e.readUInt16());return Lt}(),v=K=0,ht=h.length;K<ht;v=++K)for(Z=h[v],s=tt=V=R[v];V<=Z?tt<=Z:tt>=Z;s=V<=Z?++tt:--tt)I[v]===0?d=s+C[v]:(d=A[I[v]/2+(s-V)-(P-v)]||0)!==0&&(d+=C[v]),this.codeMap[s]=65535&d}e.pos=T}return n.encode=function(e,i){var s,c,h,d,A,v,C,I,T,P,U,V,R,Z,K,tt,ht,Bt,Lt,Ut,xt,pt,kt,Xt,st,ut,mt,vt,$t,Vt,jt,zt,Wt,Yt,me,et,dt,_t,Ct,Ot,Rt,Zt,Jt,xe,we,Te;switch(vt=new Dl,d=Object.keys(e).sort(function(Ee,Ve){return Ee-Ve}),i){case"macroman":for(R=0,Z=function(){var Ee=[];for(V=0;V<256;++V)Ee.push(0);return Ee}(),tt={0:0},h={},$t=0,Wt=d.length;$t<Wt;$t++)tt[Jt=e[c=d[$t]]]==null&&(tt[Jt]=++R),h[c]={old:e[c],new:tt[e[c]]},Z[c]=tt[e[c]];return vt.writeUInt16(1),vt.writeUInt16(0),vt.writeUInt32(12),vt.writeUInt16(0),vt.writeUInt16(262),vt.writeUInt16(0),vt.write(Z),{charMap:h,subtable:vt.data,maxGlyphID:R+1};case"unicode":for(ut=[],T=[],ht=0,tt={},s={},K=C=null,Vt=0,Yt=d.length;Vt<Yt;Vt++)tt[Lt=e[c=d[Vt]]]==null&&(tt[Lt]=++ht),s[c]={old:Lt,new:tt[Lt]},A=tt[Lt]-c,K!=null&&A===C||(K&&T.push(K),ut.push(c),C=A),K=c;for(K&&T.push(K),T.push(65535),ut.push(65535),Xt=2*(kt=ut.length),pt=2*Math.pow(Math.log(kt)/Math.LN2,2),P=Math.log(pt/2)/Math.LN2,xt=2*kt-pt,v=[],Ut=[],U=[],V=jt=0,me=ut.length;jt<me;V=++jt){if(st=ut[V],I=T[V],st===65535){v.push(0),Ut.push(0);break}if(st-(mt=s[st].new)>=32768)for(v.push(0),Ut.push(2*(U.length+kt-V)),c=zt=st;st<=I?zt<=I:zt>=I;c=st<=I?++zt:--zt)U.push(s[c].new);else v.push(mt-st),Ut.push(0)}for(vt.writeUInt16(3),vt.writeUInt16(1),vt.writeUInt32(12),vt.writeUInt16(4),vt.writeUInt16(16+8*kt+2*U.length),vt.writeUInt16(0),vt.writeUInt16(Xt),vt.writeUInt16(pt),vt.writeUInt16(P),vt.writeUInt16(xt),Rt=0,et=T.length;Rt<et;Rt++)c=T[Rt],vt.writeUInt16(c);for(vt.writeUInt16(0),Zt=0,dt=ut.length;Zt<dt;Zt++)c=ut[Zt],vt.writeUInt16(c);for(xe=0,_t=v.length;xe<_t;xe++)A=v[xe],vt.writeUInt16(A);for(we=0,Ct=Ut.length;we<Ct;we++)Bt=Ut[we],vt.writeUInt16(Bt);for(Te=0,Ot=U.length;Te<Ot;Te++)R=U[Te],vt.writeUInt16(R);return{charMap:s,subtable:vt.data,maxGlyphID:ht+1}}},n}(),Nv=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return rA(e,_o),e.prototype.tag="cmap",e.prototype.parse=function(i){var s,c,h;for(i.pos=this.offset,this.version=i.readUInt16(),h=i.readUInt16(),this.tables=[],this.unicode=null,c=0;0<=h?c<h:c>h;c=0<=h?++c:--c)s=new Dv(i,this.offset),this.tables.push(s),s.isUnicode&&this.unicode==null&&(this.unicode=s);return!0},e.encode=function(i,s){var c,h;return s==null&&(s="macroman"),c=Dv.encode(i,s),(h=new Dl).writeUInt16(0),h.writeUInt16(1),c.table=h.data.concat(c.subtable),c},e}(),u3=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return rA(e,_o),e.prototype.tag="hhea",e.prototype.parse=function(i){return i.pos=this.offset,this.version=i.readInt(),this.ascender=i.readShort(),this.decender=i.readShort(),this.lineGap=i.readShort(),this.advanceWidthMax=i.readShort(),this.minLeftSideBearing=i.readShort(),this.minRightSideBearing=i.readShort(),this.xMaxExtent=i.readShort(),this.caretSlopeRise=i.readShort(),this.caretSlopeRun=i.readShort(),this.caretOffset=i.readShort(),i.pos+=8,this.metricDataFormat=i.readShort(),this.numberOfMetrics=i.readUInt16()},e}(),h3=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return rA(e,_o),e.prototype.tag="OS/2",e.prototype.parse=function(i){if(i.pos=this.offset,this.version=i.readUInt16(),this.averageCharWidth=i.readShort(),this.weightClass=i.readUInt16(),this.widthClass=i.readUInt16(),this.type=i.readShort(),this.ySubscriptXSize=i.readShort(),this.ySubscriptYSize=i.readShort(),this.ySubscriptXOffset=i.readShort(),this.ySubscriptYOffset=i.readShort(),this.ySuperscriptXSize=i.readShort(),this.ySuperscriptYSize=i.readShort(),this.ySuperscriptXOffset=i.readShort(),this.ySuperscriptYOffset=i.readShort(),this.yStrikeoutSize=i.readShort(),this.yStrikeoutPosition=i.readShort(),this.familyClass=i.readShort(),this.panose=function(){var s,c;for(c=[],s=0;s<10;++s)c.push(i.readByte());return c}(),this.charRange=function(){var s,c;for(c=[],s=0;s<4;++s)c.push(i.readInt());return c}(),this.vendorID=i.readString(4),this.selection=i.readShort(),this.firstCharIndex=i.readShort(),this.lastCharIndex=i.readShort(),this.version>0&&(this.ascent=i.readShort(),this.descent=i.readShort(),this.lineGap=i.readShort(),this.winAscent=i.readShort(),this.winDescent=i.readShort(),this.codePageRange=function(){var s,c;for(c=[],s=0;s<2;s=++s)c.push(i.readInt());return c}(),this.version>1))return this.xHeight=i.readShort(),this.capHeight=i.readShort(),this.defaultChar=i.readShort(),this.breakChar=i.readShort(),this.maxContext=i.readShort()},e}(),d3=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return rA(e,_o),e.prototype.tag="post",e.prototype.parse=function(i){var s,c,h;switch(i.pos=this.offset,this.format=i.readInt(),this.italicAngle=i.readInt(),this.underlinePosition=i.readShort(),this.underlineThickness=i.readShort(),this.isFixedPitch=i.readInt(),this.minMemType42=i.readInt(),this.maxMemType42=i.readInt(),this.minMemType1=i.readInt(),this.maxMemType1=i.readInt(),this.format){case 65536:break;case 131072:var d;for(c=i.readUInt16(),this.glyphNameIndex=[],d=0;0<=c?d<c:d>c;d=0<=c?++d:--d)this.glyphNameIndex.push(i.readUInt16());for(this.names=[],h=[];i.pos<this.offset+this.length;)s=i.readByte(),h.push(this.names.push(i.readString(s)));return h;case 151552:return c=i.readUInt16(),this.offsets=i.read(c);case 196608:break;case 262144:return this.map=(function(){var A,v,C;for(C=[],d=A=0,v=this.file.maxp.numGlyphs;0<=v?A<v:A>v;d=0<=v?++A:--A)C.push(i.readUInt32());return C}).call(this)}},e}(),p3=function(n,e){this.raw=n,this.length=n.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},f3=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return rA(e,_o),e.prototype.tag="name",e.prototype.parse=function(i){var s,c,h,d,A,v,C,I,T,P,U;for(i.pos=this.offset,i.readShort(),s=i.readShort(),v=i.readShort(),c=[],d=0;0<=s?d<s:d>s;d=0<=s?++d:--d)c.push({platformID:i.readShort(),encodingID:i.readShort(),languageID:i.readShort(),nameID:i.readShort(),length:i.readShort(),offset:this.offset+v+i.readShort()});for(C={},d=T=0,P=c.length;T<P;d=++T)h=c[d],i.pos=h.offset,I=i.readString(h.length),A=new p3(I,h),C[U=h.nameID]==null&&(C[U]=[]),C[h.nameID].push(A);this.strings=C,this.copyright=C[0],this.fontFamily=C[1],this.fontSubfamily=C[2],this.uniqueSubfamily=C[3],this.fontName=C[4],this.version=C[5];try{this.postscriptName=C[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=C[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=C[7],this.manufacturer=C[8],this.designer=C[9],this.description=C[10],this.vendorUrl=C[11],this.designerUrl=C[12],this.license=C[13],this.licenseUrl=C[14],this.preferredFamily=C[15],this.preferredSubfamily=C[17],this.compatibleFull=C[18],this.sampleText=C[19]},e}(),g3=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return rA(e,_o),e.prototype.tag="maxp",e.prototype.parse=function(i){return i.pos=this.offset,this.version=i.readInt(),this.numGlyphs=i.readUInt16(),this.maxPoints=i.readUInt16(),this.maxContours=i.readUInt16(),this.maxCompositePoints=i.readUInt16(),this.maxComponentContours=i.readUInt16(),this.maxZones=i.readUInt16(),this.maxTwilightPoints=i.readUInt16(),this.maxStorage=i.readUInt16(),this.maxFunctionDefs=i.readUInt16(),this.maxInstructionDefs=i.readUInt16(),this.maxStackElements=i.readUInt16(),this.maxSizeOfInstructions=i.readUInt16(),this.maxComponentElements=i.readUInt16(),this.maxComponentDepth=i.readUInt16()},e}(),m3=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return rA(e,_o),e.prototype.tag="hmtx",e.prototype.parse=function(i){var s,c,h,d,A,v,C;for(i.pos=this.offset,this.metrics=[],s=0,v=this.file.hhea.numberOfMetrics;0<=v?s<v:s>v;s=0<=v?++s:--s)this.metrics.push({advance:i.readUInt16(),lsb:i.readInt16()});for(h=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var I,T;for(T=[],s=I=0;0<=h?I<h:I>h;s=0<=h?++I:--I)T.push(i.readInt16());return T}(),this.widths=(function(){var I,T,P,U;for(U=[],I=0,T=(P=this.metrics).length;I<T;I++)d=P[I],U.push(d.advance);return U}).call(this),c=this.widths[this.widths.length-1],C=[],s=A=0;0<=h?A<h:A>h;s=0<=h?++A:--A)C.push(this.widths.push(c));return C},e.prototype.forGlyph=function(i){return i in this.metrics?this.metrics[i]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[i-this.metrics.length]}},e}(),Ov=[].slice,y3=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return rA(e,_o),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(i){var s,c,h,d,A,v,C,I,T,P;return i in this.cache?this.cache[i]:(d=this.file.loca,s=this.file.contents,c=d.indexOf(i),(h=d.lengthOf(i))===0?this.cache[i]=null:(s.pos=this.offset+c,A=(v=new Dl(s.read(h))).readShort(),I=v.readShort(),P=v.readShort(),C=v.readShort(),T=v.readShort(),this.cache[i]=A===-1?new w3(v,I,P,C,T):new v3(v,A,I,P,C,T),this.cache[i]))},e.prototype.encode=function(i,s,c){var h,d,A,v,C;for(A=[],d=[],v=0,C=s.length;v<C;v++)h=i[s[v]],d.push(A.length),h&&(A=A.concat(h.encode(c)));return d.push(A.length),{table:A,offsets:d}},e}(),v3=function(){function n(e,i,s,c,h,d){this.raw=e,this.numberOfContours=i,this.xMin=s,this.yMin=c,this.xMax=h,this.yMax=d,this.compound=!1}return n.prototype.encode=function(){return this.raw.data},n}(),w3=function(){function n(e,i,s,c,h){var d,A;for(this.raw=e,this.xMin=i,this.yMin=s,this.xMax=c,this.yMax=h,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],d=this.raw;A=d.readShort(),this.glyphOffsets.push(d.pos),this.glyphIDs.push(d.readUInt16()),32&A;)d.pos+=1&A?4:2,128&A?d.pos+=8:64&A?d.pos+=4:8&A&&(d.pos+=2)}return n.prototype.encode=function(){var e,i,s;for(i=new Dl(Ov.call(this.raw.data)),e=0,s=this.glyphIDs.length;e<s;++e)i.pos=this.glyphOffsets[e];return i.data},n}(),_3=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return rA(e,_o),e.prototype.tag="loca",e.prototype.parse=function(i){var s,c;return i.pos=this.offset,s=this.file.head.indexToLocFormat,this.offsets=s===0?(function(){var h,d;for(d=[],c=0,h=this.length;c<h;c+=2)d.push(2*i.readUInt16());return d}).call(this):(function(){var h,d;for(d=[],c=0,h=this.length;c<h;c+=4)d.push(i.readUInt32());return d}).call(this)},e.prototype.indexOf=function(i){return this.offsets[i]},e.prototype.lengthOf=function(i){return this.offsets[i+1]-this.offsets[i]},e.prototype.encode=function(i,s){for(var c=new Uint32Array(this.offsets.length),h=0,d=0,A=0;A<c.length;++A)if(c[A]=h,d<s.length&&s[d]==A){++d,c[A]=h;var v=this.offsets[A],C=this.offsets[A+1]-v;C>0&&(h+=C)}for(var I=new Array(4*c.length),T=0;T<c.length;++T)I[4*T+3]=255&c[T],I[4*T+2]=(65280&c[T])>>8,I[4*T+1]=(16711680&c[T])>>16,I[4*T]=(4278190080&c[T])>>24;return I},e}(),b3=function(){function n(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return n.prototype.generateCmap=function(){var e,i,s,c,h;for(i in c=this.font.cmap.tables[0].codeMap,e={},h=this.subset)s=h[i],e[i]=c[s];return e},n.prototype.glyphsFor=function(e){var i,s,c,h,d,A,v;for(c={},d=0,A=e.length;d<A;d++)c[h=e[d]]=this.font.glyf.glyphFor(h);for(h in i=[],c)(s=c[h])!=null&&s.compound&&i.push.apply(i,s.glyphIDs);if(i.length>0)for(h in v=this.glyphsFor(i))s=v[h],c[h]=s;return c},n.prototype.encode=function(e,i){var s,c,h,d,A,v,C,I,T,P,U,V,R,Z,K;for(c in s=Nv.encode(this.generateCmap(),"unicode"),d=this.glyphsFor(e),U={0:0},K=s.charMap)U[(v=K[c]).old]=v.new;for(V in P=s.maxGlyphID,d)V in U||(U[V]=P++);return I=function(tt){var ht,Bt;for(ht in Bt={},tt)Bt[tt[ht]]=ht;return Bt}(U),T=Object.keys(I).sort(function(tt,ht){return tt-ht}),R=function(){var tt,ht,Bt;for(Bt=[],tt=0,ht=T.length;tt<ht;tt++)A=T[tt],Bt.push(I[A]);return Bt}(),h=this.font.glyf.encode(d,R,U),C=this.font.loca.encode(h.offsets,R),Z={cmap:this.font.cmap.raw(),glyf:h.table,loca:C,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(i)},this.font.os2.exists&&(Z["OS/2"]=this.font.os2.raw()),this.font.directory.encode(Z)},n}();Ur.API.PDFObject=function(){var n;function e(){}return n=function(i,s){return(Array(s+1).join("0")+i).slice(-s)},e.convert=function(i){var s,c,h,d;if(Array.isArray(i))return"["+function(){var A,v,C;for(C=[],A=0,v=i.length;A<v;A++)s=i[A],C.push(e.convert(s));return C}().join(" ")+"]";if(typeof i=="string")return"/"+i;if(i!=null&&i.isString)return"("+i+")";if(i instanceof Date)return"(D:"+n(i.getUTCFullYear(),4)+n(i.getUTCMonth(),2)+n(i.getUTCDate(),2)+n(i.getUTCHours(),2)+n(i.getUTCMinutes(),2)+n(i.getUTCSeconds(),2)+"Z)";if({}.toString.call(i)==="[object Object]"){for(c in h=["<<"],i)d=i[c],h.push("/"+c+" "+e.convert(d));return h.push(">>"),h.join(`
`)}return""+i},e}();const tp={"circle-radius":8,"circle-color":"red","circle-stroke-width":1,"circle-stroke-color":"black"},_h={style:{textSize:16,textHaloColor:"#FFFFFF",textHaloWidth:.8,textColor:"#000000",fallbackTextFont:["Open Sans Regular"]},visibility:"visible",position:"bottom-right"},bh={image:'<svg width="800px" height="800px" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="iconify iconify--gis" preserveAspectRatio="xMidYMid meet"><path d="M47.655 1.634l-35 95c-.828 2.24 1.659 4.255 3.68 2.98l33.667-21.228l33.666 21.228c2.02 1.271 4.503-.74 3.678-2.98l-35-95C51.907.514 51.163.006 50 .008c-1.163.001-1.99.65-2.345 1.626zm-.155 14.88v57.54L19.89 91.461z" fill="none" stroke="white" stroke-width="1.5"/><path d="M47.655 1.634l-35 95c-.828 2.24 1.659 4.255 3.68 2.98l33.667-21.228l33.666 21.228c2.02 1.271 4.503-.74 3.678-2.98l-35-95C51.907.514 51.163.006 50 .008c-1.163.001-1.99.65-2.345 1.626zm-.155 14.88v57.54L19.89 91.461z" fill="#000000" fill-rule="evenodd"></path></svg>',imageName:"gl-export-north-icon",imageSizeFraction:.05,visibility:"visible",position:"top-right"};let Rv=class{constructor(e,i=Ll.A4,s=300,c=ou.PNG,h=gc.mm,d="map",A="maplibregl-marker",v=tp,C="maplibregl-ctrl-attrib-inner",I=_h,T=bh){oi(this,"map"),oi(this,"width"),oi(this,"height"),oi(this,"dpi"),oi(this,"format"),oi(this,"unit"),oi(this,"fileName"),oi(this,"markerClassName"),oi(this,"markerCirclePaint"),oi(this,"attributionClassName"),oi(this,"attributionOptions"),oi(this,"northIconOptions"),this.map=e,this.width=i[0],this.height=i[1],this.dpi=s,this.format=c,this.unit=h,this.fileName=d,this.markerClassName=A,this.markerCirclePaint=v,this.attributionClassName=C,this.attributionOptions=I,this.northIconOptions=T}renderMapPost(e){return e}getMarkers(){return this.map.getCanvasContainer().getElementsByClassName(this.markerClassName)}renderMarkers(e){const i=this.getMarkers();for(let s=0;s<i.length;s++){const c=i.item(s);if(!c)continue;const h=c.getAttribute("style");if(!h)continue;const d=/translate\(([^,]+)px,\s*([^,]+)px\)/,A=h.match(d);if(!A)continue;const v=parseInt(A[1]),C=parseInt(A[2]),I=this.map.unproject([v,C]),T=`point${s}`;e.addSource(T,{type:"geojson",data:{type:"Point",coordinates:[I.lng,I.lat]}}),e.addLayer({id:T,source:T,type:"circle",paint:this.markerCirclePaint})}return e}generate(){const e=this;this.addLoader(),this.showLoader();const i=window.devicePixelRatio;Object.defineProperty(window,"devicePixelRatio",{get(){return e.dpi/96}});const s=document.createElement("div");s.className="hidden-map",document.body.appendChild(s);const c=document.createElement("div");c.style.width=this.toPixels(this.width),c.style.height=this.toPixels(this.height),s.appendChild(c);const h=this.map.getStyle();if(h&&h.sources){const A=h.sources;Object.keys(A).forEach(v=>{const C=A[v];Object.keys(C).forEach(I=>{C[I]||delete C[I]})})}let d=this.getRenderedMap(c,h);d.on("load",()=>{this.addNorthIconToMap(d).then(()=>{d.once("idle",()=>{this.addAttributions(d)?d.once("idle",()=>{d=this.renderMapPost(d),this.getMarkers().length===0?this.exportImage(d,s,i):(d=this.renderMarkers(d),d.once("idle",()=>{this.exportImage(d,s,i)}))}):(d=this.renderMapPost(d),this.getMarkers().length===0?this.exportImage(d,s,i):(d=this.renderMarkers(d),d.once("idle",()=>{this.exportImage(d,s,i)})))})})})}stripHtml(e){const i=document.createElement("div");return i.innerHTML=e,i.textContent||i.innerText||""}getIconWidth(e,i){const s=e.getContainer(),c=parseInt(s.style.width.replace("px",""));return parseInt(`${c*i}`)}getElementPosition(e,i,s=0){const c=e.getContainer();let h=0,d=0;switch(i){case"top-left":h=0+s,d=0+s;break;case"top-right":h=parseInt(c.style.width.replace("px",""))-s,d=0+s;break;case"bottom-left":h=0+s,d=parseInt(c.style.height.replace("px",""))-s;break;case"bottom-right":h=parseInt(c.style.width.replace("px",""))-s,d=parseInt(c.style.height.replace("px",""))-s;break}return[h,d]}addNorthIconImage(e){const i=this.getIconWidth(e,this.northIconOptions.imageSizeFraction??.08);return new Promise(s=>{const c=new Image(i,i);c.onload=()=>{this.northIconOptions.imageName&&e.addImage(this.northIconOptions.imageName,c),s()};function h(d){return"data:image/svg+xml;charset=utf-8,"+encodeURIComponent(d)}this.northIconOptions.image&&(c.src=h(this.northIconOptions.image))})}addNorthIconToMap(e){let i=this.northIconOptions.visibility??"visible";return e.getZoom()<2&&this.width>this.height&&(i="none"),new Promise(s=>{this.addNorthIconImage(e).then(()=>{const c=this.getIconWidth(e,this.northIconOptions.imageSizeFraction??.08)*.8,h=this.getElementPosition(e,this.northIconOptions.position??"top-right",c),d=e.unproject(h),A=this.northIconOptions.imageName??"gl-export-north-icon";e.addSource(A,{type:"geojson",data:{type:"Feature",geometry:{type:"Point",coordinates:[d.lng,d.lat]},properties:{}}}),e.addLayer({id:A,source:A,type:"symbol",layout:{"icon-image":A,"icon-size":1,"icon-rotate":e.getBearing()*-1,"icon-allow-overlap":!0,"icon-ignore-placement":!0,visibility:i},paint:{}}),s()})})}addAttributions(e){var i;if(!this.map.getStyle().glyphs)return!1;const s=e.getContainer(),c=this.attributionOptions.position??"bottom-right",h=this.getElementPosition(e,c,5),d=h[0],A=e.unproject(h),v=s.getElementsByClassName(this.attributionClassName),C=[];if((v==null?void 0:v.length)>0){const Z=v.item(0);if(Z)for(let K=0;K<Z.children.length;K++){const tt=Z.children.item(K);tt&&C.push(this.stripHtml(tt.outerHTML))}}else{const Z=this.map.getStyle().sources;Object.keys(Z).forEach(K=>{const tt=Z[K];if("attribution"in tt){const ht=tt.attribution;C.push(this.stripHtml(ht))}})}if(C.length===0)return!1;const I=C.join(" | "),T="attribution";e.addSource(T,{type:"geojson",data:{type:"Feature",geometry:{type:"Point",coordinates:[A.lng,A.lat]},properties:{attribution:I}}});const P=this.map.getStyle().layers.filter(Z=>Z.type==="symbol"&&Z.layout&&"text-font"in Z.layout),U=P.length>0&&P[0].layout?P[0].layout["text-font"]:(i=this.attributionOptions.style)==null?void 0:i.fallbackTextFont;let V=this.attributionOptions.visibility??"visible";e.getZoom()<2&&this.width>this.height&&(V="none");const R=this.attributionOptions.style;return e.addLayer({id:T,source:T,type:"symbol",layout:{"text-field":["get","attribution"],"text-font":U,"text-max-width":parseInt(`${d/R.textSize}`),"text-anchor":c,"text-justify":["top-right","bottom-right"].includes(c)?"right":"left","text-size":R.textSize,"text-allow-overlap":!0,visibility:V},paint:{"text-halo-color":R.textHaloColor,"text-halo-width":R.textHaloWidth,"text-color":R.textColor}}),!0}exportImage(e,i,s){var c;const h=e.getCanvas(),d=`${this.fileName}.pdf`;window.sessionStorage.getItem("generateLegend")=="true"?this.toPNG(h,d):this.toPDF(e,d),e.remove(),(c=i.parentNode)==null||c.removeChild(i),Object.defineProperty(window,"devicePixelRatio",{get(){return s}}),i.remove(),this.hideLoader()}toPNG(e,i){const s=document.getElementById("MapImage");s&&(s.src=e.toDataURL());const c=document.getElementById("ExportButton");c&&c.click(),console.log("Map exported")}toPDF(e,i){const s=e.getCanvas(),c=new Ur({orientation:this.width>this.height?"l":"p",unit:this.unit,compress:!0,format:[this.width,this.height]});c.addImage(s.toDataURL("image/png"),"png",0,0,this.width,this.height,void 0,"FAST");const{lng:h,lat:d}=e.getCenter();c.setProperties({title:e.getStyle().name,subject:`center: [${h}, ${d}], zoom: ${e.getZoom()}`,creator:"Mapbox GL Export Plugin",author:"(c)Mapbox, (c)OpenStreetMap"}),c.save(i)}toPixels(e,i=96){return this.unit===gc.mm&&(i/=25.4),`${i*e}px`}addLoader(){var e;const i=(e=this.map.getCanvas().parentElement)==null?void 0:e.parentElement;if(!i||i.getElementsByClassName("map-export-loader").length>0)return;const s=document.createElement("span");s.classList.add("map-export-loader"),s.classList.add("loader-default"),i.appendChild(s)}showLoader(){var e,i;const s=(e=this.map.getCanvas().parentElement)==null?void 0:e.parentElement;if(!s)return;const c=s.getElementsByClassName("map-export-loader");c&&c.length>0&&((i=c.item(0))==null||i.classList.add("is-active"))}hideLoader(){var e,i;const s=(e=this.map.getCanvas().parentElement)==null?void 0:e.parentElement;if(!s)return;const c=s.getElementsByClassName("map-export-loader");c&&c.length>0&&((i=c.item(0))==null||i.classList.remove("is-active"))}},x3=class extends Rv{constructor(e,i=Ll.A4,s=300,c=ou.PNG,h=gc.mm,d="map",A=tp,v=_h,C=bh){super(e,i,s,c,h,d,"maplibregl-marker",A,"maplibregl-ctrl-attrib-inner",v,C)}getRenderedMap(e,i){const s=new o4.Map({container:e,style:i,center:this.map.getCenter(),zoom:this.map.getZoom(),bearing:this.map.getBearing(),pitch:this.map.getPitch(),interactive:!1,preserveDrawingBuffer:!0,fadeDuration:0,transformRequest:this.map._requestManager._transformRequestFn});this.map.getTerrain()&&(s.setMaxPitch(85),s.setPitch(this.map.getPitch()));const c=(this.map.style.imageManager||{}).images||[];return Object.keys(c).forEach(h=>{c[h].data&&s.addImage(h,c[h].data)}),s}renderMapPost(e){const i=this.map.getTerrain();return i&&e.setTerrain({source:i.source,exaggeration:i.exaggeration}),e}},B3=class{constructor(e){oi(this,"controlContainer"),oi(this,"exportContainer"),oi(this,"crosshair"),oi(this,"printableArea"),oi(this,"map"),oi(this,"exportButton"),oi(this,"options",{PageSize:Ll.A4,PageOrientation:gh.Landscape,Format:ou.PDF,DPI:fg[300],Crosshair:!1,PrintableArea:!1,Local:"en",AllowedSizes:Object.keys(Ll),Filename:"map",markerCirclePaint:tp,attributionOptions:_h,northIconOptions:bh}),oi(this,"MAPLIB_CSS_PREFIX","maplibregl"),e&&(e.attributionOptions=Object.assign(_h,e.attributionOptions),e.northIconOptions=Object.assign(bh,e.northIconOptions),this.options=Object.assign(this.options,e)),this.onDocumentClick=this.onDocumentClick.bind(this)}getDefaultPosition(){return"top-right"}getTranslation(){const e=this.options.Local??"en";return C4(e)}onAdd(e){var i;this.map=e,this.controlContainer=document.createElement("div"),this.controlContainer.classList.add(`${this.MAPLIB_CSS_PREFIX}-ctrl`),this.controlContainer.classList.add(`${this.MAPLIB_CSS_PREFIX}-ctrl-group`),this.exportContainer=document.createElement("div"),this.exportContainer.classList.add(`${this.MAPLIB_CSS_PREFIX}-export-list`),this.exportButton=document.createElement("button"),this.exportButton.classList.add(`${this.MAPLIB_CSS_PREFIX}-ctrl-icon`),this.exportButton.classList.add(`${this.MAPLIB_CSS_PREFIX}-export-control`),this.exportButton.type="button",this.exportButton.addEventListener("click",()=>{this.exportButton.style.display="none",this.exportContainer.style.display="block",this.toggleCrosshair(!0),this.togglePrintableArea(!0)}),document.addEventListener("click",this.onDocumentClick),this.controlContainer.appendChild(this.exportButton),this.controlContainer.appendChild(this.exportContainer);const s=document.createElement("TABLE");s.className="print-table";const c={};(i=this.options.AllowedSizes)==null||i.forEach(T=>{Ll[T]&&(c[T]=Ll[T])});const h=this.createSelection(c,this.getTranslation().PageSize,"page-size",this.options.PageSize,(T,P)=>JSON.stringify(T[P]));s.appendChild(h);const d=this.createSelection(gh,this.getTranslation().PageOrientation,"page-orientation",this.options.PageOrientation,(T,P)=>T[P]);s.appendChild(d);const A=this.createSelection(fg,this.getTranslation().DPI,"dpi-type",this.options.DPI,(T,P)=>T[P]);s.appendChild(A);const v={Yes:"true",No:"false"},C=this.createSelection(v,"Generate Legend","generate-legend","false",(T,P)=>T[P]);s.appendChild(C),this.exportContainer.appendChild(s);const I=document.createElement("button");return I.type="button",I.textContent=this.getTranslation().Generate,I.classList.add("generate-button"),I.addEventListener("click",()=>{const T=document.getElementById("mapbox-gl-export-page-size"),P=document.getElementById("mapbox-gl-export-page-orientation"),U=document.getElementById("mapbox-gl-export-dpi-type"),V=document.getElementById("mapbox-gl-export-generate-legend"),R=P.value;let Z=JSON.parse(T.value);R===gh.Portrait&&(Z=Z.reverse()),window.sessionStorage.setItem("ExportPageSize",JSON.stringify(Z)),window.sessionStorage.setItem("generateLegend",V.value),this.generateMap(e,Z,Number(U.value),ou.PNG,gc.mm,this.options.Filename)}),this.exportContainer.appendChild(I),this.controlContainer}generateMap(e,i,s,c,h,d){new x3(e,i,s,c,h,d,this.options.markerCirclePaint,this.options.attributionOptions,this.options.northIconOptions).generate()}createSelection(e,i,s,c,h){const d=document.createElement("label");d.textContent=i;const A=document.createElement("select");A.setAttribute("id",`mapbox-gl-export-${s}`),A.style.width="100%",Object.keys(e).forEach(T=>{const P=document.createElement("option");P.setAttribute("value",h(e,T)),P.appendChild(document.createTextNode(T)),P.setAttribute("name",s),c===e[T]&&(P.selected=!0),A.appendChild(P)}),A.addEventListener("change",()=>{this.updatePrintableArea()});const v=document.createElement("TR"),C=document.createElement("TD"),I=document.createElement("TD");return C.appendChild(d),I.appendChild(A),v.appendChild(C),v.appendChild(I),v}onRemove(){!this.controlContainer||!this.controlContainer.parentNode||!this.map||!this.exportButton||(this.exportButton.removeEventListener("click",this.onDocumentClick),this.controlContainer.parentNode.removeChild(this.controlContainer),document.removeEventListener("click",this.onDocumentClick),this.crosshair!==void 0&&(this.crosshair.destroy(),this.crosshair=void 0),this.printableArea!==void 0&&(this.printableArea.destroy(),this.printableArea=void 0),this.map=void 0)}onDocumentClick(e){this.controlContainer&&!this.controlContainer.contains(e.target)&&this.exportContainer&&this.exportButton&&(this.exportContainer.style.display="none",this.exportButton.style.display="block",this.toggleCrosshair(!1),this.togglePrintableArea(!1))}toggleCrosshair(e){this.options.Crosshair===!0&&(e===!1?this.crosshair!==void 0&&(this.crosshair.destroy(),this.crosshair=void 0):(this.crosshair=new c4(this.map),this.crosshair.create()))}togglePrintableArea(e){this.options.PrintableArea===!0&&(e===!1?this.printableArea!==void 0&&(this.printableArea.destroy(),this.printableArea=void 0):(this.printableArea=new u4(this.map),this.updatePrintableArea()))}updatePrintableArea(){if(this.printableArea===void 0)return;const e=document.getElementById("mapbox-gl-export-page-size"),i=document.getElementById("mapbox-gl-export-page-orientation").value;let s=JSON.parse(e.value);i===gh.Portrait&&(s=s.reverse()),this.printableArea.updateArea(s[0],s[1])}};class C3 extends Rv{constructor(i,s=Ll.A4,c=300,h=ou.PNG,d=gc.mm,A="map",v=tp,C=_h,I=bh,T){super(i,s,c,h,d,A,"mapboxgl-marker",v,"mapboxgl-ctrl-attrib-inner",C,I);Xy(this,"accesstoken");this.accesstoken=T}stringify(i){let s=[];const c=JSON.stringify(i,function(h,d){if(typeof d=="object"&&d!==null){if(s.indexOf(d)!==-1)return;s.push(d)}return d});return s=null,c}getRenderedMap(i,s){var A;const c=this.stringify(s),h=new ra.Map({accessToken:this.accesstoken||ra.accessToken,container:i,style:JSON.parse(c),center:this.map.getCenter(),zoom:this.map.getZoom(),bearing:this.map.getBearing(),pitch:this.map.getPitch(),interactive:!1,preserveDrawingBuffer:!0,fadeDuration:0,transformRequest:this.map._requestManager._transformRequestFn}),d=(this.map.style.imageManager||{}).images||[];return d&&((A=Object.keys(d))==null?void 0:A.length)>0&&Object.keys(d).forEach(v=>{v&&d[v].data&&h.addImage(v,d[v].data)}),h}}class F3 extends B3{constructor(i){super(i);Xy(this,"accessToken");this.MAPLIB_CSS_PREFIX="mapboxgl",this.accessToken=i.accessToken}generateMap(i,s,c,h,d,A){new C3(i,s,c,h,d,A,this.options.markerCirclePaint,this.options.attributionOptions,this.options.northIconOptions,this.accessToken).generate()}}/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
	Copyright (c) Microsoft Corporation.

	Permission to use, copy, modify, and/or distribute this software for any
	purpose with or without fee is hereby granted.

	THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
	REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
	AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
	INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
	LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
	OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
	PERFORMANCE OF THIS SOFTWARE.
	***************************************************************************** */var Ng=function(n,e){return Ng=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var c in s)Object.prototype.hasOwnProperty.call(s,c)&&(i[c]=s[c])},Ng(n,e)};function bo(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Ng(n,e);function i(){this.constructor=n}n.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}var Og=function(){return Og=Object.assign||function(n){for(var e,i=1,s=arguments.length;i<s;i++){e=arguments[i];for(var c in e)Object.prototype.hasOwnProperty.call(e,c)&&(n[c]=e[c])}return n},Og.apply(this,arguments)};function Qs(n,e,i,s){function c(h){return h instanceof i?h:new i(function(d){d(h)})}return new(i||(i=Promise))(function(h,d){function A(I){try{C(s.next(I))}catch(T){d(T)}}function v(I){try{C(s.throw(I))}catch(T){d(T)}}function C(I){I.done?h(I.value):c(I.value).then(A,v)}C((s=s.apply(n,[])).next())})}function ws(n,e){var i={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},trys:[],ops:[]},s,c,h,d;return d={next:A(0),throw:A(1),return:A(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function A(C){return function(I){return v([C,I])}}function v(C){if(s)throw new TypeError("Generator is already executing.");for(;i;)try{if(s=1,c&&(h=C[0]&2?c.return:C[0]?c.throw||((h=c.return)&&h.call(c),0):c.next)&&!(h=h.call(c,C[1])).done)return h;switch(c=0,h&&(C=[C[0]&2,h.value]),C[0]){case 0:case 1:h=C;break;case 4:return i.label++,{value:C[1],done:!1};case 5:i.label++,c=C[1],C=[0];continue;case 7:C=i.ops.pop(),i.trys.pop();continue;default:if(h=i.trys,!(h=h.length>0&&h[h.length-1])&&(C[0]===6||C[0]===2)){i=0;continue}if(C[0]===3&&(!h||C[1]>h[0]&&C[1]<h[3])){i.label=C[1];break}if(C[0]===6&&i.label<h[1]){i.label=h[1],h=C;break}if(h&&i.label<h[2]){i.label=h[2],i.ops.push(C);break}h[2]&&i.ops.pop(),i.trys.pop();continue}C=e.call(n,i)}catch(I){C=[6,I],c=0}finally{s=h=0}if(C[0]&5)throw C[1];return{value:C[0]?C[1]:void 0,done:!0}}}function ep(n,e,i){if(arguments.length===2)for(var s=0,c=e.length,h;s<c;s++)(h||!(s in e))&&(h||(h=Array.prototype.slice.call(e,0,s)),h[s]=e[s]);return n.concat(h||e)}for(var qA=function(){function n(e,i,s,c){this.left=e,this.top=i,this.width=s,this.height=c}return n.prototype.add=function(e,i,s,c){return new n(this.left+e,this.top+i,this.width+s,this.height+c)},n.fromClientRect=function(e,i){return new n(i.left+e.windowBounds.left,i.top+e.windowBounds.top,i.width,i.height)},n.fromDOMRectList=function(e,i){var s=Array.from(i).find(function(c){return c.width!==0});return s?new n(s.left+e.windowBounds.left,s.top+e.windowBounds.top,s.width,s.height):n.EMPTY},n.EMPTY=new n(0,0,0,0),n}(),rp=function(n,e){return qA.fromClientRect(n,e.getBoundingClientRect())},S3=function(n){var e=n.body,i=n.documentElement;if(!e||!i)throw new Error("Unable to get document size");var s=Math.max(Math.max(e.scrollWidth,i.scrollWidth),Math.max(e.offsetWidth,i.offsetWidth),Math.max(e.clientWidth,i.clientWidth)),c=Math.max(Math.max(e.scrollHeight,i.scrollHeight),Math.max(e.offsetHeight,i.offsetHeight),Math.max(e.clientHeight,i.clientHeight));return new qA(0,0,s,c)},ip=function(n){for(var e=[],i=0,s=n.length;i<s;){var c=n.charCodeAt(i++);if(c>=55296&&c<=56319&&i<s){var h=n.charCodeAt(i++);(h&64512)===56320?e.push(((c&1023)<<10)+(h&1023)+65536):(e.push(c),i--)}else e.push(c)}return e},ln=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,n);var i=n.length;if(!i)return"";for(var s=[],c=-1,h="";++c<i;){var d=n[c];d<=65535?s.push(d):(d-=65536,s.push((d>>10)+55296,d%1024+56320)),(c+1===i||s.length>16384)&&(h+=String.fromCharCode.apply(String,s),s.length=0)}return h},zv="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",I3=typeof Uint8Array>"u"?[]:new Uint8Array(256),np=0;np<zv.length;np++)I3[zv.charCodeAt(np)]=np;for(var Hv="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",xh=typeof Uint8Array>"u"?[]:new Uint8Array(256),sp=0;sp<Hv.length;sp++)xh[Hv.charCodeAt(sp)]=sp;for(var E3=function(n){var e=n.length*.75,i=n.length,s,c=0,h,d,A,v;n[n.length-1]==="="&&(e--,n[n.length-2]==="="&&e--);var C=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),I=Array.isArray(C)?C:new Uint8Array(C);for(s=0;s<i;s+=4)h=xh[n.charCodeAt(s)],d=xh[n.charCodeAt(s+1)],A=xh[n.charCodeAt(s+2)],v=xh[n.charCodeAt(s+3)],I[c++]=h<<2|d>>4,I[c++]=(d&15)<<4|A>>2,I[c++]=(A&3)<<6|v&63;return C},T3=function(n){for(var e=n.length,i=[],s=0;s<e;s+=2)i.push(n[s+1]<<8|n[s]);return i},U3=function(n){for(var e=n.length,i=[],s=0;s<e;s+=4)i.push(n[s+3]<<24|n[s+2]<<16|n[s+1]<<8|n[s]);return i},_c=5,Rg=11,zg=2,L3=Rg-_c,Vv=65536>>_c,P3=1<<_c,Hg=P3-1,Q3=1024>>_c,k3=Vv+Q3,M3=k3,D3=32,N3=M3+D3,O3=65536>>Rg,R3=1<<L3,z3=R3-1,jv=function(n,e,i){return n.slice?n.slice(e,i):new Uint16Array(Array.prototype.slice.call(n,e,i))},H3=function(n,e,i){return n.slice?n.slice(e,i):new Uint32Array(Array.prototype.slice.call(n,e,i))},V3=function(n,e){var i=E3(n),s=Array.isArray(i)?U3(i):new Uint32Array(i),c=Array.isArray(i)?T3(i):new Uint16Array(i),h=24,d=jv(c,h/2,s[4]/2),A=s[5]===2?jv(c,(h+s[4])/2):H3(s,Math.ceil((h+s[4])/4));return new j3(s[0],s[1],s[2],s[3],d,A)},j3=function(){function n(e,i,s,c,h,d){this.initialValue=e,this.errorValue=i,this.highStart=s,this.highValueIndex=c,this.index=h,this.data=d}return n.prototype.get=function(e){var i;if(e>=0){if(e<55296||e>56319&&e<=65535)return i=this.index[e>>_c],i=(i<<zg)+(e&Hg),this.data[i];if(e<=65535)return i=this.index[Vv+(e-55296>>_c)],i=(i<<zg)+(e&Hg),this.data[i];if(e<this.highStart)return i=N3-O3+(e>>Rg),i=this.index[i],i+=e>>_c&z3,i=this.index[i],i=(i<<zg)+(e&Hg),this.data[i];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},n}(),Kv="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",K3=typeof Uint8Array>"u"?[]:new Uint8Array(256),ap=0;ap<Kv.length;ap++)K3[Kv.charCodeAt(ap)]=ap;var $3="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",$v=50,G3=1,Gv=2,qv=3,q3=4,X3=5,Xv=7,Wv=8,Zv=9,Nl=10,Vg=11,Yv=12,jg=13,W3=14,Bh=15,Kg=16,op=17,Ch=18,Z3=19,Jv=20,$g=21,Fh=22,Gg=23,mu=24,Ba=25,Sh=26,Ih=27,yu=28,Y3=29,vu=30,J3=31,Ap=32,lp=33,qg=34,Xg=35,Wg=36,Eh=37,Zg=38,cp=39,up=40,Yg=41,tw=42,tF=43,eF=[9001,65288],ew="!",ks="×",hp="÷",Jg=V3($3),XA=[vu,Wg],tm=[G3,Gv,qv,X3],rw=[Nl,Wv],iw=[Ih,Sh],rF=tm.concat(rw),nw=[Zg,cp,up,qg,Xg],iF=[Bh,jg],nF=function(n,e){e===void 0&&(e="strict");var i=[],s=[],c=[];return n.forEach(function(h,d){var A=Jg.get(h);if(A>$v?(c.push(!0),A-=$v):c.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(h)!==-1)return s.push(d),i.push(Kg);if(A===q3||A===Vg){if(d===0)return s.push(d),i.push(vu);var v=i[d-1];return rF.indexOf(v)===-1?(s.push(s[d-1]),i.push(v)):(s.push(d),i.push(vu))}if(s.push(d),A===J3)return i.push(e==="strict"?$g:Eh);if(A===tw||A===Y3)return i.push(vu);if(A===tF)return h>=131072&&h<=196605||h>=196608&&h<=262141?i.push(Eh):i.push(vu);i.push(A)}),[s,i,c]},em=function(n,e,i,s){var c=s[i];if(Array.isArray(n)?n.indexOf(c)!==-1:n===c)for(var h=i;h<=s.length;){h++;var d=s[h];if(d===e)return!0;if(d!==Nl)break}if(c===Nl)for(var h=i;h>0;){h--;var A=s[h];if(Array.isArray(n)?n.indexOf(A)!==-1:n===A)for(var v=i;v<=s.length;){v++;var d=s[v];if(d===e)return!0;if(d!==Nl)break}if(A!==Nl)break}return!1},sw=function(n,e){for(var i=n;i>=0;){var s=e[i];if(s===Nl)i--;else return s}return 0},sF=function(n,e,i,s,c){if(i[s]===0)return ks;var h=s-1;if(Array.isArray(c)&&c[h]===!0)return ks;var d=h-1,A=h+1,v=e[h],C=d>=0?e[d]:0,I=e[A];if(v===Gv&&I===qv)return ks;if(tm.indexOf(v)!==-1)return ew;if(tm.indexOf(I)!==-1||rw.indexOf(I)!==-1)return ks;if(sw(h,e)===Wv)return hp;if(Jg.get(n[h])===Vg||(v===Ap||v===lp)&&Jg.get(n[A])===Vg||v===Xv||I===Xv||v===Zv||[Nl,jg,Bh].indexOf(v)===-1&&I===Zv||[op,Ch,Z3,mu,yu].indexOf(I)!==-1||sw(h,e)===Fh||em(Gg,Fh,h,e)||em([op,Ch],$g,h,e)||em(Yv,Yv,h,e))return ks;if(v===Nl)return hp;if(v===Gg||I===Gg)return ks;if(I===Kg||v===Kg)return hp;if([jg,Bh,$g].indexOf(I)!==-1||v===W3||C===Wg&&iF.indexOf(v)!==-1||v===yu&&I===Wg||I===Jv||XA.indexOf(I)!==-1&&v===Ba||XA.indexOf(v)!==-1&&I===Ba||v===Ih&&[Eh,Ap,lp].indexOf(I)!==-1||[Eh,Ap,lp].indexOf(v)!==-1&&I===Sh||XA.indexOf(v)!==-1&&iw.indexOf(I)!==-1||iw.indexOf(v)!==-1&&XA.indexOf(I)!==-1||[Ih,Sh].indexOf(v)!==-1&&(I===Ba||[Fh,Bh].indexOf(I)!==-1&&e[A+1]===Ba)||[Fh,Bh].indexOf(v)!==-1&&I===Ba||v===Ba&&[Ba,yu,mu].indexOf(I)!==-1)return ks;if([Ba,yu,mu,op,Ch].indexOf(I)!==-1)for(var T=h;T>=0;){var P=e[T];if(P===Ba)return ks;if([yu,mu].indexOf(P)!==-1)T--;else break}if([Ih,Sh].indexOf(I)!==-1)for(var T=[op,Ch].indexOf(v)!==-1?d:h;T>=0;){var P=e[T];if(P===Ba)return ks;if([yu,mu].indexOf(P)!==-1)T--;else break}if(Zg===v&&[Zg,cp,qg,Xg].indexOf(I)!==-1||[cp,qg].indexOf(v)!==-1&&[cp,up].indexOf(I)!==-1||[up,Xg].indexOf(v)!==-1&&I===up||nw.indexOf(v)!==-1&&[Jv,Sh].indexOf(I)!==-1||nw.indexOf(I)!==-1&&v===Ih||XA.indexOf(v)!==-1&&XA.indexOf(I)!==-1||v===mu&&XA.indexOf(I)!==-1||XA.concat(Ba).indexOf(v)!==-1&&I===Fh&&eF.indexOf(n[A])===-1||XA.concat(Ba).indexOf(I)!==-1&&v===Ch)return ks;if(v===Yg&&I===Yg){for(var U=i[h],V=1;U>0&&(U--,e[U]===Yg);)V++;if(V%2!==0)return ks}return v===Ap&&I===lp?ks:hp},aF=function(n,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var i=nF(n,e.lineBreak),s=i[0],c=i[1],h=i[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(c=c.map(function(A){return[Ba,vu,tw].indexOf(A)!==-1?Eh:A}));var d=e.wordBreak==="keep-all"?h.map(function(A,v){return A&&n[v]>=19968&&n[v]<=40959}):void 0;return[s,c,d]},oF=function(){function n(e,i,s,c){this.codePoints=e,this.required=i===ew,this.start=s,this.end=c}return n.prototype.slice=function(){return ln.apply(void 0,this.codePoints.slice(this.start,this.end))},n}(),AF=function(n,e){var i=ip(n),s=aF(i,e),c=s[0],h=s[1],d=s[2],A=i.length,v=0,C=0;return{next:function(){if(C>=A)return{done:!0,value:null};for(var I=ks;C<A&&(I=sF(i,h,c,++C,d))===ks;);if(I!==ks||C===A){var T=new oF(i,I,v,C);return v=C,{value:T,done:!1}}return{done:!0,value:null}}}},lF=1,cF=2,Th=4,aw=8,dp=10,ow=47,Uh=92,uF=9,hF=32,pp=34,Lh=61,dF=35,pF=36,fF=37,fp=39,gp=40,Ph=41,gF=95,na=45,mF=33,yF=60,vF=62,wF=64,_F=91,bF=93,xF=61,BF=123,mp=63,CF=125,Aw=124,FF=126,SF=128,lw=65533,rm=42,bc=43,IF=44,EF=58,TF=59,Qh=46,UF=0,LF=8,PF=11,QF=14,kF=31,MF=127,iA=-1,cw=48,uw=97,hw=101,DF=102,NF=117,OF=122,dw=65,pw=69,fw=70,RF=85,zF=90,Ms=function(n){return n>=cw&&n<=57},HF=function(n){return n>=55296&&n<=57343},wu=function(n){return Ms(n)||n>=dw&&n<=fw||n>=uw&&n<=DF},VF=function(n){return n>=uw&&n<=OF},jF=function(n){return n>=dw&&n<=zF},KF=function(n){return VF(n)||jF(n)},$F=function(n){return n>=SF},yp=function(n){return n===dp||n===uF||n===hF},vp=function(n){return KF(n)||$F(n)||n===gF},gw=function(n){return vp(n)||Ms(n)||n===na},GF=function(n){return n>=UF&&n<=LF||n===PF||n>=QF&&n<=kF||n===MF},Ol=function(n,e){return n!==Uh?!1:e!==dp},wp=function(n,e,i){return n===na?vp(e)||Ol(e,i):vp(n)?!0:!!(n===Uh&&Ol(n,e))},im=function(n,e,i){return n===bc||n===na?Ms(e)?!0:e===Qh&&Ms(i):Ms(n===Qh?e:n)},qF=function(n){var e=0,i=1;(n[e]===bc||n[e]===na)&&(n[e]===na&&(i=-1),e++);for(var s=[];Ms(n[e]);)s.push(n[e++]);var c=s.length?parseInt(ln.apply(void 0,s),10):0;n[e]===Qh&&e++;for(var h=[];Ms(n[e]);)h.push(n[e++]);var d=h.length,A=d?parseInt(ln.apply(void 0,h),10):0;(n[e]===pw||n[e]===hw)&&e++;var v=1;(n[e]===bc||n[e]===na)&&(n[e]===na&&(v=-1),e++);for(var C=[];Ms(n[e]);)C.push(n[e++]);var I=C.length?parseInt(ln.apply(void 0,C),10):0;return i*(c+A*Math.pow(10,-d))*Math.pow(10,v*I)},XF={type:2},WF={type:3},ZF={type:4},YF={type:13},JF={type:8},tS={type:21},eS={type:9},rS={type:10},iS={type:11},nS={type:12},sS={type:14},_p={type:23},aS={type:1},oS={type:25},AS={type:24},lS={type:26},cS={type:27},uS={type:28},hS={type:29},dS={type:31},nm={type:32},mw=function(){function n(){this._value=[]}return n.prototype.write=function(e){this._value=this._value.concat(ip(e))},n.prototype.read=function(){for(var e=[],i=this.consumeToken();i!==nm;)e.push(i),i=this.consumeToken();return e},n.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case pp:return this.consumeStringToken(pp);case dF:var i=this.peekCodePoint(0),s=this.peekCodePoint(1),c=this.peekCodePoint(2);if(gw(i)||Ol(s,c)){var h=wp(i,s,c)?cF:lF,d=this.consumeName();return{type:5,value:d,flags:h}}break;case pF:if(this.peekCodePoint(0)===Lh)return this.consumeCodePoint(),YF;break;case fp:return this.consumeStringToken(fp);case gp:return XF;case Ph:return WF;case rm:if(this.peekCodePoint(0)===Lh)return this.consumeCodePoint(),sS;break;case bc:if(im(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case IF:return ZF;case na:var A=e,v=this.peekCodePoint(0),C=this.peekCodePoint(1);if(im(A,v,C))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(wp(A,v,C))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(v===na&&C===vF)return this.consumeCodePoint(),this.consumeCodePoint(),AS;break;case Qh:if(im(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case ow:if(this.peekCodePoint(0)===rm)for(this.consumeCodePoint();;){var I=this.consumeCodePoint();if(I===rm&&(I=this.consumeCodePoint(),I===ow))return this.consumeToken();if(I===iA)return this.consumeToken()}break;case EF:return lS;case TF:return cS;case yF:if(this.peekCodePoint(0)===mF&&this.peekCodePoint(1)===na&&this.peekCodePoint(2)===na)return this.consumeCodePoint(),this.consumeCodePoint(),oS;break;case wF:var T=this.peekCodePoint(0),P=this.peekCodePoint(1),U=this.peekCodePoint(2);if(wp(T,P,U)){var d=this.consumeName();return{type:7,value:d}}break;case _F:return uS;case Uh:if(Ol(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case bF:return hS;case xF:if(this.peekCodePoint(0)===Lh)return this.consumeCodePoint(),JF;break;case BF:return iS;case CF:return nS;case NF:case RF:var V=this.peekCodePoint(0),R=this.peekCodePoint(1);return V===bc&&(wu(R)||R===mp)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case Aw:if(this.peekCodePoint(0)===Lh)return this.consumeCodePoint(),eS;if(this.peekCodePoint(0)===Aw)return this.consumeCodePoint(),tS;break;case FF:if(this.peekCodePoint(0)===Lh)return this.consumeCodePoint(),rS;break;case iA:return nm}return yp(e)?(this.consumeWhiteSpace(),dS):Ms(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):vp(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:ln(e)}},n.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},n.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},n.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},n.prototype.consumeUnicodeRangeToken=function(){for(var e=[],i=this.consumeCodePoint();wu(i)&&e.length<6;)e.push(i),i=this.consumeCodePoint();for(var s=!1;i===mp&&e.length<6;)e.push(i),i=this.consumeCodePoint(),s=!0;if(s){var c=parseInt(ln.apply(void 0,e.map(function(v){return v===mp?cw:v})),16),h=parseInt(ln.apply(void 0,e.map(function(v){return v===mp?fw:v})),16);return{type:30,start:c,end:h}}var d=parseInt(ln.apply(void 0,e),16);if(this.peekCodePoint(0)===na&&wu(this.peekCodePoint(1))){this.consumeCodePoint(),i=this.consumeCodePoint();for(var A=[];wu(i)&&A.length<6;)A.push(i),i=this.consumeCodePoint();var h=parseInt(ln.apply(void 0,A),16);return{type:30,start:d,end:h}}else return{type:30,start:d,end:d}},n.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===gp?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===gp?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},n.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===iA)return{type:22,value:""};var i=this.peekCodePoint(0);if(i===fp||i===pp){var s=this.consumeStringToken(this.consumeCodePoint());return s.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===iA||this.peekCodePoint(0)===Ph)?(this.consumeCodePoint(),{type:22,value:s.value}):(this.consumeBadUrlRemnants(),_p)}for(;;){var c=this.consumeCodePoint();if(c===iA||c===Ph)return{type:22,value:ln.apply(void 0,e)};if(yp(c))return this.consumeWhiteSpace(),this.peekCodePoint(0)===iA||this.peekCodePoint(0)===Ph?(this.consumeCodePoint(),{type:22,value:ln.apply(void 0,e)}):(this.consumeBadUrlRemnants(),_p);if(c===pp||c===fp||c===gp||GF(c))return this.consumeBadUrlRemnants(),_p;if(c===Uh)if(Ol(c,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),_p;else e.push(c)}},n.prototype.consumeWhiteSpace=function(){for(;yp(this.peekCodePoint(0));)this.consumeCodePoint()},n.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===Ph||e===iA)return;Ol(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},n.prototype.consumeStringSlice=function(e){for(var i=5e4,s="";e>0;){var c=Math.min(i,e);s+=ln.apply(void 0,this._value.splice(0,c)),e-=c}return this._value.shift(),s},n.prototype.consumeStringToken=function(e){var i="",s=0;do{var c=this._value[s];if(c===iA||c===void 0||c===e)return i+=this.consumeStringSlice(s),{type:0,value:i};if(c===dp)return this._value.splice(0,s),aS;if(c===Uh){var h=this._value[s+1];h!==iA&&h!==void 0&&(h===dp?(i+=this.consumeStringSlice(s),s=-1,this._value.shift()):Ol(c,h)&&(i+=this.consumeStringSlice(s),i+=ln(this.consumeEscapedCodePoint()),s=-1))}s++}while(!0)},n.prototype.consumeNumber=function(){var e=[],i=Th,s=this.peekCodePoint(0);for((s===bc||s===na)&&e.push(this.consumeCodePoint());Ms(this.peekCodePoint(0));)e.push(this.consumeCodePoint());s=this.peekCodePoint(0);var c=this.peekCodePoint(1);if(s===Qh&&Ms(c))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),i=aw;Ms(this.peekCodePoint(0));)e.push(this.consumeCodePoint());s=this.peekCodePoint(0),c=this.peekCodePoint(1);var h=this.peekCodePoint(2);if((s===pw||s===hw)&&((c===bc||c===na)&&Ms(h)||Ms(c)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),i=aw;Ms(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[qF(e),i]},n.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),i=e[0],s=e[1],c=this.peekCodePoint(0),h=this.peekCodePoint(1),d=this.peekCodePoint(2);if(wp(c,h,d)){var A=this.consumeName();return{type:15,number:i,flags:s,unit:A}}return c===fF?(this.consumeCodePoint(),{type:16,number:i,flags:s}):{type:17,number:i,flags:s}},n.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(wu(e)){for(var i=ln(e);wu(this.peekCodePoint(0))&&i.length<6;)i+=ln(this.consumeCodePoint());yp(this.peekCodePoint(0))&&this.consumeCodePoint();var s=parseInt(i,16);return s===0||HF(s)||s>1114111?lw:s}return e===iA?lw:e},n.prototype.consumeName=function(){for(var e="";;){var i=this.consumeCodePoint();if(gw(i))e+=ln(i);else if(Ol(i,this.peekCodePoint(0)))e+=ln(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(i),e}},n}(),yw=function(){function n(e){this._tokens=e}return n.create=function(e){var i=new mw;return i.write(e),new n(i.read())},n.parseValue=function(e){return n.create(e).parseComponentValue()},n.parseValues=function(e){return n.create(e).parseComponentValues()},n.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var i=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return i;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},n.prototype.parseComponentValues=function(){for(var e=[];;){var i=this.consumeComponentValue();if(i.type===32)return e;e.push(i),e.push()}},n.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},n.prototype.consumeSimpleBlock=function(e){for(var i={type:e,values:[]},s=this.consumeToken();;){if(s.type===32||fS(s,e))return i;this.reconsumeToken(s),i.values.push(this.consumeComponentValue()),s=this.consumeToken()}},n.prototype.consumeFunction=function(e){for(var i={name:e.value,values:[],type:18};;){var s=this.consumeToken();if(s.type===32||s.type===3)return i;this.reconsumeToken(s),i.values.push(this.consumeComponentValue())}},n.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?nm:e},n.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},n}(),kh=function(n){return n.type===15},_u=function(n){return n.type===17},Ci=function(n){return n.type===20},pS=function(n){return n.type===0},sm=function(n,e){return Ci(n)&&n.value===e},vw=function(n){return n.type!==31},bu=function(n){return n.type!==31&&n.type!==4},nA=function(n){var e=[],i=[];return n.forEach(function(s){if(s.type===4){if(i.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(i),i=[];return}s.type!==31&&i.push(s)}),i.length&&e.push(i),e},fS=function(n,e){return e===11&&n.type===12||e===28&&n.type===29?!0:e===2&&n.type===3},Rl=function(n){return n.type===17||n.type===15},bn=function(n){return n.type===16||Rl(n)},ww=function(n){return n.length>1?[n[0],n[1]]:[n[0]]},ts={type:17,number:0,flags:Th},am={type:16,number:50,flags:Th},zl={type:16,number:100,flags:Th},Mh=function(n,e,i){var s=n[0],c=n[1];return[Li(s,e),Li(typeof c<"u"?c:s,i)]},Li=function(n,e){if(n.type===16)return n.number/100*e;if(kh(n))switch(n.unit){case"rem":case"em":return 16*n.number;case"px":default:return n.number}return n.number},_w="deg",bw="grad",xw="rad",Bw="turn",bp={name:"angle",parse:function(n,e){if(e.type===15)switch(e.unit){case _w:return Math.PI*e.number/180;case bw:return Math.PI/200*e.number;case xw:return e.number;case Bw:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},Cw=function(n){return n.type===15&&(n.unit===_w||n.unit===bw||n.unit===xw||n.unit===Bw)},Fw=function(n){var e=n.filter(Ci).map(function(i){return i.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[ts,ts];case"to top":case"bottom":return Va(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[ts,zl];case"to right":case"left":return Va(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[zl,zl];case"to bottom":case"top":return Va(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[zl,ts];case"to left":case"right":return Va(270)}return 0},Va=function(n){return Math.PI*n/180},Hl={name:"color",parse:function(n,e){if(e.type===18){var i=gS[e.name];if(typeof i>"u")throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return i(n,e.values)}if(e.type===5){if(e.value.length===3){var s=e.value.substring(0,1),c=e.value.substring(1,2),h=e.value.substring(2,3);return jl(parseInt(s+s,16),parseInt(c+c,16),parseInt(h+h,16),1)}if(e.value.length===4){var s=e.value.substring(0,1),c=e.value.substring(1,2),h=e.value.substring(2,3),d=e.value.substring(3,4);return jl(parseInt(s+s,16),parseInt(c+c,16),parseInt(h+h,16),parseInt(d+d,16)/255)}if(e.value.length===6){var s=e.value.substring(0,2),c=e.value.substring(2,4),h=e.value.substring(4,6);return jl(parseInt(s,16),parseInt(c,16),parseInt(h,16),1)}if(e.value.length===8){var s=e.value.substring(0,2),c=e.value.substring(2,4),h=e.value.substring(4,6),d=e.value.substring(6,8);return jl(parseInt(s,16),parseInt(c,16),parseInt(h,16),parseInt(d,16)/255)}}if(e.type===20){var A=WA[e.value.toUpperCase()];if(typeof A<"u")return A}return WA.TRANSPARENT}},Vl=function(n){return(255&n)===0},jn=function(n){var e=255&n,i=255&n>>8,s=255&n>>16,c=255&n>>24;return e<255?"rgba("+c+","+s+","+i+","+e/255+")":"rgb("+c+","+s+","+i+")"},jl=function(n,e,i,s){return(n<<24|e<<16|i<<8|Math.round(s*255)<<0)>>>0},Sw=function(n,e){if(n.type===17)return n.number;if(n.type===16){var i=e===3?1:255;return e===3?n.number/100*i:Math.round(n.number/100*i)}return 0},Iw=function(n,e){var i=e.filter(bu);if(i.length===3){var s=i.map(Sw),c=s[0],h=s[1],d=s[2];return jl(c,h,d,1)}if(i.length===4){var A=i.map(Sw),c=A[0],h=A[1],d=A[2],v=A[3];return jl(c,h,d,v)}return 0};function om(n,e,i){return i<0&&(i+=1),i>=1&&(i-=1),i<1/6?(e-n)*i*6+n:i<1/2?e:i<2/3?(e-n)*6*(2/3-i)+n:n}var Ew=function(n,e){var i=e.filter(bu),s=i[0],c=i[1],h=i[2],d=i[3],A=(s.type===17?Va(s.number):bp.parse(n,s))/(Math.PI*2),v=bn(c)?c.number/100:0,C=bn(h)?h.number/100:0,I=typeof d<"u"&&bn(d)?Li(d,1):1;if(v===0)return jl(C*255,C*255,C*255,1);var T=C<=.5?C*(v+1):C+v-C*v,P=C*2-T,U=om(P,T,A+1/3),V=om(P,T,A),R=om(P,T,A-1/3);return jl(U*255,V*255,R*255,I)},gS={hsl:Ew,hsla:Ew,rgb:Iw,rgba:Iw},Dh=function(n,e){return Hl.parse(n,yw.create(e).parseComponentValue())},WA={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},mS={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(n,e){return e.map(function(i){if(Ci(i))switch(i.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},yS={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},xp=function(n,e){var i=Hl.parse(n,e[0]),s=e[1];return s&&bn(s)?{color:i,stop:s}:{color:i,stop:null}},Tw=function(n,e){var i=n[0],s=n[n.length-1];i.stop===null&&(i.stop=ts),s.stop===null&&(s.stop=zl);for(var c=[],h=0,d=0;d<n.length;d++){var A=n[d].stop;if(A!==null){var v=Li(A,e);v>h?c.push(v):c.push(h),h=v}else c.push(null)}for(var C=null,d=0;d<c.length;d++){var I=c[d];if(I===null)C===null&&(C=d);else if(C!==null){for(var T=d-C,P=c[C-1],U=(I-P)/(T+1),V=1;V<=T;V++)c[C+V-1]=U*V;C=null}}return n.map(function(R,Z){var K=R.color;return{color:K,stop:Math.max(Math.min(1,c[Z]/e),0)}})},vS=function(n,e,i){var s=e/2,c=i/2,h=Li(n[0],e)-s,d=c-Li(n[1],i);return(Math.atan2(d,h)+Math.PI*2)%(Math.PI*2)},wS=function(n,e,i){var s=typeof n=="number"?n:vS(n,e,i),c=Math.abs(e*Math.sin(s))+Math.abs(i*Math.cos(s)),h=e/2,d=i/2,A=c/2,v=Math.sin(s-Math.PI/2)*A,C=Math.cos(s-Math.PI/2)*A;return[c,h-C,h+C,d-v,d+v]},xo=function(n,e){return Math.sqrt(n*n+e*e)},Uw=function(n,e,i,s,c){var h=[[0,0],[0,e],[n,0],[n,e]];return h.reduce(function(d,A){var v=A[0],C=A[1],I=xo(i-v,s-C);return(c?I<d.optimumDistance:I>d.optimumDistance)?{optimumCorner:A,optimumDistance:I}:d},{optimumDistance:c?1/0:-1/0,optimumCorner:null}).optimumCorner},_S=function(n,e,i,s,c){var h=0,d=0;switch(n.size){case 0:n.shape===0?h=d=Math.min(Math.abs(e),Math.abs(e-s),Math.abs(i),Math.abs(i-c)):n.shape===1&&(h=Math.min(Math.abs(e),Math.abs(e-s)),d=Math.min(Math.abs(i),Math.abs(i-c)));break;case 2:if(n.shape===0)h=d=Math.min(xo(e,i),xo(e,i-c),xo(e-s,i),xo(e-s,i-c));else if(n.shape===1){var A=Math.min(Math.abs(i),Math.abs(i-c))/Math.min(Math.abs(e),Math.abs(e-s)),v=Uw(s,c,e,i,!0),C=v[0],I=v[1];h=xo(C-e,(I-i)/A),d=A*h}break;case 1:n.shape===0?h=d=Math.max(Math.abs(e),Math.abs(e-s),Math.abs(i),Math.abs(i-c)):n.shape===1&&(h=Math.max(Math.abs(e),Math.abs(e-s)),d=Math.max(Math.abs(i),Math.abs(i-c)));break;case 3:if(n.shape===0)h=d=Math.max(xo(e,i),xo(e,i-c),xo(e-s,i),xo(e-s,i-c));else if(n.shape===1){var A=Math.max(Math.abs(i),Math.abs(i-c))/Math.max(Math.abs(e),Math.abs(e-s)),T=Uw(s,c,e,i,!1),C=T[0],I=T[1];h=xo(C-e,(I-i)/A),d=A*h}break}return Array.isArray(n.size)&&(h=Li(n.size[0],s),d=n.size.length===2?Li(n.size[1],c):h),[h,d]},bS=function(n,e){var i=Va(180),s=[];return nA(e).forEach(function(c,h){if(h===0){var d=c[0];if(d.type===20&&d.value==="to"){i=Fw(c);return}else if(Cw(d)){i=bp.parse(n,d);return}}var A=xp(n,c);s.push(A)}),{angle:i,stops:s,type:1}},Bp=function(n,e){var i=Va(180),s=[];return nA(e).forEach(function(c,h){if(h===0){var d=c[0];if(d.type===20&&["top","left","right","bottom"].indexOf(d.value)!==-1){i=Fw(c);return}else if(Cw(d)){i=(bp.parse(n,d)+Va(270))%Va(360);return}}var A=xp(n,c);s.push(A)}),{angle:i,stops:s,type:1}},xS=function(n,e){var i=Va(180),s=[],c=1,h=0,d=3,A=[];return nA(e).forEach(function(v,C){var I=v[0];if(C===0){if(Ci(I)&&I.value==="linear"){c=1;return}else if(Ci(I)&&I.value==="radial"){c=2;return}}if(I.type===18){if(I.name==="from"){var T=Hl.parse(n,I.values[0]);s.push({stop:ts,color:T})}else if(I.name==="to"){var T=Hl.parse(n,I.values[0]);s.push({stop:zl,color:T})}else if(I.name==="color-stop"){var P=I.values.filter(bu);if(P.length===2){var T=Hl.parse(n,P[1]),U=P[0];_u(U)&&s.push({stop:{type:16,number:U.number*100,flags:U.flags},color:T})}}}}),c===1?{angle:(i+Va(180))%Va(360),stops:s,type:c}:{size:d,shape:h,stops:s,position:A,type:c}},Lw="closest-side",Pw="farthest-side",Qw="closest-corner",kw="farthest-corner",Mw="circle",Dw="ellipse",Nw="cover",Ow="contain",BS=function(n,e){var i=0,s=3,c=[],h=[];return nA(e).forEach(function(d,A){var v=!0;if(A===0){var C=!1;v=d.reduce(function(T,P){if(C)if(Ci(P))switch(P.value){case"center":return h.push(am),T;case"top":case"left":return h.push(ts),T;case"right":case"bottom":return h.push(zl),T}else(bn(P)||Rl(P))&&h.push(P);else if(Ci(P))switch(P.value){case Mw:return i=0,!1;case Dw:return i=1,!1;case"at":return C=!0,!1;case Lw:return s=0,!1;case Nw:case Pw:return s=1,!1;case Ow:case Qw:return s=2,!1;case kw:return s=3,!1}else if(Rl(P)||bn(P))return Array.isArray(s)||(s=[]),s.push(P),!1;return T},v)}if(v){var I=xp(n,d);c.push(I)}}),{size:s,shape:i,stops:c,position:h,type:2}},Cp=function(n,e){var i=0,s=3,c=[],h=[];return nA(e).forEach(function(d,A){var v=!0;if(A===0?v=d.reduce(function(I,T){if(Ci(T))switch(T.value){case"center":return h.push(am),!1;case"top":case"left":return h.push(ts),!1;case"right":case"bottom":return h.push(zl),!1}else if(bn(T)||Rl(T))return h.push(T),!1;return I},v):A===1&&(v=d.reduce(function(I,T){if(Ci(T))switch(T.value){case Mw:return i=0,!1;case Dw:return i=1,!1;case Ow:case Lw:return s=0,!1;case Pw:return s=1,!1;case Qw:return s=2,!1;case Nw:case kw:return s=3,!1}else if(Rl(T)||bn(T))return Array.isArray(s)||(s=[]),s.push(T),!1;return I},v)),v){var C=xp(n,d);c.push(C)}}),{size:s,shape:i,stops:c,position:h,type:2}},CS=function(n){return n.type===1},FS=function(n){return n.type===2},Am={name:"image",parse:function(n,e){if(e.type===22){var i={url:e.value,type:0};return n.cache.addImage(e.value),i}if(e.type===18){var s=Rw[e.name];if(typeof s>"u")throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return s(n,e.values)}throw new Error("Unsupported image type "+e.type)}};function SS(n){return!(n.type===20&&n.value==="none")&&(n.type!==18||!!Rw[n.name])}var Rw={"linear-gradient":bS,"-moz-linear-gradient":Bp,"-ms-linear-gradient":Bp,"-o-linear-gradient":Bp,"-webkit-linear-gradient":Bp,"radial-gradient":BS,"-moz-radial-gradient":Cp,"-ms-radial-gradient":Cp,"-o-radial-gradient":Cp,"-webkit-radial-gradient":Cp,"-webkit-gradient":xS},IS={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(n,e){if(e.length===0)return[];var i=e[0];return i.type===20&&i.value==="none"?[]:e.filter(function(s){return bu(s)&&SS(s)}).map(function(s){return Am.parse(n,s)})}},ES={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(n,e){return e.map(function(i){if(Ci(i))switch(i.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},TS={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(n,e){return nA(e).map(function(i){return i.filter(bn)}).map(ww)}},US={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(n,e){return nA(e).map(function(i){return i.filter(Ci).map(function(s){return s.value}).join(" ")}).map(LS)}},LS=function(n){switch(n){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},xu;(function(n){n.AUTO="auto",n.CONTAIN="contain",n.COVER="cover"})(xu||(xu={}));var PS={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(n,e){return nA(e).map(function(i){return i.filter(QS)})}},QS=function(n){return Ci(n)||bn(n)},Fp=function(n){return{name:"border-"+n+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},kS=Fp("top"),MS=Fp("right"),DS=Fp("bottom"),NS=Fp("left"),Sp=function(n){return{name:"border-radius-"+n,initialValue:"0 0",prefix:!1,type:1,parse:function(e,i){return ww(i.filter(bn))}}},OS=Sp("top-left"),RS=Sp("top-right"),zS=Sp("bottom-right"),HS=Sp("bottom-left"),Ip=function(n){return{name:"border-"+n+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,i){switch(i){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},VS=Ip("top"),jS=Ip("right"),KS=Ip("bottom"),$S=Ip("left"),Ep=function(n){return{name:"border-"+n+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,i){return kh(i)?i.number:0}}},GS=Ep("top"),qS=Ep("right"),XS=Ep("bottom"),WS=Ep("left"),ZS={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},YS={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(n,e){switch(e){case"rtl":return 1;case"ltr":default:return 0}}},JS={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(n,e){return e.filter(Ci).reduce(function(i,s){return i|tI(s.value)},0)}},tI=function(n){switch(n){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},eI={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(n,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},rI={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(n,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},Tp;(function(n){n.NORMAL="normal",n.STRICT="strict"})(Tp||(Tp={}));var iI={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(n,e){switch(e){case"strict":return Tp.STRICT;case"normal":default:return Tp.NORMAL}}},nI={name:"line-height",initialValue:"normal",prefix:!1,type:4},zw=function(n,e){return Ci(n)&&n.value==="normal"?1.2*e:n.type===17?e*n.number:bn(n)?Li(n,e):e},sI={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(n,e){return e.type===20&&e.value==="none"?null:Am.parse(n,e)}},aI={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(n,e){switch(e){case"inside":return 0;case"outside":default:return 1}}},lm={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(n,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},Up=function(n){return{name:"margin-"+n,initialValue:"0",prefix:!1,type:4}},oI=Up("top"),AI=Up("right"),lI=Up("bottom"),cI=Up("left"),uI={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(n,e){return e.filter(Ci).map(function(i){switch(i.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},hI={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(n,e){switch(e){case"break-word":return"break-word";case"normal":default:return"normal"}}},Lp=function(n){return{name:"padding-"+n,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},dI=Lp("top"),pI=Lp("right"),fI=Lp("bottom"),gI=Lp("left"),mI={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(n,e){switch(e){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},yI={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(n,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},vI={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(n,e){return e.length===1&&sm(e[0],"none")?[]:nA(e).map(function(i){for(var s={color:WA.TRANSPARENT,offsetX:ts,offsetY:ts,blur:ts},c=0,h=0;h<i.length;h++){var d=i[h];Rl(d)?(c===0?s.offsetX=d:c===1?s.offsetY=d:s.blur=d,c++):s.color=Hl.parse(n,d)}return s})}},wI={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(n,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},_I={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(n,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var i=BI[e.name];if(typeof i>"u")throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return i(e.values)}return null}},bI=function(n){var e=n.filter(function(i){return i.type===17}).map(function(i){return i.number});return e.length===6?e:null},xI=function(n){var e=n.filter(function(v){return v.type===17}).map(function(v){return v.number}),i=e[0],s=e[1];e[2],e[3];var c=e[4],h=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var d=e[12],A=e[13];return e[14],e[15],e.length===16?[i,s,c,h,d,A]:null},BI={matrix:bI,matrix3d:xI},Hw={type:16,number:50,flags:Th},CI=[Hw,Hw],FI={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(n,e){var i=e.filter(bn);return i.length!==2?CI:[i[0],i[1]]}},SI={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(n,e){switch(e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},Nh;(function(n){n.NORMAL="normal",n.BREAK_ALL="break-all",n.KEEP_ALL="keep-all"})(Nh||(Nh={}));for(var II={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(n,e){switch(e){case"break-all":return Nh.BREAK_ALL;case"keep-all":return Nh.KEEP_ALL;case"normal":default:return Nh.NORMAL}}},EI={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(n,e){if(e.type===20)return{auto:!0,order:0};if(_u(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},Vw={name:"time",parse:function(n,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},TI={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(n,e){return _u(e)?e.number:1}},UI={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},LI={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(n,e){return e.filter(Ci).map(function(i){switch(i.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(i){return i!==0})}},PI={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(n,e){var i=[],s=[];return e.forEach(function(c){switch(c.type){case 20:case 0:i.push(c.value);break;case 17:i.push(c.number.toString());break;case 4:s.push(i.join(" ")),i.length=0;break}}),i.length&&s.push(i.join(" ")),s.map(function(c){return c.indexOf(" ")===-1?c:"'"+c+"'"})}},QI={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},kI={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(n,e){if(_u(e))return e.number;if(Ci(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},MI={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(n,e){return e.filter(Ci).map(function(i){return i.value})}},DI={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(n,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},Mn=function(n,e){return(n&e)!==0},NI={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(n,e){if(e.length===0)return[];var i=e[0];return i.type===20&&i.value==="none"?[]:e}},OI={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(n,e){if(e.length===0)return null;var i=e[0];if(i.type===20&&i.value==="none")return null;for(var s=[],c=e.filter(vw),h=0;h<c.length;h++){var d=c[h],A=c[h+1];if(d.type===20){var v=A&&_u(A)?A.number:1;s.push({counter:d.value,increment:v})}}return s}},RI={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(n,e){if(e.length===0)return[];for(var i=[],s=e.filter(vw),c=0;c<s.length;c++){var h=s[c],d=s[c+1];if(Ci(h)&&h.value!=="none"){var A=d&&_u(d)?d.number:0;i.push({counter:h.value,reset:A})}}return i}},zI={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(n,e){return e.filter(kh).map(function(i){return Vw.parse(n,i)})}},HI={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(n,e){if(e.length===0)return null;var i=e[0];if(i.type===20&&i.value==="none")return null;var s=[],c=e.filter(pS);if(c.length%2!==0)return null;for(var h=0;h<c.length;h+=2){var d=c[h].value,A=c[h+1].value;s.push({open:d,close:A})}return s}},jw=function(n,e,i){if(!n)return"";var s=n[Math.min(e,n.length-1)];return s?i?s.open:s.close:""},VI={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(n,e){return e.length===1&&sm(e[0],"none")?[]:nA(e).map(function(i){for(var s={color:255,offsetX:ts,offsetY:ts,blur:ts,spread:ts,inset:!1},c=0,h=0;h<i.length;h++){var d=i[h];sm(d,"inset")?s.inset=!0:Rl(d)?(c===0?s.offsetX=d:c===1?s.offsetY=d:c===2?s.blur=d:s.spread=d,c++):s.color=Hl.parse(n,d)}return s})}},jI={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(n,e){var i=[0,1,2],s=[];return e.filter(Ci).forEach(function(c){switch(c.value){case"stroke":s.push(1);break;case"fill":s.push(0);break;case"markers":s.push(2);break}}),i.forEach(function(c){s.indexOf(c)===-1&&s.push(c)}),s}},KI={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},$I={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(n,e){return kh(e)?e.number:0}},GI=function(){function n(e,i){var s,c;this.animationDuration=Ye(e,zI,i.animationDuration),this.backgroundClip=Ye(e,mS,i.backgroundClip),this.backgroundColor=Ye(e,yS,i.backgroundColor),this.backgroundImage=Ye(e,IS,i.backgroundImage),this.backgroundOrigin=Ye(e,ES,i.backgroundOrigin),this.backgroundPosition=Ye(e,TS,i.backgroundPosition),this.backgroundRepeat=Ye(e,US,i.backgroundRepeat),this.backgroundSize=Ye(e,PS,i.backgroundSize),this.borderTopColor=Ye(e,kS,i.borderTopColor),this.borderRightColor=Ye(e,MS,i.borderRightColor),this.borderBottomColor=Ye(e,DS,i.borderBottomColor),this.borderLeftColor=Ye(e,NS,i.borderLeftColor),this.borderTopLeftRadius=Ye(e,OS,i.borderTopLeftRadius),this.borderTopRightRadius=Ye(e,RS,i.borderTopRightRadius),this.borderBottomRightRadius=Ye(e,zS,i.borderBottomRightRadius),this.borderBottomLeftRadius=Ye(e,HS,i.borderBottomLeftRadius),this.borderTopStyle=Ye(e,VS,i.borderTopStyle),this.borderRightStyle=Ye(e,jS,i.borderRightStyle),this.borderBottomStyle=Ye(e,KS,i.borderBottomStyle),this.borderLeftStyle=Ye(e,$S,i.borderLeftStyle),this.borderTopWidth=Ye(e,GS,i.borderTopWidth),this.borderRightWidth=Ye(e,qS,i.borderRightWidth),this.borderBottomWidth=Ye(e,XS,i.borderBottomWidth),this.borderLeftWidth=Ye(e,WS,i.borderLeftWidth),this.boxShadow=Ye(e,VI,i.boxShadow),this.color=Ye(e,ZS,i.color),this.direction=Ye(e,YS,i.direction),this.display=Ye(e,JS,i.display),this.float=Ye(e,eI,i.cssFloat),this.fontFamily=Ye(e,PI,i.fontFamily),this.fontSize=Ye(e,QI,i.fontSize),this.fontStyle=Ye(e,DI,i.fontStyle),this.fontVariant=Ye(e,MI,i.fontVariant),this.fontWeight=Ye(e,kI,i.fontWeight),this.letterSpacing=Ye(e,rI,i.letterSpacing),this.lineBreak=Ye(e,iI,i.lineBreak),this.lineHeight=Ye(e,nI,i.lineHeight),this.listStyleImage=Ye(e,sI,i.listStyleImage),this.listStylePosition=Ye(e,aI,i.listStylePosition),this.listStyleType=Ye(e,lm,i.listStyleType),this.marginTop=Ye(e,oI,i.marginTop),this.marginRight=Ye(e,AI,i.marginRight),this.marginBottom=Ye(e,lI,i.marginBottom),this.marginLeft=Ye(e,cI,i.marginLeft),this.opacity=Ye(e,TI,i.opacity);var h=Ye(e,uI,i.overflow);this.overflowX=h[0],this.overflowY=h[h.length>1?1:0],this.overflowWrap=Ye(e,hI,i.overflowWrap),this.paddingTop=Ye(e,dI,i.paddingTop),this.paddingRight=Ye(e,pI,i.paddingRight),this.paddingBottom=Ye(e,fI,i.paddingBottom),this.paddingLeft=Ye(e,gI,i.paddingLeft),this.paintOrder=Ye(e,jI,i.paintOrder),this.position=Ye(e,yI,i.position),this.textAlign=Ye(e,mI,i.textAlign),this.textDecorationColor=Ye(e,UI,(s=i.textDecorationColor)!==null&&s!==void 0?s:i.color),this.textDecorationLine=Ye(e,LI,(c=i.textDecorationLine)!==null&&c!==void 0?c:i.textDecoration),this.textShadow=Ye(e,vI,i.textShadow),this.textTransform=Ye(e,wI,i.textTransform),this.transform=Ye(e,_I,i.transform),this.transformOrigin=Ye(e,FI,i.transformOrigin),this.visibility=Ye(e,SI,i.visibility),this.webkitTextStrokeColor=Ye(e,KI,i.webkitTextStrokeColor),this.webkitTextStrokeWidth=Ye(e,$I,i.webkitTextStrokeWidth),this.wordBreak=Ye(e,II,i.wordBreak),this.zIndex=Ye(e,EI,i.zIndex)}return n.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},n.prototype.isTransparent=function(){return Vl(this.backgroundColor)},n.prototype.isTransformed=function(){return this.transform!==null},n.prototype.isPositioned=function(){return this.position!==0},n.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},n.prototype.isFloating=function(){return this.float!==0},n.prototype.isInlineLevel=function(){return Mn(this.display,4)||Mn(this.display,33554432)||Mn(this.display,268435456)||Mn(this.display,536870912)||Mn(this.display,67108864)||Mn(this.display,134217728)},n}(),qI=function(){function n(e,i){this.content=Ye(e,NI,i.content),this.quotes=Ye(e,HI,i.quotes)}return n}(),Kw=function(){function n(e,i){this.counterIncrement=Ye(e,OI,i.counterIncrement),this.counterReset=Ye(e,RI,i.counterReset)}return n}(),Ye=function(n,e,i){var s=new mw,c=i!==null&&typeof i<"u"?i.toString():e.initialValue;s.write(c);var h=new yw(s.read());switch(e.type){case 2:var d=h.parseComponentValue();return e.parse(n,Ci(d)?d.value:e.initialValue);case 0:return e.parse(n,h.parseComponentValue());case 1:return e.parse(n,h.parseComponentValues());case 4:return h.parseComponentValue();case 3:switch(e.format){case"angle":return bp.parse(n,h.parseComponentValue());case"color":return Hl.parse(n,h.parseComponentValue());case"image":return Am.parse(n,h.parseComponentValue());case"length":var A=h.parseComponentValue();return Rl(A)?A:ts;case"length-percentage":var v=h.parseComponentValue();return bn(v)?v:ts;case"time":return Vw.parse(n,h.parseComponentValue())}break}},XI="data-html2canvas-debug",WI=function(n){var e=n.getAttribute(XI);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},cm=function(n,e){var i=WI(n);return i===1||e===i},sA=function(){function n(e,i){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,cm(i,3))debugger;this.styles=new GI(e,window.getComputedStyle(i,null)),xm(i)&&(this.styles.animationDuration.some(function(s){return s>0})&&(i.style.animationDuration="0s"),this.styles.transform!==null&&(i.style.transform="none")),this.bounds=rp(this.context,i),cm(i,4)&&(this.flags|=16)}return n}(),ZI="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",$w="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Oh=typeof Uint8Array>"u"?[]:new Uint8Array(256),Pp=0;Pp<$w.length;Pp++)Oh[$w.charCodeAt(Pp)]=Pp;for(var YI=function(n){var e=n.length*.75,i=n.length,s,c=0,h,d,A,v;n[n.length-1]==="="&&(e--,n[n.length-2]==="="&&e--);var C=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),I=Array.isArray(C)?C:new Uint8Array(C);for(s=0;s<i;s+=4)h=Oh[n.charCodeAt(s)],d=Oh[n.charCodeAt(s+1)],A=Oh[n.charCodeAt(s+2)],v=Oh[n.charCodeAt(s+3)],I[c++]=h<<2|d>>4,I[c++]=(d&15)<<4|A>>2,I[c++]=(A&3)<<6|v&63;return C},JI=function(n){for(var e=n.length,i=[],s=0;s<e;s+=2)i.push(n[s+1]<<8|n[s]);return i},tE=function(n){for(var e=n.length,i=[],s=0;s<e;s+=4)i.push(n[s+3]<<24|n[s+2]<<16|n[s+1]<<8|n[s]);return i},xc=5,um=11,hm=2,eE=um-xc,Gw=65536>>xc,rE=1<<xc,dm=rE-1,iE=1024>>xc,nE=Gw+iE,sE=nE,aE=32,oE=sE+aE,AE=65536>>um,lE=1<<eE,cE=lE-1,qw=function(n,e,i){return n.slice?n.slice(e,i):new Uint16Array(Array.prototype.slice.call(n,e,i))},uE=function(n,e,i){return n.slice?n.slice(e,i):new Uint32Array(Array.prototype.slice.call(n,e,i))},hE=function(n,e){var i=YI(n),s=Array.isArray(i)?tE(i):new Uint32Array(i),c=Array.isArray(i)?JI(i):new Uint16Array(i),h=24,d=qw(c,h/2,s[4]/2),A=s[5]===2?qw(c,(h+s[4])/2):uE(s,Math.ceil((h+s[4])/4));return new dE(s[0],s[1],s[2],s[3],d,A)},dE=function(){function n(e,i,s,c,h,d){this.initialValue=e,this.errorValue=i,this.highStart=s,this.highValueIndex=c,this.index=h,this.data=d}return n.prototype.get=function(e){var i;if(e>=0){if(e<55296||e>56319&&e<=65535)return i=this.index[e>>xc],i=(i<<hm)+(e&dm),this.data[i];if(e<=65535)return i=this.index[Gw+(e-55296>>xc)],i=(i<<hm)+(e&dm),this.data[i];if(e<this.highStart)return i=oE-AE+(e>>um),i=this.index[i],i+=e>>xc&cE,i=this.index[i],i=(i<<hm)+(e&dm),this.data[i];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},n}(),Xw="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",pE=typeof Uint8Array>"u"?[]:new Uint8Array(256),Qp=0;Qp<Xw.length;Qp++)pE[Xw.charCodeAt(Qp)]=Qp;var fE=1,pm=2,fm=3,Ww=4,Zw=5,gE=7,Yw=8,gm=9,mm=10,Jw=11,t_=12,e_=13,r_=14,ym=15,mE=function(n){for(var e=[],i=0,s=n.length;i<s;){var c=n.charCodeAt(i++);if(c>=55296&&c<=56319&&i<s){var h=n.charCodeAt(i++);(h&64512)===56320?e.push(((c&1023)<<10)+(h&1023)+65536):(e.push(c),i--)}else e.push(c)}return e},yE=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,n);var i=n.length;if(!i)return"";for(var s=[],c=-1,h="";++c<i;){var d=n[c];d<=65535?s.push(d):(d-=65536,s.push((d>>10)+55296,d%1024+56320)),(c+1===i||s.length>16384)&&(h+=String.fromCharCode.apply(String,s),s.length=0)}return h},vE=hE(ZI),Bc="×",i_="÷",wE=function(n){return vE.get(n)},_E=function(n,e,i){var s=i-2,c=e[s],h=e[i-1],d=e[i];if(h===pm&&d===fm)return Bc;if(h===pm||h===fm||h===Ww||d===pm||d===fm||d===Ww)return i_;if(h===Yw&&[Yw,gm,Jw,t_].indexOf(d)!==-1||(h===Jw||h===gm)&&(d===gm||d===mm)||(h===t_||h===mm)&&d===mm||d===e_||d===Zw||d===gE||h===fE)return Bc;if(h===e_&&d===r_){for(;c===Zw;)c=e[--s];if(c===r_)return Bc}if(h===ym&&d===ym){for(var A=0;c===ym;)A++,c=e[--s];if(A%2===0)return Bc}return i_},bE=function(n){var e=mE(n),i=e.length,s=0,c=0,h=e.map(wE);return{next:function(){if(s>=i)return{done:!0,value:null};for(var d=Bc;s<i&&(d=_E(e,h,++s))===Bc;);if(d!==Bc||s===i){var A=yE.apply(null,e.slice(c,s));return c=s,{value:A,done:!1}}return{done:!0,value:null}}}},xE=function(n){for(var e=bE(n),i=[],s;!(s=e.next()).done;)s.value&&i.push(s.value.slice());return i},BE=function(n){var e=123;if(n.createRange){var i=n.createRange();if(i.getBoundingClientRect){var s=n.createElement("boundtest");s.style.height=e+"px",s.style.display="block",n.body.appendChild(s),i.selectNode(s);var c=i.getBoundingClientRect(),h=Math.round(c.height);if(n.body.removeChild(s),h===e)return!0}}return!1},CE=function(n){var e=n.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",n.body.appendChild(e);var i=n.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var s=e.firstChild,c=ip(s.data).map(function(v){return ln(v)}),h=0,d={},A=c.every(function(v,C){i.setStart(s,h),i.setEnd(s,h+v.length);var I=i.getBoundingClientRect();h+=v.length;var T=I.x>d.x||I.y>d.y;return d=I,C===0?!0:T});return n.body.removeChild(e),A},FE=function(){return typeof new Image().crossOrigin<"u"},SE=function(){return typeof new XMLHttpRequest().responseType=="string"},IE=function(n){var e=new Image,i=n.createElement("canvas"),s=i.getContext("2d");if(!s)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{s.drawImage(e,0,0),i.toDataURL()}catch{return!1}return!0},n_=function(n){return n[0]===0&&n[1]===255&&n[2]===0&&n[3]===255},EE=function(n){var e=n.createElement("canvas"),i=100;e.width=i,e.height=i;var s=e.getContext("2d");if(!s)return Promise.reject(!1);s.fillStyle="rgb(0, 255, 0)",s.fillRect(0,0,i,i);var c=new Image,h=e.toDataURL();c.src=h;var d=vm(i,i,0,0,c);return s.fillStyle="red",s.fillRect(0,0,i,i),s_(d).then(function(A){s.drawImage(A,0,0);var v=s.getImageData(0,0,i,i).data;s.fillStyle="red",s.fillRect(0,0,i,i);var C=n.createElement("div");return C.style.backgroundImage="url("+h+")",C.style.height=i+"px",n_(v)?s_(vm(i,i,0,0,C)):Promise.reject(!1)}).then(function(A){return s.drawImage(A,0,0),n_(s.getImageData(0,0,i,i).data)}).catch(function(){return!1})},vm=function(n,e,i,s,c){var h="http://www.w3.org/2000/svg",d=document.createElementNS(h,"svg"),A=document.createElementNS(h,"foreignObject");return d.setAttributeNS(null,"width",n.toString()),d.setAttributeNS(null,"height",e.toString()),A.setAttributeNS(null,"width","100%"),A.setAttributeNS(null,"height","100%"),A.setAttributeNS(null,"x",i.toString()),A.setAttributeNS(null,"y",s.toString()),A.setAttributeNS(null,"externalResourcesRequired","true"),d.appendChild(A),A.appendChild(c),d},s_=function(n){return new Promise(function(e,i){var s=new Image;s.onload=function(){return e(s)},s.onerror=i,s.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(n))})},es={get SUPPORT_RANGE_BOUNDS(){var n=BE(document);return Object.defineProperty(es,"SUPPORT_RANGE_BOUNDS",{value:n}),n},get SUPPORT_WORD_BREAKING(){var n=es.SUPPORT_RANGE_BOUNDS&&CE(document);return Object.defineProperty(es,"SUPPORT_WORD_BREAKING",{value:n}),n},get SUPPORT_SVG_DRAWING(){var n=IE(document);return Object.defineProperty(es,"SUPPORT_SVG_DRAWING",{value:n}),n},get SUPPORT_FOREIGNOBJECT_DRAWING(){var n=typeof Array.from=="function"&&typeof window.fetch=="function"?EE(document):Promise.resolve(!1);return Object.defineProperty(es,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:n}),n},get SUPPORT_CORS_IMAGES(){var n=FE();return Object.defineProperty(es,"SUPPORT_CORS_IMAGES",{value:n}),n},get SUPPORT_RESPONSE_TYPE(){var n=SE();return Object.defineProperty(es,"SUPPORT_RESPONSE_TYPE",{value:n}),n},get SUPPORT_CORS_XHR(){var n="withCredentials"in new XMLHttpRequest;return Object.defineProperty(es,"SUPPORT_CORS_XHR",{value:n}),n},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var n=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(es,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:n}),n}},Rh=function(){function n(e,i){this.text=e,this.bounds=i}return n}(),TE=function(n,e,i,s){var c=PE(e,i),h=[],d=0;return c.forEach(function(A){if(i.textDecorationLine.length||A.trim().length>0)if(es.SUPPORT_RANGE_BOUNDS){var v=a_(s,d,A.length).getClientRects();if(v.length>1){var C=wm(A),I=0;C.forEach(function(P){h.push(new Rh(P,qA.fromDOMRectList(n,a_(s,I+d,P.length).getClientRects()))),I+=P.length})}else h.push(new Rh(A,qA.fromDOMRectList(n,v)))}else{var T=s.splitText(A.length);h.push(new Rh(A,UE(n,s))),s=T}else es.SUPPORT_RANGE_BOUNDS||(s=s.splitText(A.length));d+=A.length}),h},UE=function(n,e){var i=e.ownerDocument;if(i){var s=i.createElement("html2canvaswrapper");s.appendChild(e.cloneNode(!0));var c=e.parentNode;if(c){c.replaceChild(s,e);var h=rp(n,s);return s.firstChild&&c.replaceChild(s.firstChild,s),h}}return qA.EMPTY},a_=function(n,e,i){var s=n.ownerDocument;if(!s)throw new Error("Node has no owner document");var c=s.createRange();return c.setStart(n,e),c.setEnd(n,e+i),c},wm=function(n){if(es.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(n)).map(function(i){return i.segment})}return xE(n)},LE=function(n,e){if(es.SUPPORT_NATIVE_TEXT_SEGMENTATION){var i=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(i.segment(n)).map(function(s){return s.segment})}return kE(n,e)},PE=function(n,e){return e.letterSpacing!==0?wm(n):LE(n,e)},QE=[32,160,4961,65792,65793,4153,4241],kE=function(n,e){for(var i=AF(n,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),s=[],c,h=function(){if(c.value){var d=c.value.slice(),A=ip(d),v="";A.forEach(function(C){QE.indexOf(C)===-1?v+=ln(C):(v.length&&s.push(v),s.push(ln(C)),v="")}),v.length&&s.push(v)}};!(c=i.next()).done;)h();return s},ME=function(){function n(e,i,s){this.text=DE(i.data,s.textTransform),this.textBounds=TE(e,this.text,s,i)}return n}(),DE=function(n,e){switch(e){case 1:return n.toLowerCase();case 3:return n.replace(NE,OE);case 2:return n.toUpperCase();default:return n}},NE=/(^|\s|:|-|\(|\))([a-z])/g,OE=function(n,e,i){return n.length>0?e+i.toUpperCase():n},o_=function(n){bo(e,n);function e(i,s){var c=n.call(this,i,s)||this;return c.src=s.currentSrc||s.src,c.intrinsicWidth=s.naturalWidth,c.intrinsicHeight=s.naturalHeight,c.context.cache.addImage(c.src),c}return e}(sA),A_=function(n){bo(e,n);function e(i,s){var c=n.call(this,i,s)||this;return c.canvas=s,c.intrinsicWidth=s.width,c.intrinsicHeight=s.height,c}return e}(sA),l_=function(n){bo(e,n);function e(i,s){var c=n.call(this,i,s)||this,h=new XMLSerializer,d=rp(i,s);return s.setAttribute("width",d.width+"px"),s.setAttribute("height",d.height+"px"),c.svg="data:image/svg+xml,"+encodeURIComponent(h.serializeToString(s)),c.intrinsicWidth=s.width.baseVal.value,c.intrinsicHeight=s.height.baseVal.value,c.context.cache.addImage(c.svg),c}return e}(sA),c_=function(n){bo(e,n);function e(i,s){var c=n.call(this,i,s)||this;return c.value=s.value,c}return e}(sA),_m=function(n){bo(e,n);function e(i,s){var c=n.call(this,i,s)||this;return c.start=s.start,c.reversed=typeof s.reversed=="boolean"&&s.reversed===!0,c}return e}(sA),RE=[{type:15,flags:0,unit:"px",number:3}],zE=[{type:16,flags:0,number:50}],HE=function(n){return n.width>n.height?new qA(n.left+(n.width-n.height)/2,n.top,n.height,n.height):n.width<n.height?new qA(n.left,n.top+(n.height-n.width)/2,n.width,n.width):n},VE=function(n){var e=n.type===jE?new Array(n.value.length+1).join("•"):n.value;return e.length===0?n.placeholder||"":e},kp="checkbox",Mp="radio",jE="password",u_=707406591,bm=function(n){bo(e,n);function e(i,s){var c=n.call(this,i,s)||this;switch(c.type=s.type.toLowerCase(),c.checked=s.checked,c.value=VE(s),(c.type===kp||c.type===Mp)&&(c.styles.backgroundColor=3739148031,c.styles.borderTopColor=c.styles.borderRightColor=c.styles.borderBottomColor=c.styles.borderLeftColor=2779096575,c.styles.borderTopWidth=c.styles.borderRightWidth=c.styles.borderBottomWidth=c.styles.borderLeftWidth=1,c.styles.borderTopStyle=c.styles.borderRightStyle=c.styles.borderBottomStyle=c.styles.borderLeftStyle=1,c.styles.backgroundClip=[0],c.styles.backgroundOrigin=[0],c.bounds=HE(c.bounds)),c.type){case kp:c.styles.borderTopRightRadius=c.styles.borderTopLeftRadius=c.styles.borderBottomRightRadius=c.styles.borderBottomLeftRadius=RE;break;case Mp:c.styles.borderTopRightRadius=c.styles.borderTopLeftRadius=c.styles.borderBottomRightRadius=c.styles.borderBottomLeftRadius=zE;break}return c}return e}(sA),h_=function(n){bo(e,n);function e(i,s){var c=n.call(this,i,s)||this,h=s.options[s.selectedIndex||0];return c.value=h&&h.text||"",c}return e}(sA),d_=function(n){bo(e,n);function e(i,s){var c=n.call(this,i,s)||this;return c.value=s.value,c}return e}(sA),p_=function(n){bo(e,n);function e(i,s){var c=n.call(this,i,s)||this;c.src=s.src,c.width=parseInt(s.width,10)||0,c.height=parseInt(s.height,10)||0,c.backgroundColor=c.styles.backgroundColor;try{if(s.contentWindow&&s.contentWindow.document&&s.contentWindow.document.documentElement){c.tree=g_(i,s.contentWindow.document.documentElement);var h=s.contentWindow.document.documentElement?Dh(i,getComputedStyle(s.contentWindow.document.documentElement).backgroundColor):WA.TRANSPARENT,d=s.contentWindow.document.body?Dh(i,getComputedStyle(s.contentWindow.document.body).backgroundColor):WA.TRANSPARENT;c.backgroundColor=Vl(h)?Vl(d)?c.styles.backgroundColor:d:h}}catch{}return c}return e}(sA),KE=["OL","UL","MENU"],Dp=function(n,e,i,s){for(var c=e.firstChild,h=void 0;c;c=h)if(h=c.nextSibling,m_(c)&&c.data.trim().length>0)i.textNodes.push(new ME(n,c,i.styles));else if(Bu(c))if(x_(c)&&c.assignedNodes)c.assignedNodes().forEach(function(A){return Dp(n,A,i,s)});else{var d=f_(n,c);d.styles.isVisible()&&($E(c,d,s)?d.flags|=4:GE(d.styles)&&(d.flags|=2),KE.indexOf(c.tagName)!==-1&&(d.flags|=8),i.elements.push(d),c.slot,c.shadowRoot?Dp(n,c.shadowRoot,d,s):!Op(c)&&!y_(c)&&!Rp(c)&&Dp(n,c,d,s))}},f_=function(n,e){return Cm(e)?new o_(n,e):v_(e)?new A_(n,e):y_(e)?new l_(n,e):qE(e)?new c_(n,e):XE(e)?new _m(n,e):WE(e)?new bm(n,e):Rp(e)?new h_(n,e):Op(e)?new d_(n,e):__(e)?new p_(n,e):new sA(n,e)},g_=function(n,e){var i=f_(n,e);return i.flags|=4,Dp(n,e,i,i),i},$E=function(n,e,i){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||Bm(n)&&i.styles.isTransparent()},GE=function(n){return n.isPositioned()||n.isFloating()},m_=function(n){return n.nodeType===Node.TEXT_NODE},Bu=function(n){return n.nodeType===Node.ELEMENT_NODE},xm=function(n){return Bu(n)&&typeof n.style<"u"&&!Np(n)},Np=function(n){return typeof n.className=="object"},qE=function(n){return n.tagName==="LI"},XE=function(n){return n.tagName==="OL"},WE=function(n){return n.tagName==="INPUT"},ZE=function(n){return n.tagName==="HTML"},y_=function(n){return n.tagName==="svg"},Bm=function(n){return n.tagName==="BODY"},v_=function(n){return n.tagName==="CANVAS"},w_=function(n){return n.tagName==="VIDEO"},Cm=function(n){return n.tagName==="IMG"},__=function(n){return n.tagName==="IFRAME"},b_=function(n){return n.tagName==="STYLE"},YE=function(n){return n.tagName==="SCRIPT"},Op=function(n){return n.tagName==="TEXTAREA"},Rp=function(n){return n.tagName==="SELECT"},x_=function(n){return n.tagName==="SLOT"},B_=function(n){return n.tagName.indexOf("-")>0},JE=function(){function n(){this.counters={}}return n.prototype.getCounterValue=function(e){var i=this.counters[e];return i&&i.length?i[i.length-1]:1},n.prototype.getCounterValues=function(e){var i=this.counters[e];return i||[]},n.prototype.pop=function(e){var i=this;e.forEach(function(s){return i.counters[s].pop()})},n.prototype.parse=function(e){var i=this,s=e.counterIncrement,c=e.counterReset,h=!0;s!==null&&s.forEach(function(A){var v=i.counters[A.counter];v&&A.increment!==0&&(h=!1,v.length||v.push(1),v[Math.max(0,v.length-1)]+=A.increment)});var d=[];return h&&c.forEach(function(A){var v=i.counters[A.counter];d.push(A.counter),v||(v=i.counters[A.counter]=[]),v.push(A.reset)}),d},n}(),C_={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},F_={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["Ք","Փ","Ւ","Ց","Ր","Տ","Վ","Ս","Ռ","Ջ","Պ","Չ","Ո","Շ","Ն","Յ","Մ","Ճ","Ղ","Ձ","Հ","Կ","Ծ","Խ","Լ","Ի","Ժ","Թ","Ը","Է","Զ","Ե","Դ","Գ","Բ","Ա"]},tT={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["י׳","ט׳","ח׳","ז׳","ו׳","ה׳","ד׳","ג׳","ב׳","א׳","ת","ש","ר","ק","צ","פ","ע","ס","נ","מ","ל","כ","יט","יח","יז","טז","טו","י","ט","ח","ז","ו","ה","ד","ג","ב","א"]},eT={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["ჵ","ჰ","ჯ","ჴ","ხ","ჭ","წ","ძ","ც","ჩ","შ","ყ","ღ","ქ","ფ","ჳ","ტ","ს","რ","ჟ","პ","ო","ჲ","ნ","მ","ლ","კ","ი","თ","ჱ","ზ","ვ","ე","დ","გ","ბ","ა"]},Cu=function(n,e,i,s,c,h){return n<e||n>i?Hh(n,c,h.length>0):s.integers.reduce(function(d,A,v){for(;n>=A;)n-=A,d+=s.values[v];return d},"")+h},S_=function(n,e,i,s){var c="";do i||n--,c=s(n)+c,n/=e;while(n*e>=e);return c},cn=function(n,e,i,s,c){var h=i-e+1;return(n<0?"-":"")+(S_(Math.abs(n),h,s,function(d){return ln(Math.floor(d%h)+e)})+c)},Cc=function(n,e,i){i===void 0&&(i=". ");var s=e.length;return S_(Math.abs(n),s,!1,function(c){return e[Math.floor(c%s)]})+i},Fu=1,Kl=2,$l=4,zh=8,ZA=function(n,e,i,s,c,h){if(n<-9999||n>9999)return Hh(n,4,c.length>0);var d=Math.abs(n),A=c;if(d===0)return e[0]+A;for(var v=0;d>0&&v<=4;v++){var C=d%10;C===0&&Mn(h,Fu)&&A!==""?A=e[C]+A:C>1||C===1&&v===0||C===1&&v===1&&Mn(h,Kl)||C===1&&v===1&&Mn(h,$l)&&n>100||C===1&&v>1&&Mn(h,zh)?A=e[C]+(v>0?i[v-1]:"")+A:C===1&&v>0&&(A=i[v-1]+A),d=Math.floor(d/10)}return(n<0?s:"")+A},I_="十百千萬",E_="拾佰仟萬",T_="マイナス",Fm="마이너스",Hh=function(n,e,i){var s=i?". ":"",c=i?"、":"",h=i?", ":"",d=i?" ":"";switch(e){case 0:return"•"+d;case 1:return"◦"+d;case 2:return"◾"+d;case 5:var A=cn(n,48,57,!0,s);return A.length<4?"0"+A:A;case 4:return Cc(n,"〇一二三四五六七八九",c);case 6:return Cu(n,1,3999,C_,3,s).toLowerCase();case 7:return Cu(n,1,3999,C_,3,s);case 8:return cn(n,945,969,!1,s);case 9:return cn(n,97,122,!1,s);case 10:return cn(n,65,90,!1,s);case 11:return cn(n,1632,1641,!0,s);case 12:case 49:return Cu(n,1,9999,F_,3,s);case 35:return Cu(n,1,9999,F_,3,s).toLowerCase();case 13:return cn(n,2534,2543,!0,s);case 14:case 30:return cn(n,6112,6121,!0,s);case 15:return Cc(n,"子丑寅卯辰巳午未申酉戌亥",c);case 16:return Cc(n,"甲乙丙丁戊己庚辛壬癸",c);case 17:case 48:return ZA(n,"零一二三四五六七八九",I_,"負",c,Kl|$l|zh);case 47:return ZA(n,"零壹貳參肆伍陸柒捌玖",E_,"負",c,Fu|Kl|$l|zh);case 42:return ZA(n,"零一二三四五六七八九",I_,"负",c,Kl|$l|zh);case 41:return ZA(n,"零壹贰叁肆伍陆柒捌玖",E_,"负",c,Fu|Kl|$l|zh);case 26:return ZA(n,"〇一二三四五六七八九","十百千万",T_,c,0);case 25:return ZA(n,"零壱弐参四伍六七八九","拾百千万",T_,c,Fu|Kl|$l);case 31:return ZA(n,"영일이삼사오육칠팔구","십백천만",Fm,h,Fu|Kl|$l);case 33:return ZA(n,"零一二三四五六七八九","十百千萬",Fm,h,0);case 32:return ZA(n,"零壹貳參四五六七八九","拾百千",Fm,h,Fu|Kl|$l);case 18:return cn(n,2406,2415,!0,s);case 20:return Cu(n,1,19999,eT,3,s);case 21:return cn(n,2790,2799,!0,s);case 22:return cn(n,2662,2671,!0,s);case 22:return Cu(n,1,10999,tT,3,s);case 23:return Cc(n,"あいうえおかきくけこさしすせそたちつてとなにぬねのはひふへほまみむめもやゆよらりるれろわゐゑをん");case 24:return Cc(n,"いろはにほへとちりぬるをわかよたれそつねならむうゐのおくやまけふこえてあさきゆめみしゑひもせす");case 27:return cn(n,3302,3311,!0,s);case 28:return Cc(n,"アイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホマミムメモヤユヨラリルレロワヰヱヲン",c);case 29:return Cc(n,"イロハニホヘトチリヌルヲワカヨタレソツネナラムウヰノオクヤマケフコエテアサキユメミシヱヒモセス",c);case 34:return cn(n,3792,3801,!0,s);case 37:return cn(n,6160,6169,!0,s);case 38:return cn(n,4160,4169,!0,s);case 39:return cn(n,2918,2927,!0,s);case 40:return cn(n,1776,1785,!0,s);case 43:return cn(n,3046,3055,!0,s);case 44:return cn(n,3174,3183,!0,s);case 45:return cn(n,3664,3673,!0,s);case 46:return cn(n,3872,3881,!0,s);case 3:default:return cn(n,48,57,!0,s)}},U_="data-html2canvas-ignore",L_=function(){function n(e,i,s){if(this.context=e,this.options=s,this.scrolledElements=[],this.referenceElement=i,this.counters=new JE,this.quoteDepth=0,!i.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(i.ownerDocument.documentElement,!1)}return n.prototype.toIFrame=function(e,i){var s=this,c=rT(e,i);if(!c.contentWindow)return Promise.reject("Unable to find iframe window");var h=e.defaultView.pageXOffset,d=e.defaultView.pageYOffset,A=c.contentWindow,v=A.document,C=sT(c).then(function(){return Qs(s,void 0,void 0,function(){var I,T;return ws(this,function(P){switch(P.label){case 0:return this.scrolledElements.forEach(lT),A&&(A.scrollTo(i.left,i.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(A.scrollY!==i.top||A.scrollX!==i.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(A.scrollX-i.left,A.scrollY-i.top,0,0))),I=this.options.onclone,T=this.clonedReferenceElement,typeof T>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:v.fonts&&v.fonts.ready?[4,v.fonts.ready]:[3,2];case 1:P.sent(),P.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,nT(v)]:[3,4];case 3:P.sent(),P.label=4;case 4:return typeof I=="function"?[2,Promise.resolve().then(function(){return I(v,T)}).then(function(){return c})]:[2,c]}})})});return v.open(),v.write(oT(document.doctype)+"<html></html>"),AT(this.referenceElement.ownerDocument,h,d),v.replaceChild(v.adoptNode(this.documentElement),v.documentElement),v.close(),C},n.prototype.createElementClone=function(e){if(cm(e,2))debugger;if(v_(e))return this.createCanvasClone(e);if(w_(e))return this.createVideoClone(e);if(b_(e))return this.createStyleClone(e);var i=e.cloneNode(!1);return Cm(i)&&(Cm(e)&&e.currentSrc&&e.currentSrc!==e.src&&(i.src=e.currentSrc,i.srcset=""),i.loading==="lazy"&&(i.loading="eager")),B_(i)?this.createCustomElementClone(i):i},n.prototype.createCustomElementClone=function(e){var i=document.createElement("html2canvascustomelement");return Sm(e.style,i),i},n.prototype.createStyleClone=function(e){try{var i=e.sheet;if(i&&i.cssRules){var s=[].slice.call(i.cssRules,0).reduce(function(h,d){return d&&typeof d.cssText=="string"?h+d.cssText:h},""),c=e.cloneNode(!1);return c.textContent=s,c}}catch(h){if(this.context.logger.error("Unable to access cssRules property",h),h.name!=="SecurityError")throw h}return e.cloneNode(!1)},n.prototype.createCanvasClone=function(e){var i;if(this.options.inlineImages&&e.ownerDocument){var s=e.ownerDocument.createElement("img");try{return s.src=e.toDataURL(),s}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var c=e.cloneNode(!1);try{c.width=e.width,c.height=e.height;var h=e.getContext("2d"),d=c.getContext("2d");if(d)if(!this.options.allowTaint&&h)d.putImageData(h.getImageData(0,0,e.width,e.height),0,0);else{var A=(i=e.getContext("webgl2"))!==null&&i!==void 0?i:e.getContext("webgl");if(A){var v=A.getContextAttributes();(v==null?void 0:v.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}d.drawImage(e,0,0)}return c}catch{this.context.logger.info("Unable to clone canvas as it is tainted",e)}return c},n.prototype.createVideoClone=function(e){var i=e.ownerDocument.createElement("canvas");i.width=e.offsetWidth,i.height=e.offsetHeight;var s=i.getContext("2d");try{return s&&(s.drawImage(e,0,0,i.width,i.height),this.options.allowTaint||s.getImageData(0,0,i.width,i.height)),i}catch{this.context.logger.info("Unable to clone video as it is tainted",e)}var c=e.ownerDocument.createElement("canvas");return c.width=e.offsetWidth,c.height=e.offsetHeight,c},n.prototype.appendChildNode=function(e,i,s){(!Bu(i)||!YE(i)&&!i.hasAttribute(U_)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(i)))&&(!this.options.copyStyles||!Bu(i)||!b_(i))&&e.appendChild(this.cloneNode(i,s))},n.prototype.cloneChildNodes=function(e,i,s){for(var c=this,h=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;h;h=h.nextSibling)if(Bu(h)&&x_(h)&&typeof h.assignedNodes=="function"){var d=h.assignedNodes();d.length&&d.forEach(function(A){return c.appendChildNode(i,A,s)})}else this.appendChildNode(i,h,s)},n.prototype.cloneNode=function(e,i){if(m_(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var s=e.ownerDocument.defaultView;if(s&&Bu(e)&&(xm(e)||Np(e))){var c=this.createElementClone(e);c.style.transitionProperty="none";var h=s.getComputedStyle(e),d=s.getComputedStyle(e,":before"),A=s.getComputedStyle(e,":after");this.referenceElement===e&&xm(c)&&(this.clonedReferenceElement=c),Bm(c)&&hT(c);var v=this.counters.parse(new Kw(this.context,h)),C=this.resolvePseudoContent(e,c,d,Vh.BEFORE);B_(e)&&(i=!0),w_(e)||this.cloneChildNodes(e,c,i),C&&c.insertBefore(C,c.firstChild);var I=this.resolvePseudoContent(e,c,A,Vh.AFTER);return I&&c.appendChild(I),this.counters.pop(v),(h&&(this.options.copyStyles||Np(e))&&!__(e)||i)&&Sm(h,c),(e.scrollTop!==0||e.scrollLeft!==0)&&this.scrolledElements.push([c,e.scrollLeft,e.scrollTop]),(Op(e)||Rp(e))&&(Op(c)||Rp(c))&&(c.value=e.value),c}return e.cloneNode(!1)},n.prototype.resolvePseudoContent=function(e,i,s,c){var h=this;if(s){var d=s.content,A=i.ownerDocument;if(!(!A||!d||d==="none"||d==="-moz-alt-content"||s.display==="none")){this.counters.parse(new Kw(this.context,s));var v=new qI(this.context,s),C=A.createElement("html2canvaspseudoelement");Sm(s,C),v.content.forEach(function(T){if(T.type===0)C.appendChild(A.createTextNode(T.value));else if(T.type===22){var P=A.createElement("img");P.src=T.value,P.style.opacity="1",C.appendChild(P)}else if(T.type===18){if(T.name==="attr"){var U=T.values.filter(Ci);U.length&&C.appendChild(A.createTextNode(e.getAttribute(U[0].value)||""))}else if(T.name==="counter"){var V=T.values.filter(bu),R=V[0],Z=V[1];if(R&&Ci(R)){var K=h.counters.getCounterValue(R.value),tt=Z&&Ci(Z)?lm.parse(h.context,Z.value):3;C.appendChild(A.createTextNode(Hh(K,tt,!1)))}}else if(T.name==="counters"){var ht=T.values.filter(bu),R=ht[0],Bt=ht[1],Z=ht[2];if(R&&Ci(R)){var Lt=h.counters.getCounterValues(R.value),Ut=Z&&Ci(Z)?lm.parse(h.context,Z.value):3,xt=Bt&&Bt.type===0?Bt.value:"",pt=Lt.map(function(st){return Hh(st,Ut,!1)}).join(xt);C.appendChild(A.createTextNode(pt))}}}else if(T.type===20)switch(T.value){case"open-quote":C.appendChild(A.createTextNode(jw(v.quotes,h.quoteDepth++,!0)));break;case"close-quote":C.appendChild(A.createTextNode(jw(v.quotes,--h.quoteDepth,!1)));break;default:C.appendChild(A.createTextNode(T.value))}}),C.className=Im+" "+Em;var I=c===Vh.BEFORE?" "+Im:" "+Em;return Np(i)?i.className.baseValue+=I:i.className+=I,C}}},n.destroy=function(e){return e.parentNode?(e.parentNode.removeChild(e),!0):!1},n}(),Vh;(function(n){n[n.BEFORE=0]="BEFORE",n[n.AFTER=1]="AFTER"})(Vh||(Vh={}));var rT=function(n,e){var i=n.createElement("iframe");return i.className="html2canvas-container",i.style.visibility="hidden",i.style.position="fixed",i.style.left="-10000px",i.style.top="0px",i.style.border="0",i.width=e.width.toString(),i.height=e.height.toString(),i.scrolling="no",i.setAttribute(U_,"true"),n.body.appendChild(i),i},iT=function(n){return new Promise(function(e){if(n.complete){e();return}if(!n.src){e();return}n.onload=e,n.onerror=e})},nT=function(n){return Promise.all([].slice.call(n.images,0).map(iT))},sT=function(n){return new Promise(function(e,i){var s=n.contentWindow;if(!s)return i("No window assigned for iframe");var c=s.document;s.onload=n.onload=function(){s.onload=n.onload=null;var h=setInterval(function(){c.body.childNodes.length>0&&c.readyState==="complete"&&(clearInterval(h),e(n))},50)}})},aT=["all","d","content"],Sm=function(n,e){for(var i=n.length-1;i>=0;i--){var s=n.item(i);aT.indexOf(s)===-1&&e.style.setProperty(s,n.getPropertyValue(s))}return e},oT=function(n){var e="";return n&&(e+="<!DOCTYPE ",n.name&&(e+=n.name),n.internalSubset&&(e+=n.internalSubset),n.publicId&&(e+='"'+n.publicId+'"'),n.systemId&&(e+='"'+n.systemId+'"'),e+=">"),e},AT=function(n,e,i){n&&n.defaultView&&(e!==n.defaultView.pageXOffset||i!==n.defaultView.pageYOffset)&&n.defaultView.scrollTo(e,i)},lT=function(n){var e=n[0],i=n[1],s=n[2];e.scrollLeft=i,e.scrollTop=s},cT=":before",uT=":after",Im="___html2canvas___pseudoelement_before",Em="___html2canvas___pseudoelement_after",P_=`{
    content: "" !important;
    display: none !important;
}`,hT=function(n){dT(n,"."+Im+cT+P_+`
         .`+Em+uT+P_)},dT=function(n,e){var i=n.ownerDocument;if(i){var s=i.createElement("style");s.textContent=e,n.appendChild(s)}},Q_=function(){function n(){}return n.getOrigin=function(e){var i=n._link;return i?(i.href=e,i.href=i.href,i.protocol+i.hostname+i.port):"about:blank"},n.isSameOrigin=function(e){return n.getOrigin(e)===n._origin},n.setContext=function(e){n._link=e.document.createElement("a"),n._origin=n.getOrigin(e.location.href)},n._origin="about:blank",n}(),pT=function(){function n(e,i){this.context=e,this._options=i,this._cache={}}return n.prototype.addImage=function(e){var i=Promise.resolve();return this.has(e)||(Um(e)||yT(e))&&(this._cache[e]=this.loadImage(e)).catch(function(){}),i},n.prototype.match=function(e){return this._cache[e]},n.prototype.loadImage=function(e){return Qs(this,void 0,void 0,function(){var i,s,c,h,d=this;return ws(this,function(A){switch(A.label){case 0:return i=Q_.isSameOrigin(e),s=!Tm(e)&&this._options.useCORS===!0&&es.SUPPORT_CORS_IMAGES&&!i,c=!Tm(e)&&!i&&!Um(e)&&typeof this._options.proxy=="string"&&es.SUPPORT_CORS_XHR&&!s,!i&&this._options.allowTaint===!1&&!Tm(e)&&!Um(e)&&!c&&!s?[2]:(h=e,c?[4,this.proxy(h)]:[3,2]);case 1:h=A.sent(),A.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise(function(v,C){var I=new Image;I.onload=function(){return v(I)},I.onerror=C,(vT(h)||s)&&(I.crossOrigin="anonymous"),I.src=h,I.complete===!0&&setTimeout(function(){return v(I)},500),d._options.imageTimeout>0&&setTimeout(function(){return C("Timed out ("+d._options.imageTimeout+"ms) loading image")},d._options.imageTimeout)})];case 3:return[2,A.sent()]}})})},n.prototype.has=function(e){return typeof this._cache[e]<"u"},n.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},n.prototype.proxy=function(e){var i=this,s=this._options.proxy;if(!s)throw new Error("No proxy defined");var c=e.substring(0,256);return new Promise(function(h,d){var A=es.SUPPORT_RESPONSE_TYPE?"blob":"text",v=new XMLHttpRequest;v.onload=function(){if(v.status===200)if(A==="text")h(v.response);else{var T=new FileReader;T.addEventListener("load",function(){return h(T.result)},!1),T.addEventListener("error",function(P){return d(P)},!1),T.readAsDataURL(v.response)}else d("Failed to proxy resource "+c+" with status code "+v.status)},v.onerror=d;var C=s.indexOf("?")>-1?"&":"?";if(v.open("GET",""+s+C+"url="+encodeURIComponent(e)+"&responseType="+A),A!=="text"&&v instanceof XMLHttpRequest&&(v.responseType=A),i._options.imageTimeout){var I=i._options.imageTimeout;v.timeout=I,v.ontimeout=function(){return d("Timed out ("+I+"ms) proxying "+c)}}v.send()})},n}(),fT=/^data:image\/svg\+xml/i,gT=/^data:image\/.*;base64,/i,mT=/^data:image\/.*/i,yT=function(n){return es.SUPPORT_SVG_DRAWING||!wT(n)},Tm=function(n){return mT.test(n)},vT=function(n){return gT.test(n)},Um=function(n){return n.substr(0,4)==="blob"},wT=function(n){return n.substr(-3).toLowerCase()==="svg"||fT.test(n)},qe=function(){function n(e,i){this.type=0,this.x=e,this.y=i}return n.prototype.add=function(e,i){return new n(this.x+e,this.y+i)},n}(),Su=function(n,e,i){return new qe(n.x+(e.x-n.x)*i,n.y+(e.y-n.y)*i)},zp=function(){function n(e,i,s,c){this.type=1,this.start=e,this.startControl=i,this.endControl=s,this.end=c}return n.prototype.subdivide=function(e,i){var s=Su(this.start,this.startControl,e),c=Su(this.startControl,this.endControl,e),h=Su(this.endControl,this.end,e),d=Su(s,c,e),A=Su(c,h,e),v=Su(d,A,e);return i?new n(this.start,s,d,v):new n(v,A,h,this.end)},n.prototype.add=function(e,i){return new n(this.start.add(e,i),this.startControl.add(e,i),this.endControl.add(e,i),this.end.add(e,i))},n.prototype.reverse=function(){return new n(this.end,this.endControl,this.startControl,this.start)},n}(),ja=function(n){return n.type===1},_T=function(){function n(e){var i=e.styles,s=e.bounds,c=Mh(i.borderTopLeftRadius,s.width,s.height),h=c[0],d=c[1],A=Mh(i.borderTopRightRadius,s.width,s.height),v=A[0],C=A[1],I=Mh(i.borderBottomRightRadius,s.width,s.height),T=I[0],P=I[1],U=Mh(i.borderBottomLeftRadius,s.width,s.height),V=U[0],R=U[1],Z=[];Z.push((h+v)/s.width),Z.push((V+T)/s.width),Z.push((d+R)/s.height),Z.push((C+P)/s.height);var K=Math.max.apply(Math,Z);K>1&&(h/=K,d/=K,v/=K,C/=K,T/=K,P/=K,V/=K,R/=K);var tt=s.width-v,ht=s.height-P,Bt=s.width-T,Lt=s.height-R,Ut=i.borderTopWidth,xt=i.borderRightWidth,pt=i.borderBottomWidth,kt=i.borderLeftWidth,Xt=Li(i.paddingTop,e.bounds.width),st=Li(i.paddingRight,e.bounds.width),ut=Li(i.paddingBottom,e.bounds.width),mt=Li(i.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=h>0||d>0?Vi(s.left+kt/3,s.top+Ut/3,h-kt/3,d-Ut/3,di.TOP_LEFT):new qe(s.left+kt/3,s.top+Ut/3),this.topRightBorderDoubleOuterBox=h>0||d>0?Vi(s.left+tt,s.top+Ut/3,v-xt/3,C-Ut/3,di.TOP_RIGHT):new qe(s.left+s.width-xt/3,s.top+Ut/3),this.bottomRightBorderDoubleOuterBox=T>0||P>0?Vi(s.left+Bt,s.top+ht,T-xt/3,P-pt/3,di.BOTTOM_RIGHT):new qe(s.left+s.width-xt/3,s.top+s.height-pt/3),this.bottomLeftBorderDoubleOuterBox=V>0||R>0?Vi(s.left+kt/3,s.top+Lt,V-kt/3,R-pt/3,di.BOTTOM_LEFT):new qe(s.left+kt/3,s.top+s.height-pt/3),this.topLeftBorderDoubleInnerBox=h>0||d>0?Vi(s.left+kt*2/3,s.top+Ut*2/3,h-kt*2/3,d-Ut*2/3,di.TOP_LEFT):new qe(s.left+kt*2/3,s.top+Ut*2/3),this.topRightBorderDoubleInnerBox=h>0||d>0?Vi(s.left+tt,s.top+Ut*2/3,v-xt*2/3,C-Ut*2/3,di.TOP_RIGHT):new qe(s.left+s.width-xt*2/3,s.top+Ut*2/3),this.bottomRightBorderDoubleInnerBox=T>0||P>0?Vi(s.left+Bt,s.top+ht,T-xt*2/3,P-pt*2/3,di.BOTTOM_RIGHT):new qe(s.left+s.width-xt*2/3,s.top+s.height-pt*2/3),this.bottomLeftBorderDoubleInnerBox=V>0||R>0?Vi(s.left+kt*2/3,s.top+Lt,V-kt*2/3,R-pt*2/3,di.BOTTOM_LEFT):new qe(s.left+kt*2/3,s.top+s.height-pt*2/3),this.topLeftBorderStroke=h>0||d>0?Vi(s.left+kt/2,s.top+Ut/2,h-kt/2,d-Ut/2,di.TOP_LEFT):new qe(s.left+kt/2,s.top+Ut/2),this.topRightBorderStroke=h>0||d>0?Vi(s.left+tt,s.top+Ut/2,v-xt/2,C-Ut/2,di.TOP_RIGHT):new qe(s.left+s.width-xt/2,s.top+Ut/2),this.bottomRightBorderStroke=T>0||P>0?Vi(s.left+Bt,s.top+ht,T-xt/2,P-pt/2,di.BOTTOM_RIGHT):new qe(s.left+s.width-xt/2,s.top+s.height-pt/2),this.bottomLeftBorderStroke=V>0||R>0?Vi(s.left+kt/2,s.top+Lt,V-kt/2,R-pt/2,di.BOTTOM_LEFT):new qe(s.left+kt/2,s.top+s.height-pt/2),this.topLeftBorderBox=h>0||d>0?Vi(s.left,s.top,h,d,di.TOP_LEFT):new qe(s.left,s.top),this.topRightBorderBox=v>0||C>0?Vi(s.left+tt,s.top,v,C,di.TOP_RIGHT):new qe(s.left+s.width,s.top),this.bottomRightBorderBox=T>0||P>0?Vi(s.left+Bt,s.top+ht,T,P,di.BOTTOM_RIGHT):new qe(s.left+s.width,s.top+s.height),this.bottomLeftBorderBox=V>0||R>0?Vi(s.left,s.top+Lt,V,R,di.BOTTOM_LEFT):new qe(s.left,s.top+s.height),this.topLeftPaddingBox=h>0||d>0?Vi(s.left+kt,s.top+Ut,Math.max(0,h-kt),Math.max(0,d-Ut),di.TOP_LEFT):new qe(s.left+kt,s.top+Ut),this.topRightPaddingBox=v>0||C>0?Vi(s.left+Math.min(tt,s.width-xt),s.top+Ut,tt>s.width+xt?0:Math.max(0,v-xt),Math.max(0,C-Ut),di.TOP_RIGHT):new qe(s.left+s.width-xt,s.top+Ut),this.bottomRightPaddingBox=T>0||P>0?Vi(s.left+Math.min(Bt,s.width-kt),s.top+Math.min(ht,s.height-pt),Math.max(0,T-xt),Math.max(0,P-pt),di.BOTTOM_RIGHT):new qe(s.left+s.width-xt,s.top+s.height-pt),this.bottomLeftPaddingBox=V>0||R>0?Vi(s.left+kt,s.top+Math.min(Lt,s.height-pt),Math.max(0,V-kt),Math.max(0,R-pt),di.BOTTOM_LEFT):new qe(s.left+kt,s.top+s.height-pt),this.topLeftContentBox=h>0||d>0?Vi(s.left+kt+mt,s.top+Ut+Xt,Math.max(0,h-(kt+mt)),Math.max(0,d-(Ut+Xt)),di.TOP_LEFT):new qe(s.left+kt+mt,s.top+Ut+Xt),this.topRightContentBox=v>0||C>0?Vi(s.left+Math.min(tt,s.width+kt+mt),s.top+Ut+Xt,tt>s.width+kt+mt?0:v-kt+mt,C-(Ut+Xt),di.TOP_RIGHT):new qe(s.left+s.width-(xt+st),s.top+Ut+Xt),this.bottomRightContentBox=T>0||P>0?Vi(s.left+Math.min(Bt,s.width-(kt+mt)),s.top+Math.min(ht,s.height+Ut+Xt),Math.max(0,T-(xt+st)),P-(pt+ut),di.BOTTOM_RIGHT):new qe(s.left+s.width-(xt+st),s.top+s.height-(pt+ut)),this.bottomLeftContentBox=V>0||R>0?Vi(s.left+kt+mt,s.top+Lt,Math.max(0,V-(kt+mt)),R-(pt+ut),di.BOTTOM_LEFT):new qe(s.left+kt+mt,s.top+s.height-(pt+ut))}return n}(),di;(function(n){n[n.TOP_LEFT=0]="TOP_LEFT",n[n.TOP_RIGHT=1]="TOP_RIGHT",n[n.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",n[n.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(di||(di={}));var Vi=function(n,e,i,s,c){var h=4*((Math.sqrt(2)-1)/3),d=i*h,A=s*h,v=n+i,C=e+s;switch(c){case di.TOP_LEFT:return new zp(new qe(n,C),new qe(n,C-A),new qe(v-d,e),new qe(v,e));case di.TOP_RIGHT:return new zp(new qe(n,e),new qe(n+d,e),new qe(v,C-A),new qe(v,C));case di.BOTTOM_RIGHT:return new zp(new qe(v,e),new qe(v,e+A),new qe(n+d,C),new qe(n,C));case di.BOTTOM_LEFT:default:return new zp(new qe(v,C),new qe(v-d,C),new qe(n,e+A),new qe(n,e))}},Hp=function(n){return[n.topLeftBorderBox,n.topRightBorderBox,n.bottomRightBorderBox,n.bottomLeftBorderBox]},bT=function(n){return[n.topLeftContentBox,n.topRightContentBox,n.bottomRightContentBox,n.bottomLeftContentBox]},Vp=function(n){return[n.topLeftPaddingBox,n.topRightPaddingBox,n.bottomRightPaddingBox,n.bottomLeftPaddingBox]},xT=function(){function n(e,i,s){this.offsetX=e,this.offsetY=i,this.matrix=s,this.type=0,this.target=6}return n}(),jp=function(){function n(e,i){this.path=e,this.target=i,this.type=1}return n}(),BT=function(){function n(e){this.opacity=e,this.type=2,this.target=6}return n}(),CT=function(n){return n.type===0},k_=function(n){return n.type===1},FT=function(n){return n.type===2},M_=function(n,e){return n.length===e.length?n.some(function(i,s){return i===e[s]}):!1},ST=function(n,e,i,s,c){return n.map(function(h,d){switch(d){case 0:return h.add(e,i);case 1:return h.add(e+s,i);case 2:return h.add(e+s,i+c);case 3:return h.add(e,i+c)}return h})},D_=function(){function n(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return n}(),N_=function(){function n(e,i){if(this.container=e,this.parent=i,this.effects=[],this.curves=new _T(this.container),this.container.styles.opacity<1&&this.effects.push(new BT(this.container.styles.opacity)),this.container.styles.transform!==null){var s=this.container.bounds.left+this.container.styles.transformOrigin[0].number,c=this.container.bounds.top+this.container.styles.transformOrigin[1].number,h=this.container.styles.transform;this.effects.push(new xT(s,c,h))}if(this.container.styles.overflowX!==0){var d=Hp(this.curves),A=Vp(this.curves);M_(d,A)?this.effects.push(new jp(d,6)):(this.effects.push(new jp(d,2)),this.effects.push(new jp(A,4)))}}return n.prototype.getEffects=function(e){for(var i=[2,3].indexOf(this.container.styles.position)===-1,s=this.parent,c=this.effects.slice(0);s;){var h=s.effects.filter(function(v){return!k_(v)});if(i||s.container.styles.position!==0||!s.parent){if(c.unshift.apply(c,h),i=[2,3].indexOf(s.container.styles.position)===-1,s.container.styles.overflowX!==0){var d=Hp(s.curves),A=Vp(s.curves);M_(d,A)||c.unshift(new jp(A,6))}}else c.unshift.apply(c,h);s=s.parent}return c.filter(function(v){return Mn(v.target,e)})},n}(),Lm=function(n,e,i,s){n.container.elements.forEach(function(c){var h=Mn(c.flags,4),d=Mn(c.flags,2),A=new N_(c,n);Mn(c.styles.display,2048)&&s.push(A);var v=Mn(c.flags,8)?[]:s;if(h||d){var C=h||c.styles.isPositioned()?i:e,I=new D_(A);if(c.styles.isPositioned()||c.styles.opacity<1||c.styles.isTransformed()){var T=c.styles.zIndex.order;if(T<0){var P=0;C.negativeZIndex.some(function(V,R){return T>V.element.container.styles.zIndex.order?(P=R,!1):P>0}),C.negativeZIndex.splice(P,0,I)}else if(T>0){var U=0;C.positiveZIndex.some(function(V,R){return T>=V.element.container.styles.zIndex.order?(U=R+1,!1):U>0}),C.positiveZIndex.splice(U,0,I)}else C.zeroOrAutoZIndexOrTransformedOrOpacity.push(I)}else c.styles.isFloating()?C.nonPositionedFloats.push(I):C.nonPositionedInlineLevel.push(I);Lm(A,I,h?I:i,v)}else c.styles.isInlineLevel()?e.inlineLevel.push(A):e.nonInlineLevel.push(A),Lm(A,e,i,v);Mn(c.flags,8)&&O_(c,v)})},O_=function(n,e){for(var i=n instanceof _m?n.start:1,s=n instanceof _m?n.reversed:!1,c=0;c<e.length;c++){var h=e[c];h.container instanceof c_&&typeof h.container.value=="number"&&h.container.value!==0&&(i=h.container.value),h.listValue=Hh(i,h.container.styles.listStyleType,!0),i+=s?-1:1}},IT=function(n){var e=new N_(n,null),i=new D_(e),s=[];return Lm(e,i,i,s),O_(e.container,s),i},R_=function(n,e){switch(e){case 0:return Ka(n.topLeftBorderBox,n.topLeftPaddingBox,n.topRightBorderBox,n.topRightPaddingBox);case 1:return Ka(n.topRightBorderBox,n.topRightPaddingBox,n.bottomRightBorderBox,n.bottomRightPaddingBox);case 2:return Ka(n.bottomRightBorderBox,n.bottomRightPaddingBox,n.bottomLeftBorderBox,n.bottomLeftPaddingBox);case 3:default:return Ka(n.bottomLeftBorderBox,n.bottomLeftPaddingBox,n.topLeftBorderBox,n.topLeftPaddingBox)}},ET=function(n,e){switch(e){case 0:return Ka(n.topLeftBorderBox,n.topLeftBorderDoubleOuterBox,n.topRightBorderBox,n.topRightBorderDoubleOuterBox);case 1:return Ka(n.topRightBorderBox,n.topRightBorderDoubleOuterBox,n.bottomRightBorderBox,n.bottomRightBorderDoubleOuterBox);case 2:return Ka(n.bottomRightBorderBox,n.bottomRightBorderDoubleOuterBox,n.bottomLeftBorderBox,n.bottomLeftBorderDoubleOuterBox);case 3:default:return Ka(n.bottomLeftBorderBox,n.bottomLeftBorderDoubleOuterBox,n.topLeftBorderBox,n.topLeftBorderDoubleOuterBox)}},TT=function(n,e){switch(e){case 0:return Ka(n.topLeftBorderDoubleInnerBox,n.topLeftPaddingBox,n.topRightBorderDoubleInnerBox,n.topRightPaddingBox);case 1:return Ka(n.topRightBorderDoubleInnerBox,n.topRightPaddingBox,n.bottomRightBorderDoubleInnerBox,n.bottomRightPaddingBox);case 2:return Ka(n.bottomRightBorderDoubleInnerBox,n.bottomRightPaddingBox,n.bottomLeftBorderDoubleInnerBox,n.bottomLeftPaddingBox);case 3:default:return Ka(n.bottomLeftBorderDoubleInnerBox,n.bottomLeftPaddingBox,n.topLeftBorderDoubleInnerBox,n.topLeftPaddingBox)}},UT=function(n,e){switch(e){case 0:return Kp(n.topLeftBorderStroke,n.topRightBorderStroke);case 1:return Kp(n.topRightBorderStroke,n.bottomRightBorderStroke);case 2:return Kp(n.bottomRightBorderStroke,n.bottomLeftBorderStroke);case 3:default:return Kp(n.bottomLeftBorderStroke,n.topLeftBorderStroke)}},Kp=function(n,e){var i=[];return ja(n)?i.push(n.subdivide(.5,!1)):i.push(n),ja(e)?i.push(e.subdivide(.5,!0)):i.push(e),i},Ka=function(n,e,i,s){var c=[];return ja(n)?c.push(n.subdivide(.5,!1)):c.push(n),ja(i)?c.push(i.subdivide(.5,!0)):c.push(i),ja(s)?c.push(s.subdivide(.5,!0).reverse()):c.push(s),ja(e)?c.push(e.subdivide(.5,!1).reverse()):c.push(e),c},z_=function(n){var e=n.bounds,i=n.styles;return e.add(i.borderLeftWidth,i.borderTopWidth,-(i.borderRightWidth+i.borderLeftWidth),-(i.borderTopWidth+i.borderBottomWidth))},$p=function(n){var e=n.styles,i=n.bounds,s=Li(e.paddingLeft,i.width),c=Li(e.paddingRight,i.width),h=Li(e.paddingTop,i.width),d=Li(e.paddingBottom,i.width);return i.add(s+e.borderLeftWidth,h+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+s+c),-(e.borderTopWidth+e.borderBottomWidth+h+d))},LT=function(n,e){return n===0?e.bounds:n===2?$p(e):z_(e)},PT=function(n,e){return n===0?e.bounds:n===2?$p(e):z_(e)},Pm=function(n,e,i){var s=LT(Eu(n.styles.backgroundOrigin,e),n),c=PT(Eu(n.styles.backgroundClip,e),n),h=QT(Eu(n.styles.backgroundSize,e),i,s),d=h[0],A=h[1],v=Mh(Eu(n.styles.backgroundPosition,e),s.width-d,s.height-A),C=kT(Eu(n.styles.backgroundRepeat,e),v,h,s,c),I=Math.round(s.left+v[0]),T=Math.round(s.top+v[1]);return[C,I,T,d,A]},Iu=function(n){return Ci(n)&&n.value===xu.AUTO},Gp=function(n){return typeof n=="number"},QT=function(n,e,i){var s=e[0],c=e[1],h=e[2],d=n[0],A=n[1];if(!d)return[0,0];if(bn(d)&&A&&bn(A))return[Li(d,i.width),Li(A,i.height)];var v=Gp(h);if(Ci(d)&&(d.value===xu.CONTAIN||d.value===xu.COVER)){if(Gp(h)){var C=i.width/i.height;return C<h!=(d.value===xu.COVER)?[i.width,i.width/h]:[i.height*h,i.height]}return[i.width,i.height]}var I=Gp(s),T=Gp(c),P=I||T;if(Iu(d)&&(!A||Iu(A))){if(I&&T)return[s,c];if(!v&&!P)return[i.width,i.height];if(P&&v){var U=I?s:c*h,V=T?c:s/h;return[U,V]}var R=I?s:i.width,Z=T?c:i.height;return[R,Z]}if(v){var K=0,tt=0;return bn(d)?K=Li(d,i.width):bn(A)&&(tt=Li(A,i.height)),Iu(d)?K=tt*h:(!A||Iu(A))&&(tt=K/h),[K,tt]}var ht=null,Bt=null;if(bn(d)?ht=Li(d,i.width):A&&bn(A)&&(Bt=Li(A,i.height)),ht!==null&&(!A||Iu(A))&&(Bt=I&&T?ht/s*c:i.height),Bt!==null&&Iu(d)&&(ht=I&&T?Bt/c*s:i.width),ht!==null&&Bt!==null)return[ht,Bt];throw new Error("Unable to calculate background-size for element")},Eu=function(n,e){var i=n[e];return typeof i>"u"?n[0]:i},kT=function(n,e,i,s,c){var h=e[0],d=e[1],A=i[0],v=i[1];switch(n){case 2:return[new qe(Math.round(s.left),Math.round(s.top+d)),new qe(Math.round(s.left+s.width),Math.round(s.top+d)),new qe(Math.round(s.left+s.width),Math.round(v+s.top+d)),new qe(Math.round(s.left),Math.round(v+s.top+d))];case 3:return[new qe(Math.round(s.left+h),Math.round(s.top)),new qe(Math.round(s.left+h+A),Math.round(s.top)),new qe(Math.round(s.left+h+A),Math.round(s.height+s.top)),new qe(Math.round(s.left+h),Math.round(s.height+s.top))];case 1:return[new qe(Math.round(s.left+h),Math.round(s.top+d)),new qe(Math.round(s.left+h+A),Math.round(s.top+d)),new qe(Math.round(s.left+h+A),Math.round(s.top+d+v)),new qe(Math.round(s.left+h),Math.round(s.top+d+v))];default:return[new qe(Math.round(c.left),Math.round(c.top)),new qe(Math.round(c.left+c.width),Math.round(c.top)),new qe(Math.round(c.left+c.width),Math.round(c.height+c.top)),new qe(Math.round(c.left),Math.round(c.height+c.top))]}},MT="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",H_="Hidden Text",DT=function(){function n(e){this._data={},this._document=e}return n.prototype.parseMetrics=function(e,i){var s=this._document.createElement("div"),c=this._document.createElement("img"),h=this._document.createElement("span"),d=this._document.body;s.style.visibility="hidden",s.style.fontFamily=e,s.style.fontSize=i,s.style.margin="0",s.style.padding="0",s.style.whiteSpace="nowrap",d.appendChild(s),c.src=MT,c.width=1,c.height=1,c.style.margin="0",c.style.padding="0",c.style.verticalAlign="baseline",h.style.fontFamily=e,h.style.fontSize=i,h.style.margin="0",h.style.padding="0",h.appendChild(this._document.createTextNode(H_)),s.appendChild(h),s.appendChild(c);var A=c.offsetTop-h.offsetTop+2;s.removeChild(h),s.appendChild(this._document.createTextNode(H_)),s.style.lineHeight="normal",c.style.verticalAlign="super";var v=c.offsetTop-s.offsetTop+2;return d.removeChild(s),{baseline:A,middle:v}},n.prototype.getMetrics=function(e,i){var s=e+" "+i;return typeof this._data[s]>"u"&&(this._data[s]=this.parseMetrics(e,i)),this._data[s]},n}(),V_=function(){function n(e,i){this.context=e,this.options=i}return n}(),NT=1e4,OT=function(n){bo(e,n);function e(i,s){var c=n.call(this,i,s)||this;return c._activeEffects=[],c.canvas=s.canvas?s.canvas:document.createElement("canvas"),c.ctx=c.canvas.getContext("2d"),s.canvas||(c.canvas.width=Math.floor(s.width*s.scale),c.canvas.height=Math.floor(s.height*s.scale),c.canvas.style.width=s.width+"px",c.canvas.style.height=s.height+"px"),c.fontMetrics=new DT(document),c.ctx.scale(c.options.scale,c.options.scale),c.ctx.translate(-s.x,-s.y),c.ctx.textBaseline="bottom",c._activeEffects=[],c.context.logger.debug("Canvas renderer initialized ("+s.width+"x"+s.height+") with scale "+s.scale),c}return e.prototype.applyEffects=function(i){for(var s=this;this._activeEffects.length;)this.popEffect();i.forEach(function(c){return s.applyEffect(c)})},e.prototype.applyEffect=function(i){this.ctx.save(),FT(i)&&(this.ctx.globalAlpha=i.opacity),CT(i)&&(this.ctx.translate(i.offsetX,i.offsetY),this.ctx.transform(i.matrix[0],i.matrix[1],i.matrix[2],i.matrix[3],i.matrix[4],i.matrix[5]),this.ctx.translate(-i.offsetX,-i.offsetY)),k_(i)&&(this.path(i.path),this.ctx.clip()),this._activeEffects.push(i)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(i){return Qs(this,void 0,void 0,function(){var s;return ws(this,function(c){switch(c.label){case 0:return s=i.element.container.styles,s.isVisible()?[4,this.renderStackContent(i)]:[3,2];case 1:c.sent(),c.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(i){return Qs(this,void 0,void 0,function(){return ws(this,function(s){switch(s.label){case 0:if(Mn(i.container.flags,16))debugger;return i.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(i)]:[3,3];case 1:return s.sent(),[4,this.renderNodeContent(i)];case 2:s.sent(),s.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(i,s,c){var h=this;if(s===0)this.ctx.fillText(i.text,i.bounds.left,i.bounds.top+c);else{var d=wm(i.text);d.reduce(function(A,v){return h.ctx.fillText(v,A,i.bounds.top+c),A+h.ctx.measureText(v).width},i.bounds.left)}},e.prototype.createFontStyle=function(i){var s=i.fontVariant.filter(function(d){return d==="normal"||d==="small-caps"}).join(""),c=jT(i.fontFamily).join(", "),h=kh(i.fontSize)?""+i.fontSize.number+i.fontSize.unit:i.fontSize.number+"px";return[[i.fontStyle,s,i.fontWeight,h,c].join(" "),c,h]},e.prototype.renderTextNode=function(i,s){return Qs(this,void 0,void 0,function(){var c,h,d,A,v,C,I,T,P=this;return ws(this,function(U){return c=this.createFontStyle(s),h=c[0],d=c[1],A=c[2],this.ctx.font=h,this.ctx.direction=s.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",v=this.fontMetrics.getMetrics(d,A),C=v.baseline,I=v.middle,T=s.paintOrder,i.textBounds.forEach(function(V){T.forEach(function(R){switch(R){case 0:P.ctx.fillStyle=jn(s.color),P.renderTextWithLetterSpacing(V,s.letterSpacing,C);var Z=s.textShadow;Z.length&&V.text.trim().length&&(Z.slice(0).reverse().forEach(function(K){P.ctx.shadowColor=jn(K.color),P.ctx.shadowOffsetX=K.offsetX.number*P.options.scale,P.ctx.shadowOffsetY=K.offsetY.number*P.options.scale,P.ctx.shadowBlur=K.blur.number,P.renderTextWithLetterSpacing(V,s.letterSpacing,C)}),P.ctx.shadowColor="",P.ctx.shadowOffsetX=0,P.ctx.shadowOffsetY=0,P.ctx.shadowBlur=0),s.textDecorationLine.length&&(P.ctx.fillStyle=jn(s.textDecorationColor||s.color),s.textDecorationLine.forEach(function(K){switch(K){case 1:P.ctx.fillRect(V.bounds.left,Math.round(V.bounds.top+C),V.bounds.width,1);break;case 2:P.ctx.fillRect(V.bounds.left,Math.round(V.bounds.top),V.bounds.width,1);break;case 3:P.ctx.fillRect(V.bounds.left,Math.ceil(V.bounds.top+I),V.bounds.width,1);break}}));break;case 1:s.webkitTextStrokeWidth&&V.text.trim().length&&(P.ctx.strokeStyle=jn(s.webkitTextStrokeColor),P.ctx.lineWidth=s.webkitTextStrokeWidth,P.ctx.lineJoin=window.chrome?"miter":"round",P.ctx.strokeText(V.text,V.bounds.left,V.bounds.top+C)),P.ctx.strokeStyle="",P.ctx.lineWidth=0,P.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(i,s,c){if(c&&i.intrinsicWidth>0&&i.intrinsicHeight>0){var h=$p(i),d=Vp(s);this.path(d),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(c,0,0,i.intrinsicWidth,i.intrinsicHeight,h.left,h.top,h.width,h.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(i){return Qs(this,void 0,void 0,function(){var s,c,h,d,A,v,tt,tt,C,I,T,P,Bt,U,V,Lt,R,Z,K,tt,ht,Bt,Lt;return ws(this,function(Ut){switch(Ut.label){case 0:this.applyEffects(i.getEffects(4)),s=i.container,c=i.curves,h=s.styles,d=0,A=s.textNodes,Ut.label=1;case 1:return d<A.length?(v=A[d],[4,this.renderTextNode(v,h)]):[3,4];case 2:Ut.sent(),Ut.label=3;case 3:return d++,[3,1];case 4:if(!(s instanceof o_))return[3,8];Ut.label=5;case 5:return Ut.trys.push([5,7,,8]),[4,this.context.cache.match(s.src)];case 6:return tt=Ut.sent(),this.renderReplacedElement(s,c,tt),[3,8];case 7:return Ut.sent(),this.context.logger.error("Error loading image "+s.src),[3,8];case 8:if(s instanceof A_&&this.renderReplacedElement(s,c,s.canvas),!(s instanceof l_))return[3,12];Ut.label=9;case 9:return Ut.trys.push([9,11,,12]),[4,this.context.cache.match(s.svg)];case 10:return tt=Ut.sent(),this.renderReplacedElement(s,c,tt),[3,12];case 11:return Ut.sent(),this.context.logger.error("Error loading svg "+s.svg.substring(0,255)),[3,12];case 12:return s instanceof p_&&s.tree?(C=new e(this.context,{scale:this.options.scale,backgroundColor:s.backgroundColor,x:0,y:0,width:s.width,height:s.height}),[4,C.render(s.tree)]):[3,14];case 13:I=Ut.sent(),s.width&&s.height&&this.ctx.drawImage(I,0,0,s.width,s.height,s.bounds.left,s.bounds.top,s.bounds.width,s.bounds.height),Ut.label=14;case 14:if(s instanceof bm&&(T=Math.min(s.bounds.width,s.bounds.height),s.type===kp?s.checked&&(this.ctx.save(),this.path([new qe(s.bounds.left+T*.39363,s.bounds.top+T*.79),new qe(s.bounds.left+T*.16,s.bounds.top+T*.5549),new qe(s.bounds.left+T*.27347,s.bounds.top+T*.44071),new qe(s.bounds.left+T*.39694,s.bounds.top+T*.5649),new qe(s.bounds.left+T*.72983,s.bounds.top+T*.23),new qe(s.bounds.left+T*.84,s.bounds.top+T*.34085),new qe(s.bounds.left+T*.39363,s.bounds.top+T*.79)]),this.ctx.fillStyle=jn(u_),this.ctx.fill(),this.ctx.restore()):s.type===Mp&&s.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(s.bounds.left+T/2,s.bounds.top+T/2,T/4,0,Math.PI*2,!0),this.ctx.fillStyle=jn(u_),this.ctx.fill(),this.ctx.restore())),RT(s)&&s.value.length){switch(P=this.createFontStyle(h),Bt=P[0],U=P[1],V=this.fontMetrics.getMetrics(Bt,U).baseline,this.ctx.font=Bt,this.ctx.fillStyle=jn(h.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=HT(s.styles.textAlign),Lt=$p(s),R=0,s.styles.textAlign){case 1:R+=Lt.width/2;break;case 2:R+=Lt.width;break}Z=Lt.add(R,0,0,-Lt.height/2+1),this.ctx.save(),this.path([new qe(Lt.left,Lt.top),new qe(Lt.left+Lt.width,Lt.top),new qe(Lt.left+Lt.width,Lt.top+Lt.height),new qe(Lt.left,Lt.top+Lt.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Rh(s.value,Z),h.letterSpacing,V),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!Mn(s.styles.display,2048))return[3,20];if(s.styles.listStyleImage===null)return[3,19];if(K=s.styles.listStyleImage,K.type!==0)return[3,18];tt=void 0,ht=K.url,Ut.label=15;case 15:return Ut.trys.push([15,17,,18]),[4,this.context.cache.match(ht)];case 16:return tt=Ut.sent(),this.ctx.drawImage(tt,s.bounds.left-(tt.width+10),s.bounds.top),[3,18];case 17:return Ut.sent(),this.context.logger.error("Error loading list-style-image "+ht),[3,18];case 18:return[3,20];case 19:i.listValue&&s.styles.listStyleType!==-1&&(Bt=this.createFontStyle(h)[0],this.ctx.font=Bt,this.ctx.fillStyle=jn(h.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",Lt=new qA(s.bounds.left,s.bounds.top+Li(s.styles.paddingTop,s.bounds.width),s.bounds.width,zw(h.lineHeight,h.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Rh(i.listValue,Lt),h.letterSpacing,zw(h.lineHeight,h.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),Ut.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(i){return Qs(this,void 0,void 0,function(){var s,c,K,h,d,K,A,v,K,C,I,K,T,P,K,U,V,K,R,Z,K;return ws(this,function(tt){switch(tt.label){case 0:if(Mn(i.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(i.element)];case 1:tt.sent(),s=0,c=i.negativeZIndex,tt.label=2;case 2:return s<c.length?(K=c[s],[4,this.renderStack(K)]):[3,5];case 3:tt.sent(),tt.label=4;case 4:return s++,[3,2];case 5:return[4,this.renderNodeContent(i.element)];case 6:tt.sent(),h=0,d=i.nonInlineLevel,tt.label=7;case 7:return h<d.length?(K=d[h],[4,this.renderNode(K)]):[3,10];case 8:tt.sent(),tt.label=9;case 9:return h++,[3,7];case 10:A=0,v=i.nonPositionedFloats,tt.label=11;case 11:return A<v.length?(K=v[A],[4,this.renderStack(K)]):[3,14];case 12:tt.sent(),tt.label=13;case 13:return A++,[3,11];case 14:C=0,I=i.nonPositionedInlineLevel,tt.label=15;case 15:return C<I.length?(K=I[C],[4,this.renderStack(K)]):[3,18];case 16:tt.sent(),tt.label=17;case 17:return C++,[3,15];case 18:T=0,P=i.inlineLevel,tt.label=19;case 19:return T<P.length?(K=P[T],[4,this.renderNode(K)]):[3,22];case 20:tt.sent(),tt.label=21;case 21:return T++,[3,19];case 22:U=0,V=i.zeroOrAutoZIndexOrTransformedOrOpacity,tt.label=23;case 23:return U<V.length?(K=V[U],[4,this.renderStack(K)]):[3,26];case 24:tt.sent(),tt.label=25;case 25:return U++,[3,23];case 26:R=0,Z=i.positiveZIndex,tt.label=27;case 27:return R<Z.length?(K=Z[R],[4,this.renderStack(K)]):[3,30];case 28:tt.sent(),tt.label=29;case 29:return R++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(i){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(i.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(i){this.ctx.beginPath(),this.formatPath(i),this.ctx.closePath()},e.prototype.formatPath=function(i){var s=this;i.forEach(function(c,h){var d=ja(c)?c.start:c;h===0?s.ctx.moveTo(d.x,d.y):s.ctx.lineTo(d.x,d.y),ja(c)&&s.ctx.bezierCurveTo(c.startControl.x,c.startControl.y,c.endControl.x,c.endControl.y,c.end.x,c.end.y)})},e.prototype.renderRepeat=function(i,s,c,h){this.path(i),this.ctx.fillStyle=s,this.ctx.translate(c,h),this.ctx.fill(),this.ctx.translate(-c,-h)},e.prototype.resizeImage=function(i,s,c){var h;if(i.width===s&&i.height===c)return i;var d=(h=this.canvas.ownerDocument)!==null&&h!==void 0?h:document,A=d.createElement("canvas");A.width=Math.max(1,s),A.height=Math.max(1,c);var v=A.getContext("2d");return v.drawImage(i,0,0,i.width,i.height,0,0,s,c),A},e.prototype.renderBackgroundImage=function(i){return Qs(this,void 0,void 0,function(){var s,c,h,d,A,v;return ws(this,function(C){switch(C.label){case 0:s=i.styles.backgroundImage.length-1,c=function(I){var T,P,U,Xt,Vt,jt,mt,vt,pt,V,Xt,Vt,jt,mt,vt,R,Z,K,tt,ht,Bt,Lt,Ut,xt,pt,kt,Xt,st,ut,mt,vt,$t,Vt,jt,zt,Wt,Yt,me,et,dt,_t,Ct;return ws(this,function(Ot){switch(Ot.label){case 0:if(I.type!==0)return[3,5];T=void 0,P=I.url,Ot.label=1;case 1:return Ot.trys.push([1,3,,4]),[4,h.context.cache.match(P)];case 2:return T=Ot.sent(),[3,4];case 3:return Ot.sent(),h.context.logger.error("Error loading background-image "+P),[3,4];case 4:return T&&(U=Pm(i,s,[T.width,T.height,T.width/T.height]),Xt=U[0],Vt=U[1],jt=U[2],mt=U[3],vt=U[4],pt=h.ctx.createPattern(h.resizeImage(T,mt,vt),"repeat"),h.renderRepeat(Xt,pt,Vt,jt)),[3,6];case 5:CS(I)?(V=Pm(i,s,[null,null,null]),Xt=V[0],Vt=V[1],jt=V[2],mt=V[3],vt=V[4],R=wS(I.angle,mt,vt),Z=R[0],K=R[1],tt=R[2],ht=R[3],Bt=R[4],Lt=document.createElement("canvas"),Lt.width=mt,Lt.height=vt,Ut=Lt.getContext("2d"),xt=Ut.createLinearGradient(K,ht,tt,Bt),Tw(I.stops,Z).forEach(function(Rt){return xt.addColorStop(Rt.stop,jn(Rt.color))}),Ut.fillStyle=xt,Ut.fillRect(0,0,mt,vt),mt>0&&vt>0&&(pt=h.ctx.createPattern(Lt,"repeat"),h.renderRepeat(Xt,pt,Vt,jt))):FS(I)&&(kt=Pm(i,s,[null,null,null]),Xt=kt[0],st=kt[1],ut=kt[2],mt=kt[3],vt=kt[4],$t=I.position.length===0?[am]:I.position,Vt=Li($t[0],mt),jt=Li($t[$t.length-1],vt),zt=_S(I,Vt,jt,mt,vt),Wt=zt[0],Yt=zt[1],Wt>0&&Yt>0&&(me=h.ctx.createRadialGradient(st+Vt,ut+jt,0,st+Vt,ut+jt,Wt),Tw(I.stops,Wt*2).forEach(function(Rt){return me.addColorStop(Rt.stop,jn(Rt.color))}),h.path(Xt),h.ctx.fillStyle=me,Wt!==Yt?(et=i.bounds.left+.5*i.bounds.width,dt=i.bounds.top+.5*i.bounds.height,_t=Yt/Wt,Ct=1/_t,h.ctx.save(),h.ctx.translate(et,dt),h.ctx.transform(1,0,0,_t,0,0),h.ctx.translate(-et,-dt),h.ctx.fillRect(st,Ct*(ut-dt)+dt,mt,vt*Ct),h.ctx.restore()):h.ctx.fill())),Ot.label=6;case 6:return s--,[2]}})},h=this,d=0,A=i.styles.backgroundImage.slice(0).reverse(),C.label=1;case 1:return d<A.length?(v=A[d],[5,c(v)]):[3,4];case 2:C.sent(),C.label=3;case 3:return d++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(i,s,c){return Qs(this,void 0,void 0,function(){return ws(this,function(h){return this.path(R_(c,s)),this.ctx.fillStyle=jn(i),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(i,s,c,h){return Qs(this,void 0,void 0,function(){var d,A;return ws(this,function(v){switch(v.label){case 0:return s<3?[4,this.renderSolidBorder(i,c,h)]:[3,2];case 1:return v.sent(),[2];case 2:return d=ET(h,c),this.path(d),this.ctx.fillStyle=jn(i),this.ctx.fill(),A=TT(h,c),this.path(A),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(i){return Qs(this,void 0,void 0,function(){var s,c,h,d,A,v,C,I,T=this;return ws(this,function(P){switch(P.label){case 0:return this.applyEffects(i.getEffects(2)),s=i.container.styles,c=!Vl(s.backgroundColor)||s.backgroundImage.length,h=[{style:s.borderTopStyle,color:s.borderTopColor,width:s.borderTopWidth},{style:s.borderRightStyle,color:s.borderRightColor,width:s.borderRightWidth},{style:s.borderBottomStyle,color:s.borderBottomColor,width:s.borderBottomWidth},{style:s.borderLeftStyle,color:s.borderLeftColor,width:s.borderLeftWidth}],d=zT(Eu(s.backgroundClip,0),i.curves),c||s.boxShadow.length?(this.ctx.save(),this.path(d),this.ctx.clip(),Vl(s.backgroundColor)||(this.ctx.fillStyle=jn(s.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(i.container)]):[3,2];case 1:P.sent(),this.ctx.restore(),s.boxShadow.slice(0).reverse().forEach(function(U){T.ctx.save();var V=Hp(i.curves),R=U.inset?0:NT,Z=ST(V,-R+(U.inset?1:-1)*U.spread.number,(U.inset?1:-1)*U.spread.number,U.spread.number*(U.inset?-2:2),U.spread.number*(U.inset?-2:2));U.inset?(T.path(V),T.ctx.clip(),T.mask(Z)):(T.mask(V),T.ctx.clip(),T.path(Z)),T.ctx.shadowOffsetX=U.offsetX.number+R,T.ctx.shadowOffsetY=U.offsetY.number,T.ctx.shadowColor=jn(U.color),T.ctx.shadowBlur=U.blur.number,T.ctx.fillStyle=U.inset?jn(U.color):"rgba(0,0,0,1)",T.ctx.fill(),T.ctx.restore()}),P.label=2;case 2:A=0,v=0,C=h,P.label=3;case 3:return v<C.length?(I=C[v],I.style!==0&&!Vl(I.color)&&I.width>0?I.style!==2?[3,5]:[4,this.renderDashedDottedBorder(I.color,I.width,A,i.curves,2)]:[3,11]):[3,13];case 4:return P.sent(),[3,11];case 5:return I.style!==3?[3,7]:[4,this.renderDashedDottedBorder(I.color,I.width,A,i.curves,3)];case 6:return P.sent(),[3,11];case 7:return I.style!==4?[3,9]:[4,this.renderDoubleBorder(I.color,I.width,A,i.curves)];case 8:return P.sent(),[3,11];case 9:return[4,this.renderSolidBorder(I.color,A,i.curves)];case 10:P.sent(),P.label=11;case 11:A++,P.label=12;case 12:return v++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(i,s,c,h,d){return Qs(this,void 0,void 0,function(){var A,v,C,I,T,P,U,V,R,Z,K,tt,ht,Bt,Lt,Ut,Lt,Ut;return ws(this,function(xt){return this.ctx.save(),A=UT(h,c),v=R_(h,c),d===2&&(this.path(v),this.ctx.clip()),ja(v[0])?(C=v[0].start.x,I=v[0].start.y):(C=v[0].x,I=v[0].y),ja(v[1])?(T=v[1].end.x,P=v[1].end.y):(T=v[1].x,P=v[1].y),c===0||c===2?U=Math.abs(C-T):U=Math.abs(I-P),this.ctx.beginPath(),d===3?this.formatPath(A):this.formatPath(v.slice(0,2)),V=s<3?s*3:s*2,R=s<3?s*2:s,d===3&&(V=s,R=s),Z=!0,U<=V*2?Z=!1:U<=V*2+R?(K=U/(2*V+R),V*=K,R*=K):(tt=Math.floor((U+R)/(V+R)),ht=(U-tt*V)/(tt-1),Bt=(U-(tt+1)*V)/tt,R=Bt<=0||Math.abs(R-ht)<Math.abs(R-Bt)?ht:Bt),Z&&(d===3?this.ctx.setLineDash([0,V+R]):this.ctx.setLineDash([V,R])),d===3?(this.ctx.lineCap="round",this.ctx.lineWidth=s):this.ctx.lineWidth=s*2+1.1,this.ctx.strokeStyle=jn(i),this.ctx.stroke(),this.ctx.setLineDash([]),d===2&&(ja(v[0])&&(Lt=v[3],Ut=v[0],this.ctx.beginPath(),this.formatPath([new qe(Lt.end.x,Lt.end.y),new qe(Ut.start.x,Ut.start.y)]),this.ctx.stroke()),ja(v[1])&&(Lt=v[1],Ut=v[2],this.ctx.beginPath(),this.formatPath([new qe(Lt.end.x,Lt.end.y),new qe(Ut.start.x,Ut.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(i){return Qs(this,void 0,void 0,function(){var s;return ws(this,function(c){switch(c.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=jn(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),s=IT(i),[4,this.renderStack(s)];case 1:return c.sent(),this.applyEffects([]),[2,this.canvas]}})})},e}(V_),RT=function(n){return n instanceof d_||n instanceof h_?!0:n instanceof bm&&n.type!==Mp&&n.type!==kp},zT=function(n,e){switch(n){case 0:return Hp(e);case 2:return bT(e);case 1:default:return Vp(e)}},HT=function(n){switch(n){case 1:return"center";case 2:return"right";case 0:default:return"left"}},VT=["-apple-system","system-ui"],jT=function(n){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?n.filter(function(e){return VT.indexOf(e)===-1}):n},KT=function(n){bo(e,n);function e(i,s){var c=n.call(this,i,s)||this;return c.canvas=s.canvas?s.canvas:document.createElement("canvas"),c.ctx=c.canvas.getContext("2d"),c.options=s,c.canvas.width=Math.floor(s.width*s.scale),c.canvas.height=Math.floor(s.height*s.scale),c.canvas.style.width=s.width+"px",c.canvas.style.height=s.height+"px",c.ctx.scale(c.options.scale,c.options.scale),c.ctx.translate(-s.x,-s.y),c.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+s.width+"x"+s.height+" at "+s.x+","+s.y+") with scale "+s.scale),c}return e.prototype.render=function(i){return Qs(this,void 0,void 0,function(){var s,c;return ws(this,function(h){switch(h.label){case 0:return s=vm(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,i),[4,$T(s)];case 1:return c=h.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=jn(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(c,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e}(V_),$T=function(n){return new Promise(function(e,i){var s=new Image;s.onload=function(){e(s)},s.onerror=i,s.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(n))})},GT=function(){function n(e){var i=e.id,s=e.enabled;this.id=i,this.enabled=s,this.start=Date.now()}return n.prototype.debug=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,ep([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},n.prototype.getTime=function(){return Date.now()-this.start},n.prototype.info=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,ep([this.id,this.getTime()+"ms"],e))},n.prototype.warn=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,ep([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},n.prototype.error=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,ep([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},n.instances={},n}(),qT=function(){function n(e,i){var s;this.windowBounds=i,this.instanceName="#"+n.instanceCount++,this.logger=new GT({id:this.instanceName,enabled:e.logging}),this.cache=(s=e.cache)!==null&&s!==void 0?s:new pT(this,e)}return n.instanceCount=1,n}(),XT=function(n,e){return e===void 0&&(e={}),WT(n,e)};typeof window<"u"&&Q_.setContext(window);var WT=function(n,e){return Qs(void 0,void 0,void 0,function(){var i,s,c,h,d,A,v,C,I,T,P,U,V,R,Z,K,tt,ht,Bt,Lt,xt,Ut,xt,pt,kt,Xt,st,ut,mt,vt,$t,Vt,jt,zt,Wt,Yt,me,et,dt,_t;return ws(this,function(Ct){switch(Ct.label){case 0:if(!n||typeof n!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(i=n.ownerDocument,!i)throw new Error("Element is not attached to a Document");if(s=i.defaultView,!s)throw new Error("Document is not attached to a Window");return c={allowTaint:(pt=e.allowTaint)!==null&&pt!==void 0?pt:!1,imageTimeout:(kt=e.imageTimeout)!==null&&kt!==void 0?kt:15e3,proxy:e.proxy,useCORS:(Xt=e.useCORS)!==null&&Xt!==void 0?Xt:!1},h=Og({logging:(st=e.logging)!==null&&st!==void 0?st:!0,cache:e.cache},c),d={windowWidth:(ut=e.windowWidth)!==null&&ut!==void 0?ut:s.innerWidth,windowHeight:(mt=e.windowHeight)!==null&&mt!==void 0?mt:s.innerHeight,scrollX:(vt=e.scrollX)!==null&&vt!==void 0?vt:s.pageXOffset,scrollY:($t=e.scrollY)!==null&&$t!==void 0?$t:s.pageYOffset},A=new qA(d.scrollX,d.scrollY,d.windowWidth,d.windowHeight),v=new qT(h,A),C=(Vt=e.foreignObjectRendering)!==null&&Vt!==void 0?Vt:!1,I={allowTaint:(jt=e.allowTaint)!==null&&jt!==void 0?jt:!1,onclone:e.onclone,ignoreElements:e.ignoreElements,inlineImages:C,copyStyles:C},v.logger.debug("Starting document clone with size "+A.width+"x"+A.height+" scrolled to "+-A.left+","+-A.top),T=new L_(v,n,I),P=T.clonedReferenceElement,P?[4,T.toIFrame(i,A)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return U=Ct.sent(),V=Bm(P)||ZE(P)?S3(P.ownerDocument):rp(v,P),R=V.width,Z=V.height,K=V.left,tt=V.top,ht=ZT(v,P,e.backgroundColor),Bt={canvas:e.canvas,backgroundColor:ht,scale:(Wt=(zt=e.scale)!==null&&zt!==void 0?zt:s.devicePixelRatio)!==null&&Wt!==void 0?Wt:1,x:((Yt=e.x)!==null&&Yt!==void 0?Yt:0)+K,y:((me=e.y)!==null&&me!==void 0?me:0)+tt,width:(et=e.width)!==null&&et!==void 0?et:Math.ceil(R),height:(dt=e.height)!==null&&dt!==void 0?dt:Math.ceil(Z)},C?(v.logger.debug("Document cloned, using foreign object rendering"),xt=new KT(v,Bt),[4,xt.render(P)]):[3,3];case 2:return Lt=Ct.sent(),[3,5];case 3:return v.logger.debug("Document cloned, element located at "+K+","+tt+" with size "+R+"x"+Z+" using computed rendering"),v.logger.debug("Starting DOM parsing"),Ut=g_(v,P),ht===Ut.styles.backgroundColor&&(Ut.styles.backgroundColor=WA.TRANSPARENT),v.logger.debug("Starting renderer for element at "+Bt.x+","+Bt.y+" with size "+Bt.width+"x"+Bt.height),xt=new OT(v,Bt),[4,xt.render(Ut)];case 4:Lt=Ct.sent(),Ct.label=5;case 5:return(!((_t=e.removeContainer)!==null&&_t!==void 0)||_t)&&(L_.destroy(U)||v.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),v.logger.debug("Finished rendering"),[2,Lt]}})})},ZT=function(n,e,i){var s=e.ownerDocument,c=s.documentElement?Dh(n,getComputedStyle(s.documentElement).backgroundColor):WA.TRANSPARENT,h=s.body?Dh(n,getComputedStyle(s.body).backgroundColor):WA.TRANSPARENT,d=typeof i=="string"?Dh(n,i):i===null?WA.TRANSPARENT:4294967295;return e===s.documentElement?Vl(c)?Vl(h)?d:h:c:d};const YT=Object.freeze(Object.defineProperty({__proto__:null,default:XT},Symbol.toStringTag,{value:"Module"}));/*! @license DOMPurify 2.5.8 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.5.8/LICENSE */function Gl(n){"@babel/helpers - typeof";return Gl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gl(n)}function Qm(n,e){return Qm=Object.setPrototypeOf||function(i,s){return i.__proto__=s,i},Qm(n,e)}function JT(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function qp(n,e,i){return JT()?qp=Reflect.construct:qp=function(s,c,h){var d=[null];d.push.apply(d,c);var A=Function.bind.apply(s,d),v=new A;return h&&Qm(v,h.prototype),v},qp.apply(null,arguments)}function Bo(n){return tU(n)||eU(n)||rU(n)||iU()}function tU(n){if(Array.isArray(n))return km(n)}function eU(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function rU(n,e){if(n){if(typeof n=="string")return km(n,e);var i=Object.prototype.toString.call(n).slice(8,-1);if(i==="Object"&&n.constructor&&(i=n.constructor.name),i==="Map"||i==="Set")return Array.from(n);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return km(n,e)}}function km(n,e){(e==null||e>n.length)&&(e=n.length);for(var i=0,s=new Array(e);i<e;i++)s[i]=n[i];return s}function iU(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var nU=Object.hasOwnProperty,j_=Object.setPrototypeOf,sU=Object.isFrozen,aU=Object.getPrototypeOf,oU=Object.getOwnPropertyDescriptor,Ds=Object.freeze,$a=Object.seal,AU=Object.create,K_=typeof Reflect<"u"&&Reflect,Xp=K_.apply,Mm=K_.construct;Xp||(Xp=function(n,e,i){return n.apply(e,i)}),Ds||(Ds=function(n){return n}),$a||($a=function(n){return n}),Mm||(Mm=function(n,e){return qp(n,Bo(e))});var lU=Ga(Array.prototype.forEach),$_=Ga(Array.prototype.pop),jh=Ga(Array.prototype.push),Wp=Ga(String.prototype.toLowerCase),Dm=Ga(String.prototype.toString),G_=Ga(String.prototype.match),Co=Ga(String.prototype.replace),cU=Ga(String.prototype.indexOf),uU=Ga(String.prototype.trim),rs=Ga(RegExp.prototype.test),Nm=hU(TypeError);function Ga(n){return function(e){for(var i=arguments.length,s=new Array(i>1?i-1:0),c=1;c<i;c++)s[c-1]=arguments[c];return Xp(n,e,s)}}function hU(n){return function(){for(var e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];return Mm(n,i)}}function qr(n,e,i){var s;i=(s=i)!==null&&s!==void 0?s:Wp,j_&&j_(n,null);for(var c=e.length;c--;){var h=e[c];if(typeof h=="string"){var d=i(h);d!==h&&(sU(e)||(e[c]=d),h=d)}n[h]=!0}return n}function Fc(n){var e=AU(null),i;for(i in n)Xp(nU,n,[i])===!0&&(e[i]=n[i]);return e}function Zp(n,e){for(;n!==null;){var i=oU(n,e);if(i){if(i.get)return Ga(i.get);if(typeof i.value=="function")return Ga(i.value)}n=aU(n)}function s(c){return console.warn("fallback value for",c),null}return s}var q_=Ds(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Om=Ds(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Rm=Ds(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),dU=Ds(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),zm=Ds(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),pU=Ds(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),X_=Ds(["#text"]),W_=Ds(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),Hm=Ds(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Z_=Ds(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Yp=Ds(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),fU=$a(/\{\{[\w\W]*|[\w\W]*\}\}/gm),gU=$a(/<%[\w\W]*|[\w\W]*%>/gm),mU=$a(/\${[\w\W]*}/gm),yU=$a(/^data-[\-\w.\u00B7-\uFFFF]+$/),vU=$a(/^aria-[\-\w]+$/),wU=$a(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),_U=$a(/^(?:\w+script|data):/i),bU=$a(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),xU=$a(/^html$/i),BU=$a(/^[a-z][.\w]*(-[.\w]+)+$/i),CU=function(){return typeof window>"u"?null:window},FU=function(n,e){if(Gl(n)!=="object"||typeof n.createPolicy!="function")return null;var i=null,s="data-tt-policy-suffix";e.currentScript&&e.currentScript.hasAttribute(s)&&(i=e.currentScript.getAttribute(s));var c="dompurify"+(i?"#"+i:"");try{return n.createPolicy(c,{createHTML:function(h){return h},createScriptURL:function(h){return h}})}catch{return console.warn("TrustedTypes policy "+c+" could not be created."),null}};function Y_(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:CU(),e=function(Ft){return Y_(Ft)};if(e.version="2.5.8",e.removed=[],!n||!n.document||n.document.nodeType!==9)return e.isSupported=!1,e;var i=n.document,s=n.document,c=n.DocumentFragment,h=n.HTMLTemplateElement,d=n.Node,A=n.Element,v=n.NodeFilter,C=n.NamedNodeMap,I=C===void 0?n.NamedNodeMap||n.MozNamedAttrMap:C,T=n.HTMLFormElement,P=n.DOMParser,U=n.trustedTypes,V=A.prototype,R=Zp(V,"cloneNode"),Z=Zp(V,"nextSibling"),K=Zp(V,"childNodes"),tt=Zp(V,"parentNode");if(typeof h=="function"){var ht=s.createElement("template");ht.content&&ht.content.ownerDocument&&(s=ht.content.ownerDocument)}var Bt=FU(U,i),Lt=Bt?Bt.createHTML(""):"",Ut=s,xt=Ut.implementation,pt=Ut.createNodeIterator,kt=Ut.createDocumentFragment,Xt=Ut.getElementsByTagName,st=i.importNode,ut={};try{ut=Fc(s).documentMode?s.documentMode:{}}catch{}var mt={};e.isSupported=typeof tt=="function"&&xt&&xt.createHTMLDocument!==void 0&&ut!==9;var vt=fU,$t=gU,Vt=mU,jt=yU,zt=vU,Wt=_U,Yt=bU,me=BU,et=wU,dt=null,_t=qr({},[].concat(Bo(q_),Bo(Om),Bo(Rm),Bo(zm),Bo(X_))),Ct=null,Ot=qr({},[].concat(Bo(W_),Bo(Hm),Bo(Z_),Bo(Yp))),Rt=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Zt=null,Jt=null,xe=!0,we=!0,Te=!1,Ee=!0,Ve=!1,ie=!0,rt=!1,dr=!1,je=!1,se=!1,fe=!1,Ue=!1,Se=!0,Re=!1,We="user-content-",ar=!0,wr=!1,Fr={},oe=null,er=qr({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),or=null,Le=qr({},["audio","video","img","source","image","track"]),Zr=null,ce=qr({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),ir="http://www.w3.org/1998/Math/MathML",Pe="http://www.w3.org/2000/svg",_r="http://www.w3.org/1999/xhtml",ni=_r,Qe=!1,mi=null,Kr=qr({},[ir,Pe,_r],Dm),si,Xr=["application/xhtml+xml","text/html"],yt="text/html",$,X=null,at=s.createElement("form"),ft=function(Ft){return Ft instanceof RegExp||Ft instanceof Function},Qt=function(Ft){X&&X===Ft||((!Ft||Gl(Ft)!=="object")&&(Ft={}),Ft=Fc(Ft),si=Xr.indexOf(Ft.PARSER_MEDIA_TYPE)===-1?si=yt:si=Ft.PARSER_MEDIA_TYPE,$=si==="application/xhtml+xml"?Dm:Wp,dt="ALLOWED_TAGS"in Ft?qr({},Ft.ALLOWED_TAGS,$):_t,Ct="ALLOWED_ATTR"in Ft?qr({},Ft.ALLOWED_ATTR,$):Ot,mi="ALLOWED_NAMESPACES"in Ft?qr({},Ft.ALLOWED_NAMESPACES,Dm):Kr,Zr="ADD_URI_SAFE_ATTR"in Ft?qr(Fc(ce),Ft.ADD_URI_SAFE_ATTR,$):ce,or="ADD_DATA_URI_TAGS"in Ft?qr(Fc(Le),Ft.ADD_DATA_URI_TAGS,$):Le,oe="FORBID_CONTENTS"in Ft?qr({},Ft.FORBID_CONTENTS,$):er,Zt="FORBID_TAGS"in Ft?qr({},Ft.FORBID_TAGS,$):{},Jt="FORBID_ATTR"in Ft?qr({},Ft.FORBID_ATTR,$):{},Fr="USE_PROFILES"in Ft?Ft.USE_PROFILES:!1,xe=Ft.ALLOW_ARIA_ATTR!==!1,we=Ft.ALLOW_DATA_ATTR!==!1,Te=Ft.ALLOW_UNKNOWN_PROTOCOLS||!1,Ee=Ft.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Ve=Ft.SAFE_FOR_TEMPLATES||!1,ie=Ft.SAFE_FOR_XML!==!1,rt=Ft.WHOLE_DOCUMENT||!1,se=Ft.RETURN_DOM||!1,fe=Ft.RETURN_DOM_FRAGMENT||!1,Ue=Ft.RETURN_TRUSTED_TYPE||!1,je=Ft.FORCE_BODY||!1,Se=Ft.SANITIZE_DOM!==!1,Re=Ft.SANITIZE_NAMED_PROPS||!1,ar=Ft.KEEP_CONTENT!==!1,wr=Ft.IN_PLACE||!1,et=Ft.ALLOWED_URI_REGEXP||et,ni=Ft.NAMESPACE||_r,Rt=Ft.CUSTOM_ELEMENT_HANDLING||{},Ft.CUSTOM_ELEMENT_HANDLING&&ft(Ft.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Rt.tagNameCheck=Ft.CUSTOM_ELEMENT_HANDLING.tagNameCheck),Ft.CUSTOM_ELEMENT_HANDLING&&ft(Ft.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Rt.attributeNameCheck=Ft.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),Ft.CUSTOM_ELEMENT_HANDLING&&typeof Ft.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Rt.allowCustomizedBuiltInElements=Ft.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Ve&&(we=!1),fe&&(se=!0),Fr&&(dt=qr({},Bo(X_)),Ct=[],Fr.html===!0&&(qr(dt,q_),qr(Ct,W_)),Fr.svg===!0&&(qr(dt,Om),qr(Ct,Hm),qr(Ct,Yp)),Fr.svgFilters===!0&&(qr(dt,Rm),qr(Ct,Hm),qr(Ct,Yp)),Fr.mathMl===!0&&(qr(dt,zm),qr(Ct,Z_),qr(Ct,Yp))),Ft.ADD_TAGS&&(dt===_t&&(dt=Fc(dt)),qr(dt,Ft.ADD_TAGS,$)),Ft.ADD_ATTR&&(Ct===Ot&&(Ct=Fc(Ct)),qr(Ct,Ft.ADD_ATTR,$)),Ft.ADD_URI_SAFE_ATTR&&qr(Zr,Ft.ADD_URI_SAFE_ATTR,$),Ft.FORBID_CONTENTS&&(oe===er&&(oe=Fc(oe)),qr(oe,Ft.FORBID_CONTENTS,$)),ar&&(dt["#text"]=!0),rt&&qr(dt,["html","head","body"]),dt.table&&(qr(dt,["tbody"]),delete Zt.tbody),Ds&&Ds(Ft),X=Ft)},Nt=qr({},["mi","mo","mn","ms","mtext"]),Pt=qr({},["annotation-xml"]),Et=qr({},["title","style","font","a","script"]),te=qr({},Om);qr(te,Rm),qr(te,dU);var ae=qr({},zm);qr(ae,pU);var Gt=function(Ft){var Ie=tt(Ft);(!Ie||!Ie.tagName)&&(Ie={namespaceURI:ni,tagName:"template"});var ve=Wp(Ft.tagName),Pr=Wp(Ie.tagName);return mi[Ft.namespaceURI]?Ft.namespaceURI===Pe?Ie.namespaceURI===_r?ve==="svg":Ie.namespaceURI===ir?ve==="svg"&&(Pr==="annotation-xml"||Nt[Pr]):!!te[ve]:Ft.namespaceURI===ir?Ie.namespaceURI===_r?ve==="math":Ie.namespaceURI===Pe?ve==="math"&&Pt[Pr]:!!ae[ve]:Ft.namespaceURI===_r?Ie.namespaceURI===Pe&&!Pt[Pr]||Ie.namespaceURI===ir&&!Nt[Pr]?!1:!ae[ve]&&(Et[ve]||!te[ve]):!!(si==="application/xhtml+xml"&&mi[Ft.namespaceURI]):!1},ue=function(Ft){jh(e.removed,{element:Ft});try{Ft.parentNode.removeChild(Ft)}catch{try{Ft.outerHTML=Lt}catch{Ft.remove()}}},Me=function(Ft,Ie){try{jh(e.removed,{attribute:Ie.getAttributeNode(Ft),from:Ie})}catch{jh(e.removed,{attribute:null,from:Ie})}if(Ie.removeAttribute(Ft),Ft==="is"&&!Ct[Ft])if(se||fe)try{ue(Ie)}catch{}else try{Ie.setAttribute(Ft,"")}catch{}},Xe=function(Ft){var Ie,ve;if(je)Ft="<remove></remove>"+Ft;else{var Pr=G_(Ft,/^[\r\n\t ]+/);ve=Pr&&Pr[0]}si==="application/xhtml+xml"&&ni===_r&&(Ft='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+Ft+"</body></html>");var mr=Bt?Bt.createHTML(Ft):Ft;if(ni===_r)try{Ie=new P().parseFromString(mr,si)}catch{}if(!Ie||!Ie.documentElement){Ie=xt.createDocument(ni,"template",null);try{Ie.documentElement.innerHTML=Qe?Lt:mr}catch{}}var Xi=Ie.body||Ie.documentElement;return Ft&&ve&&Xi.insertBefore(s.createTextNode(ve),Xi.childNodes[0]||null),ni===_r?Xt.call(Ie,rt?"html":"body")[0]:rt?Ie.documentElement:Xi},Sr=function(Ft){return pt.call(Ft.ownerDocument||Ft,Ft,v.SHOW_ELEMENT|v.SHOW_COMMENT|v.SHOW_TEXT|v.SHOW_PROCESSING_INSTRUCTION|v.SHOW_CDATA_SECTION,null,!1)},nr=function(Ft){return Ft instanceof T&&(typeof Ft.nodeName!="string"||typeof Ft.textContent!="string"||typeof Ft.removeChild!="function"||!(Ft.attributes instanceof I)||typeof Ft.removeAttribute!="function"||typeof Ft.setAttribute!="function"||typeof Ft.namespaceURI!="string"||typeof Ft.insertBefore!="function"||typeof Ft.hasChildNodes!="function")},br=function(Ft){return Gl(d)==="object"?Ft instanceof d:Ft&&Gl(Ft)==="object"&&typeof Ft.nodeType=="number"&&typeof Ft.nodeName=="string"},Ar=function(Ft,Ie,ve){mt[Ft]&&lU(mt[Ft],function(Pr){Pr.call(e,Ie,ve,X)})},Yr=function(Ft){var Ie;if(Ar("beforeSanitizeElements",Ft,null),nr(Ft)||rs(/[\u0080-\uFFFF]/,Ft.nodeName))return ue(Ft),!0;var ve=$(Ft.nodeName);if(Ar("uponSanitizeElement",Ft,{tagName:ve,allowedTags:dt}),Ft.hasChildNodes()&&!br(Ft.firstElementChild)&&(!br(Ft.content)||!br(Ft.content.firstElementChild))&&rs(/<[/\w]/g,Ft.innerHTML)&&rs(/<[/\w]/g,Ft.textContent)||ve==="select"&&rs(/<template/i,Ft.innerHTML)||Ft.nodeType===7||ie&&Ft.nodeType===8&&rs(/<[/\w]/g,Ft.data))return ue(Ft),!0;if(!dt[ve]||Zt[ve]){if(!Zt[ve]&&gr(ve)&&(Rt.tagNameCheck instanceof RegExp&&rs(Rt.tagNameCheck,ve)||Rt.tagNameCheck instanceof Function&&Rt.tagNameCheck(ve)))return!1;if(ar&&!oe[ve]){var Pr=tt(Ft)||Ft.parentNode,mr=K(Ft)||Ft.childNodes;if(mr&&Pr)for(var Xi=mr.length,li=Xi-1;li>=0;--li){var yi=R(mr[li],!0);yi.__removalCount=(Ft.__removalCount||0)+1,Pr.insertBefore(yi,Z(Ft))}}return ue(Ft),!0}return Ft instanceof A&&!Gt(Ft)||(ve==="noscript"||ve==="noembed"||ve==="noframes")&&rs(/<\/no(script|embed|frames)/i,Ft.innerHTML)?(ue(Ft),!0):(Ve&&Ft.nodeType===3&&(Ie=Ft.textContent,Ie=Co(Ie,vt," "),Ie=Co(Ie,$t," "),Ie=Co(Ie,Vt," "),Ft.textContent!==Ie&&(jh(e.removed,{element:Ft.cloneNode()}),Ft.textContent=Ie)),Ar("afterSanitizeElements",Ft,null),!1)},$r=function(Ft,Ie,ve){if(Se&&(Ie==="id"||Ie==="name")&&(ve in s||ve in at))return!1;if(!(we&&!Jt[Ie]&&rs(jt,Ie))&&!(xe&&rs(zt,Ie))){if(!Ct[Ie]||Jt[Ie]){if(!(gr(Ft)&&(Rt.tagNameCheck instanceof RegExp&&rs(Rt.tagNameCheck,Ft)||Rt.tagNameCheck instanceof Function&&Rt.tagNameCheck(Ft))&&(Rt.attributeNameCheck instanceof RegExp&&rs(Rt.attributeNameCheck,Ie)||Rt.attributeNameCheck instanceof Function&&Rt.attributeNameCheck(Ie))||Ie==="is"&&Rt.allowCustomizedBuiltInElements&&(Rt.tagNameCheck instanceof RegExp&&rs(Rt.tagNameCheck,ve)||Rt.tagNameCheck instanceof Function&&Rt.tagNameCheck(ve))))return!1}else if(!Zr[Ie]&&!rs(et,Co(ve,Yt,""))&&!((Ie==="src"||Ie==="xlink:href"||Ie==="href")&&Ft!=="script"&&cU(ve,"data:")===0&&or[Ft])&&!(Te&&!rs(Wt,Co(ve,Yt,"")))&&ve)return!1}return!0},gr=function(Ft){return Ft!=="annotation-xml"&&G_(Ft,me)},zr=function(Ft){var Ie,ve,Pr,mr;Ar("beforeSanitizeAttributes",Ft,null);var Xi=Ft.attributes;if(!(!Xi||nr(Ft))){var li={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Ct};for(mr=Xi.length;mr--;){Ie=Xi[mr];var yi=Ie,fi=yi.name,ji=yi.namespaceURI;if(ve=fi==="value"?Ie.value:uU(Ie.value),Pr=$(fi),li.attrName=Pr,li.attrValue=ve,li.keepAttr=!0,li.forceKeepAttr=void 0,Ar("uponSanitizeAttribute",Ft,li),ve=li.attrValue,!li.forceKeepAttr&&(Me(fi,Ft),!!li.keepAttr)){if(!Ee&&rs(/\/>/i,ve)){Me(fi,Ft);continue}Ve&&(ve=Co(ve,vt," "),ve=Co(ve,$t," "),ve=Co(ve,Vt," "));var pn=$(Ft.nodeName);if($r(pn,Pr,ve)){if(Re&&(Pr==="id"||Pr==="name")&&(Me(fi,Ft),ve=We+ve),ie&&rs(/((--!?|])>)|<\/(style|title)/i,ve)){Me(fi,Ft);continue}if(Bt&&Gl(U)==="object"&&typeof U.getAttributeType=="function"&&!ji)switch(U.getAttributeType(pn,Pr)){case"TrustedHTML":{ve=Bt.createHTML(ve);break}case"TrustedScriptURL":{ve=Bt.createScriptURL(ve);break}}try{ji?Ft.setAttributeNS(ji,fi,ve):Ft.setAttribute(fi,ve),nr(Ft)?ue(Ft):$_(e.removed)}catch{}}}}Ar("afterSanitizeAttributes",Ft,null)}},Jr=function Ft(Ie){var ve,Pr=Sr(Ie);for(Ar("beforeSanitizeShadowDOM",Ie,null);ve=Pr.nextNode();)Ar("uponSanitizeShadowNode",ve,null),Yr(ve),zr(ve),ve.content instanceof c&&Ft(ve.content);Ar("afterSanitizeShadowDOM",Ie,null)};return e.sanitize=function(Ft){var Ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ve,Pr,mr,Xi,li;if(Qe=!Ft,Qe&&(Ft="<!-->"),typeof Ft!="string"&&!br(Ft))if(typeof Ft.toString=="function"){if(Ft=Ft.toString(),typeof Ft!="string")throw Nm("dirty is not a string, aborting")}else throw Nm("toString is not a function");if(!e.isSupported){if(Gl(n.toStaticHTML)==="object"||typeof n.toStaticHTML=="function"){if(typeof Ft=="string")return n.toStaticHTML(Ft);if(br(Ft))return n.toStaticHTML(Ft.outerHTML)}return Ft}if(dr||Qt(Ie),e.removed=[],typeof Ft=="string"&&(wr=!1),wr){if(Ft.nodeName){var yi=$(Ft.nodeName);if(!dt[yi]||Zt[yi])throw Nm("root node is forbidden and cannot be sanitized in-place")}}else if(Ft instanceof d)ve=Xe("<!---->"),Pr=ve.ownerDocument.importNode(Ft,!0),Pr.nodeType===1&&Pr.nodeName==="BODY"||Pr.nodeName==="HTML"?ve=Pr:ve.appendChild(Pr);else{if(!se&&!Ve&&!rt&&Ft.indexOf("<")===-1)return Bt&&Ue?Bt.createHTML(Ft):Ft;if(ve=Xe(Ft),!ve)return se?null:Ue?Lt:""}ve&&je&&ue(ve.firstChild);for(var fi=Sr(wr?Ft:ve);mr=fi.nextNode();)mr.nodeType===3&&mr===Xi||(Yr(mr),zr(mr),mr.content instanceof c&&Jr(mr.content),Xi=mr);if(Xi=null,wr)return Ft;if(se){if(fe)for(li=kt.call(ve.ownerDocument);ve.firstChild;)li.appendChild(ve.firstChild);else li=ve;return(Ct.shadowroot||Ct.shadowrootmod)&&(li=st.call(i,li,!0)),li}var ji=rt?ve.outerHTML:ve.innerHTML;return rt&&dt["!doctype"]&&ve.ownerDocument&&ve.ownerDocument.doctype&&ve.ownerDocument.doctype.name&&rs(xU,ve.ownerDocument.doctype.name)&&(ji="<!DOCTYPE "+ve.ownerDocument.doctype.name+`>
`+ji),Ve&&(ji=Co(ji,vt," "),ji=Co(ji,$t," "),ji=Co(ji,Vt," ")),Bt&&Ue?Bt.createHTML(ji):ji},e.setConfig=function(Ft){Qt(Ft),dr=!0},e.clearConfig=function(){X=null,dr=!1},e.isValidAttribute=function(Ft,Ie,ve){X||Qt({});var Pr=$(Ft),mr=$(Ie);return $r(Pr,mr,ve)},e.addHook=function(Ft,Ie){typeof Ie=="function"&&(mt[Ft]=mt[Ft]||[],jh(mt[Ft],Ie))},e.removeHook=function(Ft){if(mt[Ft])return $_(mt[Ft])},e.removeHooks=function(Ft){mt[Ft]&&(mt[Ft]=[])},e.removeAllHooks=function(){mt={}},e}var SU=Y_();const IU=Object.freeze(Object.defineProperty({__proto__:null,default:SU},Symbol.toStringTag,{value:"Module"}));var Tu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function J_(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Kh=function(n){return n&&n.Math===Math&&n},Ji=Kh(typeof globalThis=="object"&&globalThis)||Kh(typeof window=="object"&&window)||Kh(typeof self=="object"&&self)||Kh(typeof Tu=="object"&&Tu)||Kh(typeof Tu=="object"&&Tu)||function(){return this}()||Function("return this")(),$h={},un=function(n){try{return!!n()}catch{return!0}},EU=un,Fo=!EU(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7}),TU=un,Jp=!TU(function(){var n=(function(){}).bind();return typeof n!="function"||n.hasOwnProperty("prototype")}),UU=Jp,tf=Function.prototype.call,is=UU?tf.bind(tf):function(){return tf.apply(tf,arguments)},t2={},e2={}.propertyIsEnumerable,r2=Object.getOwnPropertyDescriptor,LU=r2&&!e2.call({1:2},1);t2.f=LU?function(n){var e=r2(this,n);return!!e&&e.enumerable}:e2;var Vm=function(n,e){return{enumerable:!(n&1),configurable:!(n&2),writable:!(n&4),value:e}},i2=Jp,n2=Function.prototype,jm=n2.call,PU=i2&&n2.bind.bind(jm,jm),hn=i2?PU:function(n){return function(){return jm.apply(n,arguments)}},s2=hn,QU=s2({}.toString),kU=s2("".slice),Sc=function(n){return kU(QU(n),8,-1)},MU=hn,DU=un,NU=Sc,Km=Object,OU=MU("".split),a2=DU(function(){return!Km("z").propertyIsEnumerable(0)})?function(n){return NU(n)==="String"?OU(n,""):Km(n)}:Km,Ic=function(n){return n==null},RU=Ic,zU=TypeError,So=function(n){if(RU(n))throw new zU("Can't call method on "+n);return n},HU=a2,VU=So,Gh=function(n){return HU(VU(n))},$m=typeof document=="object"&&document.all,dn=typeof $m>"u"&&$m!==void 0?function(n){return typeof n=="function"||n===$m}:function(n){return typeof n=="function"},jU=dn,Io=function(n){return typeof n=="object"?n!==null:jU(n)},Gm=Ji,KU=dn,$U=function(n){return KU(n)?n:void 0},Ec=function(n,e){return arguments.length<2?$U(Gm[n]):Gm[n]&&Gm[n][e]},GU=hn,ef=GU({}.isPrototypeOf),qU=Ji,o2=qU.navigator,A2=o2&&o2.userAgent,qh=A2?String(A2):"",l2=Ji,qm=qh,c2=l2.process,u2=l2.Deno,h2=c2&&c2.versions||u2&&u2.version,d2=h2&&h2.v8,Eo,rf;d2&&(Eo=d2.split("."),rf=Eo[0]>0&&Eo[0]<4?1:+(Eo[0]+Eo[1])),!rf&&qm&&(Eo=qm.match(/Edge\/(\d+)/),(!Eo||Eo[1]>=74)&&(Eo=qm.match(/Chrome\/(\d+)/),Eo&&(rf=+Eo[1])));var Xm=rf,p2=Xm,XU=un,WU=Ji,ZU=WU.String,f2=!!Object.getOwnPropertySymbols&&!XU(function(){var n=Symbol("symbol detection");return!ZU(n)||!(Object(n)instanceof Symbol)||!Symbol.sham&&p2&&p2<41}),YU=f2,g2=YU&&!Symbol.sham&&typeof Symbol.iterator=="symbol",JU=Ec,tL=dn,eL=ef,rL=g2,iL=Object,m2=rL?function(n){return typeof n=="symbol"}:function(n){var e=JU("Symbol");return tL(e)&&eL(e.prototype,iL(n))},nL=String,nf=function(n){try{return nL(n)}catch{return"Object"}},sL=dn,aL=nf,oL=TypeError,YA=function(n){if(sL(n))return n;throw new oL(aL(n)+" is not a function")},AL=YA,lL=Ic,Uu=function(n,e){var i=n[e];return lL(i)?void 0:AL(i)},Wm=is,Zm=dn,Ym=Io,cL=TypeError,uL=function(n,e){var i,s;if(e==="string"&&Zm(i=n.toString)&&!Ym(s=Wm(i,n))||Zm(i=n.valueOf)&&!Ym(s=Wm(i,n))||e!=="string"&&Zm(i=n.toString)&&!Ym(s=Wm(i,n)))return s;throw new cL("Can't convert object to primitive value")},y2={exports:{}},v2=Ji,hL=Object.defineProperty,Jm=function(n,e){try{hL(v2,n,{value:e,configurable:!0,writable:!0})}catch{v2[n]=e}return e},dL=Ji,pL=Jm,w2="__core-js_shared__",_2=y2.exports=dL[w2]||pL(w2,{});(_2.versions||(_2.versions=[])).push({version:"3.39.0",mode:"global",copyright:"© 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.39.0/LICENSE",source:"https://github.com/zloirock/core-js"});var t0=y2.exports,b2=t0,e0=function(n,e){return b2[n]||(b2[n]=e||{})},fL=So,gL=Object,sf=function(n){return gL(fL(n))},mL=hn,yL=sf,vL=mL({}.hasOwnProperty),To=Object.hasOwn||function(n,e){return vL(yL(n),e)},wL=hn,_L=0,bL=Math.random(),xL=wL(1 .toString),x2=function(n){return"Symbol("+(n===void 0?"":n)+")_"+xL(++_L+bL,36)},BL=Ji,CL=e0,B2=To,FL=x2,SL=f2,IL=g2,Lu=BL.Symbol,r0=CL("wks"),EL=IL?Lu.for||Lu:Lu&&Lu.withoutSetter||FL,Kn=function(n){return B2(r0,n)||(r0[n]=SL&&B2(Lu,n)?Lu[n]:EL("Symbol."+n)),r0[n]},TL=is,C2=Io,F2=m2,UL=Uu,LL=uL,PL=Kn,QL=TypeError,kL=PL("toPrimitive"),ML=function(n,e){if(!C2(n)||F2(n))return n;var i=UL(n,kL),s;if(i){if(e===void 0&&(e="default"),s=TL(i,n,e),!C2(s)||F2(s))return s;throw new QL("Can't convert object to primitive value")}return e===void 0&&(e="number"),LL(n,e)},DL=ML,NL=m2,S2=function(n){var e=DL(n,"string");return NL(e)?e:e+""},OL=Ji,I2=Io,i0=OL.document,RL=I2(i0)&&I2(i0.createElement),af=function(n){return RL?i0.createElement(n):{}},zL=Fo,HL=un,VL=af,E2=!zL&&!HL(function(){return Object.defineProperty(VL("div"),"a",{get:function(){return 7}}).a!==7}),jL=Fo,KL=is,$L=t2,GL=Vm,qL=Gh,XL=S2,WL=To,ZL=E2,T2=Object.getOwnPropertyDescriptor;$h.f=jL?T2:function(n,e){if(n=qL(n),e=XL(e),ZL)try{return T2(n,e)}catch{}if(WL(n,e))return GL(!KL($L.f,n,e),n[e])};var JA={},YL=Fo,JL=un,U2=YL&&JL(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42}),tP=Io,eP=String,rP=TypeError,Ns=function(n){if(tP(n))return n;throw new rP(eP(n)+" is not an object")},iP=Fo,nP=E2,sP=U2,of=Ns,L2=S2,aP=TypeError,n0=Object.defineProperty,oP=Object.getOwnPropertyDescriptor,s0="enumerable",a0="configurable",o0="writable";JA.f=iP?sP?function(n,e,i){if(of(n),e=L2(e),of(i),typeof n=="function"&&e==="prototype"&&"value"in i&&o0 in i&&!i[o0]){var s=oP(n,e);s&&s[o0]&&(n[e]=i.value,i={configurable:a0 in i?i[a0]:s[a0],enumerable:s0 in i?i[s0]:s[s0],writable:!1})}return n0(n,e,i)}:n0:function(n,e,i){if(of(n),e=L2(e),of(i),nP)try{return n0(n,e,i)}catch{}if("get"in i||"set"in i)throw new aP("Accessors not supported");return"value"in i&&(n[e]=i.value),n};var AP=Fo,lP=JA,cP=Vm,Xh=AP?function(n,e,i){return lP.f(n,e,cP(1,i))}:function(n,e,i){return n[e]=i,n},P2={exports:{}},A0=Fo,uP=To,Q2=Function.prototype,hP=A0&&Object.getOwnPropertyDescriptor,l0=uP(Q2,"name"),dP=l0&&(function(){}).name==="something",pP=l0&&(!A0||A0&&hP(Q2,"name").configurable),Af={EXISTS:l0,PROPER:dP,CONFIGURABLE:pP},fP=hn,gP=dn,c0=t0,mP=fP(Function.toString);gP(c0.inspectSource)||(c0.inspectSource=function(n){return mP(n)});var u0=c0.inspectSource,yP=Ji,vP=dn,k2=yP.WeakMap,wP=vP(k2)&&/native code/.test(String(k2)),_P=e0,bP=x2,M2=_P("keys"),h0=function(n){return M2[n]||(M2[n]=bP(n))},d0={},xP=wP,D2=Ji,BP=Io,CP=Xh,p0=To,f0=t0,FP=h0,SP=d0,N2="Object already initialized",g0=D2.TypeError,IP=D2.WeakMap,lf,Wh,cf,EP=function(n){return cf(n)?Wh(n):lf(n,{})},TP=function(n){return function(e){var i;if(!BP(e)||(i=Wh(e)).type!==n)throw new g0("Incompatible receiver, "+n+" required");return i}};if(xP||f0.state){var aA=f0.state||(f0.state=new IP);aA.get=aA.get,aA.has=aA.has,aA.set=aA.set,lf=function(n,e){if(aA.has(n))throw new g0(N2);return e.facade=n,aA.set(n,e),e},Wh=function(n){return aA.get(n)||{}},cf=function(n){return aA.has(n)}}else{var Pu=FP("state");SP[Pu]=!0,lf=function(n,e){if(p0(n,Pu))throw new g0(N2);return e.facade=n,CP(n,Pu,e),e},Wh=function(n){return p0(n,Pu)?n[Pu]:{}},cf=function(n){return p0(n,Pu)}}var uf={set:lf,get:Wh,has:cf,enforce:EP,getterFor:TP},m0=hn,UP=un,LP=dn,hf=To,y0=Fo,PP=Af.CONFIGURABLE,QP=u0,O2=uf,kP=O2.enforce,MP=O2.get,R2=String,df=Object.defineProperty,DP=m0("".slice),NP=m0("".replace),OP=m0([].join),RP=y0&&!UP(function(){return df(function(){},"length",{value:8}).length!==8}),zP=String(String).split("String"),HP=P2.exports=function(n,e,i){DP(R2(e),0,7)==="Symbol("&&(e="["+NP(R2(e),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),i&&i.getter&&(e="get "+e),i&&i.setter&&(e="set "+e),(!hf(n,"name")||PP&&n.name!==e)&&(y0?df(n,"name",{value:e,configurable:!0}):n.name=e),RP&&i&&hf(i,"arity")&&n.length!==i.arity&&df(n,"length",{value:i.arity});try{i&&hf(i,"constructor")&&i.constructor?y0&&df(n,"prototype",{writable:!1}):n.prototype&&(n.prototype=void 0)}catch{}var s=kP(n);return hf(s,"source")||(s.source=OP(zP,typeof e=="string"?e:"")),n};Function.prototype.toString=HP(function(){return LP(this)&&MP(this).source||QP(this)},"toString");var z2=P2.exports,VP=dn,jP=JA,KP=z2,$P=Jm,Tc=function(n,e,i,s){s||(s={});var c=s.enumerable,h=s.name!==void 0?s.name:e;if(VP(i)&&KP(i,h,s),s.global)c?n[e]=i:$P(e,i);else{try{s.unsafe?n[e]&&(c=!0):delete n[e]}catch{}c?n[e]=i:jP.f(n,e,{value:i,enumerable:!1,configurable:!s.nonConfigurable,writable:!s.nonWritable})}return n},H2={},GP=Math.ceil,qP=Math.floor,XP=Math.trunc||function(n){var e=+n;return(e>0?qP:GP)(e)},WP=XP,pf=function(n){var e=+n;return e!==e||e===0?0:WP(e)},ZP=pf,YP=Math.max,JP=Math.min,tQ=function(n,e){var i=ZP(n);return i<0?YP(i+e,0):JP(i,e)},eQ=pf,rQ=Math.min,Qu=function(n){var e=eQ(n);return e>0?rQ(e,9007199254740991):0},iQ=Qu,v0=function(n){return iQ(n.length)},nQ=Gh,sQ=tQ,aQ=v0,V2=function(n){return function(e,i,s){var c=nQ(e),h=aQ(c);if(h===0)return!n&&-1;var d=sQ(s,h),A;if(n&&i!==i){for(;h>d;)if(A=c[d++],A!==A)return!0}else for(;h>d;d++)if((n||d in c)&&c[d]===i)return n||d||0;return!n&&-1}},j2={includes:V2(!0),indexOf:V2(!1)},oQ=hn,w0=To,AQ=Gh,lQ=j2.indexOf,cQ=d0,K2=oQ([].push),$2=function(n,e){var i=AQ(n),s=0,c=[],h;for(h in i)!w0(cQ,h)&&w0(i,h)&&K2(c,h);for(;e.length>s;)w0(i,h=e[s++])&&(~lQ(c,h)||K2(c,h));return c},_0=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],uQ=$2,hQ=_0,dQ=hQ.concat("length","prototype");H2.f=Object.getOwnPropertyNames||function(n){return uQ(n,dQ)};var G2={};G2.f=Object.getOwnPropertySymbols;var pQ=Ec,fQ=hn,gQ=H2,mQ=G2,yQ=Ns,vQ=fQ([].concat),wQ=pQ("Reflect","ownKeys")||function(n){var e=gQ.f(yQ(n)),i=mQ.f;return i?vQ(e,i(n)):e},q2=To,_Q=wQ,bQ=$h,xQ=JA,BQ=function(n,e,i){for(var s=_Q(e),c=xQ.f,h=bQ.f,d=0;d<s.length;d++){var A=s[d];!q2(n,A)&&!(i&&q2(i,A))&&c(n,A,h(e,A))}},CQ=un,FQ=dn,SQ=/#|\.prototype\./,Zh=function(n,e){var i=EQ[IQ(n)];return i===UQ?!0:i===TQ?!1:FQ(e)?CQ(e):!!e},IQ=Zh.normalize=function(n){return String(n).replace(SQ,".").toLowerCase()},EQ=Zh.data={},TQ=Zh.NATIVE="N",UQ=Zh.POLYFILL="P",X2=Zh,ff=Ji,LQ=$h.f,PQ=Xh,QQ=Tc,kQ=Jm,MQ=BQ,DQ=X2,Os=function(n,e){var i=n.target,s=n.global,c=n.stat,h,d,A,v,C,I;if(s?d=ff:c?d=ff[i]||kQ(i,{}):d=ff[i]&&ff[i].prototype,d)for(A in e){if(C=e[A],n.dontCallGetSet?(I=LQ(d,A),v=I&&I.value):v=d[A],h=DQ(s?A:i+(c?".":"#")+A,n.forced),!h&&v!==void 0){if(typeof C==typeof v)continue;MQ(C,v)}(n.sham||v&&v.sham)&&PQ(C,"sham",!0),QQ(d,A,C,n)}},Yh=Ji,NQ=qh,OQ=Sc,gf=function(n){return NQ.slice(0,n.length)===n},W2=function(){return gf("Bun/")?"BUN":gf("Cloudflare-Workers")?"CLOUDFLARE":gf("Deno/")?"DENO":gf("Node.js/")?"NODE":Yh.Bun&&typeof Bun.version=="string"?"BUN":Yh.Deno&&typeof Deno.version=="object"?"DENO":OQ(Yh.process)==="process"?"NODE":Yh.window&&Yh.document?"BROWSER":"REST"}(),RQ=W2,mf=RQ==="NODE",zQ=hn,HQ=YA,VQ=function(n,e,i){try{return zQ(HQ(Object.getOwnPropertyDescriptor(n,e)[i]))}catch{}},jQ=Io,KQ=function(n){return jQ(n)||n===null},$Q=KQ,GQ=String,qQ=TypeError,XQ=function(n){if($Q(n))return n;throw new qQ("Can't set "+GQ(n)+" as a prototype")},WQ=VQ,ZQ=Io,YQ=So,JQ=XQ,Z2=Object.setPrototypeOf||("__proto__"in{}?function(){var n=!1,e={},i;try{i=WQ(Object.prototype,"__proto__","set"),i(e,[]),n=e instanceof Array}catch{}return function(s,c){return YQ(s),JQ(c),ZQ(s)&&(n?i(s,c):s.__proto__=c),s}}():void 0),t6=JA.f,e6=To,r6=Kn,Y2=r6("toStringTag"),yf=function(n,e,i){n&&!i&&(n=n.prototype),n&&!e6(n,Y2)&&t6(n,Y2,{configurable:!0,value:e})},J2=z2,i6=JA,n6=function(n,e,i){return i.get&&J2(i.get,e,{getter:!0}),i.set&&J2(i.set,e,{setter:!0}),i6.f(n,e,i)},s6=Ec,a6=n6,o6=Kn,A6=Fo,tb=o6("species"),l6=function(n){var e=s6(n);A6&&e&&!e[tb]&&a6(e,tb,{configurable:!0,get:function(){return this}})},c6=ef,u6=TypeError,h6=function(n,e){if(c6(e,n))return n;throw new u6("Incorrect invocation")},d6=Kn,p6=d6("toStringTag"),eb={};eb[p6]="z";var f6=String(eb)==="[object z]",g6=f6,m6=dn,vf=Sc,y6=Kn,v6=y6("toStringTag"),w6=Object,_6=vf(function(){return arguments}())==="Arguments",b6=function(n,e){try{return n[e]}catch{}},b0=g6?vf:function(n){var e,i,s;return n===void 0?"Undefined":n===null?"Null":typeof(i=b6(e=w6(n),v6))=="string"?i:_6?vf(e):(s=vf(e))==="Object"&&m6(e.callee)?"Arguments":s},x6=hn,B6=un,rb=dn,C6=b0,F6=Ec,S6=u0,ib=function(){},nb=F6("Reflect","construct"),x0=/^\s*(?:class|function)\b/,I6=x6(x0.exec),E6=!x0.test(ib),Jh=function(n){if(!rb(n))return!1;try{return nb(ib,[],n),!0}catch{return!1}},sb=function(n){if(!rb(n))return!1;switch(C6(n)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return E6||!!I6(x0,S6(n))}catch{return!0}};sb.sham=!0;var T6=!nb||B6(function(){var n;return Jh(Jh.call)||!Jh(Object)||!Jh(function(){n=!0})||n})?sb:Jh,U6=T6,L6=nf,P6=TypeError,Q6=function(n){if(U6(n))return n;throw new P6(L6(n)+" is not a constructor")},ab=Ns,k6=Q6,M6=Ic,D6=Kn,N6=D6("species"),ob=function(n,e){var i=ab(n).constructor,s;return i===void 0||M6(s=ab(i)[N6])?e:k6(s)},O6=Jp,Ab=Function.prototype,lb=Ab.apply,cb=Ab.call,ub=typeof Reflect=="object"&&Reflect.apply||(O6?cb.bind(lb):function(){return cb.apply(lb,arguments)}),R6=Sc,z6=hn,wf=function(n){if(R6(n)==="Function")return z6(n)},hb=wf,H6=YA,V6=Jp,j6=hb(hb.bind),B0=function(n,e){return H6(n),e===void 0?n:V6?j6(n,e):function(){return n.apply(e,arguments)}},K6=Ec,db=K6("document","documentElement"),$6=hn,G6=$6([].slice),q6=TypeError,X6=function(n,e){if(n<e)throw new q6("Not enough arguments");return n},W6=qh,pb=/(?:ipad|iphone|ipod).*applewebkit/i.test(W6),Ca=Ji,Z6=ub,Y6=B0,fb=dn,J6=To,gb=un,mb=db,tk=G6,yb=af,ek=X6,rk=pb,ik=mf,C0=Ca.setImmediate,F0=Ca.clearImmediate,nk=Ca.process,S0=Ca.Dispatch,sk=Ca.Function,vb=Ca.MessageChannel,ak=Ca.String,I0=0,td={},wb="onreadystatechange",ed,Uc,E0,T0;gb(function(){ed=Ca.location});var U0=function(n){if(J6(td,n)){var e=td[n];delete td[n],e()}},L0=function(n){return function(){U0(n)}},_b=function(n){U0(n.data)},bb=function(n){Ca.postMessage(ak(n),ed.protocol+"//"+ed.host)};(!C0||!F0)&&(C0=function(n){ek(arguments.length,1);var e=fb(n)?n:sk(n),i=tk(arguments,1);return td[++I0]=function(){Z6(e,void 0,i)},Uc(I0),I0},F0=function(n){delete td[n]},ik?Uc=function(n){nk.nextTick(L0(n))}:S0&&S0.now?Uc=function(n){S0.now(L0(n))}:vb&&!rk?(E0=new vb,T0=E0.port2,E0.port1.onmessage=_b,Uc=Y6(T0.postMessage,T0)):Ca.addEventListener&&fb(Ca.postMessage)&&!Ca.importScripts&&ed&&ed.protocol!=="file:"&&!gb(bb)?(Uc=bb,Ca.addEventListener("message",_b,!1)):wb in yb("script")?Uc=function(n){mb.appendChild(yb("script"))[wb]=function(){mb.removeChild(this),U0(n)}}:Uc=function(n){setTimeout(L0(n),0)});var xb={set:C0,clear:F0},Bb=Ji,ok=Fo,Ak=Object.getOwnPropertyDescriptor,lk=function(n){if(!ok)return Bb[n];var e=Ak(Bb,n);return e&&e.value},Cb=function(){this.head=null,this.tail=null};Cb.prototype={add:function(n){var e={item:n,next:null},i=this.tail;i?i.next=e:this.head=e,this.tail=e},get:function(){var n=this.head;if(n){var e=this.head=n.next;return e===null&&(this.tail=null),n.item}}};var Fb=Cb,ck=qh,uk=/ipad|iphone|ipod/i.test(ck)&&typeof Pebble<"u",hk=qh,dk=/web0s(?!.*chrome)/i.test(hk),ku=Ji,pk=lk,Sb=B0,P0=xb.set,fk=Fb,gk=pb,mk=uk,yk=dk,Q0=mf,Ib=ku.MutationObserver||ku.WebKitMutationObserver,Eb=ku.document,Tb=ku.process,_f=ku.Promise,k0=pk("queueMicrotask"),Mu,M0,D0,bf,Ub;if(!k0){var xf=new fk,Bf=function(){var n,e;for(Q0&&(n=Tb.domain)&&n.exit();e=xf.get();)try{e()}catch(i){throw xf.head&&Mu(),i}n&&n.enter()};!gk&&!Q0&&!yk&&Ib&&Eb?(M0=!0,D0=Eb.createTextNode(""),new Ib(Bf).observe(D0,{characterData:!0}),Mu=function(){D0.data=M0=!M0}):!mk&&_f&&_f.resolve?(bf=_f.resolve(void 0),bf.constructor=_f,Ub=Sb(bf.then,bf),Mu=function(){Ub(Bf)}):Q0?Mu=function(){Tb.nextTick(Bf)}:(P0=Sb(P0,ku),Mu=function(){P0(Bf)}),k0=function(n){xf.head||Mu(),xf.add(n)}}var vk=k0,wk=function(n,e){try{arguments.length===1?console.error(n):console.error(n,e)}catch{}},N0=function(n){try{return{error:!1,value:n()}}catch(e){return{error:!0,value:e}}},_k=Ji,Cf=_k.Promise,bk=Ji,rd=Cf,xk=dn,Bk=X2,Ck=u0,Fk=Kn,Lb=W2,O0=Xm;rd&&rd.prototype;var Sk=Fk("species"),R0=!1,Pb=xk(bk.PromiseRejectionEvent),Ik=Bk("Promise",function(){var n=Ck(rd),e=n!==String(rd);if(!e&&O0===66)return!0;if(!O0||O0<51||!/native code/.test(n)){var i=new rd(function(h){h(1)}),s=function(h){h(function(){},function(){})},c=i.constructor={};if(c[Sk]=s,R0=i.then(function(){})instanceof s,!R0)return!0}return!e&&(Lb==="BROWSER"||Lb==="DENO")&&!Pb}),id={CONSTRUCTOR:Ik,REJECTION_EVENT:Pb,SUBCLASSING:R0},Du={},Qb=YA,Ek=TypeError,Tk=function(n){var e,i;this.promise=new n(function(s,c){if(e!==void 0||i!==void 0)throw new Ek("Bad Promise constructor");e=s,i=c}),this.resolve=Qb(e),this.reject=Qb(i)};Du.f=function(n){return new Tk(n)};var Uk=Os,Ff=mf,ql=Ji,Nu=is,kb=Tc,Mb=Z2,Lk=yf,Pk=l6,Qk=YA,Sf=dn,kk=Io,Mk=h6,Dk=ob,Db=xb.set,z0=vk,Nk=wk,Ok=N0,Rk=Fb,Nb=uf,If=Cf,H0=id,Ob=Du,Ef="Promise",Rb=H0.CONSTRUCTOR,zk=H0.REJECTION_EVENT,Hk=H0.SUBCLASSING,V0=Nb.getterFor(Ef),Vk=Nb.set,Ou=If&&If.prototype,Lc=If,Tf=Ou,zb=ql.TypeError,j0=ql.document,K0=ql.process,$0=Ob.f,jk=$0,Kk=!!(j0&&j0.createEvent&&ql.dispatchEvent),Hb="unhandledrejection",$k="rejectionhandled",Vb=0,jb=1,Gk=2,G0=1,Kb=2,Uf,$b,qk,Gb,qb=function(n){var e;return kk(n)&&Sf(e=n.then)?e:!1},Xb=function(n,e){var i=e.value,s=e.state===jb,c=s?n.ok:n.fail,h=n.resolve,d=n.reject,A=n.domain,v,C,I;try{c?(s||(e.rejection===Kb&&Wk(e),e.rejection=G0),c===!0?v=i:(A&&A.enter(),v=c(i),A&&(A.exit(),I=!0)),v===n.promise?d(new zb("Promise-chain cycle")):(C=qb(v))?Nu(C,v,h,d):h(v)):d(i)}catch(T){A&&!I&&A.exit(),d(T)}},Wb=function(n,e){n.notified||(n.notified=!0,z0(function(){for(var i=n.reactions,s;s=i.get();)Xb(s,n);n.notified=!1,e&&!n.rejection&&Xk(n)}))},Zb=function(n,e,i){var s,c;Kk?(s=j0.createEvent("Event"),s.promise=e,s.reason=i,s.initEvent(n,!1,!0),ql.dispatchEvent(s)):s={promise:e,reason:i},!zk&&(c=ql["on"+n])?c(s):n===Hb&&Nk("Unhandled promise rejection",i)},Xk=function(n){Nu(Db,ql,function(){var e=n.facade,i=n.value,s=Yb(n),c;if(s&&(c=Ok(function(){Ff?K0.emit("unhandledRejection",i,e):Zb(Hb,e,i)}),n.rejection=Ff||Yb(n)?Kb:G0,c.error))throw c.value})},Yb=function(n){return n.rejection!==G0&&!n.parent},Wk=function(n){Nu(Db,ql,function(){var e=n.facade;Ff?K0.emit("rejectionHandled",e):Zb($k,e,n.value)})},Ru=function(n,e,i){return function(s){n(e,s,i)}},zu=function(n,e,i){n.done||(n.done=!0,i&&(n=i),n.value=e,n.state=Gk,Wb(n,!0))},q0=function(n,e,i){if(!n.done){n.done=!0,i&&(n=i);try{if(n.facade===e)throw new zb("Promise can't be resolved itself");var s=qb(e);s?z0(function(){var c={done:!1};try{Nu(s,e,Ru(q0,c,n),Ru(zu,c,n))}catch(h){zu(c,h,n)}}):(n.value=e,n.state=jb,Wb(n,!1))}catch(c){zu({done:!1},c,n)}}};if(Rb&&(Lc=function(n){Mk(this,Tf),Qk(n),Nu(Uf,this);var e=V0(this);try{n(Ru(q0,e),Ru(zu,e))}catch(i){zu(e,i)}},Tf=Lc.prototype,Uf=function(n){Vk(this,{type:Ef,done:!1,notified:!1,parent:!1,reactions:new Rk,rejection:!1,state:Vb,value:null})},Uf.prototype=kb(Tf,"then",function(n,e){var i=V0(this),s=$0(Dk(this,Lc));return i.parent=!0,s.ok=Sf(n)?n:!0,s.fail=Sf(e)&&e,s.domain=Ff?K0.domain:void 0,i.state===Vb?i.reactions.add(s):z0(function(){Xb(s,i)}),s.promise}),$b=function(){var n=new Uf,e=V0(n);this.promise=n,this.resolve=Ru(q0,e),this.reject=Ru(zu,e)},Ob.f=$0=function(n){return n===Lc||n===qk?new $b(n):jk(n)},Sf(If)&&Ou!==Object.prototype)){Gb=Ou.then,Hk||kb(Ou,"then",function(n,e){var i=this;return new Lc(function(s,c){Nu(Gb,i,s,c)}).then(n,e)},{unsafe:!0});try{delete Ou.constructor}catch{}Mb&&Mb(Ou,Tf)}Uk({global:!0,constructor:!0,wrap:!0,forced:Rb},{Promise:Lc}),Lk(Lc,Ef,!1),Pk(Ef);var nd={},Zk=Kn,Yk=nd,Jk=Zk("iterator"),tM=Array.prototype,eM=function(n){return n!==void 0&&(Yk.Array===n||tM[Jk]===n)},rM=b0,Jb=Uu,iM=Ic,nM=nd,sM=Kn,aM=sM("iterator"),tx=function(n){if(!iM(n))return Jb(n,aM)||Jb(n,"@@iterator")||nM[rM(n)]},oM=is,AM=YA,lM=Ns,cM=nf,uM=tx,hM=TypeError,dM=function(n,e){var i=arguments.length<2?uM(n):e;if(AM(i))return lM(oM(i,n));throw new hM(cM(n)+" is not iterable")},pM=is,ex=Ns,fM=Uu,gM=function(n,e,i){var s,c;ex(n);try{if(s=fM(n,"return"),!s){if(e==="throw")throw i;return i}s=pM(s,n)}catch(h){c=!0,s=h}if(e==="throw")throw i;if(c)throw s;return ex(s),i},mM=B0,yM=is,vM=Ns,wM=nf,_M=eM,bM=v0,rx=ef,xM=dM,BM=tx,ix=gM,CM=TypeError,Lf=function(n,e){this.stopped=n,this.result=e},nx=Lf.prototype,sx=function(n,e,i){var s=i&&i.that,c=!!(i&&i.AS_ENTRIES),h=!!(i&&i.IS_RECORD),d=!!(i&&i.IS_ITERATOR),A=!!(i&&i.INTERRUPTED),v=mM(e,s),C,I,T,P,U,V,R,Z=function(tt){return C&&ix(C,"normal",tt),new Lf(!0,tt)},K=function(tt){return c?(vM(tt),A?v(tt[0],tt[1],Z):v(tt[0],tt[1])):A?v(tt,Z):v(tt)};if(h)C=n.iterator;else if(d)C=n;else{if(I=BM(n),!I)throw new CM(wM(n)+" is not iterable");if(_M(I)){for(T=0,P=bM(n);P>T;T++)if(U=K(n[T]),U&&rx(nx,U))return U;return new Lf(!1)}C=xM(n,I)}for(V=h?n.next:C.next;!(R=yM(V,C)).done;){try{U=K(R.value)}catch(tt){ix(C,"throw",tt)}if(typeof U=="object"&&U&&rx(nx,U))return U}return new Lf(!1)},FM=Kn,ax=FM("iterator"),ox=!1;try{var SM=0,Ax={next:function(){return{done:!!SM++}},return:function(){ox=!0}};Ax[ax]=function(){return this},Array.from(Ax,function(){throw 2})}catch{}var IM=function(n,e){try{if(!e&&!ox)return!1}catch{return!1}var i=!1;try{var s={};s[ax]=function(){return{next:function(){return{done:i=!0}}}},n(s)}catch{}return i},EM=Cf,TM=IM,UM=id.CONSTRUCTOR,lx=UM||!TM(function(n){EM.all(n).then(void 0,function(){})}),LM=Os,PM=is,QM=YA,kM=Du,MM=N0,DM=sx,NM=lx;LM({target:"Promise",stat:!0,forced:NM},{all:function(n){var e=this,i=kM.f(e),s=i.resolve,c=i.reject,h=MM(function(){var d=QM(e.resolve),A=[],v=0,C=1;DM(n,function(I){var T=v++,P=!1;C++,PM(d,e,I).then(function(U){P||(P=!0,A[T]=U,--C||s(A))},c)}),--C||s(A)});return h.error&&c(h.value),i.promise}});var OM=Os,RM=id.CONSTRUCTOR,X0=Cf,zM=Ec,HM=dn,VM=Tc,cx=X0&&X0.prototype;if(OM({target:"Promise",proto:!0,forced:RM,real:!0},{catch:function(n){return this.then(void 0,n)}}),HM(X0)){var ux=zM("Promise").prototype.catch;cx.catch!==ux&&VM(cx,"catch",ux,{unsafe:!0})}var jM=Os,KM=is,$M=YA,GM=Du,qM=N0,XM=sx,WM=lx;jM({target:"Promise",stat:!0,forced:WM},{race:function(n){var e=this,i=GM.f(e),s=i.reject,c=qM(function(){var h=$M(e.resolve);XM(n,function(d){KM(h,e,d).then(i.resolve,s)})});return c.error&&s(c.value),i.promise}});var ZM=Os,YM=Du,JM=id.CONSTRUCTOR;ZM({target:"Promise",stat:!0,forced:JM},{reject:function(n){var e=YM.f(this),i=e.reject;return i(n),e.promise}});var tD=Ns,eD=Io,rD=Du,iD=function(n,e){if(tD(n),eD(e)&&e.constructor===n)return e;var i=rD.f(n),s=i.resolve;return s(e),i.promise},nD=Os,sD=Ec,aD=id.CONSTRUCTOR,oD=iD;sD("Promise"),nD({target:"Promise",stat:!0,forced:aD},{resolve:function(n){return oD(this,n)}});function hx(n,e,i,s,c,h,d){try{var A=n[h](d),v=A.value}catch(C){return void i(C)}A.done?e(v):Promise.resolve(v).then(s,c)}function tl(n){return function(){var e=this,i=arguments;return new Promise(function(s,c){var h=n.apply(e,i);function d(v){hx(h,s,c,d,A,"next",v)}function A(v){hx(h,s,c,d,A,"throw",v)}d(void 0)})}}var AD=b0,lD=String,oA=function(n){if(AD(n)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return lD(n)},cD=Ns,dx=function(){var n=cD(this),e="";return n.hasIndices&&(e+="d"),n.global&&(e+="g"),n.ignoreCase&&(e+="i"),n.multiline&&(e+="m"),n.dotAll&&(e+="s"),n.unicode&&(e+="u"),n.unicodeSets&&(e+="v"),n.sticky&&(e+="y"),e},W0=un,uD=Ji,Z0=uD.RegExp,Y0=W0(function(){var n=Z0("a","y");return n.lastIndex=2,n.exec("abcd")!==null}),hD=Y0||W0(function(){return!Z0("a","y").sticky}),dD=Y0||W0(function(){var n=Z0("^r","gy");return n.lastIndex=2,n.exec("str")!==null}),px={BROKEN_CARET:dD,MISSED_STICKY:hD,UNSUPPORTED_Y:Y0},fx={},pD=$2,fD=_0,gD=Object.keys||function(n){return pD(n,fD)},mD=Fo,yD=U2,vD=JA,wD=Ns,_D=Gh,bD=gD;fx.f=mD&&!yD?Object.defineProperties:function(n,e){wD(n);for(var i=_D(e),s=bD(e),c=s.length,h=0,d;c>h;)vD.f(n,d=s[h++],i[d]);return n};var xD=Ns,BD=fx,gx=_0,CD=d0,FD=db,SD=af,ID=h0,mx=">",yx="<",J0="prototype",t1="script",vx=ID("IE_PROTO"),e1=function(){},wx=function(n){return yx+t1+mx+n+yx+"/"+t1+mx},_x=function(n){n.write(wx("")),n.close();var e=n.parentWindow.Object;return n=null,e},ED=function(){var n=SD("iframe"),e="java"+t1+":",i;return n.style.display="none",FD.appendChild(n),n.src=String(e),i=n.contentWindow.document,i.open(),i.write(wx("document.F=Object")),i.close(),i.F},Pf,Qf=function(){try{Pf=new ActiveXObject("htmlfile")}catch{}Qf=typeof document<"u"?document.domain&&Pf?_x(Pf):ED():_x(Pf);for(var n=gx.length;n--;)delete Qf[J0][gx[n]];return Qf()};CD[vx]=!0;var r1=Object.create||function(n,e){var i;return n!==null?(e1[J0]=xD(n),i=new e1,e1[J0]=null,i[vx]=n):i=Qf(),e===void 0?i:BD.f(i,e)},TD=un,UD=Ji,LD=UD.RegExp,PD=TD(function(){var n=LD(".","s");return!(n.dotAll&&n.test(`
`)&&n.flags==="s")}),QD=un,kD=Ji,MD=kD.RegExp,DD=QD(function(){var n=MD("(?<a>b)","g");return n.exec("b").groups.a!=="b"||"b".replace(n,"$<a>c")!=="bc"}),Hu=is,kf=hn,ND=oA,OD=dx,RD=px,zD=e0,HD=r1,VD=uf.get,jD=PD,KD=DD,$D=zD("native-string-replace",String.prototype.replace),Mf=RegExp.prototype.exec,i1=Mf,GD=kf("".charAt),qD=kf("".indexOf),XD=kf("".replace),n1=kf("".slice),s1=function(){var n=/a/,e=/b*/g;return Hu(Mf,n,"a"),Hu(Mf,e,"a"),n.lastIndex!==0||e.lastIndex!==0}(),bx=RD.BROKEN_CARET,a1=/()??/.exec("")[1]!==void 0,WD=s1||a1||bx||jD||KD;WD&&(i1=function(n){var e=this,i=VD(e),s=ND(n),c=i.raw,h,d,A,v,C,I,T;if(c)return c.lastIndex=e.lastIndex,h=Hu(i1,c,s),e.lastIndex=c.lastIndex,h;var P=i.groups,U=bx&&e.sticky,V=Hu(OD,e),R=e.source,Z=0,K=s;if(U&&(V=XD(V,"y",""),qD(V,"g")===-1&&(V+="g"),K=n1(s,e.lastIndex),e.lastIndex>0&&(!e.multiline||e.multiline&&GD(s,e.lastIndex-1)!==`
`)&&(R="(?: "+R+")",K=" "+K,Z++),d=new RegExp("^(?:"+R+")",V)),a1&&(d=new RegExp("^"+R+"$(?!\\s)",V)),s1&&(A=e.lastIndex),v=Hu(Mf,U?d:e,K),U?v?(v.input=n1(v.input,Z),v[0]=n1(v[0],Z),v.index=e.lastIndex,e.lastIndex+=v[0].length):e.lastIndex=0:s1&&v&&(e.lastIndex=e.global?v.index+v[0].length:A),a1&&v&&v.length>1&&Hu($D,v[0],d,function(){for(C=1;C<arguments.length-2;C++)arguments[C]===void 0&&(v[C]=void 0)}),v&&P)for(v.groups=I=HD(null),C=0;C<P.length;C++)T=P[C],I[T[0]]=v[T[1]];return v});var o1=i1,ZD=Os,xx=o1;ZD({target:"RegExp",proto:!0,forced:/./.exec!==xx},{exec:xx});var Bx=is,Cx=Tc,YD=o1,Fx=un,Sx=Kn,JD=Xh,tN=Sx("species"),A1=RegExp.prototype,l1=function(n,e,i,s){var c=Sx(n),h=!Fx(function(){var C={};return C[c]=function(){return 7},""[n](C)!==7}),d=h&&!Fx(function(){var C=!1,I=/a/;return n==="split"&&(I={},I.constructor={},I.constructor[tN]=function(){return I},I.flags="",I[c]=/./[c]),I.exec=function(){return C=!0,null},I[c](""),!C});if(!h||!d||i){var A=/./[c],v=e(c,""[n],function(C,I,T,P,U){var V=I.exec;return V===YD||V===A1.exec?h&&!U?{done:!0,value:Bx(A,I,T,P)}:{done:!0,value:Bx(C,T,I,P)}:{done:!1}});Cx(String.prototype,n,v[0]),Cx(A1,c,v[1])}s&&JD(A1[c],"sham",!0)},c1=hn,eN=pf,rN=oA,iN=So,nN=c1("".charAt),Ix=c1("".charCodeAt),sN=c1("".slice),Ex=function(n){return function(e,i){var s=rN(iN(e)),c=eN(i),h=s.length,d,A;return c<0||c>=h?n?"":void 0:(d=Ix(s,c),d<55296||d>56319||c+1===h||(A=Ix(s,c+1))<56320||A>57343?n?nN(s,c):d:n?sN(s,c,c+2):(d-55296<<10)+(A-56320)+65536)}},aN={codeAt:Ex(!1),charAt:Ex(!0)},oN=aN.charAt,u1=function(n,e,i){return e+(i?oN(n,e).length:1)},Tx=is,AN=Ns,lN=dn,cN=Sc,uN=o1,hN=TypeError,h1=function(n,e){var i=n.exec;if(lN(i)){var s=Tx(i,n,e);return s!==null&&AN(s),s}if(cN(n)==="RegExp")return Tx(uN,n,e);throw new hN("RegExp#exec called on incompatible receiver")},dN=is,pN=l1,fN=Ns,gN=Ic,mN=Qu,d1=oA,yN=So,vN=Uu,wN=u1,Ux=h1;pN("match",function(n,e,i){return[function(s){var c=yN(this),h=gN(s)?void 0:vN(s,n);return h?dN(h,s,c):new RegExp(s)[n](d1(c))},function(s){var c=fN(this),h=d1(s),d=i(e,c,h);if(d.done)return d.value;if(!c.global)return Ux(c,h);var A=c.unicode;c.lastIndex=0;for(var v=[],C=0,I;(I=Ux(c,h))!==null;){var T=d1(I[0]);v[C]=T,T===""&&(c.lastIndex=wN(h,mN(c.lastIndex),A)),C++}return C===0?null:v}]});var p1=hn,_N=sf,bN=Math.floor,f1=p1("".charAt),xN=p1("".replace),g1=p1("".slice),BN=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,CN=/\$([$&'`]|\d{1,2})/g,FN=function(n,e,i,s,c,h){var d=i+n.length,A=s.length,v=CN;return c!==void 0&&(c=_N(c),v=BN),xN(h,v,function(C,I){var T;switch(f1(I,0)){case"$":return"$";case"&":return n;case"`":return g1(e,0,i);case"'":return g1(e,d);case"<":T=c[g1(I,1,-1)];break;default:var P=+I;if(P===0)return C;if(P>A){var U=bN(P/10);return U===0?C:U<=A?s[U-1]===void 0?f1(I,1):s[U-1]+f1(I,1):C}T=s[P-1]}return T===void 0?"":T})},SN=ub,Lx=is,Df=hn,IN=l1,EN=un,TN=Ns,UN=dn,LN=Ic,PN=pf,QN=Qu,Vu=oA,kN=So,MN=u1,DN=Uu,NN=FN,ON=h1,RN=Kn,m1=RN("replace"),zN=Math.max,HN=Math.min,VN=Df([].concat),y1=Df([].push),Px=Df("".indexOf),Qx=Df("".slice),jN=function(n){return n===void 0?n:String(n)},KN=function(){return"a".replace(/./,"$0")==="$0"}(),kx=function(){return/./[m1]?/./[m1]("a","$0")==="":!1}(),$N=!EN(function(){var n=/./;return n.exec=function(){var e=[];return e.groups={a:"7"},e},"".replace(n,"$<a>")!=="7"});IN("replace",function(n,e,i){var s=kx?"$":"$0";return[function(c,h){var d=kN(this),A=LN(c)?void 0:DN(c,m1);return A?Lx(A,c,d,h):Lx(e,Vu(d),c,h)},function(c,h){var d=TN(this),A=Vu(c);if(typeof h=="string"&&Px(h,s)===-1&&Px(h,"$<")===-1){var v=i(e,d,A,h);if(v.done)return v.value}var C=UN(h);C||(h=Vu(h));var I=d.global,T;I&&(T=d.unicode,d.lastIndex=0);for(var P=[],U;U=ON(d,A),!(U===null||(y1(P,U),!I));){var V=Vu(U[0]);V===""&&(d.lastIndex=MN(A,QN(d.lastIndex),T))}for(var R="",Z=0,K=0;K<P.length;K++){U=P[K];for(var tt=Vu(U[0]),ht=zN(HN(PN(U.index),A.length),0),Bt=[],Lt,Ut=1;Ut<U.length;Ut++)y1(Bt,jN(U[Ut]));var xt=U.groups;if(C){var pt=VN([tt],Bt,ht,A);xt!==void 0&&y1(pt,xt),Lt=Vu(SN(h,void 0,pt))}else Lt=NN(tt,A,ht,Bt,xt,h);ht>=Z&&(R+=Qx(A,Z,ht)+Lt,Z=ht+tt.length)}return R+Qx(A,Z)}]},!$N||!KN||kx);var GN=Io,qN=Sc,XN=Kn,WN=XN("match"),ZN=function(n){var e;return GN(n)&&((e=n[WN])!==void 0?!!e:qN(n)==="RegExp")},YN=ZN,JN=TypeError,v1=function(n){if(YN(n))throw new JN("The method doesn't accept regular expressions");return n},t8=Kn,e8=t8("match"),w1=function(n){var e=/./;try{"/./"[n](e)}catch{try{return e[e8]=!1,"/./"[n](e)}catch{}}return!1},r8=Os,i8=wf,n8=$h.f,s8=Qu,Mx=oA,a8=v1,o8=So,A8=w1,l8=i8("".slice),c8=Math.min,Dx=A8("startsWith"),u8=!Dx&&!!function(){var n=n8(String.prototype,"startsWith");return n&&!n.writable}();r8({target:"String",proto:!0,forced:!u8&&!Dx},{startsWith:function(n){var e=Mx(o8(this));a8(n);var i=s8(c8(arguments.length>1?arguments[1]:void 0,e.length)),s=Mx(n);return l8(e,i,i+s.length)===s}});var h8=Kn,d8=r1,p8=JA.f,_1=h8("unscopables"),b1=Array.prototype;b1[_1]===void 0&&p8(b1,_1,{configurable:!0,value:d8(null)});var f8=function(n){b1[_1][n]=!0},g8=un,m8=!g8(function(){function n(){}return n.prototype.constructor=null,Object.getPrototypeOf(new n)!==n.prototype}),y8=To,v8=dn,w8=sf,_8=h0,b8=m8,Nx=_8("IE_PROTO"),x1=Object,x8=x1.prototype,Ox=b8?x1.getPrototypeOf:function(n){var e=w8(n);if(y8(e,Nx))return e[Nx];var i=e.constructor;return v8(i)&&e instanceof i?i.prototype:e instanceof x1?x8:null},B8=un,C8=dn,F8=Io,Rx=Ox,S8=Tc,I8=Kn,B1=I8("iterator"),zx=!1,Pc,C1,F1;[].keys&&(F1=[].keys(),"next"in F1?(C1=Rx(Rx(F1)),C1!==Object.prototype&&(Pc=C1)):zx=!0);var E8=!F8(Pc)||B8(function(){var n={};return Pc[B1].call(n)!==n});E8&&(Pc={}),C8(Pc[B1])||S8(Pc,B1,function(){return this});var Hx={IteratorPrototype:Pc,BUGGY_SAFARI_ITERATORS:zx},T8=Hx.IteratorPrototype,U8=r1,L8=Vm,P8=yf,Q8=nd,k8=function(){return this},M8=function(n,e,i,s){var c=e+" Iterator";return n.prototype=U8(T8,{next:L8(+!s,i)}),P8(n,c,!1),Q8[c]=k8,n},D8=Os,N8=is,Vx=Af,O8=dn,R8=M8,jx=Ox,Kx=Z2,z8=yf,H8=Xh,S1=Tc,V8=Kn,j8=nd,$x=Hx,K8=Vx.PROPER,$8=Vx.CONFIGURABLE,Gx=$x.IteratorPrototype,Nf=$x.BUGGY_SAFARI_ITERATORS,sd=V8("iterator"),qx="keys",ad="values",Xx="entries",G8=function(){return this},q8=function(n,e,i,s,c,h,d){R8(i,e,s);var A=function(K){if(K===c&&P)return P;if(!Nf&&K&&K in I)return I[K];switch(K){case qx:return function(){return new i(this,K)};case ad:return function(){return new i(this,K)};case Xx:return function(){return new i(this,K)}}return function(){return new i(this)}},v=e+" Iterator",C=!1,I=n.prototype,T=I[sd]||I["@@iterator"]||c&&I[c],P=!Nf&&T||A(c),U=e==="Array"&&I.entries||T,V,R,Z;if(U&&(V=jx(U.call(new n)),V!==Object.prototype&&V.next&&(jx(V)!==Gx&&(Kx?Kx(V,Gx):O8(V[sd])||S1(V,sd,G8)),z8(V,v,!0))),K8&&c===ad&&T&&T.name!==ad&&($8?H8(I,"name",ad):(C=!0,P=function(){return N8(T,this)})),c)if(R={values:A(ad),keys:h?P:A(qx),entries:A(Xx)},d)for(Z in R)(Nf||C||!(Z in I))&&S1(I,Z,R[Z]);else D8({target:e,proto:!0,forced:Nf||C},R);return I[sd]!==P&&S1(I,sd,P,{name:c}),j8[e]=P,R},X8=function(n,e){return{value:n,done:e}},W8=Gh,I1=f8,Wx=nd,Zx=uf,Z8=JA.f,Y8=q8,Of=X8,J8=Fo,Yx="Array Iterator",tO=Zx.set,eO=Zx.getterFor(Yx),rO=Y8(Array,"Array",function(n,e){tO(this,{type:Yx,target:W8(n),index:0,kind:e})},function(){var n=eO(this),e=n.target,i=n.index++;if(!e||i>=e.length)return n.target=null,Of(void 0,!0);switch(n.kind){case"keys":return Of(i,!1);case"values":return Of(e[i],!1)}return Of([i,e[i]],!1)},"values"),Jx=Wx.Arguments=Wx.Array;if(I1("keys"),I1("values"),I1("entries"),J8&&Jx.name!=="values")try{Z8(Jx,"name",{value:"values"})}catch{}var iO={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},nO=af,E1=nO("span").classList,tB=E1&&E1.constructor&&E1.constructor.prototype,sO=tB===Object.prototype?void 0:tB,eB=Ji,rB=iO,aO=sO,od=rO,iB=Xh,oO=yf,AO=Kn,T1=AO("iterator"),U1=od.values,nB=function(n,e){if(n){if(n[T1]!==U1)try{iB(n,T1,U1)}catch{n[T1]=U1}if(oO(n,e,!0),rB[e]){for(var i in od)if(n[i]!==od[i])try{iB(n,i,od[i])}catch{n[i]=od[i]}}}};for(var L1 in rB)nB(eB[L1]&&eB[L1].prototype,L1);nB(aO,"DOMTokenList");function lO(n,e){if(Ai(n)!="object"||!n)return n;var i=n[Symbol.toPrimitive];if(i!==void 0){var s=i.call(n,e||"default");if(Ai(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function cO(n){var e=lO(n,"string");return Ai(e)=="symbol"?e:e+""}function P1(n,e,i){return(e=cO(e))in n?Object.defineProperty(n,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[e]=i,n}var uO=YA,hO=sf,dO=a2,pO=v0,sB=TypeError,aB="Reduce of empty array with no initial value",oB=function(n){return function(e,i,s,c){var h=hO(e),d=dO(h),A=pO(h);if(uO(i),A===0&&s<2)throw new sB(aB);var v=n?A-1:0,C=n?-1:1;if(s<2)for(;;){if(v in d){c=d[v],v+=C;break}if(v+=C,n?v<0:A<=v)throw new sB(aB)}for(;n?v>=0:A>v;v+=C)v in d&&(c=i(c,d[v],v,h));return c}},fO={left:oB(!1),right:oB(!0)},gO=un,AB=function(n,e){var i=[][n];return!!i&&gO(function(){i.call(null,e||function(){return 1},1)})},mO=Os,yO=fO.left,vO=AB,lB=Xm,wO=mf,_O=!wO&&lB>79&&lB<83,bO=_O||!vO("reduce");mO({target:"Array",proto:!0,forced:bO},{reduce:function(n){var e=arguments.length;return yO(this,n,e,e>1?arguments[1]:void 0)}});var xO=Os,BO=wf,CO=$h.f,FO=Qu,cB=oA,SO=v1,IO=So,EO=w1,TO=BO("".slice),UO=Math.min,uB=EO("endsWith"),LO=!uB&&!!function(){var n=CO(String.prototype,"endsWith");return n&&!n.writable}();xO({target:"String",proto:!0,forced:!LO&&!uB},{endsWith:function(n){var e=cB(IO(this));SO(n);var i=arguments.length>1?arguments[1]:void 0,s=e.length,c=i===void 0?s:UO(FO(i),s),h=cB(n);return TO(e,c-h.length,c)===h}});var Q1=is,hB=hn,PO=l1,QO=Ns,kO=Ic,MO=So,DO=ob,NO=u1,OO=Qu,dB=oA,RO=Uu,pB=h1,zO=px,HO=un,ju=zO.UNSUPPORTED_Y,VO=4294967295,jO=Math.min,k1=hB([].push),M1=hB("".slice),KO=!HO(function(){var n=/(?:)/,e=n.exec;n.exec=function(){return e.apply(this,arguments)};var i="ab".split(n);return i.length!==2||i[0]!=="a"||i[1]!=="b"}),fB="abbc".split(/(b)*/)[1]==="c"||"test".split(/(?:)/,-1).length!==4||"ab".split(/(?:ab)*/).length!==2||".".split(/(.?)(.?)/).length!==4||".".split(/()()/).length>1||"".split(/.?/).length;PO("split",function(n,e,i){var s="0".split(void 0,0).length?function(c,h){return c===void 0&&h===0?[]:Q1(e,this,c,h)}:e;return[function(c,h){var d=MO(this),A=kO(c)?void 0:RO(c,n);return A?Q1(A,c,d,h):Q1(s,dB(d),c,h)},function(c,h){var d=QO(this),A=dB(c);if(!fB){var v=i(s,d,A,h,s!==e);if(v.done)return v.value}var C=DO(d,RegExp),I=d.unicode,T=(d.ignoreCase?"i":"")+(d.multiline?"m":"")+(d.unicode?"u":"")+(ju?"g":"y"),P=new C(ju?"^(?:"+d.source+")":d,T),U=h===void 0?VO:h>>>0;if(U===0)return[];if(A.length===0)return pB(P,A)===null?[A]:[];for(var V=0,R=0,Z=[];R<A.length;){P.lastIndex=ju?0:R;var K=pB(P,ju?M1(A,R):A),tt;if(K===null||(tt=jO(OO(P.lastIndex+(ju?R:0)),A.length))===V)R=NO(A,R,I);else{if(k1(Z,M1(A,V,R)),Z.length===U)return Z;for(var ht=1;ht<=K.length-1;ht++)if(k1(Z,K[ht]),Z.length===U)return Z;R=V=tt}}return k1(Z,M1(A,V)),Z}]},fB||!KO,ju);var Rf={exports:{}},Ad={exports:{}};(function(){var n,e,i,s,c,h;typeof performance<"u"&&performance!==null&&performance.now?Ad.exports=function(){return performance.now()}:typeof process<"u"&&process!==null&&process.hrtime?(Ad.exports=function(){return(n()-c)/1e6},e=process.hrtime,n=function(){var d;return d=e(),d[0]*1e9+d[1]},s=n(),h=process.uptime()*1e9,c=s-h):Date.now?(Ad.exports=function(){return Date.now()-i},i=Date.now()):(Ad.exports=function(){return new Date().getTime()-i},i=new Date().getTime())}).call(Tu);for(var $O=Ad.exports,GO=$O,el=typeof window>"u"?Tu:window,zf=["moz","webkit"],Ku="AnimationFrame",$u=el["request"+Ku],ld=el["cancel"+Ku]||el["cancelRequest"+Ku],cd=0;!$u&&cd<zf.length;cd++)$u=el[zf[cd]+"Request"+Ku],ld=el[zf[cd]+"Cancel"+Ku]||el[zf[cd]+"CancelRequest"+Ku];if(!$u||!ld){var D1=0,gB=0,Qc=[],qO=1e3/60;$u=function(n){if(Qc.length===0){var e=GO(),i=Math.max(0,qO-(e-D1));D1=i+e,setTimeout(function(){var s=Qc.slice(0);Qc.length=0;for(var c=0;c<s.length;c++)if(!s[c].cancelled)try{s[c].callback(D1)}catch(h){setTimeout(function(){throw h},0)}},Math.round(i))}return Qc.push({handle:++gB,callback:n,cancelled:!1}),gB},ld=function(n){for(var e=0;e<Qc.length;e++)Qc[e].handle===n&&(Qc[e].cancelled=!0)}}Rf.exports=function(n){return $u.call(el,n)},Rf.exports.cancel=function(){ld.apply(el,arguments)},Rf.exports.polyfill=function(n){n||(n=el),n.requestAnimationFrame=$u,n.cancelAnimationFrame=ld};var XO=Rf.exports;const N1=J_(XO);var mB=`	
\v\f\r                　\u2028\u2029\uFEFF`,WO=hn,ZO=So,YO=oA,O1=mB,yB=WO("".replace),JO=RegExp("^["+O1+"]+"),tR=RegExp("(^|[^"+O1+"])["+O1+"]+$"),R1=function(n){return function(e){var i=YO(ZO(e));return n&1&&(i=yB(i,JO,"")),n&2&&(i=yB(i,tR,"$1")),i}},eR={start:R1(1),end:R1(2),trim:R1(3)},rR=Af.PROPER,iR=un,vB=mB,wB="​᠎",nR=function(n){return iR(function(){return!!vB[n]()||wB[n]()!==wB||rR&&vB[n].name!==n})},sR=Os,aR=eR.trim,oR=nR;sR({target:"String",proto:!0,forced:oR("trim")},{trim:function(){return aR(this)}});var AR=function(n){this.ok=!1,this.alpha=1,n.charAt(0)=="#"&&(n=n.substr(1,6)),n=n.replace(/ /g,""),n=n.toLowerCase();var e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};n=e[n]||n;for(var i=[{re:/^rgba\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3}),\s*((?:\d?\.)?\d)\)$/,example:["rgba(123, 234, 45, 0.8)","rgba(255,234,245,1.0)"],process:function(v){return[parseInt(v[1]),parseInt(v[2]),parseInt(v[3]),parseFloat(v[4])]}},{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(v){return[parseInt(v[1]),parseInt(v[2]),parseInt(v[3])]}},{re:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,example:["#00ff00","336699"],process:function(v){return[parseInt(v[1],16),parseInt(v[2],16),parseInt(v[3],16)]}},{re:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,example:["#fb0","f0f"],process:function(v){return[parseInt(v[1]+v[1],16),parseInt(v[2]+v[2],16),parseInt(v[3]+v[3],16)]}}],s=0;s<i.length;s++){var c=i[s].re,h=i[s].process,d=c.exec(n);if(d){var A=h(d);this.r=A[0],this.g=A[1],this.b=A[2],A.length>3&&(this.alpha=A[3]),this.ok=!0}}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.alpha=this.alpha<0?0:this.alpha>1||isNaN(this.alpha)?1:this.alpha,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toRGBA=function(){return"rgba("+this.r+", "+this.g+", "+this.b+", "+this.alpha+")"},this.toHex=function(){var v=this.r.toString(16),C=this.g.toString(16),I=this.b.toString(16);return v.length==1&&(v="0"+v),C.length==1&&(C="0"+C),I.length==1&&(I="0"+I),"#"+v+C+I},this.getHelpXML=function(){for(var v=new Array,C=0;C<i.length;C++)for(var I=i[C].example,T=0;T<I.length;T++)v[v.length]=I[T];for(var P in e)v[v.length]=P;var U=document.createElement("ul");U.setAttribute("id","rgbcolor-examples");for(var C=0;C<v.length;C++)try{var V=document.createElement("li"),R=new RGBColor(v[C]),Z=document.createElement("div");Z.style.cssText="margin: 3px; border: 1px solid black; background:"+R.toHex()+"; color:"+R.toHex(),Z.appendChild(document.createTextNode("test"));var K=document.createTextNode(" "+v[C]+" -> "+R.toRGB()+" -> "+R.toHex());V.appendChild(Z),V.appendChild(K),U.appendChild(V)}catch{}return U}};const z1=J_(AR);var lR=Os,cR=wf,uR=j2.indexOf,hR=AB,H1=cR([].indexOf),_B=!!H1&&1/H1([1],1,-0)<0,dR=_B||!hR("indexOf");lR({target:"Array",proto:!0,forced:dR},{indexOf:function(n){var e=arguments.length>1?arguments[1]:void 0;return _B?H1(this,n,e)||0:uR(this,n,e)}});var pR=Os,fR=hn,gR=v1,mR=So,bB=oA,yR=w1,vR=fR("".indexOf);pR({target:"String",proto:!0,forced:!yR("includes")},{includes:function(n){return!!~vR(bB(mR(this)),bB(gR(n)),arguments.length>1?arguments[1]:void 0)}});var wR=Sc,_R=Array.isArray||function(n){return wR(n)==="Array"},bR=Os,xR=hn,BR=_R,CR=xR([].reverse),xB=[1,2];bR({target:"Array",proto:!0,forced:String(xB)===String(xB.reverse())},{reverse:function(){return BR(this)&&(this.length=this.length),CR(this)}});/*! *****************************************************************************
	Copyright (c) Microsoft Corporation.

	Permission to use, copy, modify, and/or distribute this software for any
	purpose with or without fee is hereby granted.

	THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
	REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
	AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
	INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
	LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
	OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
	PERFORMANCE OF THIS SOFTWARE.
	***************************************************************************** */var BB=function(n,e){return(BB=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var c in s)Object.prototype.hasOwnProperty.call(s,c)&&(i[c]=s[c])})(n,e)};function CB(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=n}BB(n,e),n.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}function FR(n){var e="";Array.isArray(n)||(n=[n]);for(var i=0;i<n.length;i++){var s=n[i];if(s.type===Fe.CLOSE_PATH)e+="z";else if(s.type===Fe.HORIZ_LINE_TO)e+=(s.relative?"h":"H")+s.x;else if(s.type===Fe.VERT_LINE_TO)e+=(s.relative?"v":"V")+s.y;else if(s.type===Fe.MOVE_TO)e+=(s.relative?"m":"M")+s.x+" "+s.y;else if(s.type===Fe.LINE_TO)e+=(s.relative?"l":"L")+s.x+" "+s.y;else if(s.type===Fe.CURVE_TO)e+=(s.relative?"c":"C")+s.x1+" "+s.y1+" "+s.x2+" "+s.y2+" "+s.x+" "+s.y;else if(s.type===Fe.SMOOTH_CURVE_TO)e+=(s.relative?"s":"S")+s.x2+" "+s.y2+" "+s.x+" "+s.y;else if(s.type===Fe.QUAD_TO)e+=(s.relative?"q":"Q")+s.x1+" "+s.y1+" "+s.x+" "+s.y;else if(s.type===Fe.SMOOTH_QUAD_TO)e+=(s.relative?"t":"T")+s.x+" "+s.y;else{if(s.type!==Fe.ARC)throw new Error('Unexpected command type "'+s.type+'" at index '+i+".");e+=(s.relative?"a":"A")+s.rX+" "+s.rY+" "+s.xRot+" "+ +s.lArcFlag+" "+ +s.sweepFlag+" "+s.x+" "+s.y}}return e}function V1(n,e){var i=n[0],s=n[1];return[i*Math.cos(e)-s*Math.sin(e),i*Math.sin(e)+s*Math.cos(e)]}function Uo(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];for(var i=0;i<n.length;i++)if(typeof n[i]!="number")throw new Error("assertNumbers arguments["+i+"] is not a number. "+typeof n[i]+" == typeof "+n[i]);return!0}var Xl=Math.PI;function j1(n,e,i){n.lArcFlag=n.lArcFlag===0?0:1,n.sweepFlag=n.sweepFlag===0?0:1;var s=n.rX,c=n.rY,h=n.x,d=n.y;s=Math.abs(n.rX),c=Math.abs(n.rY);var A=V1([(e-h)/2,(i-d)/2],-n.xRot/180*Xl),v=A[0],C=A[1],I=Math.pow(v,2)/Math.pow(s,2)+Math.pow(C,2)/Math.pow(c,2);1<I&&(s*=Math.sqrt(I),c*=Math.sqrt(I)),n.rX=s,n.rY=c;var T=Math.pow(s,2)*Math.pow(C,2)+Math.pow(c,2)*Math.pow(v,2),P=(n.lArcFlag!==n.sweepFlag?1:-1)*Math.sqrt(Math.max(0,(Math.pow(s,2)*Math.pow(c,2)-T)/T)),U=s*C/c*P,V=-c*v/s*P,R=V1([U,V],n.xRot/180*Xl);n.cX=R[0]+(e+h)/2,n.cY=R[1]+(i+d)/2,n.phi1=Math.atan2((C-V)/c,(v-U)/s),n.phi2=Math.atan2((-C-V)/c,(-v-U)/s),n.sweepFlag===0&&n.phi2>n.phi1&&(n.phi2-=2*Xl),n.sweepFlag===1&&n.phi2<n.phi1&&(n.phi2+=2*Xl),n.phi1*=180/Xl,n.phi2*=180/Xl}function FB(n,e,i){Uo(n,e,i);var s=n*n+e*e-i*i;if(0>s)return[];if(s===0)return[[n*i/(n*n+e*e),e*i/(n*n+e*e)]];var c=Math.sqrt(s);return[[(n*i+e*c)/(n*n+e*e),(e*i-n*c)/(n*n+e*e)],[(n*i-e*c)/(n*n+e*e),(e*i+n*c)/(n*n+e*e)]]}var xn,rl=Math.PI/180;function SB(n,e,i){return(1-i)*n+i*e}function IB(n,e,i,s){return n+Math.cos(s/180*Xl)*e+Math.sin(s/180*Xl)*i}function EB(n,e,i,s){var c=1e-6,h=e-n,d=i-e,A=3*h+3*(s-i)-6*d,v=6*(d-h),C=3*h;return Math.abs(A)<c?[-C/v]:function(I,T,P){var U=I*I/4-T;if(U<-P)return[];if(U<=P)return[-I/2];var V=Math.sqrt(U);return[-I/2-V,-I/2+V]}(v/A,C/A,c)}function TB(n,e,i,s,c){var h=1-c;return n*(h*h*h)+e*(3*h*h*c)+i*(3*h*c*c)+s*(c*c*c)}(function(n){function e(){return c(function(A,v,C){return A.relative&&(A.x1!==void 0&&(A.x1+=v),A.y1!==void 0&&(A.y1+=C),A.x2!==void 0&&(A.x2+=v),A.y2!==void 0&&(A.y2+=C),A.x!==void 0&&(A.x+=v),A.y!==void 0&&(A.y+=C),A.relative=!1),A})}function i(){var A=NaN,v=NaN,C=NaN,I=NaN;return c(function(T,P,U){return T.type&Fe.SMOOTH_CURVE_TO&&(T.type=Fe.CURVE_TO,A=isNaN(A)?P:A,v=isNaN(v)?U:v,T.x1=T.relative?P-A:2*P-A,T.y1=T.relative?U-v:2*U-v),T.type&Fe.CURVE_TO?(A=T.relative?P+T.x2:T.x2,v=T.relative?U+T.y2:T.y2):(A=NaN,v=NaN),T.type&Fe.SMOOTH_QUAD_TO&&(T.type=Fe.QUAD_TO,C=isNaN(C)?P:C,I=isNaN(I)?U:I,T.x1=T.relative?P-C:2*P-C,T.y1=T.relative?U-I:2*U-I),T.type&Fe.QUAD_TO?(C=T.relative?P+T.x1:T.x1,I=T.relative?U+T.y1:T.y1):(C=NaN,I=NaN),T})}function s(){var A=NaN,v=NaN;return c(function(C,I,T){if(C.type&Fe.SMOOTH_QUAD_TO&&(C.type=Fe.QUAD_TO,A=isNaN(A)?I:A,v=isNaN(v)?T:v,C.x1=C.relative?I-A:2*I-A,C.y1=C.relative?T-v:2*T-v),C.type&Fe.QUAD_TO){A=C.relative?I+C.x1:C.x1,v=C.relative?T+C.y1:C.y1;var P=C.x1,U=C.y1;C.type=Fe.CURVE_TO,C.x1=((C.relative?0:I)+2*P)/3,C.y1=((C.relative?0:T)+2*U)/3,C.x2=(C.x+2*P)/3,C.y2=(C.y+2*U)/3}else A=NaN,v=NaN;return C})}function c(A){var v=0,C=0,I=NaN,T=NaN;return function(P){if(isNaN(I)&&!(P.type&Fe.MOVE_TO))throw new Error("path must start with moveto");var U=A(P,v,C,I,T);return P.type&Fe.CLOSE_PATH&&(v=I,C=T),P.x!==void 0&&(v=P.relative?v+P.x:P.x),P.y!==void 0&&(C=P.relative?C+P.y:P.y),P.type&Fe.MOVE_TO&&(I=v,T=C),U}}function h(A,v,C,I,T,P){return Uo(A,v,C,I,T,P),c(function(U,V,R,Z){var K=U.x1,tt=U.x2,ht=U.relative&&!isNaN(Z),Bt=U.x!==void 0?U.x:ht?0:V,Lt=U.y!==void 0?U.y:ht?0:R;function Ut(et){return et*et}U.type&Fe.HORIZ_LINE_TO&&v!==0&&(U.type=Fe.LINE_TO,U.y=U.relative?0:R),U.type&Fe.VERT_LINE_TO&&C!==0&&(U.type=Fe.LINE_TO,U.x=U.relative?0:V),U.x!==void 0&&(U.x=U.x*A+Lt*C+(ht?0:T)),U.y!==void 0&&(U.y=Bt*v+U.y*I+(ht?0:P)),U.x1!==void 0&&(U.x1=U.x1*A+U.y1*C+(ht?0:T)),U.y1!==void 0&&(U.y1=K*v+U.y1*I+(ht?0:P)),U.x2!==void 0&&(U.x2=U.x2*A+U.y2*C+(ht?0:T)),U.y2!==void 0&&(U.y2=tt*v+U.y2*I+(ht?0:P));var xt=A*I-v*C;if(U.xRot!==void 0&&(A!==1||v!==0||C!==0||I!==1))if(xt===0)delete U.rX,delete U.rY,delete U.xRot,delete U.lArcFlag,delete U.sweepFlag,U.type=Fe.LINE_TO;else{var pt=U.xRot*Math.PI/180,kt=Math.sin(pt),Xt=Math.cos(pt),st=1/Ut(U.rX),ut=1/Ut(U.rY),mt=Ut(Xt)*st+Ut(kt)*ut,vt=2*kt*Xt*(st-ut),$t=Ut(kt)*st+Ut(Xt)*ut,Vt=mt*I*I-vt*v*I+$t*v*v,jt=vt*(A*I+v*C)-2*(mt*C*I+$t*A*v),zt=mt*C*C-vt*A*C+$t*A*A,Wt=(Math.atan2(jt,Vt-zt)+Math.PI)%Math.PI/2,Yt=Math.sin(Wt),me=Math.cos(Wt);U.rX=Math.abs(xt)/Math.sqrt(Vt*Ut(me)+jt*Yt*me+zt*Ut(Yt)),U.rY=Math.abs(xt)/Math.sqrt(Vt*Ut(Yt)-jt*Yt*me+zt*Ut(me)),U.xRot=180*Wt/Math.PI}return U.sweepFlag!==void 0&&0>xt&&(U.sweepFlag=+!U.sweepFlag),U})}function d(){return function(A){var v={};for(var C in A)v[C]=A[C];return v}}n.ROUND=function(A){function v(C){return Math.round(C*A)/A}return A===void 0&&(A=1e13),Uo(A),function(C){return C.x1!==void 0&&(C.x1=v(C.x1)),C.y1!==void 0&&(C.y1=v(C.y1)),C.x2!==void 0&&(C.x2=v(C.x2)),C.y2!==void 0&&(C.y2=v(C.y2)),C.x!==void 0&&(C.x=v(C.x)),C.y!==void 0&&(C.y=v(C.y)),C.rX!==void 0&&(C.rX=v(C.rX)),C.rY!==void 0&&(C.rY=v(C.rY)),C}},n.TO_ABS=e,n.TO_REL=function(){return c(function(A,v,C){return A.relative||(A.x1!==void 0&&(A.x1-=v),A.y1!==void 0&&(A.y1-=C),A.x2!==void 0&&(A.x2-=v),A.y2!==void 0&&(A.y2-=C),A.x!==void 0&&(A.x-=v),A.y!==void 0&&(A.y-=C),A.relative=!0),A})},n.NORMALIZE_HVZ=function(A,v,C){return A===void 0&&(A=!0),v===void 0&&(v=!0),C===void 0&&(C=!0),c(function(I,T,P,U,V){if(isNaN(U)&&!(I.type&Fe.MOVE_TO))throw new Error("path must start with moveto");return v&&I.type&Fe.HORIZ_LINE_TO&&(I.type=Fe.LINE_TO,I.y=I.relative?0:P),C&&I.type&Fe.VERT_LINE_TO&&(I.type=Fe.LINE_TO,I.x=I.relative?0:T),A&&I.type&Fe.CLOSE_PATH&&(I.type=Fe.LINE_TO,I.x=I.relative?U-T:U,I.y=I.relative?V-P:V),I.type&Fe.ARC&&(I.rX===0||I.rY===0)&&(I.type=Fe.LINE_TO,delete I.rX,delete I.rY,delete I.xRot,delete I.lArcFlag,delete I.sweepFlag),I})},n.NORMALIZE_ST=i,n.QT_TO_C=s,n.INFO=c,n.SANITIZE=function(A){A===void 0&&(A=0),Uo(A);var v=NaN,C=NaN,I=NaN,T=NaN;return c(function(P,U,V,R,Z){var K=Math.abs,tt=!1,ht=0,Bt=0;if(P.type&Fe.SMOOTH_CURVE_TO&&(ht=isNaN(v)?0:U-v,Bt=isNaN(C)?0:V-C),P.type&(Fe.CURVE_TO|Fe.SMOOTH_CURVE_TO)?(v=P.relative?U+P.x2:P.x2,C=P.relative?V+P.y2:P.y2):(v=NaN,C=NaN),P.type&Fe.SMOOTH_QUAD_TO?(I=isNaN(I)?U:2*U-I,T=isNaN(T)?V:2*V-T):P.type&Fe.QUAD_TO?(I=P.relative?U+P.x1:P.x1,T=P.relative?V+P.y1:P.y2):(I=NaN,T=NaN),P.type&Fe.LINE_COMMANDS||P.type&Fe.ARC&&(P.rX===0||P.rY===0||!P.lArcFlag)||P.type&Fe.CURVE_TO||P.type&Fe.SMOOTH_CURVE_TO||P.type&Fe.QUAD_TO||P.type&Fe.SMOOTH_QUAD_TO){var Lt=P.x===void 0?0:P.relative?P.x:P.x-U,Ut=P.y===void 0?0:P.relative?P.y:P.y-V;ht=isNaN(I)?P.x1===void 0?ht:P.relative?P.x:P.x1-U:I-U,Bt=isNaN(T)?P.y1===void 0?Bt:P.relative?P.y:P.y1-V:T-V;var xt=P.x2===void 0?0:P.relative?P.x:P.x2-U,pt=P.y2===void 0?0:P.relative?P.y:P.y2-V;K(Lt)<=A&&K(Ut)<=A&&K(ht)<=A&&K(Bt)<=A&&K(xt)<=A&&K(pt)<=A&&(tt=!0)}return P.type&Fe.CLOSE_PATH&&K(U-R)<=A&&K(V-Z)<=A&&(tt=!0),tt?[]:P})},n.MATRIX=h,n.ROTATE=function(A,v,C){v===void 0&&(v=0),C===void 0&&(C=0),Uo(A,v,C);var I=Math.sin(A),T=Math.cos(A);return h(T,I,-I,T,v-v*T+C*I,C-v*I-C*T)},n.TRANSLATE=function(A,v){return v===void 0&&(v=0),Uo(A,v),h(1,0,0,1,A,v)},n.SCALE=function(A,v){return v===void 0&&(v=A),Uo(A,v),h(A,0,0,v,0,0)},n.SKEW_X=function(A){return Uo(A),h(1,0,Math.atan(A),1,0,0)},n.SKEW_Y=function(A){return Uo(A),h(1,Math.atan(A),0,1,0,0)},n.X_AXIS_SYMMETRY=function(A){return A===void 0&&(A=0),Uo(A),h(-1,0,0,1,A,0)},n.Y_AXIS_SYMMETRY=function(A){return A===void 0&&(A=0),Uo(A),h(1,0,0,-1,0,A)},n.A_TO_C=function(){return c(function(A,v,C){return Fe.ARC===A.type?function(I,T,P){var U,V,R,Z;I.cX||j1(I,T,P);for(var K=Math.min(I.phi1,I.phi2),tt=Math.max(I.phi1,I.phi2)-K,ht=Math.ceil(tt/90),Bt=new Array(ht),Lt=T,Ut=P,xt=0;xt<ht;xt++){var pt=SB(I.phi1,I.phi2,xt/ht),kt=SB(I.phi1,I.phi2,(xt+1)/ht),Xt=kt-pt,st=4/3*Math.tan(Xt*rl/4),ut=[Math.cos(pt*rl)-st*Math.sin(pt*rl),Math.sin(pt*rl)+st*Math.cos(pt*rl)],mt=ut[0],vt=ut[1],$t=[Math.cos(kt*rl),Math.sin(kt*rl)],Vt=$t[0],jt=$t[1],zt=[Vt+st*Math.sin(kt*rl),jt-st*Math.cos(kt*rl)],Wt=zt[0],Yt=zt[1];Bt[xt]={relative:I.relative,type:Fe.CURVE_TO};var me=function(et,dt){var _t=V1([et*I.rX,dt*I.rY],I.xRot),Ct=_t[0],Ot=_t[1];return[I.cX+Ct,I.cY+Ot]};U=me(mt,vt),Bt[xt].x1=U[0],Bt[xt].y1=U[1],V=me(Wt,Yt),Bt[xt].x2=V[0],Bt[xt].y2=V[1],R=me(Vt,jt),Bt[xt].x=R[0],Bt[xt].y=R[1],I.relative&&(Bt[xt].x1-=Lt,Bt[xt].y1-=Ut,Bt[xt].x2-=Lt,Bt[xt].y2-=Ut,Bt[xt].x-=Lt,Bt[xt].y-=Ut),Lt=(Z=[Bt[xt].x,Bt[xt].y])[0],Ut=Z[1]}return Bt}(A,A.relative?0:v,A.relative?0:C):A})},n.ANNOTATE_ARCS=function(){return c(function(A,v,C){return A.relative&&(v=0,C=0),Fe.ARC===A.type&&j1(A,v,C),A})},n.CLONE=d,n.CALCULATE_BOUNDS=function(){var A=function(P){var U={};for(var V in P)U[V]=P[V];return U},v=e(),C=s(),I=i(),T=c(function(P,U,V){var R=I(C(v(A(P))));function Z(Yt){Yt>T.maxX&&(T.maxX=Yt),Yt<T.minX&&(T.minX=Yt)}function K(Yt){Yt>T.maxY&&(T.maxY=Yt),Yt<T.minY&&(T.minY=Yt)}if(R.type&Fe.DRAWING_COMMANDS&&(Z(U),K(V)),R.type&Fe.HORIZ_LINE_TO&&Z(R.x),R.type&Fe.VERT_LINE_TO&&K(R.y),R.type&Fe.LINE_TO&&(Z(R.x),K(R.y)),R.type&Fe.CURVE_TO){Z(R.x),K(R.y);for(var tt=0,ht=EB(U,R.x1,R.x2,R.x);tt<ht.length;tt++)0<(Wt=ht[tt])&&1>Wt&&Z(TB(U,R.x1,R.x2,R.x,Wt));for(var Bt=0,Lt=EB(V,R.y1,R.y2,R.y);Bt<Lt.length;Bt++)0<(Wt=Lt[Bt])&&1>Wt&&K(TB(V,R.y1,R.y2,R.y,Wt))}if(R.type&Fe.ARC){Z(R.x),K(R.y),j1(R,U,V);for(var Ut=R.xRot/180*Math.PI,xt=Math.cos(Ut)*R.rX,pt=Math.sin(Ut)*R.rX,kt=-Math.sin(Ut)*R.rY,Xt=Math.cos(Ut)*R.rY,st=R.phi1<R.phi2?[R.phi1,R.phi2]:-180>R.phi2?[R.phi2+360,R.phi1+360]:[R.phi2,R.phi1],ut=st[0],mt=st[1],vt=function(Yt){var me=Yt[0],et=Yt[1],dt=180*Math.atan2(et,me)/Math.PI;return dt<ut?dt+360:dt},$t=0,Vt=FB(kt,-xt,0).map(vt);$t<Vt.length;$t++)(Wt=Vt[$t])>ut&&Wt<mt&&Z(IB(R.cX,xt,kt,Wt));for(var jt=0,zt=FB(Xt,-pt,0).map(vt);jt<zt.length;jt++){var Wt;(Wt=zt[jt])>ut&&Wt<mt&&K(IB(R.cY,pt,Xt,Wt))}}return P});return T.minX=1/0,T.maxX=-1/0,T.minY=1/0,T.maxY=-1/0,T}})(xn||(xn={}));var Lo,UB=function(){function n(){}return n.prototype.round=function(e){return this.transform(xn.ROUND(e))},n.prototype.toAbs=function(){return this.transform(xn.TO_ABS())},n.prototype.toRel=function(){return this.transform(xn.TO_REL())},n.prototype.normalizeHVZ=function(e,i,s){return this.transform(xn.NORMALIZE_HVZ(e,i,s))},n.prototype.normalizeST=function(){return this.transform(xn.NORMALIZE_ST())},n.prototype.qtToC=function(){return this.transform(xn.QT_TO_C())},n.prototype.aToC=function(){return this.transform(xn.A_TO_C())},n.prototype.sanitize=function(e){return this.transform(xn.SANITIZE(e))},n.prototype.translate=function(e,i){return this.transform(xn.TRANSLATE(e,i))},n.prototype.scale=function(e,i){return this.transform(xn.SCALE(e,i))},n.prototype.rotate=function(e,i,s){return this.transform(xn.ROTATE(e,i,s))},n.prototype.matrix=function(e,i,s,c,h,d){return this.transform(xn.MATRIX(e,i,s,c,h,d))},n.prototype.skewX=function(e){return this.transform(xn.SKEW_X(e))},n.prototype.skewY=function(e){return this.transform(xn.SKEW_Y(e))},n.prototype.xSymmetry=function(e){return this.transform(xn.X_AXIS_SYMMETRY(e))},n.prototype.ySymmetry=function(e){return this.transform(xn.Y_AXIS_SYMMETRY(e))},n.prototype.annotateArcs=function(){return this.transform(xn.ANNOTATE_ARCS())},n}(),SR=function(n){return n===" "||n==="	"||n==="\r"||n===`
`},LB=function(n){return 48<=n.charCodeAt(0)&&n.charCodeAt(0)<=57},IR=function(n){function e(){var i=n.call(this)||this;return i.curNumber="",i.curCommandType=-1,i.curCommandRelative=!1,i.canParseCommandOrComma=!0,i.curNumberHasExp=!1,i.curNumberHasExpDigits=!1,i.curNumberHasDecimal=!1,i.curArgs=[],i}return CB(e,n),e.prototype.finish=function(i){if(i===void 0&&(i=[]),this.parse(" ",i),this.curArgs.length!==0||!this.canParseCommandOrComma)throw new SyntaxError("Unterminated command at the path end.");return i},e.prototype.parse=function(i,s){var c=this;s===void 0&&(s=[]);for(var h=function(T){s.push(T),c.curArgs.length=0,c.canParseCommandOrComma=!0},d=0;d<i.length;d++){var A=i[d],v=!(this.curCommandType!==Fe.ARC||this.curArgs.length!==3&&this.curArgs.length!==4||this.curNumber.length!==1||this.curNumber!=="0"&&this.curNumber!=="1"),C=LB(A)&&(this.curNumber==="0"&&A==="0"||v);if(!LB(A)||C)if(A!=="e"&&A!=="E")if(A!=="-"&&A!=="+"||!this.curNumberHasExp||this.curNumberHasExpDigits)if(A!=="."||this.curNumberHasExp||this.curNumberHasDecimal||v){if(this.curNumber&&this.curCommandType!==-1){var I=Number(this.curNumber);if(isNaN(I))throw new SyntaxError("Invalid number ending at "+d);if(this.curCommandType===Fe.ARC){if(this.curArgs.length===0||this.curArgs.length===1){if(0>I)throw new SyntaxError('Expected positive number, got "'+I+'" at index "'+d+'"')}else if((this.curArgs.length===3||this.curArgs.length===4)&&this.curNumber!=="0"&&this.curNumber!=="1")throw new SyntaxError('Expected a flag, got "'+this.curNumber+'" at index "'+d+'"')}this.curArgs.push(I),this.curArgs.length===ER[this.curCommandType]&&(Fe.HORIZ_LINE_TO===this.curCommandType?h({type:Fe.HORIZ_LINE_TO,relative:this.curCommandRelative,x:I}):Fe.VERT_LINE_TO===this.curCommandType?h({type:Fe.VERT_LINE_TO,relative:this.curCommandRelative,y:I}):this.curCommandType===Fe.MOVE_TO||this.curCommandType===Fe.LINE_TO||this.curCommandType===Fe.SMOOTH_QUAD_TO?(h({type:this.curCommandType,relative:this.curCommandRelative,x:this.curArgs[0],y:this.curArgs[1]}),Fe.MOVE_TO===this.curCommandType&&(this.curCommandType=Fe.LINE_TO)):this.curCommandType===Fe.CURVE_TO?h({type:Fe.CURVE_TO,relative:this.curCommandRelative,x1:this.curArgs[0],y1:this.curArgs[1],x2:this.curArgs[2],y2:this.curArgs[3],x:this.curArgs[4],y:this.curArgs[5]}):this.curCommandType===Fe.SMOOTH_CURVE_TO?h({type:Fe.SMOOTH_CURVE_TO,relative:this.curCommandRelative,x2:this.curArgs[0],y2:this.curArgs[1],x:this.curArgs[2],y:this.curArgs[3]}):this.curCommandType===Fe.QUAD_TO?h({type:Fe.QUAD_TO,relative:this.curCommandRelative,x1:this.curArgs[0],y1:this.curArgs[1],x:this.curArgs[2],y:this.curArgs[3]}):this.curCommandType===Fe.ARC&&h({type:Fe.ARC,relative:this.curCommandRelative,rX:this.curArgs[0],rY:this.curArgs[1],xRot:this.curArgs[2],lArcFlag:this.curArgs[3],sweepFlag:this.curArgs[4],x:this.curArgs[5],y:this.curArgs[6]})),this.curNumber="",this.curNumberHasExpDigits=!1,this.curNumberHasExp=!1,this.curNumberHasDecimal=!1,this.canParseCommandOrComma=!0}if(!SR(A))if(A===","&&this.canParseCommandOrComma)this.canParseCommandOrComma=!1;else if(A!=="+"&&A!=="-"&&A!==".")if(C)this.curNumber=A,this.curNumberHasDecimal=!1;else{if(this.curArgs.length!==0)throw new SyntaxError("Unterminated command at index "+d+".");if(!this.canParseCommandOrComma)throw new SyntaxError('Unexpected character "'+A+'" at index '+d+". Command cannot follow comma");if(this.canParseCommandOrComma=!1,A!=="z"&&A!=="Z")if(A==="h"||A==="H")this.curCommandType=Fe.HORIZ_LINE_TO,this.curCommandRelative=A==="h";else if(A==="v"||A==="V")this.curCommandType=Fe.VERT_LINE_TO,this.curCommandRelative=A==="v";else if(A==="m"||A==="M")this.curCommandType=Fe.MOVE_TO,this.curCommandRelative=A==="m";else if(A==="l"||A==="L")this.curCommandType=Fe.LINE_TO,this.curCommandRelative=A==="l";else if(A==="c"||A==="C")this.curCommandType=Fe.CURVE_TO,this.curCommandRelative=A==="c";else if(A==="s"||A==="S")this.curCommandType=Fe.SMOOTH_CURVE_TO,this.curCommandRelative=A==="s";else if(A==="q"||A==="Q")this.curCommandType=Fe.QUAD_TO,this.curCommandRelative=A==="q";else if(A==="t"||A==="T")this.curCommandType=Fe.SMOOTH_QUAD_TO,this.curCommandRelative=A==="t";else{if(A!=="a"&&A!=="A")throw new SyntaxError('Unexpected character "'+A+'" at index '+d+".");this.curCommandType=Fe.ARC,this.curCommandRelative=A==="a"}else s.push({type:Fe.CLOSE_PATH}),this.canParseCommandOrComma=!0,this.curCommandType=-1}else this.curNumber=A,this.curNumberHasDecimal=A==="."}else this.curNumber+=A,this.curNumberHasDecimal=!0;else this.curNumber+=A;else this.curNumber+=A,this.curNumberHasExp=!0;else this.curNumber+=A,this.curNumberHasExpDigits=this.curNumberHasExp}return s},e.prototype.transform=function(i){return Object.create(this,{parse:{value:function(s,c){c===void 0&&(c=[]);for(var h=0,d=Object.getPrototypeOf(this).parse.call(this,s);h<d.length;h++){var A=d[h],v=i(A);Array.isArray(v)?c.push.apply(c,v):c.push(v)}return c}}})},e}(UB),Fe=function(n){function e(i){var s=n.call(this)||this;return s.commands=typeof i=="string"?e.parse(i):i,s}return CB(e,n),e.prototype.encode=function(){return e.encode(this.commands)},e.prototype.getBounds=function(){var i=xn.CALCULATE_BOUNDS();return this.transform(i),i},e.prototype.transform=function(i){for(var s=[],c=0,h=this.commands;c<h.length;c++){var d=i(h[c]);Array.isArray(d)?s.push.apply(s,d):s.push(d)}return this.commands=s,this},e.encode=function(i){return FR(i)},e.parse=function(i){var s=new IR,c=[];return s.parse(i,c),s.finish(c),c},e.CLOSE_PATH=1,e.MOVE_TO=2,e.HORIZ_LINE_TO=4,e.VERT_LINE_TO=8,e.LINE_TO=16,e.CURVE_TO=32,e.SMOOTH_CURVE_TO=64,e.QUAD_TO=128,e.SMOOTH_QUAD_TO=256,e.ARC=512,e.LINE_COMMANDS=e.LINE_TO|e.HORIZ_LINE_TO|e.VERT_LINE_TO,e.DRAWING_COMMANDS=e.HORIZ_LINE_TO|e.VERT_LINE_TO|e.LINE_TO|e.CURVE_TO|e.SMOOTH_CURVE_TO|e.QUAD_TO|e.SMOOTH_QUAD_TO|e.ARC,e}(UB),ER=((Lo={})[Fe.MOVE_TO]=2,Lo[Fe.LINE_TO]=2,Lo[Fe.HORIZ_LINE_TO]=1,Lo[Fe.VERT_LINE_TO]=1,Lo[Fe.CLOSE_PATH]=0,Lo[Fe.QUAD_TO]=4,Lo[Fe.SMOOTH_QUAD_TO]=2,Lo[Fe.CURVE_TO]=6,Lo[Fe.SMOOTH_CURVE_TO]=4,Lo[Fe.ARC]=7,Lo),TR=is,UR=To,LR=ef,PR=dx,PB=RegExp.prototype,QR=function(n){var e=n.flags;return e===void 0&&!("flags"in PB)&&!UR(n,"flags")&&LR(PB,n)?TR(PR,n):e},kR=Af.PROPER,MR=Tc,DR=Ns,QB=oA,NR=un,OR=QR,K1="toString",kB=RegExp.prototype,MB=kB[K1],RR=NR(function(){return MB.call({source:"a",flags:"b"})!=="/a/b"}),zR=kR&&MB.name!==K1;(RR||zR)&&MR(kB,K1,function(){var n=DR(this),e=QB(n.source),i=QB(OR(n));return"/"+e+"/"+i},{unsafe:!0});function Hf(n){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Hf=function(e){return typeof e}:Hf=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hf(n)}function HR(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}var VR=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],jR=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function KR(n,e,i,s,c){if(typeof n=="string"&&(n=document.getElementById(n)),!n||Hf(n)!=="object"||!("getContext"in n))throw new TypeError("Expecting canvas with `getContext` method in processCanvasRGB(A) calls!");var h=n.getContext("2d");try{return h.getImageData(e,i,s,c)}catch(d){throw new Error("unable to access image data: "+d)}}function $R(n,e,i,s,c,h){if(!(isNaN(h)||h<1)){h|=0;var d=KR(n,e,i,s,c);d=GR(d,e,i,s,c,h),n.getContext("2d").putImageData(d,e,i)}}function GR(n,e,i,s,c,h){for(var d=n.data,A=2*h+1,v=s-1,C=c-1,I=h+1,T=I*(I+1)/2,P=new DB,U=P,V,R=1;R<A;R++)U=U.next=new DB,R===I&&(V=U);U.next=P;for(var Z=null,K=null,tt=0,ht=0,Bt=VR[h],Lt=jR[h],Ut=0;Ut<c;Ut++){U=P;for(var xt=d[ht],pt=d[ht+1],kt=d[ht+2],Xt=d[ht+3],st=0;st<I;st++)U.r=xt,U.g=pt,U.b=kt,U.a=Xt,U=U.next;for(var ut=0,mt=0,vt=0,$t=0,Vt=I*xt,jt=I*pt,zt=I*kt,Wt=I*Xt,Yt=T*xt,me=T*pt,et=T*kt,dt=T*Xt,_t=1;_t<I;_t++){var Ct=ht+((v<_t?v:_t)<<2),Ot=d[Ct],Rt=d[Ct+1],Zt=d[Ct+2],Jt=d[Ct+3],xe=I-_t;Yt+=(U.r=Ot)*xe,me+=(U.g=Rt)*xe,et+=(U.b=Zt)*xe,dt+=(U.a=Jt)*xe,ut+=Ot,mt+=Rt,vt+=Zt,$t+=Jt,U=U.next}Z=P,K=V;for(var we=0;we<s;we++){var Te=dt*Bt>>>Lt;if(d[ht+3]=Te,Te!==0){var Ee=255/Te;d[ht]=(Yt*Bt>>>Lt)*Ee,d[ht+1]=(me*Bt>>>Lt)*Ee,d[ht+2]=(et*Bt>>>Lt)*Ee}else d[ht]=d[ht+1]=d[ht+2]=0;Yt-=Vt,me-=jt,et-=zt,dt-=Wt,Vt-=Z.r,jt-=Z.g,zt-=Z.b,Wt-=Z.a;var Ve=we+h+1;Ve=tt+(Ve<v?Ve:v)<<2,ut+=Z.r=d[Ve],mt+=Z.g=d[Ve+1],vt+=Z.b=d[Ve+2],$t+=Z.a=d[Ve+3],Yt+=ut,me+=mt,et+=vt,dt+=$t,Z=Z.next;var ie=K,rt=ie.r,dr=ie.g,je=ie.b,se=ie.a;Vt+=rt,jt+=dr,zt+=je,Wt+=se,ut-=rt,mt-=dr,vt-=je,$t-=se,K=K.next,ht+=4}tt+=s}for(var fe=0;fe<s;fe++){ht=fe<<2;var Ue=d[ht],Se=d[ht+1],Re=d[ht+2],We=d[ht+3],ar=I*Ue,wr=I*Se,Fr=I*Re,oe=I*We,er=T*Ue,or=T*Se,Le=T*Re,Zr=T*We;U=P;for(var ce=0;ce<I;ce++)U.r=Ue,U.g=Se,U.b=Re,U.a=We,U=U.next;for(var ir=s,Pe=0,_r=0,ni=0,Qe=0,mi=1;mi<=h;mi++){ht=ir+fe<<2;var Kr=I-mi;er+=(U.r=Ue=d[ht])*Kr,or+=(U.g=Se=d[ht+1])*Kr,Le+=(U.b=Re=d[ht+2])*Kr,Zr+=(U.a=We=d[ht+3])*Kr,Qe+=Ue,Pe+=Se,_r+=Re,ni+=We,U=U.next,mi<C&&(ir+=s)}ht=fe,Z=P,K=V;for(var si=0;si<c;si++){var Xr=ht<<2;d[Xr+3]=We=Zr*Bt>>>Lt,We>0?(We=255/We,d[Xr]=(er*Bt>>>Lt)*We,d[Xr+1]=(or*Bt>>>Lt)*We,d[Xr+2]=(Le*Bt>>>Lt)*We):d[Xr]=d[Xr+1]=d[Xr+2]=0,er-=ar,or-=wr,Le-=Fr,Zr-=oe,ar-=Z.r,wr-=Z.g,Fr-=Z.b,oe-=Z.a,Xr=fe+((Xr=si+I)<C?Xr:C)*s<<2,er+=Qe+=Z.r=d[Xr],or+=Pe+=Z.g=d[Xr+1],Le+=_r+=Z.b=d[Xr+2],Zr+=ni+=Z.a=d[Xr+3],Z=Z.next,ar+=Ue=K.r,wr+=Se=K.g,Fr+=Re=K.b,oe+=We=K.a,Qe-=Ue,Pe-=Se,_r-=Re,ni-=We,K=K.next,ht+=s}}return n}var DB=function n(){HR(this,n),this.r=0,this.g=0,this.b=0,this.a=0,this.next=null};function qR(){var{DOMParser:n}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e={window:null,ignoreAnimation:!0,ignoreMouse:!0,DOMParser:n,createCanvas(i,s){return new OffscreenCanvas(i,s)},createImage(i){return tl(function*(){var s=yield fetch(i),c=yield s.blob(),h=yield createImageBitmap(c);return h})()}};return(typeof DOMParser<"u"||typeof n>"u")&&Reflect.deleteProperty(e,"DOMParser"),e}function XR(n){var{DOMParser:e,canvas:i,fetch:s}=n;return{window:null,ignoreAnimation:!0,ignoreMouse:!0,DOMParser:e,fetch:s,createCanvas:i.createCanvas,createImage:i.loadImage}}var WR=Object.freeze({__proto__:null,offscreen:qR,node:XR});function kc(n){return n.replace(/(?!\u3000)\s+/gm," ")}function NB(n){return n.replace(/^[\n \t]+/,"")}function OB(n){return n.replace(/[\n \t]+$/,"")}function sa(n){var e=(n||"").match(/-?(\d+(?:\.\d*(?:[eE][+-]?\d+)?)?|\.\d+)(?=\D|$)/gm)||[];return e.map(parseFloat)}var ZR=/^[A-Z-]+$/;function RB(n){return ZR.test(n)?n.toLowerCase():n}function $1(n){var e=/url\(('([^']+)'|"([^"]+)"|([^'")]+))\)/.exec(n)||[];return e[2]||e[3]||e[4]}function zB(n){if(!n.startsWith("rgb"))return n;var e=3,i=n.replace(/\d+(\.\d+)?/g,(s,c)=>e--&&c?String(Math.round(parseFloat(s))):s);return i}var YR=/(\[[^\]]+\])/g,JR=/(#[^\s+>~.[:]+)/g,t7=/(\.[^\s+>~.[:]+)/g,e7=/(::[^\s+>~.[:]+|:first-line|:first-letter|:before|:after)/gi,r7=/(:[\w-]+\([^)]*\))/gi,i7=/(:[^\s+>~.[:]+)/g,n7=/([^\s+>~.[:]+)/g;function Mc(n,e){var i=e.exec(n);return i?[n.replace(e," "),i.length]:[n,0]}function HB(n){var e=[0,0,0],i=n.replace(/:not\(([^)]*)\)/g,"     $1 ").replace(/{[\s\S]*/gm," "),s=0;return[i,s]=Mc(i,YR),e[1]+=s,[i,s]=Mc(i,JR),e[0]+=s,[i,s]=Mc(i,t7),e[1]+=s,[i,s]=Mc(i,e7),e[2]+=s,[i,s]=Mc(i,r7),e[1]+=s,[i,s]=Mc(i,i7),e[1]+=s,i=i.replace(/[*\s+>~]/g," ").replace(/[#.]/g," "),[i,s]=Mc(i,n7),e[2]+=s,e.join("")}var Dc=1e-8;function G1(n){return Math.sqrt(Math.pow(n[0],2)+Math.pow(n[1],2))}function Vf(n,e){return(n[0]*e[0]+n[1]*e[1])/(G1(n)*G1(e))}function q1(n,e){return(n[0]*e[1]<n[1]*e[0]?-1:1)*Math.acos(Vf(n,e))}function X1(n){return n*n*n}function W1(n){return 3*n*n*(1-n)}function Z1(n){return 3*n*(1-n)*(1-n)}function Y1(n){return(1-n)*(1-n)*(1-n)}function J1(n){return n*n}function ty(n){return 2*n*(1-n)}function ey(n){return(1-n)*(1-n)}class vr{constructor(e,i,s){this.document=e,this.name=i,this.value=s,this.isNormalizedColor=!1}static empty(e){return new vr(e,"EMPTY","")}split(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:" ",{document:i,name:s}=this;return kc(this.getString()).trim().split(e).map(c=>new vr(i,s,c))}hasValue(e){var{value:i}=this;return i!==null&&i!==""&&(e||i!==0)&&typeof i<"u"}isString(e){var{value:i}=this,s=typeof i=="string";return!s||!e?s:e.test(i)}isUrlDefinition(){return this.isString(/^url\(/)}isPixels(){if(!this.hasValue())return!1;var e=this.getString();switch(!0){case e.endsWith("px"):case/^[0-9]+$/.test(e):return!0;default:return!1}}setValue(e){return this.value=e,this}getValue(e){return typeof e>"u"||this.hasValue()?this.value:e}getNumber(e){if(!this.hasValue())return typeof e>"u"?0:parseFloat(e);var{value:i}=this,s=parseFloat(i);return this.isString(/%$/)&&(s/=100),s}getString(e){return typeof e>"u"||this.hasValue()?typeof this.value>"u"?"":String(this.value):String(e)}getColor(e){var i=this.getString(e);return this.isNormalizedColor||(this.isNormalizedColor=!0,i=zB(i),this.value=i),i}getDpi(){return 96}getRem(){return this.document.rootEmSize}getEm(){return this.document.emSize}getUnits(){return this.getString().replace(/[0-9.-]/g,"")}getPixels(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!this.hasValue())return 0;var[s,c]=typeof e=="boolean"?[void 0,e]:[e],{viewPort:h}=this.document.screen;switch(!0){case this.isString(/vmin$/):return this.getNumber()/100*Math.min(h.computeSize("x"),h.computeSize("y"));case this.isString(/vmax$/):return this.getNumber()/100*Math.max(h.computeSize("x"),h.computeSize("y"));case this.isString(/vw$/):return this.getNumber()/100*h.computeSize("x");case this.isString(/vh$/):return this.getNumber()/100*h.computeSize("y");case this.isString(/rem$/):return this.getNumber()*this.getRem();case this.isString(/em$/):return this.getNumber()*this.getEm();case this.isString(/ex$/):return this.getNumber()*this.getEm()/2;case this.isString(/px$/):return this.getNumber();case this.isString(/pt$/):return this.getNumber()*this.getDpi()*(1/72);case this.isString(/pc$/):return this.getNumber()*15;case this.isString(/cm$/):return this.getNumber()*this.getDpi()/2.54;case this.isString(/mm$/):return this.getNumber()*this.getDpi()/25.4;case this.isString(/in$/):return this.getNumber()*this.getDpi();case(this.isString(/%$/)&&c):return this.getNumber()*this.getEm();case this.isString(/%$/):return this.getNumber()*h.computeSize(s);default:{var d=this.getNumber();return i&&d<1?d*h.computeSize(s):d}}}getMilliseconds(){return this.hasValue()?this.isString(/ms$/)?this.getNumber():this.getNumber()*1e3:0}getRadians(){if(!this.hasValue())return 0;switch(!0){case this.isString(/deg$/):return this.getNumber()*(Math.PI/180);case this.isString(/grad$/):return this.getNumber()*(Math.PI/200);case this.isString(/rad$/):return this.getNumber();default:return this.getNumber()*(Math.PI/180)}}getDefinition(){var e=this.getString(),i=/#([^)'"]+)/.exec(e);return i&&(i=i[1]),i||(i=e),this.document.definitions[i]}getFillStyleDefinition(e,i){var s=this.getDefinition();if(!s)return null;if(typeof s.createGradient=="function")return s.createGradient(this.document.ctx,e,i);if(typeof s.createPattern=="function"){if(s.getHrefAttribute().hasValue()){var c=s.getAttribute("patternTransform");s=s.getHrefAttribute().getDefinition(),c.hasValue()&&s.getAttribute("patternTransform",!0).setValue(c.value)}return s.createPattern(this.document.ctx,e,i)}return null}getTextBaseline(){return this.hasValue()?vr.textBaselineMapping[this.getString()]:null}addOpacity(e){for(var i=this.getColor(),s=i.length,c=0,h=0;h<s&&(i[h]===","&&c++,c!==3);h++);if(e.hasValue()&&this.isString()&&c!==3){var d=new z1(i);d.ok&&(d.alpha=e.getNumber(),i=d.toRGBA())}return new vr(this.document,this.name,i)}}vr.textBaselineMapping={baseline:"alphabetic","before-edge":"top","text-before-edge":"top",middle:"middle",central:"middle","after-edge":"bottom","text-after-edge":"bottom",ideographic:"ideographic",alphabetic:"alphabetic",hanging:"hanging",mathematical:"alphabetic"};class VB{constructor(){this.viewPorts=[]}clear(){this.viewPorts=[]}setCurrent(e,i){this.viewPorts.push({width:e,height:i})}removeCurrent(){this.viewPorts.pop()}getCurrent(){var{viewPorts:e}=this;return e[e.length-1]}get width(){return this.getCurrent().width}get height(){return this.getCurrent().height}computeSize(e){return typeof e=="number"?e:e==="x"?this.width:e==="y"?this.height:Math.sqrt(Math.pow(this.width,2)+Math.pow(this.height,2))/Math.sqrt(2)}}class tn{constructor(e,i){this.x=e,this.y=i}static parse(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,[s=i,c=i]=sa(e);return new tn(s,c)}static parseScale(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,[s=i,c=s]=sa(e);return new tn(s,c)}static parsePath(e){for(var i=sa(e),s=i.length,c=[],h=0;h<s;h+=2)c.push(new tn(i[h],i[h+1]));return c}angleTo(e){return Math.atan2(e.y-this.y,e.x-this.x)}applyTransform(e){var{x:i,y:s}=this,c=i*e[0]+s*e[2]+e[4],h=i*e[1]+s*e[3]+e[5];this.x=c,this.y=h}}class jB{constructor(e){this.screen=e,this.working=!1,this.events=[],this.eventElements=[],this.onClick=this.onClick.bind(this),this.onMouseMove=this.onMouseMove.bind(this)}isWorking(){return this.working}start(){if(!this.working){var{screen:e,onClick:i,onMouseMove:s}=this,c=e.ctx.canvas;c.onclick=i,c.onmousemove=s,this.working=!0}}stop(){if(this.working){var e=this.screen.ctx.canvas;this.working=!1,e.onclick=null,e.onmousemove=null}}hasEvents(){return this.working&&this.events.length>0}runEvents(){if(this.working){var{screen:e,events:i,eventElements:s}=this,{style:c}=e.ctx.canvas;c&&(c.cursor=""),i.forEach((h,d)=>{for(var{run:A}=h,v=s[d];v;)A(v),v=v.parent}),this.events=[],this.eventElements=[]}}checkPath(e,i){if(!(!this.working||!i)){var{events:s,eventElements:c}=this;s.forEach((h,d)=>{var{x:A,y:v}=h;!c[d]&&i.isPointInPath&&i.isPointInPath(A,v)&&(c[d]=e)})}}checkBoundingBox(e,i){if(!(!this.working||!i)){var{events:s,eventElements:c}=this;s.forEach((h,d)=>{var{x:A,y:v}=h;!c[d]&&i.isPointInBox(A,v)&&(c[d]=e)})}}mapXY(e,i){for(var{window:s,ctx:c}=this.screen,h=new tn(e,i),d=c.canvas;d;)h.x-=d.offsetLeft,h.y-=d.offsetTop,d=d.offsetParent;return s.scrollX&&(h.x+=s.scrollX),s.scrollY&&(h.y+=s.scrollY),h}onClick(e){var{x:i,y:s}=this.mapXY(e.clientX,e.clientY);this.events.push({type:"onclick",x:i,y:s,run(c){c.onClick&&c.onClick()}})}onMouseMove(e){var{x:i,y:s}=this.mapXY(e.clientX,e.clientY);this.events.push({type:"onmousemove",x:i,y:s,run(c){c.onMouseMove&&c.onMouseMove()}})}}var KB=typeof window<"u"?window:null,$B=typeof fetch<"u"?fetch.bind(void 0):null;class ud{constructor(e){var{fetch:i=$B,window:s=KB}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.ctx=e,this.FRAMERATE=30,this.MAX_VIRTUAL_PIXELS=3e4,this.CLIENT_WIDTH=800,this.CLIENT_HEIGHT=600,this.viewPort=new VB,this.mouse=new jB(this),this.animations=[],this.waits=[],this.frameDuration=0,this.isReadyLock=!1,this.isFirstRender=!0,this.intervalId=null,this.window=s,this.fetch=i}wait(e){this.waits.push(e)}ready(){return this.readyPromise?this.readyPromise:Promise.resolve()}isReady(){if(this.isReadyLock)return!0;var e=this.waits.every(i=>i());return e&&(this.waits=[],this.resolveReady&&this.resolveReady()),this.isReadyLock=e,e}setDefaults(e){e.strokeStyle="rgba(0,0,0,0)",e.lineCap="butt",e.lineJoin="miter",e.miterLimit=4}setViewBox(e){var{document:i,ctx:s,aspectRatio:c,width:h,desiredWidth:d,height:A,desiredHeight:v,minX:C=0,minY:I=0,refX:T,refY:P,clip:U=!1,clipX:V=0,clipY:R=0}=e,Z=kc(c).replace(/^defer\s/,""),[K,tt]=Z.split(" "),ht=K||"xMidYMid",Bt=tt||"meet",Lt=h/d,Ut=A/v,xt=Math.min(Lt,Ut),pt=Math.max(Lt,Ut),kt=d,Xt=v;Bt==="meet"&&(kt*=xt,Xt*=xt),Bt==="slice"&&(kt*=pt,Xt*=pt);var st=new vr(i,"refX",T),ut=new vr(i,"refY",P),mt=st.hasValue()&&ut.hasValue();if(mt&&s.translate(-xt*st.getPixels("x"),-xt*ut.getPixels("y")),U){var vt=xt*V,$t=xt*R;s.beginPath(),s.moveTo(vt,$t),s.lineTo(h,$t),s.lineTo(h,A),s.lineTo(vt,A),s.closePath(),s.clip()}if(!mt){var Vt=Bt==="meet"&&xt===Ut,jt=Bt==="slice"&&pt===Ut,zt=Bt==="meet"&&xt===Lt,Wt=Bt==="slice"&&pt===Lt;ht.startsWith("xMid")&&(Vt||jt)&&s.translate(h/2-kt/2,0),ht.endsWith("YMid")&&(zt||Wt)&&s.translate(0,A/2-Xt/2),ht.startsWith("xMax")&&(Vt||jt)&&s.translate(h-kt,0),ht.endsWith("YMax")&&(zt||Wt)&&s.translate(0,A-Xt)}switch(!0){case ht==="none":s.scale(Lt,Ut);break;case Bt==="meet":s.scale(xt,xt);break;case Bt==="slice":s.scale(pt,pt);break}s.translate(-C,-I)}start(e){var{enableRedraw:i=!1,ignoreMouse:s=!1,ignoreAnimation:c=!1,ignoreDimensions:h=!1,ignoreClear:d=!1,forceRedraw:A,scaleWidth:v,scaleHeight:C,offsetX:I,offsetY:T}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{FRAMERATE:P,mouse:U}=this,V=1e3/P;if(this.frameDuration=V,this.readyPromise=new Promise(ht=>{this.resolveReady=ht}),this.isReady()&&this.render(e,h,d,v,C,I,T),!!i){var R=Date.now(),Z=R,K=0,tt=()=>{R=Date.now(),K=R-Z,K>=V&&(Z=R-K%V,this.shouldUpdate(c,A)&&(this.render(e,h,d,v,C,I,T),U.runEvents())),this.intervalId=N1(tt)};s||U.start(),this.intervalId=N1(tt)}}stop(){this.intervalId&&(N1.cancel(this.intervalId),this.intervalId=null),this.mouse.stop()}shouldUpdate(e,i){if(!e){var{frameDuration:s}=this,c=this.animations.reduce((h,d)=>d.update(s)||h,!1);if(c)return!0}return!!(typeof i=="function"&&i()||!this.isReadyLock&&this.isReady()||this.mouse.hasEvents())}render(e,i,s,c,h,d,A){var{CLIENT_WIDTH:v,CLIENT_HEIGHT:C,viewPort:I,ctx:T,isFirstRender:P}=this,U=T.canvas;I.clear(),U.width&&U.height?I.setCurrent(U.width,U.height):I.setCurrent(v,C);var V=e.getStyle("width"),R=e.getStyle("height");!i&&(P||typeof c!="number"&&typeof h!="number")&&(V.hasValue()&&(U.width=V.getPixels("x"),U.style&&(U.style.width="".concat(U.width,"px"))),R.hasValue()&&(U.height=R.getPixels("y"),U.style&&(U.style.height="".concat(U.height,"px"))));var Z=U.clientWidth||U.width,K=U.clientHeight||U.height;if(i&&V.hasValue()&&R.hasValue()&&(Z=V.getPixels("x"),K=R.getPixels("y")),I.setCurrent(Z,K),typeof d=="number"&&e.getAttribute("x",!0).setValue(d),typeof A=="number"&&e.getAttribute("y",!0).setValue(A),typeof c=="number"||typeof h=="number"){var tt=sa(e.getAttribute("viewBox").getString()),ht=0,Bt=0;if(typeof c=="number"){var Lt=e.getStyle("width");Lt.hasValue()?ht=Lt.getPixels("x")/c:isNaN(tt[2])||(ht=tt[2]/c)}if(typeof h=="number"){var Ut=e.getStyle("height");Ut.hasValue()?Bt=Ut.getPixels("y")/h:isNaN(tt[3])||(Bt=tt[3]/h)}ht||(ht=Bt),Bt||(Bt=ht),e.getAttribute("width",!0).setValue(c),e.getAttribute("height",!0).setValue(h);var xt=e.getStyle("transform",!0,!0);xt.setValue("".concat(xt.getString()," scale(").concat(1/ht,", ").concat(1/Bt,")"))}s||T.clearRect(0,0,Z,K),e.render(T),P&&(this.isFirstRender=!1)}}ud.defaultWindow=KB,ud.defaultFetch=$B;var{defaultFetch:s7}=ud,a7=typeof DOMParser<"u"?DOMParser:null;class jf{constructor(){var{fetch:e=s7,DOMParser:i=a7}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.fetch=e,this.DOMParser=i}parse(e){var i=this;return tl(function*(){return e.startsWith("<")?i.parseFromString(e):i.load(e)})()}parseFromString(e){var i=new this.DOMParser;try{return this.checkDocument(i.parseFromString(e,"image/svg+xml"))}catch{return this.checkDocument(i.parseFromString(e,"text/xml"))}}checkDocument(e){var i=e.getElementsByTagName("parsererror")[0];if(i)throw new Error(i.textContent);return e}load(e){var i=this;return tl(function*(){var s=yield i.fetch(e),c=yield s.text();return i.parseFromString(c)})()}}class GB{constructor(e,i){this.type="translate",this.point=null,this.point=tn.parse(i)}apply(e){var{x:i,y:s}=this.point;e.translate(i||0,s||0)}unapply(e){var{x:i,y:s}=this.point;e.translate(-1*i||0,-1*s||0)}applyToPoint(e){var{x:i,y:s}=this.point;e.applyTransform([1,0,0,1,i||0,s||0])}}class qB{constructor(e,i,s){this.type="rotate",this.angle=null,this.originX=null,this.originY=null,this.cx=0,this.cy=0;var c=sa(i);this.angle=new vr(e,"angle",c[0]),this.originX=s[0],this.originY=s[1],this.cx=c[1]||0,this.cy=c[2]||0}apply(e){var{cx:i,cy:s,originX:c,originY:h,angle:d}=this,A=i+c.getPixels("x"),v=s+h.getPixels("y");e.translate(A,v),e.rotate(d.getRadians()),e.translate(-A,-v)}unapply(e){var{cx:i,cy:s,originX:c,originY:h,angle:d}=this,A=i+c.getPixels("x"),v=s+h.getPixels("y");e.translate(A,v),e.rotate(-1*d.getRadians()),e.translate(-A,-v)}applyToPoint(e){var{cx:i,cy:s,angle:c}=this,h=c.getRadians();e.applyTransform([1,0,0,1,i||0,s||0]),e.applyTransform([Math.cos(h),Math.sin(h),-Math.sin(h),Math.cos(h),0,0]),e.applyTransform([1,0,0,1,-i||0,-s||0])}}class XB{constructor(e,i,s){this.type="scale",this.scale=null,this.originX=null,this.originY=null;var c=tn.parseScale(i);(c.x===0||c.y===0)&&(c.x=Dc,c.y=Dc),this.scale=c,this.originX=s[0],this.originY=s[1]}apply(e){var{scale:{x:i,y:s},originX:c,originY:h}=this,d=c.getPixels("x"),A=h.getPixels("y");e.translate(d,A),e.scale(i,s||i),e.translate(-d,-A)}unapply(e){var{scale:{x:i,y:s},originX:c,originY:h}=this,d=c.getPixels("x"),A=h.getPixels("y");e.translate(d,A),e.scale(1/i,1/s||i),e.translate(-d,-A)}applyToPoint(e){var{x:i,y:s}=this.scale;e.applyTransform([i||0,0,0,s||0,0,0])}}class ry{constructor(e,i,s){this.type="matrix",this.matrix=[],this.originX=null,this.originY=null,this.matrix=sa(i),this.originX=s[0],this.originY=s[1]}apply(e){var{originX:i,originY:s,matrix:c}=this,h=i.getPixels("x"),d=s.getPixels("y");e.translate(h,d),e.transform(c[0],c[1],c[2],c[3],c[4],c[5]),e.translate(-h,-d)}unapply(e){var{originX:i,originY:s,matrix:c}=this,h=c[0],d=c[2],A=c[4],v=c[1],C=c[3],I=c[5],T=0,P=0,U=1,V=1/(h*(C*U-I*P)-d*(v*U-I*T)+A*(v*P-C*T)),R=i.getPixels("x"),Z=s.getPixels("y");e.translate(R,Z),e.transform(V*(C*U-I*P),V*(I*T-v*U),V*(A*P-d*U),V*(h*U-A*T),V*(d*I-A*C),V*(A*v-h*I)),e.translate(-R,-Z)}applyToPoint(e){e.applyTransform(this.matrix)}}class iy extends ry{constructor(e,i,s){super(e,i,s),this.type="skew",this.angle=null,this.angle=new vr(e,"angle",i)}}class WB extends iy{constructor(e,i,s){super(e,i,s),this.type="skewX",this.matrix=[1,0,Math.tan(this.angle.getRadians()),1,0,0]}}class ZB extends iy{constructor(e,i,s){super(e,i,s),this.type="skewY",this.matrix=[1,Math.tan(this.angle.getRadians()),0,1,0,0]}}function o7(n){return kc(n).trim().replace(/\)([a-zA-Z])/g,") $1").replace(/\)(\s?,\s?)/g,") ").split(/\s(?=[a-z])/)}function A7(n){var[e,i]=n.split("(");return[e.trim(),i.trim().replace(")","")]}class Wl{constructor(e,i,s){this.document=e,this.transforms=[];var c=o7(i);c.forEach(h=>{if(h!=="none"){var[d,A]=A7(h),v=Wl.transformTypes[d];typeof v<"u"&&this.transforms.push(new v(this.document,A,s))}})}static fromElement(e,i){var s=i.getStyle("transform",!1,!0),[c,h=c]=i.getStyle("transform-origin",!1,!0).split(),d=[c,h];return s.hasValue()?new Wl(e,s.getString(),d):null}apply(e){for(var{transforms:i}=this,s=i.length,c=0;c<s;c++)i[c].apply(e)}unapply(e){for(var{transforms:i}=this,s=i.length,c=s-1;c>=0;c--)i[c].unapply(e)}applyToPoint(e){for(var{transforms:i}=this,s=i.length,c=0;c<s;c++)i[c].applyToPoint(e)}}Wl.transformTypes={translate:GB,rotate:qB,scale:XB,matrix:ry,skewX:WB,skewY:ZB};class Pi{constructor(e,i){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(this.document=e,this.node=i,this.captureTextNodes=s,this.attributes={},this.styles={},this.stylesSpecificity={},this.animationFrozen=!1,this.animationFrozenValue="",this.parent=null,this.children=[],!(!i||i.nodeType!==1)){if(Array.from(i.attributes).forEach(A=>{var v=RB(A.nodeName);this.attributes[v]=new vr(e,v,A.value)}),this.addStylesFromStyleDefinition(),this.getAttribute("style").hasValue()){var c=this.getAttribute("style").getString().split(";").map(A=>A.trim());c.forEach(A=>{if(A){var[v,C]=A.split(":").map(I=>I.trim());this.styles[v]=new vr(e,v,C)}})}var{definitions:h}=e,d=this.getAttribute("id");d.hasValue()&&(h[d.getString()]||(h[d.getString()]=this)),Array.from(i.childNodes).forEach(A=>{if(A.nodeType===1)this.addChild(A);else if(s&&(A.nodeType===3||A.nodeType===4)){var v=e.createTextNode(A);v.getText().length>0&&this.addChild(v)}})}}getAttribute(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,s=this.attributes[e];if(!s&&i){var c=new vr(this.document,e,"");return this.attributes[e]=c,c}return s||vr.empty(this.document)}getHrefAttribute(){for(var e in this.attributes)if(e==="href"||e.endsWith(":href"))return this.attributes[e];return vr.empty(this.document)}getStyle(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,c=this.styles[e];if(c)return c;var h=this.getAttribute(e);if(h!=null&&h.hasValue())return this.styles[e]=h,h;if(!s){var{parent:d}=this;if(d){var A=d.getStyle(e);if(A!=null&&A.hasValue())return A}}if(i){var v=new vr(this.document,e,"");return this.styles[e]=v,v}return c||vr.empty(this.document)}render(e){if(!(this.getStyle("display").getString()==="none"||this.getStyle("visibility").getString()==="hidden")){if(e.save(),this.getStyle("mask").hasValue()){var i=this.getStyle("mask").getDefinition();i&&(this.applyEffects(e),i.apply(e,this))}else if(this.getStyle("filter").getValue("none")!=="none"){var s=this.getStyle("filter").getDefinition();s&&(this.applyEffects(e),s.apply(e,this))}else this.setContext(e),this.renderChildren(e),this.clearContext(e);e.restore()}}setContext(e){}applyEffects(e){var i=Wl.fromElement(this.document,this);i&&i.apply(e);var s=this.getStyle("clip-path",!1,!0);if(s.hasValue()){var c=s.getDefinition();c&&c.apply(e)}}clearContext(e){}renderChildren(e){this.children.forEach(i=>{i.render(e)})}addChild(e){var i=e instanceof Pi?e:this.document.createElement(e);i.parent=this,Pi.ignoreChildTypes.includes(i.type)||this.children.push(i)}matchesSelector(e){var i,{node:s}=this;if(typeof s.matches=="function")return s.matches(e);var c=(i=s.getAttribute)===null||i===void 0?void 0:i.call(s,"class");return!c||c===""?!1:c.split(" ").some(h=>".".concat(h)===e)}addStylesFromStyleDefinition(){var{styles:e,stylesSpecificity:i}=this.document;for(var s in e)if(!s.startsWith("@")&&this.matchesSelector(s)){var c=e[s],h=i[s];if(c)for(var d in c){var A=this.stylesSpecificity[d];typeof A>"u"&&(A="000"),h>=A&&(this.styles[d]=c[d],this.stylesSpecificity[d]=h)}}}removeStyles(e,i){var s=i.reduce((c,h)=>{var d=e.getStyle(h);if(!d.hasValue())return c;var A=d.getString();return d.setValue(""),[...c,[h,A]]},[]);return s}restoreStyles(e,i){i.forEach(s=>{var[c,h]=s;e.getStyle(c,!0).setValue(h)})}isFirstChild(){var e;return((e=this.parent)===null||e===void 0?void 0:e.children.indexOf(this))===0}}Pi.ignoreChildTypes=["title"];class YB extends Pi{constructor(e,i,s){super(e,i,s)}}function l7(n){var e=n.trim();return/^('|")/.test(e)?e:'"'.concat(e,'"')}function c7(n){return typeof process>"u"?n:n.trim().split(",").map(l7).join(",")}function u7(n){if(!n)return"";var e=n.trim().toLowerCase();switch(e){case"normal":case"italic":case"oblique":case"inherit":case"initial":case"unset":return e;default:return/^oblique\s+(-|)\d+deg$/.test(e)?e:""}}function h7(n){if(!n)return"";var e=n.trim().toLowerCase();switch(e){case"normal":case"bold":case"lighter":case"bolder":case"inherit":case"initial":case"unset":return e;default:return/^[\d.]+$/.test(e)?e:""}}class _s{constructor(e,i,s,c,h,d){var A=d?typeof d=="string"?_s.parse(d):d:{};this.fontFamily=h||A.fontFamily,this.fontSize=c||A.fontSize,this.fontStyle=e||A.fontStyle,this.fontWeight=s||A.fontWeight,this.fontVariant=i||A.fontVariant}static parse(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",i=arguments.length>1?arguments[1]:void 0,s="",c="",h="",d="",A="",v=kc(e).trim().split(" "),C={fontSize:!1,fontStyle:!1,fontWeight:!1,fontVariant:!1};return v.forEach(I=>{switch(!0){case(!C.fontStyle&&_s.styles.includes(I)):I!=="inherit"&&(s=I),C.fontStyle=!0;break;case(!C.fontVariant&&_s.variants.includes(I)):I!=="inherit"&&(c=I),C.fontStyle=!0,C.fontVariant=!0;break;case(!C.fontWeight&&_s.weights.includes(I)):I!=="inherit"&&(h=I),C.fontStyle=!0,C.fontVariant=!0,C.fontWeight=!0;break;case!C.fontSize:I!=="inherit"&&([d]=I.split("/")),C.fontStyle=!0,C.fontVariant=!0,C.fontWeight=!0,C.fontSize=!0;break;default:I!=="inherit"&&(A+=I)}}),new _s(s,c,h,d,A,i)}toString(){return[u7(this.fontStyle),this.fontVariant,h7(this.fontWeight),this.fontSize,c7(this.fontFamily)].join(" ").trim()}}_s.styles="normal|italic|oblique|inherit",_s.variants="normal|small-caps|inherit",_s.weights="normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit";class qa{constructor(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Number.NaN,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.NaN,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Number.NaN,c=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Number.NaN;this.x1=e,this.y1=i,this.x2=s,this.y2=c,this.addPoint(e,i),this.addPoint(s,c)}get x(){return this.x1}get y(){return this.y1}get width(){return this.x2-this.x1}get height(){return this.y2-this.y1}addPoint(e,i){typeof e<"u"&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=e,this.x2=e),e<this.x1&&(this.x1=e),e>this.x2&&(this.x2=e)),typeof i<"u"&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=i,this.y2=i),i<this.y1&&(this.y1=i),i>this.y2&&(this.y2=i))}addX(e){this.addPoint(e,null)}addY(e){this.addPoint(null,e)}addBoundingBox(e){if(e){var{x1:i,y1:s,x2:c,y2:h}=e;this.addPoint(i,s),this.addPoint(c,h)}}sumCubic(e,i,s,c,h){return Math.pow(1-e,3)*i+3*Math.pow(1-e,2)*e*s+3*(1-e)*Math.pow(e,2)*c+Math.pow(e,3)*h}bezierCurveAdd(e,i,s,c,h){var d=6*i-12*s+6*c,A=-3*i+9*s-9*c+3*h,v=3*s-3*i;if(A===0){if(d===0)return;var C=-v/d;0<C&&C<1&&(e?this.addX(this.sumCubic(C,i,s,c,h)):this.addY(this.sumCubic(C,i,s,c,h)));return}var I=Math.pow(d,2)-4*v*A;if(!(I<0)){var T=(-d+Math.sqrt(I))/(2*A);0<T&&T<1&&(e?this.addX(this.sumCubic(T,i,s,c,h)):this.addY(this.sumCubic(T,i,s,c,h)));var P=(-d-Math.sqrt(I))/(2*A);0<P&&P<1&&(e?this.addX(this.sumCubic(P,i,s,c,h)):this.addY(this.sumCubic(P,i,s,c,h)))}}addBezierCurve(e,i,s,c,h,d,A,v){this.addPoint(e,i),this.addPoint(A,v),this.bezierCurveAdd(!0,e,s,h,A),this.bezierCurveAdd(!1,i,c,d,v)}addQuadraticCurve(e,i,s,c,h,d){var A=e+.6666666666666666*(s-e),v=i+2/3*(c-i),C=A+1/3*(h-e),I=v+1/3*(d-i);this.addBezierCurve(e,i,A,C,v,I,h,d)}isPointInBox(e,i){var{x1:s,y1:c,x2:h,y2:d}=this;return s<=e&&e<=h&&c<=i&&i<=d}}class Rr extends Fe{constructor(e){super(e.replace(/([+\-.])\s+/gm,"$1").replace(/[^MmZzLlHhVvCcSsQqTtAae\d\s.,+-].*/g,"")),this.control=null,this.start=null,this.current=null,this.command=null,this.commands=this.commands,this.i=-1,this.previousCommand=null,this.points=[],this.angles=[]}reset(){this.i=-1,this.command=null,this.previousCommand=null,this.start=new tn(0,0),this.control=new tn(0,0),this.current=new tn(0,0),this.points=[],this.angles=[]}isEnd(){var{i:e,commands:i}=this;return e>=i.length-1}next(){var e=this.commands[++this.i];return this.previousCommand=this.command,this.command=e,e}getPoint(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"x",i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"y",s=new tn(this.command[e],this.command[i]);return this.makeAbsolute(s)}getAsControlPoint(e,i){var s=this.getPoint(e,i);return this.control=s,s}getAsCurrentPoint(e,i){var s=this.getPoint(e,i);return this.current=s,s}getReflectedControlPoint(){var e=this.previousCommand.type;if(e!==Fe.CURVE_TO&&e!==Fe.SMOOTH_CURVE_TO&&e!==Fe.QUAD_TO&&e!==Fe.SMOOTH_QUAD_TO)return this.current;var{current:{x:i,y:s},control:{x:c,y:h}}=this,d=new tn(2*i-c,2*s-h);return d}makeAbsolute(e){if(this.command.relative){var{x:i,y:s}=this.current;e.x+=i,e.y+=s}return e}addMarker(e,i,s){var{points:c,angles:h}=this;s&&h.length>0&&!h[h.length-1]&&(h[h.length-1]=c[c.length-1].angleTo(s)),this.addMarkerAngle(e,i?i.angleTo(e):null)}addMarkerAngle(e,i){this.points.push(e),this.angles.push(i)}getMarkerPoints(){return this.points}getMarkerAngles(){for(var{angles:e}=this,i=e.length,s=0;s<i;s++)if(!e[s]){for(var c=s+1;c<i;c++)if(e[c]){e[s]=e[c];break}}return e}}class Zl extends Pi{constructor(){super(...arguments),this.modifiedEmSizeStack=!1}calculateOpacity(){for(var e=1,i=this;i;){var s=i.getStyle("opacity",!1,!0);s.hasValue(!0)&&(e*=s.getNumber()),i=i.parent}return e}setContext(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!i){var s=this.getStyle("fill"),c=this.getStyle("fill-opacity"),h=this.getStyle("stroke"),d=this.getStyle("stroke-opacity");if(s.isUrlDefinition()){var A=s.getFillStyleDefinition(this,c);A&&(e.fillStyle=A)}else if(s.hasValue()){s.getString()==="currentColor"&&s.setValue(this.getStyle("color").getColor());var v=s.getColor();v!=="inherit"&&(e.fillStyle=v==="none"?"rgba(0,0,0,0)":v)}if(c.hasValue()){var C=new vr(this.document,"fill",e.fillStyle).addOpacity(c).getColor();e.fillStyle=C}if(h.isUrlDefinition()){var I=h.getFillStyleDefinition(this,d);I&&(e.strokeStyle=I)}else if(h.hasValue()){h.getString()==="currentColor"&&h.setValue(this.getStyle("color").getColor());var T=h.getString();T!=="inherit"&&(e.strokeStyle=T==="none"?"rgba(0,0,0,0)":T)}if(d.hasValue()){var P=new vr(this.document,"stroke",e.strokeStyle).addOpacity(d).getString();e.strokeStyle=P}var U=this.getStyle("stroke-width");if(U.hasValue()){var V=U.getPixels();e.lineWidth=V||Dc}var R=this.getStyle("stroke-linecap"),Z=this.getStyle("stroke-linejoin"),K=this.getStyle("stroke-miterlimit"),tt=this.getStyle("stroke-dasharray"),ht=this.getStyle("stroke-dashoffset");if(R.hasValue()&&(e.lineCap=R.getString()),Z.hasValue()&&(e.lineJoin=Z.getString()),K.hasValue()&&(e.miterLimit=K.getNumber()),tt.hasValue()&&tt.getString()!=="none"){var Bt=sa(tt.getString());typeof e.setLineDash<"u"?e.setLineDash(Bt):typeof e.webkitLineDash<"u"?e.webkitLineDash=Bt:typeof e.mozDash<"u"&&!(Bt.length===1&&Bt[0]===0)&&(e.mozDash=Bt);var Lt=ht.getPixels();typeof e.lineDashOffset<"u"?e.lineDashOffset=Lt:typeof e.webkitLineDashOffset<"u"?e.webkitLineDashOffset=Lt:typeof e.mozDashOffset<"u"&&(e.mozDashOffset=Lt)}}if(this.modifiedEmSizeStack=!1,typeof e.font<"u"){var Ut=this.getStyle("font"),xt=this.getStyle("font-style"),pt=this.getStyle("font-variant"),kt=this.getStyle("font-weight"),Xt=this.getStyle("font-size"),st=this.getStyle("font-family"),ut=new _s(xt.getString(),pt.getString(),kt.getString(),Xt.hasValue()?"".concat(Xt.getPixels(!0),"px"):"",st.getString(),_s.parse(Ut.getString(),e.font));xt.setValue(ut.fontStyle),pt.setValue(ut.fontVariant),kt.setValue(ut.fontWeight),Xt.setValue(ut.fontSize),st.setValue(ut.fontFamily),e.font=ut.toString(),Xt.isPixels()&&(this.document.emSize=Xt.getPixels(),this.modifiedEmSizeStack=!0)}i||(this.applyEffects(e),e.globalAlpha=this.calculateOpacity())}clearContext(e){super.clearContext(e),this.modifiedEmSizeStack&&this.document.popEmSize()}}class pi extends Zl{constructor(e,i,s){super(e,i,s),this.type="path",this.pathParser=null,this.pathParser=new Rr(this.getAttribute("d").getString())}path(e){var{pathParser:i}=this,s=new qa;for(i.reset(),e&&e.beginPath();!i.isEnd();)switch(i.next().type){case Rr.MOVE_TO:this.pathM(e,s);break;case Rr.LINE_TO:this.pathL(e,s);break;case Rr.HORIZ_LINE_TO:this.pathH(e,s);break;case Rr.VERT_LINE_TO:this.pathV(e,s);break;case Rr.CURVE_TO:this.pathC(e,s);break;case Rr.SMOOTH_CURVE_TO:this.pathS(e,s);break;case Rr.QUAD_TO:this.pathQ(e,s);break;case Rr.SMOOTH_QUAD_TO:this.pathT(e,s);break;case Rr.ARC:this.pathA(e,s);break;case Rr.CLOSE_PATH:this.pathZ(e,s);break}return s}getBoundingBox(e){return this.path()}getMarkers(){var{pathParser:e}=this,i=e.getMarkerPoints(),s=e.getMarkerAngles(),c=i.map((h,d)=>[h,s[d]]);return c}renderChildren(e){this.path(e),this.document.screen.mouse.checkPath(this,e);var i=this.getStyle("fill-rule");e.fillStyle!==""&&(i.getString("inherit")!=="inherit"?e.fill(i.getString()):e.fill()),e.strokeStyle!==""&&(this.getAttribute("vector-effect").getString()==="non-scaling-stroke"?(e.save(),e.setTransform(1,0,0,1,0,0),e.stroke(),e.restore()):e.stroke());var s=this.getMarkers();if(s){var c=s.length-1,h=this.getStyle("marker-start"),d=this.getStyle("marker-mid"),A=this.getStyle("marker-end");if(h.isUrlDefinition()){var v=h.getDefinition(),[C,I]=s[0];v.render(e,C,I)}if(d.isUrlDefinition())for(var T=d.getDefinition(),P=1;P<c;P++){var[U,V]=s[P];T.render(e,U,V)}if(A.isUrlDefinition()){var R=A.getDefinition(),[Z,K]=s[c];R.render(e,Z,K)}}}static pathM(e){var i=e.getAsCurrentPoint();return e.start=e.current,{point:i}}pathM(e,i){var{pathParser:s}=this,{point:c}=pi.pathM(s),{x:h,y:d}=c;s.addMarker(c),i.addPoint(h,d),e&&e.moveTo(h,d)}static pathL(e){var{current:i}=e,s=e.getAsCurrentPoint();return{current:i,point:s}}pathL(e,i){var{pathParser:s}=this,{current:c,point:h}=pi.pathL(s),{x:d,y:A}=h;s.addMarker(h,c),i.addPoint(d,A),e&&e.lineTo(d,A)}static pathH(e){var{current:i,command:s}=e,c=new tn((s.relative?i.x:0)+s.x,i.y);return e.current=c,{current:i,point:c}}pathH(e,i){var{pathParser:s}=this,{current:c,point:h}=pi.pathH(s),{x:d,y:A}=h;s.addMarker(h,c),i.addPoint(d,A),e&&e.lineTo(d,A)}static pathV(e){var{current:i,command:s}=e,c=new tn(i.x,(s.relative?i.y:0)+s.y);return e.current=c,{current:i,point:c}}pathV(e,i){var{pathParser:s}=this,{current:c,point:h}=pi.pathV(s),{x:d,y:A}=h;s.addMarker(h,c),i.addPoint(d,A),e&&e.lineTo(d,A)}static pathC(e){var{current:i}=e,s=e.getPoint("x1","y1"),c=e.getAsControlPoint("x2","y2"),h=e.getAsCurrentPoint();return{current:i,point:s,controlPoint:c,currentPoint:h}}pathC(e,i){var{pathParser:s}=this,{current:c,point:h,controlPoint:d,currentPoint:A}=pi.pathC(s);s.addMarker(A,d,h),i.addBezierCurve(c.x,c.y,h.x,h.y,d.x,d.y,A.x,A.y),e&&e.bezierCurveTo(h.x,h.y,d.x,d.y,A.x,A.y)}static pathS(e){var{current:i}=e,s=e.getReflectedControlPoint(),c=e.getAsControlPoint("x2","y2"),h=e.getAsCurrentPoint();return{current:i,point:s,controlPoint:c,currentPoint:h}}pathS(e,i){var{pathParser:s}=this,{current:c,point:h,controlPoint:d,currentPoint:A}=pi.pathS(s);s.addMarker(A,d,h),i.addBezierCurve(c.x,c.y,h.x,h.y,d.x,d.y,A.x,A.y),e&&e.bezierCurveTo(h.x,h.y,d.x,d.y,A.x,A.y)}static pathQ(e){var{current:i}=e,s=e.getAsControlPoint("x1","y1"),c=e.getAsCurrentPoint();return{current:i,controlPoint:s,currentPoint:c}}pathQ(e,i){var{pathParser:s}=this,{current:c,controlPoint:h,currentPoint:d}=pi.pathQ(s);s.addMarker(d,h,h),i.addQuadraticCurve(c.x,c.y,h.x,h.y,d.x,d.y),e&&e.quadraticCurveTo(h.x,h.y,d.x,d.y)}static pathT(e){var{current:i}=e,s=e.getReflectedControlPoint();e.control=s;var c=e.getAsCurrentPoint();return{current:i,controlPoint:s,currentPoint:c}}pathT(e,i){var{pathParser:s}=this,{current:c,controlPoint:h,currentPoint:d}=pi.pathT(s);s.addMarker(d,h,h),i.addQuadraticCurve(c.x,c.y,h.x,h.y,d.x,d.y),e&&e.quadraticCurveTo(h.x,h.y,d.x,d.y)}static pathA(e){var{current:i,command:s}=e,{rX:c,rY:h,xRot:d,lArcFlag:A,sweepFlag:v}=s,C=d*(Math.PI/180),I=e.getAsCurrentPoint(),T=new tn(Math.cos(C)*(i.x-I.x)/2+Math.sin(C)*(i.y-I.y)/2,-Math.sin(C)*(i.x-I.x)/2+Math.cos(C)*(i.y-I.y)/2),P=Math.pow(T.x,2)/Math.pow(c,2)+Math.pow(T.y,2)/Math.pow(h,2);P>1&&(c*=Math.sqrt(P),h*=Math.sqrt(P));var U=(A===v?-1:1)*Math.sqrt((Math.pow(c,2)*Math.pow(h,2)-Math.pow(c,2)*Math.pow(T.y,2)-Math.pow(h,2)*Math.pow(T.x,2))/(Math.pow(c,2)*Math.pow(T.y,2)+Math.pow(h,2)*Math.pow(T.x,2)));isNaN(U)&&(U=0);var V=new tn(U*c*T.y/h,U*-h*T.x/c),R=new tn((i.x+I.x)/2+Math.cos(C)*V.x-Math.sin(C)*V.y,(i.y+I.y)/2+Math.sin(C)*V.x+Math.cos(C)*V.y),Z=q1([1,0],[(T.x-V.x)/c,(T.y-V.y)/h]),K=[(T.x-V.x)/c,(T.y-V.y)/h],tt=[(-T.x-V.x)/c,(-T.y-V.y)/h],ht=q1(K,tt);return Vf(K,tt)<=-1&&(ht=Math.PI),Vf(K,tt)>=1&&(ht=0),{currentPoint:I,rX:c,rY:h,sweepFlag:v,xAxisRotation:C,centp:R,a1:Z,ad:ht}}pathA(e,i){var{pathParser:s}=this,{currentPoint:c,rX:h,rY:d,sweepFlag:A,xAxisRotation:v,centp:C,a1:I,ad:T}=pi.pathA(s),P=1-A?1:-1,U=I+P*(T/2),V=new tn(C.x+h*Math.cos(U),C.y+d*Math.sin(U));if(s.addMarkerAngle(V,U-P*Math.PI/2),s.addMarkerAngle(c,U-P*Math.PI),i.addPoint(c.x,c.y),e&&!isNaN(I)&&!isNaN(T)){var R=h>d?h:d,Z=h>d?1:h/d,K=h>d?d/h:1;e.translate(C.x,C.y),e.rotate(v),e.scale(Z,K),e.arc(0,0,R,I,I+T,!!(1-A)),e.scale(1/Z,1/K),e.rotate(-v),e.translate(-C.x,-C.y)}}static pathZ(e){e.current=e.start}pathZ(e,i){pi.pathZ(this.pathParser),e&&i.x1!==i.x2&&i.y1!==i.y2&&e.closePath()}}class ny extends pi{constructor(e,i,s){super(e,i,s),this.type="glyph",this.horizAdvX=this.getAttribute("horiz-adv-x").getNumber(),this.unicode=this.getAttribute("unicode").getString(),this.arabicForm=this.getAttribute("arabic-form").getString()}}class il extends Zl{constructor(e,i,s){super(e,i,new.target===il?!0:s),this.type="text",this.x=0,this.y=0,this.measureCache=-1}setContext(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;super.setContext(e,i);var s=this.getStyle("dominant-baseline").getTextBaseline()||this.getStyle("alignment-baseline").getTextBaseline();s&&(e.textBaseline=s)}initializeCoordinates(){this.x=0,this.y=0,this.leafTexts=[],this.textChunkStart=0,this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY}getBoundingBox(e){if(this.type!=="text")return this.getTElementBoundingBox(e);this.initializeCoordinates(),this.adjustChildCoordinatesRecursive(e);var i=null;return this.children.forEach((s,c)=>{var h=this.getChildBoundingBox(e,this,this,c);i?i.addBoundingBox(h):i=h}),i}getFontSize(){var{document:e,parent:i}=this,s=_s.parse(e.ctx.font).fontSize,c=i.getStyle("font-size").getNumber(s);return c}getTElementBoundingBox(e){var i=this.getFontSize();return new qa(this.x,this.y-i,this.x+this.measureText(e),this.y)}getGlyph(e,i,s){var c=i[s],h=null;if(e.isArabic){var d=i.length,A=i[s-1],v=i[s+1],C="isolated";if((s===0||A===" ")&&s<d-1&&v!==" "&&(C="terminal"),s>0&&A!==" "&&s<d-1&&v!==" "&&(C="medial"),s>0&&A!==" "&&(s===d-1||v===" ")&&(C="initial"),typeof e.glyphs[c]<"u"){var I=e.glyphs[c];h=I instanceof ny?I:I[C]}}else h=e.glyphs[c];return h||(h=e.missingGlyph),h}getText(){return""}getTextFromNode(e){var i=e||this.node,s=Array.from(i.parentNode.childNodes),c=s.indexOf(i),h=s.length-1,d=kc(i.textContent||"");return c===0&&(d=NB(d)),c===h&&(d=OB(d)),d}renderChildren(e){if(this.type!=="text"){this.renderTElementChildren(e);return}this.initializeCoordinates(),this.adjustChildCoordinatesRecursive(e),this.children.forEach((s,c)=>{this.renderChild(e,this,this,c)});var{mouse:i}=this.document.screen;i.isWorking()&&i.checkBoundingBox(this,this.getBoundingBox(e))}renderTElementChildren(e){var{document:i,parent:s}=this,c=this.getText(),h=s.getStyle("font-family").getDefinition();if(h){for(var{unitsPerEm:d}=h.fontFace,A=_s.parse(i.ctx.font),v=s.getStyle("font-size").getNumber(A.fontSize),C=s.getStyle("font-style").getString(A.fontStyle),I=v/d,T=h.isRTL?c.split("").reverse().join(""):c,P=sa(s.getAttribute("dx").getString()),U=T.length,V=0;V<U;V++){var R=this.getGlyph(h,T,V);e.translate(this.x,this.y),e.scale(I,-I);var Z=e.lineWidth;e.lineWidth=e.lineWidth*d/v,C==="italic"&&e.transform(1,0,.4,1,0,0),R.render(e),C==="italic"&&e.transform(1,0,-.4,1,0,0),e.lineWidth=Z,e.scale(1/I,-1/I),e.translate(-this.x,-this.y),this.x+=v*(R.horizAdvX||h.horizAdvX)/d,typeof P[V]<"u"&&!isNaN(P[V])&&(this.x+=P[V])}return}var{x:K,y:tt}=this;e.fillStyle&&e.fillText(c,K,tt),e.strokeStyle&&e.strokeText(c,K,tt)}applyAnchoring(){if(!(this.textChunkStart>=this.leafTexts.length)){var e=this.leafTexts[this.textChunkStart],i=e.getStyle("text-anchor").getString("start"),s=!1,c=0;i==="start"&&!s||i==="end"&&s?c=e.x-this.minX:i==="end"&&!s||i==="start"&&s?c=e.x-this.maxX:c=e.x-(this.minX+this.maxX)/2;for(var h=this.textChunkStart;h<this.leafTexts.length;h++)this.leafTexts[h].x+=c;this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.textChunkStart=this.leafTexts.length}}adjustChildCoordinatesRecursive(e){this.children.forEach((i,s)=>{this.adjustChildCoordinatesRecursiveCore(e,this,this,s)}),this.applyAnchoring()}adjustChildCoordinatesRecursiveCore(e,i,s,c){var h=s.children[c];h.children.length>0?h.children.forEach((d,A)=>{i.adjustChildCoordinatesRecursiveCore(e,i,h,A)}):this.adjustChildCoordinates(e,i,s,c)}adjustChildCoordinates(e,i,s,c){var h=s.children[c];if(typeof h.measureText!="function")return h;e.save(),h.setContext(e,!0);var d=h.getAttribute("x"),A=h.getAttribute("y"),v=h.getAttribute("dx"),C=h.getAttribute("dy"),I=h.getStyle("font-family").getDefinition(),T=!!I&&I.isRTL;c===0&&(d.hasValue()||d.setValue(h.getInheritedAttribute("x")),A.hasValue()||A.setValue(h.getInheritedAttribute("y")),v.hasValue()||v.setValue(h.getInheritedAttribute("dx")),C.hasValue()||C.setValue(h.getInheritedAttribute("dy")));var P=h.measureText(e);return T&&(i.x-=P),d.hasValue()?(i.applyAnchoring(),h.x=d.getPixels("x"),v.hasValue()&&(h.x+=v.getPixels("x"))):(v.hasValue()&&(i.x+=v.getPixels("x")),h.x=i.x),i.x=h.x,T||(i.x+=P),A.hasValue()?(h.y=A.getPixels("y"),C.hasValue()&&(h.y+=C.getPixels("y"))):(C.hasValue()&&(i.y+=C.getPixels("y")),h.y=i.y),i.y=h.y,i.leafTexts.push(h),i.minX=Math.min(i.minX,h.x,h.x+P),i.maxX=Math.max(i.maxX,h.x,h.x+P),h.clearContext(e),e.restore(),h}getChildBoundingBox(e,i,s,c){var h=s.children[c];if(typeof h.getBoundingBox!="function")return null;var d=h.getBoundingBox(e);return d?(h.children.forEach((A,v)=>{var C=i.getChildBoundingBox(e,i,h,v);d.addBoundingBox(C)}),d):null}renderChild(e,i,s,c){var h=s.children[c];h.render(e),h.children.forEach((d,A)=>{i.renderChild(e,i,h,A)})}measureText(e){var{measureCache:i}=this;if(~i)return i;var s=this.getText(),c=this.measureTargetText(e,s);return this.measureCache=c,c}measureTargetText(e,i){if(!i.length)return 0;var{parent:s}=this,c=s.getStyle("font-family").getDefinition();if(c){for(var h=this.getFontSize(),d=c.isRTL?i.split("").reverse().join(""):i,A=sa(s.getAttribute("dx").getString()),v=d.length,C=0,I=0;I<v;I++){var T=this.getGlyph(c,d,I);C+=(T.horizAdvX||c.horizAdvX)*h/c.fontFace.unitsPerEm,typeof A[I]<"u"&&!isNaN(A[I])&&(C+=A[I])}return C}if(!e.measureText)return i.length*10;e.save(),this.setContext(e,!0);var{width:P}=e.measureText(i);return this.clearContext(e),e.restore(),P}getInheritedAttribute(e){for(var i=this;i instanceof il&&i.isFirstChild();){var s=i.parent.getAttribute(e);if(s.hasValue(!0))return s.getValue("0");i=i.parent}return null}}class hd extends il{constructor(e,i,s){super(e,i,new.target===hd?!0:s),this.type="tspan",this.text=this.children.length>0?"":this.getTextFromNode()}getText(){return this.text}}class d7 extends hd{constructor(){super(...arguments),this.type="textNode"}}class Gu extends Zl{constructor(){super(...arguments),this.type="svg",this.root=!1}setContext(e){var i,{document:s}=this,{screen:c,window:h}=s,d=e.canvas;if(c.setDefaults(e),d.style&&typeof e.font<"u"&&h&&typeof h.getComputedStyle<"u"){e.font=h.getComputedStyle(d).getPropertyValue("font");var A=new vr(s,"fontSize",_s.parse(e.font).fontSize);A.hasValue()&&(s.rootEmSize=A.getPixels("y"),s.emSize=s.rootEmSize)}this.getAttribute("x").hasValue()||this.getAttribute("x",!0).setValue(0),this.getAttribute("y").hasValue()||this.getAttribute("y",!0).setValue(0);var{width:v,height:C}=c.viewPort;this.getStyle("width").hasValue()||this.getStyle("width",!0).setValue("100%"),this.getStyle("height").hasValue()||this.getStyle("height",!0).setValue("100%"),this.getStyle("color").hasValue()||this.getStyle("color",!0).setValue("black");var I=this.getAttribute("refX"),T=this.getAttribute("refY"),P=this.getAttribute("viewBox"),U=P.hasValue()?sa(P.getString()):null,V=!this.root&&this.getStyle("overflow").getValue("hidden")!=="visible",R=0,Z=0,K=0,tt=0;U&&(R=U[0],Z=U[1]),this.root||(v=this.getStyle("width").getPixels("x"),C=this.getStyle("height").getPixels("y"),this.type==="marker"&&(K=R,tt=Z,R=0,Z=0)),c.viewPort.setCurrent(v,C),this.node&&(!this.parent||((i=this.node.parentNode)===null||i===void 0?void 0:i.nodeName)==="foreignObject")&&this.getStyle("transform",!1,!0).hasValue()&&!this.getStyle("transform-origin",!1,!0).hasValue()&&this.getStyle("transform-origin",!0,!0).setValue("50% 50%"),super.setContext(e),e.translate(this.getAttribute("x").getPixels("x"),this.getAttribute("y").getPixels("y")),U&&(v=U[2],C=U[3]),s.setViewBox({ctx:e,aspectRatio:this.getAttribute("preserveAspectRatio").getString(),width:c.viewPort.width,desiredWidth:v,height:c.viewPort.height,desiredHeight:C,minX:R,minY:Z,refX:I.getValue(),refY:T.getValue(),clip:V,clipX:K,clipY:tt}),U&&(c.viewPort.removeCurrent(),c.viewPort.setCurrent(v,C))}clearContext(e){super.clearContext(e),this.document.screen.viewPort.removeCurrent()}resize(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,c=this.getAttribute("width",!0),h=this.getAttribute("height",!0),d=this.getAttribute("viewBox"),A=this.getAttribute("style"),v=c.getNumber(0),C=h.getNumber(0);if(s)if(typeof s=="string")this.getAttribute("preserveAspectRatio",!0).setValue(s);else{var I=this.getAttribute("preserveAspectRatio");I.hasValue()&&I.setValue(I.getString().replace(/^\s*(\S.*\S)\s*$/,"$1"))}if(c.setValue(e),h.setValue(i),d.hasValue()||d.setValue("0 0 ".concat(v||e," ").concat(C||i)),A.hasValue()){var T=this.getStyle("width"),P=this.getStyle("height");T.hasValue()&&T.setValue("".concat(e,"px")),P.hasValue()&&P.setValue("".concat(i,"px"))}}}class sy extends pi{constructor(){super(...arguments),this.type="rect"}path(e){var i=this.getAttribute("x").getPixels("x"),s=this.getAttribute("y").getPixels("y"),c=this.getStyle("width",!1,!0).getPixels("x"),h=this.getStyle("height",!1,!0).getPixels("y"),d=this.getAttribute("rx"),A=this.getAttribute("ry"),v=d.getPixels("x"),C=A.getPixels("y");if(d.hasValue()&&!A.hasValue()&&(C=v),A.hasValue()&&!d.hasValue()&&(v=C),v=Math.min(v,c/2),C=Math.min(C,h/2),e){var I=4*((Math.sqrt(2)-1)/3);e.beginPath(),h>0&&c>0&&(e.moveTo(i+v,s),e.lineTo(i+c-v,s),e.bezierCurveTo(i+c-v+I*v,s,i+c,s+C-I*C,i+c,s+C),e.lineTo(i+c,s+h-C),e.bezierCurveTo(i+c,s+h-C+I*C,i+c-v+I*v,s+h,i+c-v,s+h),e.lineTo(i+v,s+h),e.bezierCurveTo(i+v-I*v,s+h,i,s+h-C+I*C,i,s+h-C),e.lineTo(i,s+C),e.bezierCurveTo(i,s+C-I*C,i+v-I*v,s,i+v,s),e.closePath())}return new qa(i,s,i+c,s+h)}getMarkers(){return null}}class JB extends pi{constructor(){super(...arguments),this.type="circle"}path(e){var i=this.getAttribute("cx").getPixels("x"),s=this.getAttribute("cy").getPixels("y"),c=this.getAttribute("r").getPixels();return e&&c>0&&(e.beginPath(),e.arc(i,s,c,0,Math.PI*2,!1),e.closePath()),new qa(i-c,s-c,i+c,s+c)}getMarkers(){return null}}class t5 extends pi{constructor(){super(...arguments),this.type="ellipse"}path(e){var i=4*((Math.sqrt(2)-1)/3),s=this.getAttribute("rx").getPixels("x"),c=this.getAttribute("ry").getPixels("y"),h=this.getAttribute("cx").getPixels("x"),d=this.getAttribute("cy").getPixels("y");return e&&s>0&&c>0&&(e.beginPath(),e.moveTo(h+s,d),e.bezierCurveTo(h+s,d+i*c,h+i*s,d+c,h,d+c),e.bezierCurveTo(h-i*s,d+c,h-s,d+i*c,h-s,d),e.bezierCurveTo(h-s,d-i*c,h-i*s,d-c,h,d-c),e.bezierCurveTo(h+i*s,d-c,h+s,d-i*c,h+s,d),e.closePath()),new qa(h-s,d-c,h+s,d+c)}getMarkers(){return null}}class e5 extends pi{constructor(){super(...arguments),this.type="line"}getPoints(){return[new tn(this.getAttribute("x1").getPixels("x"),this.getAttribute("y1").getPixels("y")),new tn(this.getAttribute("x2").getPixels("x"),this.getAttribute("y2").getPixels("y"))]}path(e){var[{x:i,y:s},{x:c,y:h}]=this.getPoints();return e&&(e.beginPath(),e.moveTo(i,s),e.lineTo(c,h)),new qa(i,s,c,h)}getMarkers(){var[e,i]=this.getPoints(),s=e.angleTo(i);return[[e,s],[i,s]]}}class ay extends pi{constructor(e,i,s){super(e,i,s),this.type="polyline",this.points=[],this.points=tn.parsePath(this.getAttribute("points").getString())}path(e){var{points:i}=this,[{x:s,y:c}]=i,h=new qa(s,c);return e&&(e.beginPath(),e.moveTo(s,c)),i.forEach(d=>{var{x:A,y:v}=d;h.addPoint(A,v),e&&e.lineTo(A,v)}),h}getMarkers(){var{points:e}=this,i=e.length-1,s=[];return e.forEach((c,h)=>{h!==i&&s.push([c,c.angleTo(e[h+1])])}),s.length>0&&s.push([e[e.length-1],s[s.length-1][1]]),s}}class r5 extends ay{constructor(){super(...arguments),this.type="polygon"}path(e){var i=super.path(e),[{x:s,y:c}]=this.points;return e&&(e.lineTo(s,c),e.closePath()),i}}class i5 extends Pi{constructor(){super(...arguments),this.type="pattern"}createPattern(e,i,s){var c=this.getStyle("width").getPixels("x",!0),h=this.getStyle("height").getPixels("y",!0),d=new Gu(this.document,null);d.attributes.viewBox=new vr(this.document,"viewBox",this.getAttribute("viewBox").getValue()),d.attributes.width=new vr(this.document,"width","".concat(c,"px")),d.attributes.height=new vr(this.document,"height","".concat(h,"px")),d.attributes.transform=new vr(this.document,"transform",this.getAttribute("patternTransform").getValue()),d.children=this.children;var A=this.document.createCanvas(c,h),v=A.getContext("2d"),C=this.getAttribute("x"),I=this.getAttribute("y");C.hasValue()&&I.hasValue()&&v.translate(C.getPixels("x",!0),I.getPixels("y",!0)),s.hasValue()?this.styles["fill-opacity"]=s:Reflect.deleteProperty(this.styles,"fill-opacity");for(var T=-1;T<=1;T++)for(var P=-1;P<=1;P++)v.save(),d.attributes.x=new vr(this.document,"x",T*A.width),d.attributes.y=new vr(this.document,"y",P*A.height),d.render(v),v.restore();var U=e.createPattern(A,"repeat");return U}}class n5 extends Pi{constructor(){super(...arguments),this.type="marker"}render(e,i,s){if(i){var{x:c,y:h}=i,d=this.getAttribute("orient").getString("auto"),A=this.getAttribute("markerUnits").getString("strokeWidth");e.translate(c,h),d==="auto"&&e.rotate(s),A==="strokeWidth"&&e.scale(e.lineWidth,e.lineWidth),e.save();var v=new Gu(this.document,null);v.type=this.type,v.attributes.viewBox=new vr(this.document,"viewBox",this.getAttribute("viewBox").getValue()),v.attributes.refX=new vr(this.document,"refX",this.getAttribute("refX").getValue()),v.attributes.refY=new vr(this.document,"refY",this.getAttribute("refY").getValue()),v.attributes.width=new vr(this.document,"width",this.getAttribute("markerWidth").getValue()),v.attributes.height=new vr(this.document,"height",this.getAttribute("markerHeight").getValue()),v.attributes.overflow=new vr(this.document,"overflow",this.getAttribute("overflow").getValue()),v.attributes.fill=new vr(this.document,"fill",this.getAttribute("fill").getColor("black")),v.attributes.stroke=new vr(this.document,"stroke",this.getAttribute("stroke").getValue("none")),v.children=this.children,v.render(e),e.restore(),A==="strokeWidth"&&e.scale(1/e.lineWidth,1/e.lineWidth),d==="auto"&&e.rotate(-s),e.translate(-c,-h)}}}class s5 extends Pi{constructor(){super(...arguments),this.type="defs"}render(){}}class Kf extends Zl{constructor(){super(...arguments),this.type="g"}getBoundingBox(e){var i=new qa;return this.children.forEach(s=>{i.addBoundingBox(s.getBoundingBox(e))}),i}}class oy extends Pi{constructor(e,i,s){super(e,i,s),this.attributesToInherit=["gradientUnits"],this.stops=[];var{stops:c,children:h}=this;h.forEach(d=>{d.type==="stop"&&c.push(d)})}getGradientUnits(){return this.getAttribute("gradientUnits").getString("objectBoundingBox")}createGradient(e,i,s){var c=this;this.getHrefAttribute().hasValue()&&(c=this.getHrefAttribute().getDefinition(),this.inheritStopContainer(c));var{stops:h}=c,d=this.getGradient(e,i);if(!d)return this.addParentOpacity(s,h[h.length-1].color);if(h.forEach(Z=>{d.addColorStop(Z.offset,this.addParentOpacity(s,Z.color))}),this.getAttribute("gradientTransform").hasValue()){var{document:A}=this,{MAX_VIRTUAL_PIXELS:v,viewPort:C}=A.screen,[I]=C.viewPorts,T=new sy(A,null);T.attributes.x=new vr(A,"x",-v/3),T.attributes.y=new vr(A,"y",-v/3),T.attributes.width=new vr(A,"width",v),T.attributes.height=new vr(A,"height",v);var P=new Kf(A,null);P.attributes.transform=new vr(A,"transform",this.getAttribute("gradientTransform").getValue()),P.children=[T];var U=new Gu(A,null);U.attributes.x=new vr(A,"x",0),U.attributes.y=new vr(A,"y",0),U.attributes.width=new vr(A,"width",I.width),U.attributes.height=new vr(A,"height",I.height),U.children=[P];var V=A.createCanvas(I.width,I.height),R=V.getContext("2d");return R.fillStyle=d,U.render(R),R.createPattern(V,"no-repeat")}return d}inheritStopContainer(e){this.attributesToInherit.forEach(i=>{!this.getAttribute(i).hasValue()&&e.getAttribute(i).hasValue()&&this.getAttribute(i,!0).setValue(e.getAttribute(i).getValue())})}addParentOpacity(e,i){if(e.hasValue()){var s=new vr(this.document,"color",i);return s.addOpacity(e).getColor()}return i}}class a5 extends oy{constructor(e,i,s){super(e,i,s),this.type="linearGradient",this.attributesToInherit.push("x1","y1","x2","y2")}getGradient(e,i){var s=this.getGradientUnits()==="objectBoundingBox",c=s?i.getBoundingBox(e):null;if(s&&!c)return null;!this.getAttribute("x1").hasValue()&&!this.getAttribute("y1").hasValue()&&!this.getAttribute("x2").hasValue()&&!this.getAttribute("y2").hasValue()&&(this.getAttribute("x1",!0).setValue(0),this.getAttribute("y1",!0).setValue(0),this.getAttribute("x2",!0).setValue(1),this.getAttribute("y2",!0).setValue(0));var h=s?c.x+c.width*this.getAttribute("x1").getNumber():this.getAttribute("x1").getPixels("x"),d=s?c.y+c.height*this.getAttribute("y1").getNumber():this.getAttribute("y1").getPixels("y"),A=s?c.x+c.width*this.getAttribute("x2").getNumber():this.getAttribute("x2").getPixels("x"),v=s?c.y+c.height*this.getAttribute("y2").getNumber():this.getAttribute("y2").getPixels("y");return h===A&&d===v?null:e.createLinearGradient(h,d,A,v)}}class o5 extends oy{constructor(e,i,s){super(e,i,s),this.type="radialGradient",this.attributesToInherit.push("cx","cy","r","fx","fy","fr")}getGradient(e,i){var s=this.getGradientUnits()==="objectBoundingBox",c=i.getBoundingBox(e);if(s&&!c)return null;this.getAttribute("cx").hasValue()||this.getAttribute("cx",!0).setValue("50%"),this.getAttribute("cy").hasValue()||this.getAttribute("cy",!0).setValue("50%"),this.getAttribute("r").hasValue()||this.getAttribute("r",!0).setValue("50%");var h=s?c.x+c.width*this.getAttribute("cx").getNumber():this.getAttribute("cx").getPixels("x"),d=s?c.y+c.height*this.getAttribute("cy").getNumber():this.getAttribute("cy").getPixels("y"),A=h,v=d;this.getAttribute("fx").hasValue()&&(A=s?c.x+c.width*this.getAttribute("fx").getNumber():this.getAttribute("fx").getPixels("x")),this.getAttribute("fy").hasValue()&&(v=s?c.y+c.height*this.getAttribute("fy").getNumber():this.getAttribute("fy").getPixels("y"));var C=s?(c.width+c.height)/2*this.getAttribute("r").getNumber():this.getAttribute("r").getPixels(),I=this.getAttribute("fr").getPixels();return e.createRadialGradient(A,v,I,h,d,C)}}class A5 extends Pi{constructor(e,i,s){super(e,i,s),this.type="stop";var c=Math.max(0,Math.min(1,this.getAttribute("offset").getNumber())),h=this.getStyle("stop-opacity"),d=this.getStyle("stop-color",!0);d.getString()===""&&d.setValue("#000"),h.hasValue()&&(d=d.addOpacity(h)),this.offset=c,this.color=d.getColor()}}class $f extends Pi{constructor(e,i,s){super(e,i,s),this.type="animate",this.duration=0,this.initialValue=null,this.initialUnits="",this.removed=!1,this.frozen=!1,e.screen.animations.push(this),this.begin=this.getAttribute("begin").getMilliseconds(),this.maxDuration=this.begin+this.getAttribute("dur").getMilliseconds(),this.from=this.getAttribute("from"),this.to=this.getAttribute("to"),this.values=new vr(e,"values",null);var c=this.getAttribute("values");c.hasValue()&&this.values.setValue(c.getString().split(";"))}getProperty(){var e=this.getAttribute("attributeType").getString(),i=this.getAttribute("attributeName").getString();return e==="CSS"?this.parent.getStyle(i,!0):this.parent.getAttribute(i,!0)}calcValue(){var{initialUnits:e}=this,{progress:i,from:s,to:c}=this.getProgress(),h=s.getNumber()+(c.getNumber()-s.getNumber())*i;return e==="%"&&(h*=100),"".concat(h).concat(e)}update(e){var{parent:i}=this,s=this.getProperty();if(this.initialValue||(this.initialValue=s.getString(),this.initialUnits=s.getUnits()),this.duration>this.maxDuration){var c=this.getAttribute("fill").getString("remove");if(this.getAttribute("repeatCount").getString()==="indefinite"||this.getAttribute("repeatDur").getString()==="indefinite")this.duration=0;else if(c==="freeze"&&!this.frozen)this.frozen=!0,i.animationFrozen=!0,i.animationFrozenValue=s.getString();else if(c==="remove"&&!this.removed)return this.removed=!0,s.setValue(i.animationFrozen?i.animationFrozenValue:this.initialValue),!0;return!1}this.duration+=e;var h=!1;if(this.begin<this.duration){var d=this.calcValue(),A=this.getAttribute("type");if(A.hasValue()){var v=A.getString();d="".concat(v,"(").concat(d,")")}s.setValue(d),h=!0}return h}getProgress(){var{document:e,values:i}=this,s={progress:(this.duration-this.begin)/(this.maxDuration-this.begin)};if(i.hasValue()){var c=s.progress*(i.getValue().length-1),h=Math.floor(c),d=Math.ceil(c);s.from=new vr(e,"from",parseFloat(i.getValue()[h])),s.to=new vr(e,"to",parseFloat(i.getValue()[d])),s.progress=(c-h)/(d-h)}else s.from=this.from,s.to=this.to;return s}}class l5 extends $f{constructor(){super(...arguments),this.type="animateColor"}calcValue(){var{progress:e,from:i,to:s}=this.getProgress(),c=new z1(i.getColor()),h=new z1(s.getColor());if(c.ok&&h.ok){var d=c.r+(h.r-c.r)*e,A=c.g+(h.g-c.g)*e,v=c.b+(h.b-c.b)*e;return"rgb(".concat(Math.floor(d),", ").concat(Math.floor(A),", ").concat(Math.floor(v),")")}return this.getAttribute("from").getColor()}}class c5 extends $f{constructor(){super(...arguments),this.type="animateTransform"}calcValue(){var{progress:e,from:i,to:s}=this.getProgress(),c=sa(i.getString()),h=sa(s.getString()),d=c.map((A,v)=>{var C=h[v];return A+(C-A)*e}).join(" ");return d}}class u5 extends Pi{constructor(e,i,s){super(e,i,s),this.type="font",this.glyphs={},this.horizAdvX=this.getAttribute("horiz-adv-x").getNumber();var{definitions:c}=e,{children:h}=this;for(var d of h)switch(d.type){case"font-face":{this.fontFace=d;var A=d.getStyle("font-family");A.hasValue()&&(c[A.getString()]=this);break}case"missing-glyph":this.missingGlyph=d;break;case"glyph":{var v=d;v.arabicForm?(this.isRTL=!0,this.isArabic=!0,typeof this.glyphs[v.unicode]>"u"&&(this.glyphs[v.unicode]={}),this.glyphs[v.unicode][v.arabicForm]=v):this.glyphs[v.unicode]=v;break}}}render(){}}class h5 extends Pi{constructor(e,i,s){super(e,i,s),this.type="font-face",this.ascent=this.getAttribute("ascent").getNumber(),this.descent=this.getAttribute("descent").getNumber(),this.unitsPerEm=this.getAttribute("units-per-em").getNumber()}}class d5 extends pi{constructor(){super(...arguments),this.type="missing-glyph",this.horizAdvX=0}}class p5 extends il{constructor(){super(...arguments),this.type="tref"}getText(){var e=this.getHrefAttribute().getDefinition();if(e){var i=e.children[0];if(i)return i.getText()}return""}}class f5 extends il{constructor(e,i,s){super(e,i,s),this.type="a";var{childNodes:c}=i,h=c[0],d=c.length>0&&Array.from(c).every(A=>A.nodeType===3);this.hasText=d,this.text=d?this.getTextFromNode(h):""}getText(){return this.text}renderChildren(e){if(this.hasText){super.renderChildren(e);var{document:i,x:s,y:c}=this,{mouse:h}=i.screen,d=new vr(i,"fontSize",_s.parse(i.ctx.font).fontSize);h.isWorking()&&h.checkBoundingBox(this,new qa(s,c-d.getPixels("y"),s+this.measureText(e),c))}else if(this.children.length>0){var A=new Kf(this.document,null);A.children=this.children,A.parent=this,A.render(e)}}onClick(){var{window:e}=this.document;e&&e.open(this.getHrefAttribute().getString())}onMouseMove(){var e=this.document.ctx;e.canvas.style.cursor="pointer"}}function g5(n,e){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);e&&(s=s.filter(function(c){return Object.getOwnPropertyDescriptor(n,c).enumerable})),i.push.apply(i,s)}return i}function Gf(n){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?g5(Object(i),!0).forEach(function(s){P1(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):g5(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}class m5 extends il{constructor(e,i,s){super(e,i,s),this.type="textPath",this.textWidth=0,this.textHeight=0,this.pathLength=-1,this.glyphInfo=null,this.letterSpacingCache=[],this.measuresCache=new Map([["",0]]);var c=this.getHrefAttribute().getDefinition();this.text=this.getTextFromNode(),this.dataArray=this.parsePathData(c)}getText(){return this.text}path(e){var{dataArray:i}=this;e&&e.beginPath(),i.forEach(s=>{var{type:c,points:h}=s;switch(c){case Rr.LINE_TO:e&&e.lineTo(h[0],h[1]);break;case Rr.MOVE_TO:e&&e.moveTo(h[0],h[1]);break;case Rr.CURVE_TO:e&&e.bezierCurveTo(h[0],h[1],h[2],h[3],h[4],h[5]);break;case Rr.QUAD_TO:e&&e.quadraticCurveTo(h[0],h[1],h[2],h[3]);break;case Rr.ARC:{var[d,A,v,C,I,T,P,U]=h,V=v>C?v:C,R=v>C?1:v/C,Z=v>C?C/v:1;e&&(e.translate(d,A),e.rotate(P),e.scale(R,Z),e.arc(0,0,V,I,I+T,!!(1-U)),e.scale(1/R,1/Z),e.rotate(-P),e.translate(-d,-A));break}case Rr.CLOSE_PATH:e&&e.closePath();break}})}renderChildren(e){this.setTextData(e),e.save();var i=this.parent.getStyle("text-decoration").getString(),s=this.getFontSize(),{glyphInfo:c}=this,h=e.fillStyle;i==="underline"&&e.beginPath(),c.forEach((d,A)=>{var{p0:v,p1:C,rotation:I,text:T}=d;e.save(),e.translate(v.x,v.y),e.rotate(I),e.fillStyle&&e.fillText(T,0,0),e.strokeStyle&&e.strokeText(T,0,0),e.restore(),i==="underline"&&(A===0&&e.moveTo(v.x,v.y+s/8),e.lineTo(C.x,C.y+s/5))}),i==="underline"&&(e.lineWidth=s/20,e.strokeStyle=h,e.stroke(),e.closePath()),e.restore()}getLetterSpacingAt(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.letterSpacingCache[e]||0}findSegmentToFitChar(e,i,s,c,h,d,A,v,C){var I=d,T=this.measureText(e,v);v===" "&&i==="justify"&&s<c&&(T+=(c-s)/h),C>-1&&(I+=this.getLetterSpacingAt(C));var P=this.textHeight/20,U=this.getEquidistantPointOnPath(I,P,0),V=this.getEquidistantPointOnPath(I+T,P,0),R={p0:U,p1:V},Z=U&&V?Math.atan2(V.y-U.y,V.x-U.x):0;if(A){var K=Math.cos(Math.PI/2+Z)*A,tt=Math.cos(-Z)*A;R.p0=Gf(Gf({},U),{},{x:U.x+K,y:U.y+tt}),R.p1=Gf(Gf({},V),{},{x:V.x+K,y:V.y+tt})}return I+=T,{offset:I,segment:R,rotation:Z}}measureText(e,i){var{measuresCache:s}=this,c=i||this.getText();if(s.has(c))return s.get(c);var h=this.measureTargetText(e,c);return s.set(c,h),h}setTextData(e){if(!this.glyphInfo){var i=this.getText(),s=i.split(""),c=i.split(" ").length-1,h=this.parent.getAttribute("dx").split().map(Bt=>Bt.getPixels("x")),d=this.parent.getAttribute("dy").getPixels("y"),A=this.parent.getStyle("text-anchor").getString("start"),v=this.getStyle("letter-spacing"),C=this.parent.getStyle("letter-spacing"),I=0;!v.hasValue()||v.getValue()==="inherit"?I=C.getPixels():v.hasValue()&&v.getValue()!=="initial"&&v.getValue()!=="unset"&&(I=v.getPixels());var T=[],P=i.length;this.letterSpacingCache=T;for(var U=0;U<P;U++)T.push(typeof h[U]<"u"?h[U]:I);var V=T.reduce((Bt,Lt,Ut)=>Ut===0?0:Bt+Lt||0,0),R=this.measureText(e),Z=Math.max(R+V,0);this.textWidth=R,this.textHeight=this.getFontSize(),this.glyphInfo=[];var K=this.getPathLength(),tt=this.getStyle("startOffset").getNumber(0)*K,ht=0;(A==="middle"||A==="center")&&(ht=-Z/2),(A==="end"||A==="right")&&(ht=-Z),ht+=tt,s.forEach((Bt,Lt)=>{var{offset:Ut,segment:xt,rotation:pt}=this.findSegmentToFitChar(e,A,Z,K,c,ht,d,Bt,Lt);ht=Ut,!(!xt.p0||!xt.p1)&&this.glyphInfo.push({text:s[Lt],p0:xt.p0,p1:xt.p1,rotation:pt})})}}parsePathData(e){if(this.pathLength=-1,!e)return[];var i=[],{pathParser:s}=e;for(s.reset();!s.isEnd();){var{current:c}=s,h=c?c.x:0,d=c?c.y:0,A=s.next(),v=A.type,C=[];switch(A.type){case Rr.MOVE_TO:this.pathM(s,C);break;case Rr.LINE_TO:v=this.pathL(s,C);break;case Rr.HORIZ_LINE_TO:v=this.pathH(s,C);break;case Rr.VERT_LINE_TO:v=this.pathV(s,C);break;case Rr.CURVE_TO:this.pathC(s,C);break;case Rr.SMOOTH_CURVE_TO:v=this.pathS(s,C);break;case Rr.QUAD_TO:this.pathQ(s,C);break;case Rr.SMOOTH_QUAD_TO:v=this.pathT(s,C);break;case Rr.ARC:C=this.pathA(s);break;case Rr.CLOSE_PATH:pi.pathZ(s);break}A.type!==Rr.CLOSE_PATH?i.push({type:v,points:C,start:{x:h,y:d},pathLength:this.calcLength(h,d,v,C)}):i.push({type:Rr.CLOSE_PATH,points:[],pathLength:0})}return i}pathM(e,i){var{x:s,y:c}=pi.pathM(e).point;i.push(s,c)}pathL(e,i){var{x:s,y:c}=pi.pathL(e).point;return i.push(s,c),Rr.LINE_TO}pathH(e,i){var{x:s,y:c}=pi.pathH(e).point;return i.push(s,c),Rr.LINE_TO}pathV(e,i){var{x:s,y:c}=pi.pathV(e).point;return i.push(s,c),Rr.LINE_TO}pathC(e,i){var{point:s,controlPoint:c,currentPoint:h}=pi.pathC(e);i.push(s.x,s.y,c.x,c.y,h.x,h.y)}pathS(e,i){var{point:s,controlPoint:c,currentPoint:h}=pi.pathS(e);return i.push(s.x,s.y,c.x,c.y,h.x,h.y),Rr.CURVE_TO}pathQ(e,i){var{controlPoint:s,currentPoint:c}=pi.pathQ(e);i.push(s.x,s.y,c.x,c.y)}pathT(e,i){var{controlPoint:s,currentPoint:c}=pi.pathT(e);return i.push(s.x,s.y,c.x,c.y),Rr.QUAD_TO}pathA(e){var{rX:i,rY:s,sweepFlag:c,xAxisRotation:h,centp:d,a1:A,ad:v}=pi.pathA(e);return c===0&&v>0&&(v-=2*Math.PI),c===1&&v<0&&(v+=2*Math.PI),[d.x,d.y,i,s,A,v,h,c]}calcLength(e,i,s,c){var h=0,d=null,A=null,v=0;switch(s){case Rr.LINE_TO:return this.getLineLength(e,i,c[0],c[1]);case Rr.CURVE_TO:for(h=0,d=this.getPointOnCubicBezier(0,e,i,c[0],c[1],c[2],c[3],c[4],c[5]),v=.01;v<=1;v+=.01)A=this.getPointOnCubicBezier(v,e,i,c[0],c[1],c[2],c[3],c[4],c[5]),h+=this.getLineLength(d.x,d.y,A.x,A.y),d=A;return h;case Rr.QUAD_TO:for(h=0,d=this.getPointOnQuadraticBezier(0,e,i,c[0],c[1],c[2],c[3]),v=.01;v<=1;v+=.01)A=this.getPointOnQuadraticBezier(v,e,i,c[0],c[1],c[2],c[3]),h+=this.getLineLength(d.x,d.y,A.x,A.y),d=A;return h;case Rr.ARC:{h=0;var C=c[4],I=c[5],T=c[4]+I,P=Math.PI/180;if(Math.abs(C-T)<P&&(P=Math.abs(C-T)),d=this.getPointOnEllipticalArc(c[0],c[1],c[2],c[3],C,0),I<0)for(v=C-P;v>T;v-=P)A=this.getPointOnEllipticalArc(c[0],c[1],c[2],c[3],v,0),h+=this.getLineLength(d.x,d.y,A.x,A.y),d=A;else for(v=C+P;v<T;v+=P)A=this.getPointOnEllipticalArc(c[0],c[1],c[2],c[3],v,0),h+=this.getLineLength(d.x,d.y,A.x,A.y),d=A;return A=this.getPointOnEllipticalArc(c[0],c[1],c[2],c[3],T,0),h+=this.getLineLength(d.x,d.y,A.x,A.y),h}}return 0}getPointOnLine(e,i,s,c,h){var d=arguments.length>5&&arguments[5]!==void 0?arguments[5]:i,A=arguments.length>6&&arguments[6]!==void 0?arguments[6]:s,v=(h-s)/(c-i+Dc),C=Math.sqrt(e*e/(1+v*v));c<i&&(C*=-1);var I=v*C,T=null;if(c===i)T={x:d,y:A+I};else if((A-s)/(d-i+Dc)===v)T={x:d+C,y:A+I};else{var P=0,U=0,V=this.getLineLength(i,s,c,h);if(V<Dc)return null;var R=(d-i)*(c-i)+(A-s)*(h-s);R/=V*V,P=i+R*(c-i),U=s+R*(h-s);var Z=this.getLineLength(d,A,P,U),K=Math.sqrt(e*e-Z*Z);C=Math.sqrt(K*K/(1+v*v)),c<i&&(C*=-1),I=v*C,T={x:P+C,y:U+I}}return T}getPointOnPath(e){var i=this.getPathLength(),s=0,c=null;if(e<-5e-5||e-5e-5>i)return null;var{dataArray:h}=this;for(var d of h){if(d&&(d.pathLength<5e-5||s+d.pathLength+5e-5<e)){s+=d.pathLength;continue}var A=e-s,v=0;switch(d.type){case Rr.LINE_TO:c=this.getPointOnLine(A,d.start.x,d.start.y,d.points[0],d.points[1],d.start.x,d.start.y);break;case Rr.ARC:{var C=d.points[4],I=d.points[5],T=d.points[4]+I;if(v=C+A/d.pathLength*I,I<0&&v<T||I>=0&&v>T)break;c=this.getPointOnEllipticalArc(d.points[0],d.points[1],d.points[2],d.points[3],v,d.points[6]);break}case Rr.CURVE_TO:v=A/d.pathLength,v>1&&(v=1),c=this.getPointOnCubicBezier(v,d.start.x,d.start.y,d.points[0],d.points[1],d.points[2],d.points[3],d.points[4],d.points[5]);break;case Rr.QUAD_TO:v=A/d.pathLength,v>1&&(v=1),c=this.getPointOnQuadraticBezier(v,d.start.x,d.start.y,d.points[0],d.points[1],d.points[2],d.points[3]);break}if(c)return c;break}return null}getLineLength(e,i,s,c){return Math.sqrt((s-e)*(s-e)+(c-i)*(c-i))}getPathLength(){return this.pathLength===-1&&(this.pathLength=this.dataArray.reduce((e,i)=>i.pathLength>0?e+i.pathLength:e,0)),this.pathLength}getPointOnCubicBezier(e,i,s,c,h,d,A,v,C){var I=v*X1(e)+d*W1(e)+c*Z1(e)+i*Y1(e),T=C*X1(e)+A*W1(e)+h*Z1(e)+s*Y1(e);return{x:I,y:T}}getPointOnQuadraticBezier(e,i,s,c,h,d,A){var v=d*J1(e)+c*ty(e)+i*ey(e),C=A*J1(e)+h*ty(e)+s*ey(e);return{x:v,y:C}}getPointOnEllipticalArc(e,i,s,c,h,d){var A=Math.cos(d),v=Math.sin(d),C={x:s*Math.cos(h),y:c*Math.sin(h)};return{x:e+(C.x*A-C.y*v),y:i+(C.x*v+C.y*A)}}buildEquidistantCache(e,i){var s=this.getPathLength(),c=i||.25,h=e||s/100;if(!this.equidistantCache||this.equidistantCache.step!==h||this.equidistantCache.precision!==c){this.equidistantCache={step:h,precision:c,points:[]};for(var d=0,A=0;A<=s;A+=c){var v=this.getPointOnPath(A),C=this.getPointOnPath(A+c);!v||!C||(d+=this.getLineLength(v.x,v.y,C.x,C.y),d>=h&&(this.equidistantCache.points.push({x:v.x,y:v.y,distance:A}),d-=h))}}}getEquidistantPointOnPath(e,i,s){if(this.buildEquidistantCache(i,s),e<0||e-this.getPathLength()>5e-5)return null;var c=Math.round(e/this.getPathLength()*(this.equidistantCache.points.length-1));return this.equidistantCache.points[c]||null}}var p7=/^\s*data:(([^/,;]+\/[^/,;]+)(?:;([^,;=]+=[^,;=]+))?)?(?:;(base64))?,(.*)$/i;class y5 extends Zl{constructor(e,i,s){super(e,i,s),this.type="image",this.loaded=!1;var c=this.getHrefAttribute().getString();if(c){var h=c.endsWith(".svg")||/^\s*data:image\/svg\+xml/i.test(c);e.images.push(this),h?this.loadSvg(c):this.loadImage(c),this.isSvg=h}}loadImage(e){var i=this;return tl(function*(){try{var s=yield i.document.createImage(e);i.image=s}catch(c){console.error('Error while loading image "'.concat(e,'":'),c)}i.loaded=!0})()}loadSvg(e){var i=this;return tl(function*(){var s=p7.exec(e);if(s){var c=s[5];s[4]==="base64"?i.image=atob(c):i.image=decodeURIComponent(c)}else try{var h=yield i.document.fetch(e),d=yield h.text();i.image=d}catch(A){console.error('Error while loading image "'.concat(e,'":'),A)}i.loaded=!0})()}renderChildren(e){var{document:i,image:s,loaded:c}=this,h=this.getAttribute("x").getPixels("x"),d=this.getAttribute("y").getPixels("y"),A=this.getStyle("width").getPixels("x"),v=this.getStyle("height").getPixels("y");if(!(!c||!s||!A||!v)){if(e.save(),e.translate(h,d),this.isSvg){var C=i.canvg.forkString(e,this.image,{ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0,ignoreClear:!0,offsetX:0,offsetY:0,scaleWidth:A,scaleHeight:v});C.document.documentElement.parent=this,C.render()}else{var I=this.image;i.setViewBox({ctx:e,aspectRatio:this.getAttribute("preserveAspectRatio").getString(),width:A,desiredWidth:I.width,height:v,desiredHeight:I.height}),this.loaded&&(typeof I.complete>"u"||I.complete)&&e.drawImage(I,0,0)}e.restore()}}getBoundingBox(){var e=this.getAttribute("x").getPixels("x"),i=this.getAttribute("y").getPixels("y"),s=this.getStyle("width").getPixels("x"),c=this.getStyle("height").getPixels("y");return new qa(e,i,e+s,i+c)}}class v5 extends Zl{constructor(){super(...arguments),this.type="symbol"}render(e){}}class w5{constructor(e){this.document=e,this.loaded=!1,e.fonts.push(this)}load(e,i){var s=this;return tl(function*(){try{var{document:c}=s,h=yield c.canvg.parser.load(i),d=h.getElementsByTagName("font");Array.from(d).forEach(A=>{var v=c.createElement(A);c.definitions[e]=v})}catch(A){console.error('Error while loading font "'.concat(i,'":'),A)}s.loaded=!0})()}}class Ay extends Pi{constructor(e,i,s){super(e,i,s),this.type="style";var c=kc(Array.from(i.childNodes).map(d=>d.textContent).join("").replace(/(\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*+\/)|(^[\s]*\/\/.*)/gm,"").replace(/@import.*;/g,"")),h=c.split("}");h.forEach(d=>{var A=d.trim();if(A){var v=A.split("{"),C=v[0].split(","),I=v[1].split(";");C.forEach(T=>{var P=T.trim();if(P){var U=e.styles[P]||{};if(I.forEach(Z=>{var K=Z.indexOf(":"),tt=Z.substr(0,K).trim(),ht=Z.substr(K+1,Z.length-K).trim();tt&&ht&&(U[tt]=new vr(e,tt,ht))}),e.styles[P]=U,e.stylesSpecificity[P]=HB(P),P==="@font-face"){var V=U["font-family"].getString().replace(/"|'/g,""),R=U.src.getString().split(",");R.forEach(Z=>{if(Z.indexOf('format("svg")')>0){var K=$1(Z);K&&new w5(e).load(V,K)}})}}})}})}}Ay.parseExternalUrl=$1;class _5 extends Zl{constructor(){super(...arguments),this.type="use"}setContext(e){super.setContext(e);var i=this.getAttribute("x"),s=this.getAttribute("y");i.hasValue()&&e.translate(i.getPixels("x"),0),s.hasValue()&&e.translate(0,s.getPixels("y"))}path(e){var{element:i}=this;i&&i.path(e)}renderChildren(e){var{document:i,element:s}=this;if(s){var c=s;if(s.type==="symbol"&&(c=new Gu(i,null),c.attributes.viewBox=new vr(i,"viewBox",s.getAttribute("viewBox").getString()),c.attributes.preserveAspectRatio=new vr(i,"preserveAspectRatio",s.getAttribute("preserveAspectRatio").getString()),c.attributes.overflow=new vr(i,"overflow",s.getAttribute("overflow").getString()),c.children=s.children,s.styles.opacity=new vr(i,"opacity",this.calculateOpacity())),c.type==="svg"){var h=this.getStyle("width",!1,!0),d=this.getStyle("height",!1,!0);h.hasValue()&&(c.attributes.width=new vr(i,"width",h.getString())),d.hasValue()&&(c.attributes.height=new vr(i,"height",d.getString()))}var A=c.parent;c.parent=this,c.render(e),c.parent=A}}getBoundingBox(e){var{element:i}=this;return i?i.getBoundingBox(e):null}elementTransform(){var{document:e,element:i}=this;return Wl.fromElement(e,i)}get element(){return this.cachedElement||(this.cachedElement=this.getHrefAttribute().getDefinition()),this.cachedElement}}function qf(n,e,i,s,c,h){return n[i*s*4+e*4+h]}function Xf(n,e,i,s,c,h,d){n[i*s*4+e*4+h]=d}function Bn(n,e,i){var s=n[e];return s*i}function nl(n,e,i,s){return e+Math.cos(n)*i+Math.sin(n)*s}class ly extends Pi{constructor(e,i,s){super(e,i,s),this.type="feColorMatrix";var c=sa(this.getAttribute("values").getString());switch(this.getAttribute("type").getString("matrix")){case"saturate":{var h=c[0];c=[.213+.787*h,.715-.715*h,.072-.072*h,0,0,.213-.213*h,.715+.285*h,.072-.072*h,0,0,.213-.213*h,.715-.715*h,.072+.928*h,0,0,0,0,0,1,0,0,0,0,0,1];break}case"hueRotate":{var d=c[0]*Math.PI/180;c=[nl(d,.213,.787,-.213),nl(d,.715,-.715,-.715),nl(d,.072,-.072,.928),0,0,nl(d,.213,-.213,.143),nl(d,.715,.285,.14),nl(d,.072,-.072,-.283),0,0,nl(d,.213,-.213,-.787),nl(d,.715,-.715,.715),nl(d,.072,.928,.072),0,0,0,0,0,1,0,0,0,0,0,1];break}case"luminanceToAlpha":c=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2125,.7154,.0721,0,0,0,0,0,0,1];break}this.matrix=c,this.includeOpacity=this.getAttribute("includeOpacity").hasValue()}apply(e,i,s,c,h){for(var{includeOpacity:d,matrix:A}=this,v=e.getImageData(0,0,c,h),C=0;C<h;C++)for(var I=0;I<c;I++){var T=qf(v.data,I,C,c,h,0),P=qf(v.data,I,C,c,h,1),U=qf(v.data,I,C,c,h,2),V=qf(v.data,I,C,c,h,3),R=Bn(A,0,T)+Bn(A,1,P)+Bn(A,2,U)+Bn(A,3,V)+Bn(A,4,1),Z=Bn(A,5,T)+Bn(A,6,P)+Bn(A,7,U)+Bn(A,8,V)+Bn(A,9,1),K=Bn(A,10,T)+Bn(A,11,P)+Bn(A,12,U)+Bn(A,13,V)+Bn(A,14,1),tt=Bn(A,15,T)+Bn(A,16,P)+Bn(A,17,U)+Bn(A,18,V)+Bn(A,19,1);d&&(R=0,Z=0,K=0,tt*=V/255),Xf(v.data,I,C,c,h,0,R),Xf(v.data,I,C,c,h,1,Z),Xf(v.data,I,C,c,h,2,K),Xf(v.data,I,C,c,h,3,tt)}e.clearRect(0,0,c,h),e.putImageData(v,0,0)}}class dd extends Pi{constructor(){super(...arguments),this.type="mask"}apply(e,i){var{document:s}=this,c=this.getAttribute("x").getPixels("x"),h=this.getAttribute("y").getPixels("y"),d=this.getStyle("width").getPixels("x"),A=this.getStyle("height").getPixels("y");if(!d&&!A){var v=new qa;this.children.forEach(V=>{v.addBoundingBox(V.getBoundingBox(e))}),c=Math.floor(v.x1),h=Math.floor(v.y1),d=Math.floor(v.width),A=Math.floor(v.height)}var C=this.removeStyles(i,dd.ignoreStyles),I=s.createCanvas(c+d,h+A),T=I.getContext("2d");s.screen.setDefaults(T),this.renderChildren(T),new ly(s,{nodeType:1,childNodes:[],attributes:[{nodeName:"type",value:"luminanceToAlpha"},{nodeName:"includeOpacity",value:"true"}]}).apply(T,0,0,c+d,h+A);var P=s.createCanvas(c+d,h+A),U=P.getContext("2d");s.screen.setDefaults(U),i.render(U),U.globalCompositeOperation="destination-in",U.fillStyle=T.createPattern(I,"no-repeat"),U.fillRect(0,0,c+d,h+A),e.fillStyle=U.createPattern(P,"no-repeat"),e.fillRect(0,0,c+d,h+A),this.restoreStyles(i,C)}render(e){}}dd.ignoreStyles=["mask","transform","clip-path"];var b5=()=>{};class x5 extends Pi{constructor(){super(...arguments),this.type="clipPath"}apply(e){var{document:i}=this,s=Reflect.getPrototypeOf(e),{beginPath:c,closePath:h}=e;s&&(s.beginPath=b5,s.closePath=b5),Reflect.apply(c,e,[]),this.children.forEach(d=>{if(!(typeof d.path>"u")){var A=typeof d.elementTransform<"u"?d.elementTransform():null;A||(A=Wl.fromElement(i,d)),A&&A.apply(e),d.path(e),s&&(s.closePath=h),A&&A.unapply(e)}}),Reflect.apply(h,e,[]),e.clip(),s&&(s.beginPath=c,s.closePath=h)}render(e){}}class pd extends Pi{constructor(){super(...arguments),this.type="filter"}apply(e,i){var{document:s,children:c}=this,h=i.getBoundingBox(e);if(h){var d=0,A=0;c.forEach(K=>{var tt=K.extraFilterDistance||0;d=Math.max(d,tt),A=Math.max(A,tt)});var v=Math.floor(h.width),C=Math.floor(h.height),I=v+2*d,T=C+2*A;if(!(I<1||T<1)){var P=Math.floor(h.x),U=Math.floor(h.y),V=this.removeStyles(i,pd.ignoreStyles),R=s.createCanvas(I,T),Z=R.getContext("2d");s.screen.setDefaults(Z),Z.translate(-P+d,-U+A),i.render(Z),c.forEach(K=>{typeof K.apply=="function"&&K.apply(Z,0,0,I,T)}),e.drawImage(R,0,0,I,T,P-d,U-A,I,T),this.restoreStyles(i,V)}}}render(e){}}pd.ignoreStyles=["filter","transform","clip-path"];class B5 extends Pi{constructor(e,i,s){super(e,i,s),this.type="feDropShadow",this.addStylesFromStyleDefinition()}apply(e,i,s,c,h){}}class C5 extends Pi{constructor(){super(...arguments),this.type="feMorphology"}apply(e,i,s,c,h){}}class F5 extends Pi{constructor(){super(...arguments),this.type="feComposite"}apply(e,i,s,c,h){}}class S5 extends Pi{constructor(e,i,s){super(e,i,s),this.type="feGaussianBlur",this.blurRadius=Math.floor(this.getAttribute("stdDeviation").getNumber()),this.extraFilterDistance=this.blurRadius}apply(e,i,s,c,h){var{document:d,blurRadius:A}=this,v=d.window?d.window.document.body:null,C=e.canvas;C.id=d.getUniqueId(),v&&(C.style.display="none",v.appendChild(C)),$R(C,i,s,c,h,A),v&&v.removeChild(C)}}class I5 extends Pi{constructor(){super(...arguments),this.type="title"}}class E5 extends Pi{constructor(){super(...arguments),this.type="desc"}}var f7={svg:Gu,rect:sy,circle:JB,ellipse:t5,line:e5,polyline:ay,polygon:r5,path:pi,pattern:i5,marker:n5,defs:s5,linearGradient:a5,radialGradient:o5,stop:A5,animate:$f,animateColor:l5,animateTransform:c5,font:u5,"font-face":h5,"missing-glyph":d5,glyph:ny,text:il,tspan:hd,tref:p5,a:f5,textPath:m5,image:y5,g:Kf,symbol:v5,style:Ay,use:_5,mask:dd,clipPath:x5,filter:pd,feDropShadow:B5,feMorphology:C5,feComposite:F5,feColorMatrix:ly,feGaussianBlur:S5,title:I5,desc:E5};function T5(n,e){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);e&&(s=s.filter(function(c){return Object.getOwnPropertyDescriptor(n,c).enumerable})),i.push.apply(i,s)}return i}function g7(n){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?T5(Object(i),!0).forEach(function(s){P1(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):T5(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}function m7(n,e){var i=document.createElement("canvas");return i.width=n,i.height=e,i}function y7(n){return cy.apply(this,arguments)}function cy(){return cy=tl(function*(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=document.createElement("img");return e&&(i.crossOrigin="Anonymous"),new Promise((s,c)=>{i.onload=()=>{s(i)},i.onerror=(h,d,A,v,C)=>{c(C)},i.src=n})}),cy.apply(this,arguments)}class sl{constructor(e){var{rootEmSize:i=12,emSize:s=12,createCanvas:c=sl.createCanvas,createImage:h=sl.createImage,anonymousCrossOrigin:d}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.canvg=e,this.definitions={},this.styles={},this.stylesSpecificity={},this.images=[],this.fonts=[],this.emSizeStack=[],this.uniqueId=0,this.screen=e.screen,this.rootEmSize=i,this.emSize=s,this.createCanvas=c,this.createImage=this.bindCreateImage(h,d),this.screen.wait(this.isImagesLoaded.bind(this)),this.screen.wait(this.isFontsLoaded.bind(this))}bindCreateImage(e,i){return typeof i=="boolean"?(s,c)=>e(s,typeof c=="boolean"?c:i):e}get window(){return this.screen.window}get fetch(){return this.screen.fetch}get ctx(){return this.screen.ctx}get emSize(){var{emSizeStack:e}=this;return e[e.length-1]}set emSize(e){var{emSizeStack:i}=this;i.push(e)}popEmSize(){var{emSizeStack:e}=this;e.pop()}getUniqueId(){return"canvg".concat(++this.uniqueId)}isImagesLoaded(){return this.images.every(e=>e.loaded)}isFontsLoaded(){return this.fonts.every(e=>e.loaded)}createDocumentElement(e){var i=this.createElement(e.documentElement);return i.root=!0,i.addStylesFromStyleDefinition(),this.documentElement=i,i}createElement(e){var i=e.nodeName.replace(/^[^:]+:/,""),s=sl.elementTypes[i];return typeof s<"u"?new s(this,e):new YB(this,e)}createTextNode(e){return new d7(this,e)}setViewBox(e){this.screen.setViewBox(g7({document:this},e))}}sl.createCanvas=m7,sl.createImage=y7,sl.elementTypes=f7;function U5(n,e){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);e&&(s=s.filter(function(c){return Object.getOwnPropertyDescriptor(n,c).enumerable})),i.push.apply(i,s)}return i}function Nc(n){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?U5(Object(i),!0).forEach(function(s){P1(n,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):U5(Object(i)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(i,s))})}return n}class Oc{constructor(e,i){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.parser=new jf(s),this.screen=new ud(e,s),this.options=s;var c=new sl(this,s),h=c.createDocumentElement(i);this.document=c,this.documentElement=h}static from(e,i){var s=arguments;return tl(function*(){var c=s.length>2&&s[2]!==void 0?s[2]:{},h=new jf(c),d=yield h.parse(i);return new Oc(e,d,c)})()}static fromString(e,i){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},c=new jf(s),h=c.parseFromString(i);return new Oc(e,h,s)}fork(e,i){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Oc.from(e,i,Nc(Nc({},this.options),s))}forkString(e,i){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Oc.fromString(e,i,Nc(Nc({},this.options),s))}ready(){return this.screen.ready()}isReady(){return this.screen.isReady()}render(){var e=arguments,i=this;return tl(function*(){var s=e.length>0&&e[0]!==void 0?e[0]:{};i.start(Nc({enableRedraw:!0,ignoreAnimation:!0,ignoreMouse:!0},s)),yield i.ready(),i.stop()})()}start(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{documentElement:i,screen:s,options:c}=this;s.start(i,Nc(Nc({enableRedraw:!0},c),e))}stop(){this.screen.stop()}resize(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.documentElement.resize(e,i,s)}}const v7=Object.freeze(Object.defineProperty({__proto__:null,AElement:f5,AnimateColorElement:l5,AnimateElement:$f,AnimateTransformElement:c5,BoundingBox:qa,CB1:X1,CB2:W1,CB3:Z1,CB4:Y1,Canvg:Oc,CircleElement:JB,ClipPathElement:x5,DefsElement:s5,DescElement:E5,Document:sl,Element:Pi,EllipseElement:t5,FeColorMatrixElement:ly,FeCompositeElement:F5,FeDropShadowElement:B5,FeGaussianBlurElement:S5,FeMorphologyElement:C5,FilterElement:pd,Font:_s,FontElement:u5,FontFaceElement:h5,GElement:Kf,GlyphElement:ny,GradientElement:oy,ImageElement:y5,LineElement:e5,LinearGradientElement:a5,MarkerElement:n5,MaskElement:dd,Matrix:ry,MissingGlyphElement:d5,Mouse:jB,PSEUDO_ZERO:Dc,Parser:jf,PathElement:pi,PathParser:Rr,PatternElement:i5,Point:tn,PolygonElement:r5,PolylineElement:ay,Property:vr,QB1:J1,QB2:ty,QB3:ey,RadialGradientElement:o5,RectElement:sy,RenderedElement:Zl,Rotate:qB,SVGElement:Gu,SVGFontLoader:w5,Scale:XB,Screen:ud,Skew:iy,SkewX:WB,SkewY:ZB,StopElement:A5,StyleElement:Ay,SymbolElement:v5,TRefElement:p5,TSpanElement:hd,TextElement:il,TextPathElement:m5,TitleElement:I5,Transform:Wl,Translate:GB,UnknownElement:YB,UseElement:_5,ViewPort:VB,compressSpaces:kc,default:Oc,getSelectorSpecificity:HB,normalizeAttributeName:RB,normalizeColor:zB,parseExternalUrl:$1,presets:WR,toNumbers:sa,trimLeft:NB,trimRight:OB,vectorMagnitude:G1,vectorsAngle:q1,vectorsRatio:Vf},Symbol.toStringTag,{value:"Module"}));Jn.DPI=fg,Jn.Format=ou,Jn.MapboxExportControl=F3,Jn.PageOrientation=gh,Jn.Size=Ll,Object.defineProperty(Jn,Symbol.toStringTag,{value:"Module"})});
//# sourceMappingURL=mapbox-gl-export.umd.js.map
